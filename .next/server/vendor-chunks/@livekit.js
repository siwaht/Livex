"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/@livekit";
exports.ids = ["vendor-chunks/@livekit"];
exports.modules = {

/***/ "(ssr)/./node_modules/@livekit/components-styles/dist/general/index.css":
/*!************************************************************************!*\
  !*** ./node_modules/@livekit/components-styles/dist/general/index.css ***!
  \************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (\"20f852316b2f\");\nif (false) {}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxpdmVraXQvY29tcG9uZW50cy1zdHlsZXMvZGlzdC9nZW5lcmFsL2luZGV4LmNzcyIsIm1hcHBpbmdzIjoiOzs7O0FBQUEsaUVBQWUsY0FBYztBQUM3QixJQUFJLEtBQVUsRUFBRSxFQUF1QiIsInNvdXJjZXMiOlsid2VicGFjazovL2xpdmVraXQtYWdlbmN5LWZyb250ZW5kLy4vbm9kZV9tb2R1bGVzL0BsaXZla2l0L2NvbXBvbmVudHMtc3R5bGVzL2Rpc3QvZ2VuZXJhbC9pbmRleC5jc3M/MTg5ZSJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCBcIjIwZjg1MjMxNmIyZlwiXG5pZiAobW9kdWxlLmhvdCkgeyBtb2R1bGUuaG90LmFjY2VwdCgpIH1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@livekit/components-styles/dist/general/index.css\n");

/***/ }),

/***/ "(ssr)/./node_modules/@livekit/components-react/dist/components-DuRBtGp8.mjs":
/*!*****************************************************************************!*\
  !*** ./node_modules/@livekit/components-react/dist/components-DuRBtGp8.mjs ***!
  \*****************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   $: () => (/* binding */ Pt),\n/* harmony export */   A: () => (/* binding */ Ma),\n/* harmony export */   B: () => (/* binding */ Kt),\n/* harmony export */   C: () => (/* binding */ sa),\n/* harmony export */   D: () => (/* binding */ ia),\n/* harmony export */   E: () => (/* binding */ pt),\n/* harmony export */   F: () => (/* binding */ Ea),\n/* harmony export */   G: () => (/* binding */ wa),\n/* harmony export */   H: () => (/* binding */ wt),\n/* harmony export */   I: () => (/* binding */ ie),\n/* harmony export */   J: () => (/* binding */ kt),\n/* harmony export */   K: () => (/* binding */ Rt),\n/* harmony export */   L: () => (/* binding */ Ra),\n/* harmony export */   M: () => (/* binding */ fa),\n/* harmony export */   N: () => (/* binding */ Mt),\n/* harmony export */   O: () => (/* binding */ yt),\n/* harmony export */   P: () => (/* binding */ Ot),\n/* harmony export */   Q: () => (/* binding */ bt),\n/* harmony export */   R: () => (/* binding */ ba),\n/* harmony export */   S: () => (/* binding */ oa),\n/* harmony export */   T: () => (/* binding */ va),\n/* harmony export */   U: () => (/* binding */ St),\n/* harmony export */   V: () => (/* binding */ Bt),\n/* harmony export */   W: () => (/* binding */ Ct),\n/* harmony export */   X: () => (/* binding */ It),\n/* harmony export */   Y: () => (/* binding */ Re),\n/* harmony export */   Z: () => (/* binding */ xt),\n/* harmony export */   _: () => (/* binding */ oe),\n/* harmony export */   a: () => (/* binding */ xa),\n/* harmony export */   b: () => (/* binding */ Nt),\n/* harmony export */   c: () => (/* binding */ ua),\n/* harmony export */   d: () => (/* binding */ da),\n/* harmony export */   e: () => (/* binding */ ma),\n/* harmony export */   f: () => (/* binding */ ga),\n/* harmony export */   g: () => (/* binding */ ka),\n/* harmony export */   h: () => (/* binding */ pa),\n/* harmony export */   i: () => (/* binding */ Ia),\n/* harmony export */   j: () => (/* binding */ Ce),\n/* harmony export */   k: () => (/* binding */ Ca),\n/* harmony export */   l: () => (/* binding */ Gt),\n/* harmony export */   m: () => (/* binding */ Pa),\n/* harmony export */   n: () => (/* binding */ ca),\n/* harmony export */   o: () => (/* binding */ la),\n/* harmony export */   p: () => (/* binding */ Tt),\n/* harmony export */   q: () => (/* binding */ ha),\n/* harmony export */   r: () => (/* binding */ ye),\n/* harmony export */   s: () => (/* binding */ ne),\n/* harmony export */   t: () => (/* binding */ K),\n/* harmony export */   u: () => (/* binding */ be),\n/* harmony export */   v: () => (/* binding */ ya),\n/* harmony export */   w: () => (/* binding */ Sa),\n/* harmony export */   x: () => (/* binding */ jt),\n/* harmony export */   y: () => (/* binding */ _t),\n/* harmony export */   z: () => (/* binding */ Ta)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var _hooks_yU_srrIO_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./hooks-yU-srrIO.mjs */ \"(ssr)/./node_modules/@livekit/components-react/dist/hooks-yU-srrIO.mjs\");\n/* harmony import */ var _room_Bb6uLxS5_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./room-Bb6uLxS5.mjs */ \"(ssr)/./node_modules/@livekit/components-react/dist/room-Bb6uLxS5.mjs\");\n/* harmony import */ var livekit_client__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! livekit-client */ \"(ssr)/./node_modules/livekit-client/dist/livekit-client.esm.mjs\");\n/* harmony import */ var _contexts_CsO1QZ3r_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./contexts-CsO1QZ3r.mjs */ \"(ssr)/./node_modules/@livekit/components-react/dist/contexts-CsO1QZ3r.mjs\");\n\n\n\n\n\n\nconst ca = /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.forwardRef(\n  function(n, a) {\n    const { buttonProps: c } = (0,_hooks_yU_srrIO_mjs__WEBPACK_IMPORTED_MODULE_2__.u)(n);\n    return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"button\", { ref: a, ...c }, n.children);\n  }\n), la = /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.forwardRef(\n  function({ room: n, ...a }, c) {\n    const r = (0,_hooks_yU_srrIO_mjs__WEBPACK_IMPORTED_MODULE_2__.a)(n);\n    return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", { ref: c, ...a }, r);\n  }\n), sa = /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.forwardRef(\n  function(n, a) {\n    const { mergedProps: c } = (0,_hooks_yU_srrIO_mjs__WEBPACK_IMPORTED_MODULE_2__.b)({ props: n });\n    return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"button\", { ref: a, ...c }, n.children);\n  }\n), ia = /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.forwardRef(\n  function(n, a) {\n    const { buttonProps: c } = (0,_hooks_yU_srrIO_mjs__WEBPACK_IMPORTED_MODULE_2__.c)(n);\n    return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"button\", { ref: a, ...c }, n.children);\n  }\n), pt = (t) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"svg\", { xmlns: \"http://www.w3.org/2000/svg\", width: 16, height: 16, fill: \"currentColor\", ...t }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"path\", { d: \"M1.354.646a.5.5 0 1 0-.708.708l14 14a.5.5 0 0 0 .708-.708L11 10.293V4.5A1.5 1.5 0 0 0 9.5 3H3.707zM0 4.5a1.5 1.5 0 0 1 .943-1.393l9.532 9.533c-.262.224-.603.36-.975.36h-8A1.5 1.5 0 0 1 0 11.5z\" }), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"path\", { d: \"m15.2 3.6-2.8 2.1a1 1 0 0 0-.4.8v3a1 1 0 0 0 .4.8l2.8 2.1a.5.5 0 0 0 .8-.4V4a.5.5 0 0 0-.8-.4z\" })), wt = (t) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"svg\", { xmlns: \"http://www.w3.org/2000/svg\", width: 16, height: 16, fill: \"currentColor\", ...t }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"path\", { d: \"M0 4.5A1.5 1.5 0 0 1 1.5 3h8A1.5 1.5 0 0 1 11 4.5v7A1.5 1.5 0 0 1 9.5 13h-8A1.5 1.5 0 0 1 0 11.5zM15.2 3.6l-2.8 2.1a1 1 0 0 0-.4.8v3a1 1 0 0 0 .4.8l2.8 2.1a.5.5 0 0 0 .8-.4V4a.5.5 0 0 0-.8-.4z\" })), oa = (t) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"svg\", { xmlns: \"http://www.w3.org/2000/svg\", width: 16, height: 16, viewBox: \"0 0 24 24\", ...t }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n  \"path\",\n  {\n    fill: \"#FFF\",\n    d: \"M4.99 3.99a1 1 0 0 0-.697 1.717L10.586 12l-6.293 6.293a1 1 0 1 0 1.414 1.414L12 13.414l6.293 6.293a1 1 0 1 0 1.414-1.414L13.414 12l6.293-6.293a1 1 0 0 0-.727-1.717 1 1 0 0 0-.687.303L12 10.586 5.707 4.293a1 1 0 0 0-.717-.303z\"\n  }\n)), ua = (t) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"svg\", { xmlns: \"http://www.w3.org/2000/svg\", width: 16, height: 18, fill: \"none\", ...t }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n  \"path\",\n  {\n    fill: \"currentColor\",\n    fillRule: \"evenodd\",\n    d: \"M0 2.75A2.75 2.75 0 0 1 2.75 0h10.5A2.75 2.75 0 0 1 16 2.75v13.594a.75.75 0 0 1-1.234.572l-3.691-3.12a1.25 1.25 0 0 0-.807-.296H2.75A2.75 2.75 0 0 1 0 10.75v-8ZM2.75 1.5c-.69 0-1.25.56-1.25 1.25v8c0 .69.56 1.25 1.25 1.25h7.518c.65 0 1.279.23 1.775.65l2.457 2.077V2.75c0-.69-.56-1.25-1.25-1.25H2.75Z\",\n    clipRule: \"evenodd\"\n  }\n), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n  \"path\",\n  {\n    fill: \"currentColor\",\n    fillRule: \"evenodd\",\n    d: \"M3 4.5a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5Zm0 2a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5Zm0 2a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 0 1h-5a.5.5 0 0 1-.5-.5Z\",\n    clipRule: \"evenodd\"\n  }\n)), ie = (t) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"svg\", { xmlns: \"http://www.w3.org/2000/svg\", width: 16, height: 16, fill: \"none\", ...t }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n  \"path\",\n  {\n    fill: \"currentcolor\",\n    fillRule: \"evenodd\",\n    d: \"M5.293 2.293a1 1 0 0 1 1.414 0l4.823 4.823a1.25 1.25 0 0 1 0 1.768l-4.823 4.823a1 1 0 0 1-1.414-1.414L9.586 8 5.293 3.707a1 1 0 0 1 0-1.414z\",\n    clipRule: \"evenodd\"\n  }\n)), kt = (t) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"svg\", { xmlns: \"http://www.w3.org/2000/svg\", width: 16, height: 16, fill: \"none\", ...t }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"g\", { stroke: \"currentColor\", strokeLinecap: \"round\", strokeLinejoin: \"round\", strokeWidth: 1.5 }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"path\", { d: \"M10 1.75h4.25m0 0V6m0-4.25L9 7M6 14.25H1.75m0 0V10m0 4.25L7 9\" }))), da = (t) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"svg\", { xmlns: \"http://www.w3.org/2000/svg\", width: 16, height: 16, fill: \"none\", ...t }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n  \"path\",\n  {\n    fill: \"currentcolor\",\n    fillRule: \"evenodd\",\n    d: \"M8.961.894C8.875-.298 7.125-.298 7.04.894c-.066.912-1.246 1.228-1.76.472-.67-.99-2.186-.115-1.664.96.399.824-.465 1.688-1.288 1.289-1.076-.522-1.95.994-.961 1.665.756.513.44 1.693-.472 1.759-1.192.086-1.192 1.836 0 1.922.912.066 1.228 1.246.472 1.76-.99.67-.115 2.186.96 1.664.824-.399 1.688.465 1.289 1.288-.522 1.076.994 1.95 1.665.961.513-.756 1.693-.44 1.759.472.086 1.192 1.836 1.192 1.922 0 .066-.912 1.246-1.228 1.76-.472.67.99 2.186.115 1.664-.96-.399-.824.465-1.688 1.288-1.289 1.076.522 1.95-.994.961-1.665-.756-.513-.44-1.693.472-1.759 1.192-.086 1.192-1.836 0-1.922-.912-.066-1.228-1.246-.472-1.76.99-.67.115-2.186-.96-1.664-.824.399-1.688-.465-1.289-1.288.522-1.076-.994-1.95-1.665-.961-.513.756-1.693.44-1.759-.472ZM8 13A5 5 0 1 0 8 3a5 5 0 0 0 0 10Z\",\n    clipRule: \"evenodd\"\n  }\n)), ma = (t) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"svg\", { xmlns: \"http://www.w3.org/2000/svg\", width: 16, height: 16, fill: \"none\", ...t }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n  \"path\",\n  {\n    fill: \"currentColor\",\n    fillRule: \"evenodd\",\n    d: \"M2 2.75A2.75 2.75 0 0 1 4.75 0h6.5A2.75 2.75 0 0 1 14 2.75v10.5A2.75 2.75 0 0 1 11.25 16h-6.5A2.75 2.75 0 0 1 2 13.25v-.5a.75.75 0 0 1 1.5 0v.5c0 .69.56 1.25 1.25 1.25h6.5c.69 0 1.25-.56 1.25-1.25V2.75c0-.69-.56-1.25-1.25-1.25h-6.5c-.69 0-1.25.56-1.25 1.25v.5a.75.75 0 0 1-1.5 0v-.5Z\",\n    clipRule: \"evenodd\"\n  }\n), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n  \"path\",\n  {\n    fill: \"currentColor\",\n    fillRule: \"evenodd\",\n    d: \"M8.78 7.47a.75.75 0 0 1 0 1.06l-2.25 2.25a.75.75 0 1 1-1.06-1.06l.97-.97H1.75a.75.75 0 0 1 0-1.5h4.69l-.97-.97a.75.75 0 0 1 1.06-1.06l2.25 2.25Z\",\n    clipRule: \"evenodd\"\n  }\n)), Rt = (t) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"svg\", { xmlns: \"http://www.w3.org/2000/svg\", width: 16, height: 16, fill: \"none\", ...t }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n  \"path\",\n  {\n    fill: \"currentcolor\",\n    fillRule: \"evenodd\",\n    d: \"M4 6.104V4a4 4 0 1 1 8 0v2.104c1.154.326 2 1.387 2 2.646v4.5A2.75 2.75 0 0 1 11.25 16h-6.5A2.75 2.75 0 0 1 2 13.25v-4.5c0-1.259.846-2.32 2-2.646ZM5.5 4a2.5 2.5 0 0 1 5 0v2h-5V4Z\",\n    clipRule: \"evenodd\"\n  }\n)), Mt = (t) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"svg\", { xmlns: \"http://www.w3.org/2000/svg\", width: 16, height: 16, fill: \"currentColor\", ...t }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"path\", { d: \"M12.227 11.52a5.477 5.477 0 0 0 1.246-2.97.5.5 0 0 0-.995-.1 4.478 4.478 0 0 1-.962 2.359l-1.07-1.07C10.794 9.247 11 8.647 11 8V3a3 3 0 0 0-6 0v1.293L1.354.646a.5.5 0 1 0-.708.708l14 14a.5.5 0 0 0 .708-.708zM8 12.5c.683 0 1.33-.152 1.911-.425l.743.743c-.649.359-1.378.59-2.154.66V15h2a.5.5 0 0 1 0 1h-5a.5.5 0 0 1 0-1h2v-1.522a5.502 5.502 0 0 1-4.973-4.929.5.5 0 0 1 .995-.098A4.5 4.5 0 0 0 8 12.5z\" }), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"path\", { d: \"M8.743 10.907 5 7.164V8a3 3 0 0 0 3.743 2.907z\" })), yt = (t) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"svg\", { xmlns: \"http://www.w3.org/2000/svg\", width: 16, height: 16, fill: \"currentColor\", ...t }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n  \"path\",\n  {\n    fillRule: \"evenodd\",\n    d: \"M2.975 8.002a.5.5 0 0 1 .547.449 4.5 4.5 0 0 0 8.956 0 .5.5 0 1 1 .995.098A5.502 5.502 0 0 1 8.5 13.478V15h2a.5.5 0 0 1 0 1h-5a.5.5 0 0 1 0-1h2v-1.522a5.502 5.502 0 0 1-4.973-4.929.5.5 0 0 1 .448-.547z\",\n    clipRule: \"evenodd\"\n  }\n), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"path\", { d: \"M5 3a3 3 0 1 1 6 0v5a3 3 0 0 1-6 0z\" })), bt = (t) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"svg\", { xmlns: \"http://www.w3.org/2000/svg\", width: 16, height: 16, fill: \"currentcolor\", ...t }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"path\", { d: \"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-6a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z\" }), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"path\", { d: \"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-6a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z\" })), St = (t) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"svg\", { xmlns: \"http://www.w3.org/2000/svg\", width: 16, height: 16, fill: \"currentcolor\", ...t }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"path\", { d: \"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z\" }), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"path\", { d: \"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z\" }), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"g\", { opacity: 0.25 }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"path\", { d: \"M12 .5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z\" }), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"path\", { d: \"M12 .5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z\" }))), Ct = (t) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"svg\", { xmlns: \"http://www.w3.org/2000/svg\", width: 16, height: 16, fill: \"currentcolor\", ...t }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"path\", { d: \"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z\" }), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"path\", { d: \"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z\" }), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"g\", { opacity: 0.25 }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"path\", { d: \"M6 6.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z\" }), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"path\", { d: \"M6 6.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-6a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z\" }), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"path\", { d: \"M12 .5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z\" }))), It = (t) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"svg\", { xmlns: \"http://www.w3.org/2000/svg\", width: 16, height: 16, fill: \"currentColor\", ...t }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"g\", { opacity: 0.25 }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"path\", { d: \"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-4Zm6-5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-9Zm6-6a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5V.5Z\" }), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"path\", { d: \"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-4Zm6-5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-9Zm6-6a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5V.5Z\" }))), Re = (t) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"svg\", { xmlns: \"http://www.w3.org/2000/svg\", width: 20, height: 16, fill: \"none\", ...t }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n  \"path\",\n  {\n    fill: \"currentColor\",\n    fillRule: \"evenodd\",\n    d: \"M0 2.75A2.75 2.75 0 0 1 2.75 0h14.5A2.75 2.75 0 0 1 20 2.75v10.5A2.75 2.75 0 0 1 17.25 16H2.75A2.75 2.75 0 0 1 0 13.25V2.75ZM2.75 1.5c-.69 0-1.25.56-1.25 1.25v10.5c0 .69.56 1.25 1.25 1.25h14.5c.69 0 1.25-.56 1.25-1.25V2.75c0-.69-.56-1.25-1.25-1.25H2.75Z\",\n    clipRule: \"evenodd\"\n  }\n), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n  \"path\",\n  {\n    fill: \"currentColor\",\n    fillRule: \"evenodd\",\n    d: \"M9.47 4.22a.75.75 0 0 1 1.06 0l2.25 2.25a.75.75 0 0 1-1.06 1.06l-.97-.97v4.69a.75.75 0 0 1-1.5 0V6.56l-.97.97a.75.75 0 0 1-1.06-1.06l2.25-2.25Z\",\n    clipRule: \"evenodd\"\n  }\n)), xt = (t) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"svg\", { xmlns: \"http://www.w3.org/2000/svg\", width: 20, height: 16, fill: \"none\", ...t }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"g\", { fill: \"currentColor\" }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"path\", { d: \"M7.28 4.22a.75.75 0 0 0-1.06 1.06L8.94 8l-2.72 2.72a.75.75 0 1 0 1.06 1.06L10 9.06l2.72 2.72a.75.75 0 1 0 1.06-1.06L11.06 8l2.72-2.72a.75.75 0 0 0-1.06-1.06L10 6.94z\" }), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n  \"path\",\n  {\n    fillRule: \"evenodd\",\n    d: \"M2.75 0A2.75 2.75 0 0 0 0 2.75v10.5A2.75 2.75 0 0 0 2.75 16h14.5A2.75 2.75 0 0 0 20 13.25V2.75A2.75 2.75 0 0 0 17.25 0zM1.5 2.75c0-.69.56-1.25 1.25-1.25h14.5c.69 0 1.25.56 1.25 1.25v10.5c0 .69-.56 1.25-1.25 1.25H2.75c-.69 0-1.25-.56-1.25-1.25z\",\n    clipRule: \"evenodd\"\n  }\n))), oe = (t) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"svg\", { xmlns: \"http://www.w3.org/2000/svg\", width: 16, height: 16, fill: \"none\", ...t }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n  \"path\",\n  {\n    fill: \"currentColor\",\n    fillRule: \"evenodd\",\n    d: \"M8 0a.75.75 0 0 1 .75.75v2.5a.75.75 0 0 1-1.5 0V.75A.75.75 0 0 1 8 0Z\",\n    clipRule: \"evenodd\"\n  }\n), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n  \"path\",\n  {\n    fill: \"currentColor\",\n    fillRule: \"evenodd\",\n    d: \"M8 12a.75.75 0 0 1 .75.75v2.5a.75.75 0 0 1-1.5 0v-2.5A.75.75 0 0 1 8 12Z\",\n    clipRule: \"evenodd\",\n    opacity: 0.7\n  }\n), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n  \"path\",\n  {\n    fill: \"currentColor\",\n    fillRule: \"evenodd\",\n    d: \"M12 1.072a.75.75 0 0 1 .274 1.024l-1.25 2.165a.75.75 0 0 1-1.299-.75l1.25-2.165A.75.75 0 0 1 12 1.072Z\",\n    clipRule: \"evenodd\"\n  }\n), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n  \"path\",\n  {\n    fill: \"currentColor\",\n    fillRule: \"evenodd\",\n    d: \"M6 11.464a.75.75 0 0 1 .274 1.025l-1.25 2.165a.75.75 0 0 1-1.299-.75l1.25-2.165A.75.75 0 0 1 6 11.464Z\",\n    clipRule: \"evenodd\",\n    opacity: 0.6\n  }\n), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n  \"path\",\n  {\n    fill: \"currentColor\",\n    fillRule: \"evenodd\",\n    d: \"M14.928 4a.75.75 0 0 1-.274 1.025l-2.165 1.25a.75.75 0 1 1-.75-1.3l2.165-1.25A.75.75 0 0 1 14.928 4Z\",\n    clipRule: \"evenodd\"\n  }\n), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n  \"path\",\n  {\n    fill: \"currentColor\",\n    fillRule: \"evenodd\",\n    d: \"M4.536 10a.75.75 0 0 1-.275 1.024l-2.165 1.25a.75.75 0 0 1-.75-1.298l2.165-1.25A.75.75 0 0 1 4.536 10Z\",\n    clipRule: \"evenodd\",\n    opacity: 0.5\n  }\n), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n  \"path\",\n  {\n    fill: \"currentColor\",\n    fillRule: \"evenodd\",\n    d: \"M16 8a.75.75 0 0 1-.75.75h-2.5a.75.75 0 0 1 0-1.5h2.5A.75.75 0 0 1 16 8Z\",\n    clipRule: \"evenodd\"\n  }\n), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n  \"path\",\n  {\n    fill: \"currentColor\",\n    fillRule: \"evenodd\",\n    d: \"M4 8a.75.75 0 0 1-.75.75H.75a.75.75 0 0 1 0-1.5h2.5A.75.75 0 0 1 4 8Z\",\n    clipRule: \"evenodd\",\n    opacity: 0.4\n  }\n), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n  \"path\",\n  {\n    fill: \"currentColor\",\n    fillRule: \"evenodd\",\n    d: \"M14.928 12a.75.75 0 0 1-1.024.274l-2.165-1.25a.75.75 0 0 1 .75-1.299l2.165 1.25A.75.75 0 0 1 14.928 12Z\",\n    clipRule: \"evenodd\",\n    opacity: 0.9\n  }\n), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n  \"path\",\n  {\n    fill: \"currentColor\",\n    fillRule: \"evenodd\",\n    d: \"M4.536 6a.75.75 0 0 1-1.025.275l-2.165-1.25a.75.75 0 1 1 .75-1.3l2.165 1.25A.75.75 0 0 1 4.536 6Z\",\n    clipRule: \"evenodd\",\n    opacity: 0.3\n  }\n), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n  \"path\",\n  {\n    fill: \"currentColor\",\n    fillRule: \"evenodd\",\n    d: \"M12 14.928a.75.75 0 0 1-1.024-.274l-1.25-2.165a.75.75 0 0 1 1.298-.75l1.25 2.165A.75.75 0 0 1 12 14.928Z\",\n    clipRule: \"evenodd\",\n    opacity: 0.8\n  }\n), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n  \"path\",\n  {\n    fill: \"currentColor\",\n    fillRule: \"evenodd\",\n    d: \"M6 4.536a.75.75 0 0 1-1.024-.275l-1.25-2.165a.75.75 0 1 1 1.299-.75l1.25 2.165A.75.75 0 0 1 6 4.536Z\",\n    clipRule: \"evenodd\",\n    opacity: 0.2\n  }\n)), Pt = (t) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"svg\", { xmlns: \"http://www.w3.org/2000/svg\", width: 16, height: 16, fill: \"none\", ...t }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"g\", { stroke: \"currentColor\", strokeLinecap: \"round\", strokeLinejoin: \"round\", strokeWidth: 1.5 }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"path\", { d: \"M13.25 7H9m0 0V2.75M9 7l5.25-5.25M2.75 9H7m0 0v4.25M7 9l-5.25 5.25\" }))), Tt = /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.forwardRef(\n  function({ trackRef: n, ...a }, c) {\n    const r = (0,_contexts_CsO1QZ3r_mjs__WEBPACK_IMPORTED_MODULE_3__.ae)(), { mergedProps: s, inFocus: o } = (0,_hooks_yU_srrIO_mjs__WEBPACK_IMPORTED_MODULE_2__.d)({\n      trackRef: n ?? r,\n      props: a\n    });\n    return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(_contexts_CsO1QZ3r_mjs__WEBPACK_IMPORTED_MODULE_3__.af.Consumer, null, (l) => l !== void 0 && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"button\", { ref: c, ...s }, a.children ? a.children : o ? /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(Pt, null) : /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(kt, null)));\n  }\n), fa = /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.forwardRef(\n  function({\n    kind: n,\n    initialSelection: a,\n    onActiveDeviceChange: c,\n    onDeviceListChange: r,\n    onDeviceSelectError: s,\n    exactMatch: o,\n    track: l,\n    requestPermissions: i,\n    onError: d,\n    ...u\n  }, v) {\n    const f = (0,_contexts_CsO1QZ3r_mjs__WEBPACK_IMPORTED_MODULE_3__.w)(), p = react__WEBPACK_IMPORTED_MODULE_0__.useRef(\"default\"), E = react__WEBPACK_IMPORTED_MODULE_0__.useCallback(\n      (w) => {\n        f && f.emit(livekit_client__WEBPACK_IMPORTED_MODULE_1__.RoomEvent.MediaDevicesError, w), d == null || d(w);\n      },\n      [f, d]\n    ), { devices: h, activeDeviceId: m, setActiveMediaDevice: y, className: C } = (0,_hooks_yU_srrIO_mjs__WEBPACK_IMPORTED_MODULE_2__.e)({\n      kind: n,\n      room: f,\n      track: l,\n      requestPermissions: i,\n      onError: E\n    });\n    react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n      a !== void 0 && y(a);\n    }, [y]), react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n      typeof r == \"function\" && r(h);\n    }, [r, h]), react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n      m !== p.current && (c == null || c(m)), p.current = m;\n    }, [m]);\n    const A = async (w) => {\n      try {\n        await y(w, { exact: o ?? !0 });\n      } catch (M) {\n        if (M instanceof Error)\n          s == null || s(M);\n        else\n          throw M;\n      }\n    }, N = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(\n      () => (0,_room_Bb6uLxS5_mjs__WEBPACK_IMPORTED_MODULE_4__.a)(u, { className: C }, { className: \"lk-list\" }),\n      [C, u]\n    ), g = !!h.find((w) => w.label.toLowerCase().startsWith(\"default\"));\n    function R(w, M, P) {\n      return w === M || !g && P === 0 && M === \"default\";\n    }\n    return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"ul\", { ref: v, ...N }, h.map((w, M) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n      \"li\",\n      {\n        key: w.deviceId,\n        id: w.deviceId,\n        \"data-lk-active\": R(w.deviceId, m, M),\n        \"aria-selected\": R(w.deviceId, m, M),\n        role: \"option\"\n      },\n      /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"button\", { className: \"lk-button\", onClick: () => A(w.deviceId) }, w.label)\n    )));\n  }\n), ha = /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.forwardRef(\n  function({ label: n = \"Allow Audio\", ...a }, c) {\n    const r = (0,_contexts_CsO1QZ3r_mjs__WEBPACK_IMPORTED_MODULE_3__.u)(a.room), { mergedProps: s } = (0,_hooks_yU_srrIO_mjs__WEBPACK_IMPORTED_MODULE_2__.f)({ room: r, props: a });\n    return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"button\", { ref: c, ...s }, n);\n  }\n), ga = /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.forwardRef(\n  function({ label: n, ...a }, c) {\n    const r = (0,_contexts_CsO1QZ3r_mjs__WEBPACK_IMPORTED_MODULE_3__.f)(), { mergedProps: s, canPlayAudio: o } = (0,_hooks_yU_srrIO_mjs__WEBPACK_IMPORTED_MODULE_2__.f)({ room: r, props: a }), { mergedProps: l, canPlayVideo: i } = (0,_hooks_yU_srrIO_mjs__WEBPACK_IMPORTED_MODULE_2__.g)({ room: r, props: s }), { style: d, ...u } = l;\n    return d.display = o && i ? \"none\" : \"block\", /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"button\", { ref: c, style: d, ...u }, n ?? `Start ${o ? \"Video\" : \"Audio\"}`);\n  }\n);\nfunction Me(t, n) {\n  switch (t) {\n    case livekit_client__WEBPACK_IMPORTED_MODULE_1__.Track.Source.Microphone:\n      return n ? /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(yt, null) : /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(Mt, null);\n    case livekit_client__WEBPACK_IMPORTED_MODULE_1__.Track.Source.Camera:\n      return n ? /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(wt, null) : /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(pt, null);\n    case livekit_client__WEBPACK_IMPORTED_MODULE_1__.Track.Source.ScreenShare:\n      return n ? /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(xt, null) : /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(Re, null);\n    default:\n      return;\n  }\n}\nfunction At(t) {\n  switch (t) {\n    case livekit_client__WEBPACK_IMPORTED_MODULE_1__.ConnectionQuality.Excellent:\n      return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(bt, null);\n    case livekit_client__WEBPACK_IMPORTED_MODULE_1__.ConnectionQuality.Good:\n      return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(St, null);\n    case livekit_client__WEBPACK_IMPORTED_MODULE_1__.ConnectionQuality.Poor:\n      return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(Ct, null);\n    default:\n      return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(It, null);\n  }\n}\nconst va = /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.forwardRef(function({ showIcon: n, ...a }, c) {\n  const { buttonProps: r, enabled: s } = (0,_hooks_yU_srrIO_mjs__WEBPACK_IMPORTED_MODULE_2__.h)(a), [o, l] = react__WEBPACK_IMPORTED_MODULE_0__.useState(!1);\n  return react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    l(!0);\n  }, []), o && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"button\", { ref: c, ...r }, (n ?? !0) && Me(a.source, s), a.children);\n}), ye = /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.forwardRef(function(n, a) {\n  const { className: c, quality: r } = (0,_hooks_yU_srrIO_mjs__WEBPACK_IMPORTED_MODULE_2__.i)(n), s = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(() => ({ ...(0,_room_Bb6uLxS5_mjs__WEBPACK_IMPORTED_MODULE_4__.a)(n, { className: c }), \"data-lk-quality\": r }), [r, n, c]);\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", { ref: a, ...s }, n.children ?? At(r));\n}), K = /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.forwardRef(\n  function({ participant: n, ...a }, c) {\n    const r = (0,_contexts_CsO1QZ3r_mjs__WEBPACK_IMPORTED_MODULE_3__.c)(n), { className: s, infoObserver: o } = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(() => (0,_contexts_CsO1QZ3r_mjs__WEBPACK_IMPORTED_MODULE_3__.ag)(r), [r]), { identity: l, name: i } = (0,_hooks_yU_srrIO_mjs__WEBPACK_IMPORTED_MODULE_2__.j)(o, {\n      name: r.name,\n      identity: r.identity,\n      metadata: r.metadata\n    }), d = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(() => (0,_room_Bb6uLxS5_mjs__WEBPACK_IMPORTED_MODULE_4__.a)(a, { className: s, \"data-lk-participant-name\": i }), [a, s, i]);\n    return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"span\", { ref: c, ...d }, i !== \"\" ? i : l, a.children);\n  }\n), be = /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.forwardRef(\n  function({ trackRef: n, show: a = \"always\", ...c }, r) {\n    const { className: s, isMuted: o } = (0,_hooks_yU_srrIO_mjs__WEBPACK_IMPORTED_MODULE_2__.k)(n), l = a === \"always\" || a === \"muted\" && o || a === \"unmuted\" && !o, i = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(\n      () => (0,_room_Bb6uLxS5_mjs__WEBPACK_IMPORTED_MODULE_4__.a)(c, {\n        className: s\n      }),\n      [s, c]\n    );\n    return l ? /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", { ref: r, ...i, \"data-lk-muted\": o }, c.children ?? Me(n.source, !o)) : null;\n  }\n), Nt = (t) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n  \"svg\",\n  {\n    width: 320,\n    height: 320,\n    viewBox: \"0 0 320 320\",\n    preserveAspectRatio: \"xMidYMid meet\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    ...t\n  },\n  /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n    \"path\",\n    {\n      d: \"M160 180C204.182 180 240 144.183 240 100C240 55.8172 204.182 20 160 20C115.817 20 79.9997 55.8172 79.9997 100C79.9997 144.183 115.817 180 160 180Z\",\n      fill: \"white\",\n      fillOpacity: 0.25\n    }\n  ),\n  /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n    \"path\",\n    {\n      d: \"M97.6542 194.614C103.267 191.818 109.841 192.481 115.519 195.141C129.025 201.466 144.1 205 159.999 205C175.899 205 190.973 201.466 204.48 195.141C210.158 192.481 216.732 191.818 222.345 194.614C262.703 214.719 291.985 253.736 298.591 300.062C300.15 310.997 291.045 320 280 320H39.9997C28.954 320 19.8495 310.997 21.4087 300.062C28.014 253.736 57.2966 214.72 97.6542 194.614Z\",\n      fill: \"white\",\n      fillOpacity: 0.25\n    }\n  )\n);\nfunction Se(t, n = {}) {\n  const [a, c] = react__WEBPACK_IMPORTED_MODULE_0__.useState((0,_contexts_CsO1QZ3r_mjs__WEBPACK_IMPORTED_MODULE_3__.X)(t)), [r, s] = react__WEBPACK_IMPORTED_MODULE_0__.useState(a == null ? void 0 : a.isMuted), [o, l] = react__WEBPACK_IMPORTED_MODULE_0__.useState(a == null ? void 0 : a.isSubscribed), [i, d] = react__WEBPACK_IMPORTED_MODULE_0__.useState(a == null ? void 0 : a.track), [u, v] = react__WEBPACK_IMPORTED_MODULE_0__.useState(\"landscape\"), f = react__WEBPACK_IMPORTED_MODULE_0__.useRef(), { className: p, trackObserver: E } = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(() => (0,_contexts_CsO1QZ3r_mjs__WEBPACK_IMPORTED_MODULE_3__.Y)(t), [\n    t.participant.sid ?? t.participant.identity,\n    t.source,\n    (0,_contexts_CsO1QZ3r_mjs__WEBPACK_IMPORTED_MODULE_3__.a1)(t) && t.publication.trackSid\n  ]);\n  return react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    const h = E.subscribe((m) => {\n      _contexts_CsO1QZ3r_mjs__WEBPACK_IMPORTED_MODULE_3__.l.debug(\"update track\", m), c(m), s(m == null ? void 0 : m.isMuted), l(m == null ? void 0 : m.isSubscribed), d(m == null ? void 0 : m.track);\n    });\n    return () => h == null ? void 0 : h.unsubscribe();\n  }, [E]), react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    var h, m;\n    return i && (f.current && i.detach(f.current), (h = n.element) != null && h.current && !(t.participant.isLocal && (i == null ? void 0 : i.kind) === \"audio\") && i.attach(n.element.current)), f.current = (m = n.element) == null ? void 0 : m.current, () => {\n      f.current && (i == null || i.detach(f.current));\n    };\n  }, [i, n.element]), react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    var h, m;\n    if (typeof ((h = a == null ? void 0 : a.dimensions) == null ? void 0 : h.width) == \"number\" && typeof ((m = a == null ? void 0 : a.dimensions) == null ? void 0 : m.height) == \"number\") {\n      const y = a.dimensions.width > a.dimensions.height ? \"landscape\" : \"portrait\";\n      v(y);\n    }\n  }, [a]), {\n    publication: a,\n    isMuted: r,\n    isSubscribed: o,\n    track: i,\n    elementProps: (0,_room_Bb6uLxS5_mjs__WEBPACK_IMPORTED_MODULE_4__.a)(n.props, {\n      className: p,\n      \"data-lk-local-participant\": t.participant.isLocal,\n      \"data-lk-source\": a == null ? void 0 : a.source,\n      ...(a == null ? void 0 : a.kind) === \"video\" && { \"data-lk-orientation\": u }\n    })\n  };\n}\nvar Y, ue;\nfunction Lt() {\n  if (ue) return Y;\n  ue = 1;\n  var t = \"Expected a function\", n = NaN, a = \"[object Symbol]\", c = /^\\s+|\\s+$/g, r = /^[-+]0x[0-9a-f]+$/i, s = /^0b[01]+$/i, o = /^0o[0-7]+$/i, l = parseInt, i = typeof _contexts_CsO1QZ3r_mjs__WEBPACK_IMPORTED_MODULE_3__.ah == \"object\" && _contexts_CsO1QZ3r_mjs__WEBPACK_IMPORTED_MODULE_3__.ah && _contexts_CsO1QZ3r_mjs__WEBPACK_IMPORTED_MODULE_3__.ah.Object === Object && _contexts_CsO1QZ3r_mjs__WEBPACK_IMPORTED_MODULE_3__.ah, d = typeof self == \"object\" && self && self.Object === Object && self, u = i || d || Function(\"return this\")(), v = Object.prototype, f = v.toString, p = Math.max, E = Math.min, h = function() {\n    return u.Date.now();\n  };\n  function m(g, R, w) {\n    var M, P, O, L, b, T, F = 0, re = !1, Z = !1, D = !0;\n    if (typeof g != \"function\")\n      throw new TypeError(t);\n    R = N(R) || 0, y(w) && (re = !!w.leading, Z = \"maxWait\" in w, O = Z ? p(N(w.maxWait) || 0, R) : O, D = \"trailing\" in w ? !!w.trailing : D);\n    function U(k) {\n      var x = M, H = P;\n      return M = P = void 0, F = k, L = g.apply(H, x), L;\n    }\n    function xe(k) {\n      return F = k, b = setTimeout(W, R), re ? U(k) : L;\n    }\n    function Pe(k) {\n      var x = k - T, H = k - F, se = R - x;\n      return Z ? E(se, O - H) : se;\n    }\n    function ce(k) {\n      var x = k - T, H = k - F;\n      return T === void 0 || x >= R || x < 0 || Z && H >= O;\n    }\n    function W() {\n      var k = h();\n      if (ce(k))\n        return le(k);\n      b = setTimeout(W, Pe(k));\n    }\n    function le(k) {\n      return b = void 0, D && M ? U(k) : (M = P = void 0, L);\n    }\n    function Te() {\n      b !== void 0 && clearTimeout(b), F = 0, M = T = P = b = void 0;\n    }\n    function Ae() {\n      return b === void 0 ? L : le(h());\n    }\n    function G() {\n      var k = h(), x = ce(k);\n      if (M = arguments, P = this, T = k, x) {\n        if (b === void 0)\n          return xe(T);\n        if (Z)\n          return b = setTimeout(W, R), U(T);\n      }\n      return b === void 0 && (b = setTimeout(W, R)), L;\n    }\n    return G.cancel = Te, G.flush = Ae, G;\n  }\n  function y(g) {\n    var R = typeof g;\n    return !!g && (R == \"object\" || R == \"function\");\n  }\n  function C(g) {\n    return !!g && typeof g == \"object\";\n  }\n  function A(g) {\n    return typeof g == \"symbol\" || C(g) && f.call(g) == a;\n  }\n  function N(g) {\n    if (typeof g == \"number\")\n      return g;\n    if (A(g))\n      return n;\n    if (y(g)) {\n      var R = typeof g.valueOf == \"function\" ? g.valueOf() : g;\n      g = y(R) ? R + \"\" : R;\n    }\n    if (typeof g != \"string\")\n      return g === 0 ? g : +g;\n    g = g.replace(c, \"\");\n    var w = s.test(g);\n    return w || o.test(g) ? l(g.slice(2), w ? 2 : 8) : r.test(g) ? n : +g;\n  }\n  return Y = m, Y;\n}\nvar zt = Lt();\nconst de = /* @__PURE__ */ (0,_contexts_CsO1QZ3r_mjs__WEBPACK_IMPORTED_MODULE_3__.ai)(zt);\nfunction Vt(t) {\n  const n = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(t);\n  n.current = t, (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(\n    () => () => {\n      n.current();\n    },\n    []\n  );\n}\nfunction Ft(t, n = 500, a) {\n  const c = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)();\n  Vt(() => {\n    c.current && c.current.cancel();\n  });\n  const r = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(() => {\n    const s = de(t, n, a), o = (...l) => s(...l);\n    return o.cancel = () => {\n      s.cancel();\n    }, o.isPending = () => !!c.current, o.flush = () => s.flush(), o;\n  }, [t, n, a]);\n  return (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    c.current = de(t, n, a);\n  }, [t, n, a]), r;\n}\nfunction Zt(t, n, a) {\n  const c = ((d, u) => d === u), r = t instanceof Function ? t() : t, [s, o] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(r), l = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(r), i = Ft(\n    o,\n    n,\n    a\n  );\n  return c(l.current, r) || (i(r), l.current = r), [s, i];\n}\nfunction Ht({\n  threshold: t = 0,\n  root: n = null,\n  rootMargin: a = \"0%\",\n  freezeOnceVisible: c = !1,\n  initialIsIntersecting: r = !1,\n  onChange: s\n} = {}) {\n  var o;\n  const [l, i] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null), [d, u] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(() => ({\n    isIntersecting: r,\n    entry: void 0\n  })), v = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)();\n  v.current = s;\n  const f = ((o = d.entry) == null ? void 0 : o.isIntersecting) && c;\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    if (!l || !(\"IntersectionObserver\" in window) || f)\n      return;\n    const h = new IntersectionObserver(\n      (m) => {\n        const y = Array.isArray(h.thresholds) ? h.thresholds : [h.thresholds];\n        m.forEach((C) => {\n          const A = C.isIntersecting && y.some((N) => C.intersectionRatio >= N);\n          u({ isIntersecting: A, entry: C }), v.current && v.current(A, C);\n        });\n      },\n      { threshold: t, root: n, rootMargin: a }\n    );\n    return h.observe(l), () => {\n      h.disconnect();\n    };\n  }, [\n    l,\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    JSON.stringify(t),\n    n,\n    a,\n    f,\n    c\n  ]);\n  const p = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    var h;\n    !l && ((h = d.entry) != null && h.target) && !c && !f && p.current !== d.entry.target && (p.current = d.entry.target, u({ isIntersecting: r, entry: void 0 }));\n  }, [l, d.entry, c, f, r]);\n  const E = [\n    i,\n    !!d.isIntersecting,\n    d.entry\n  ];\n  return E.ref = E[0], E.isIntersecting = E[1], E.entry = E[2], E;\n}\nconst Bt = /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.forwardRef(\n  function({\n    onTrackClick: n,\n    onClick: a,\n    onSubscriptionStatusChanged: c,\n    trackRef: r,\n    manageSubscription: s,\n    ...o\n  }, l) {\n    const i = (0,_contexts_CsO1QZ3r_mjs__WEBPACK_IMPORTED_MODULE_3__.i)(r), d = react__WEBPACK_IMPORTED_MODULE_0__.useRef(null);\n    react__WEBPACK_IMPORTED_MODULE_0__.useImperativeHandle(l, () => d.current);\n    const u = Ht({ root: d.current }), [v] = Zt(u, 3e3);\n    react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n      s && i.publication instanceof livekit_client__WEBPACK_IMPORTED_MODULE_1__.RemoteTrackPublication && (v == null ? void 0 : v.isIntersecting) === !1 && (u == null ? void 0 : u.isIntersecting) === !1 && i.publication.setSubscribed(!1);\n    }, [v, i, s]), react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n      s && i.publication instanceof livekit_client__WEBPACK_IMPORTED_MODULE_1__.RemoteTrackPublication && (u == null ? void 0 : u.isIntersecting) === !0 && i.publication.setSubscribed(!0);\n    }, [u, i, s]);\n    const {\n      elementProps: f,\n      publication: p,\n      isSubscribed: E\n    } = Se(i, {\n      element: d,\n      props: o\n    });\n    react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n      c == null || c(!!E);\n    }, [E, c]);\n    const h = (m) => {\n      a == null || a(m), n == null || n({ participant: i == null ? void 0 : i.participant, track: p });\n    };\n    return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"video\", { ref: d, ...f, muted: !0, onClick: h });\n  }\n), ne = /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.forwardRef(\n  function({ trackRef: n, onSubscriptionStatusChanged: a, volume: c, ...r }, s) {\n    const o = (0,_contexts_CsO1QZ3r_mjs__WEBPACK_IMPORTED_MODULE_3__.i)(n), l = react__WEBPACK_IMPORTED_MODULE_0__.useRef(null);\n    react__WEBPACK_IMPORTED_MODULE_0__.useImperativeHandle(s, () => l.current);\n    const {\n      elementProps: i,\n      isSubscribed: d,\n      track: u,\n      publication: v\n    } = Se(o, {\n      element: l,\n      props: r\n    });\n    return react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n      a == null || a(!!d);\n    }, [d, a]), react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n      u === void 0 || c === void 0 || (u instanceof livekit_client__WEBPACK_IMPORTED_MODULE_1__.RemoteAudioTrack ? u.setVolume(c) : _contexts_CsO1QZ3r_mjs__WEBPACK_IMPORTED_MODULE_3__.l.warn(\"Volume can only be set on remote audio tracks.\"));\n    }, [c, u]), react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n      v === void 0 || r.muted === void 0 || (v instanceof livekit_client__WEBPACK_IMPORTED_MODULE_1__.RemoteTrackPublication ? v.setEnabled(!r.muted) : _contexts_CsO1QZ3r_mjs__WEBPACK_IMPORTED_MODULE_3__.l.warn(\"Can only call setEnabled on remote track publications.\"));\n    }, [r.muted, v, u]), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"audio\", { ref: l, ...i });\n  }\n);\nfunction jt(t) {\n  const n = !!(0,_contexts_CsO1QZ3r_mjs__WEBPACK_IMPORTED_MODULE_3__.B)();\n  return t.participant && !n ? /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(_contexts_CsO1QZ3r_mjs__WEBPACK_IMPORTED_MODULE_3__.aj.Provider, { value: t.participant }, t.children) : /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, null, t.children);\n}\nfunction _t(t) {\n  const n = !!(0,_contexts_CsO1QZ3r_mjs__WEBPACK_IMPORTED_MODULE_3__.ae)();\n  return t.trackRef && !n ? /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(_contexts_CsO1QZ3r_mjs__WEBPACK_IMPORTED_MODULE_3__.ak.Provider, { value: t.trackRef }, t.children) : /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, null, t.children);\n}\nconst Ot = /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.forwardRef(\n  function({\n    trackRef: n,\n    children: a,\n    onParticipantClick: c,\n    disableSpeakingIndicator: r,\n    ...s\n  }, o) {\n    var p, E;\n    const l = (0,_contexts_CsO1QZ3r_mjs__WEBPACK_IMPORTED_MODULE_3__.i)(n), { elementProps: i } = (0,_hooks_yU_srrIO_mjs__WEBPACK_IMPORTED_MODULE_2__.l)({\n      htmlProps: s,\n      disableSpeakingIndicator: r,\n      onParticipantClick: c,\n      trackRef: l\n    }), d = (0,_hooks_yU_srrIO_mjs__WEBPACK_IMPORTED_MODULE_2__.m)(l.participant), u = (0,_contexts_CsO1QZ3r_mjs__WEBPACK_IMPORTED_MODULE_3__.j)(), v = (p = (0,_contexts_CsO1QZ3r_mjs__WEBPACK_IMPORTED_MODULE_3__.al)()) == null ? void 0 : p.autoSubscription, f = react__WEBPACK_IMPORTED_MODULE_0__.useCallback(\n      (h) => {\n        l.source && !h && u && u.pin.dispatch && (0,_contexts_CsO1QZ3r_mjs__WEBPACK_IMPORTED_MODULE_3__.m)(l, u.pin.state) && u.pin.dispatch({ msg: \"clear_pin\" });\n      },\n      [l, u]\n    );\n    return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", { ref: o, style: { position: \"relative\" }, ...i }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(_t, { trackRef: l }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(jt, { participant: l.participant }, a ?? /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, null, (0,_contexts_CsO1QZ3r_mjs__WEBPACK_IMPORTED_MODULE_3__.a1)(l) && (((E = l.publication) == null ? void 0 : E.kind) === \"video\" || l.source === livekit_client__WEBPACK_IMPORTED_MODULE_1__.Track.Source.Camera || l.source === livekit_client__WEBPACK_IMPORTED_MODULE_1__.Track.Source.ScreenShare) ? /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n      Bt,\n      {\n        trackRef: l,\n        onSubscriptionStatusChanged: f,\n        manageSubscription: v\n      }\n    ) : (0,_contexts_CsO1QZ3r_mjs__WEBPACK_IMPORTED_MODULE_3__.a1)(l) && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n      ne,\n      {\n        trackRef: l,\n        onSubscriptionStatusChanged: f\n      }\n    ), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", { className: \"lk-participant-placeholder\" }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(Nt, null)), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", { className: \"lk-participant-metadata\" }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", { className: \"lk-participant-metadata-item\" }, l.source === livekit_client__WEBPACK_IMPORTED_MODULE_1__.Track.Source.Camera ? /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, null, d && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(Rt, { style: { marginRight: \"0.25rem\" } }), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n      be,\n      {\n        trackRef: {\n          participant: l.participant,\n          source: livekit_client__WEBPACK_IMPORTED_MODULE_1__.Track.Source.Microphone\n        },\n        show: \"muted\"\n      }\n    ), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(K, null)) : /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, null, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(Re, { style: { marginRight: \"0.25rem\" } }), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(K, null, \"'s screen\"))), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(ye, { className: \"lk-participant-metadata-item\" }))), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(Tt, { trackRef: l }))));\n  }\n);\nfunction Ea(t) {\n  const n = (0,_room_Bb6uLxS5_mjs__WEBPACK_IMPORTED_MODULE_4__.a)(t, { className: \"lk-focus-layout\" });\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", { ...n }, t.children);\n}\nfunction pa({ trackRef: t, ...n }) {\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(Ot, { trackRef: t, ...n });\n}\nfunction Ce({ tracks: t, ...n }) {\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, null, t.map((a) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n    _contexts_CsO1QZ3r_mjs__WEBPACK_IMPORTED_MODULE_3__.ak.Provider,\n    {\n      value: a,\n      key: (0,_contexts_CsO1QZ3r_mjs__WEBPACK_IMPORTED_MODULE_3__.p)(a)\n    },\n    (0,_room_Bb6uLxS5_mjs__WEBPACK_IMPORTED_MODULE_4__.c)(n.children)\n  )));\n}\nfunction Wt({\n  totalPageCount: t,\n  nextPage: n,\n  prevPage: a,\n  currentPage: c,\n  pagesContainer: r\n}) {\n  const [s, o] = react__WEBPACK_IMPORTED_MODULE_0__.useState(!1);\n  return react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    let l;\n    return r && (l = (0,_contexts_CsO1QZ3r_mjs__WEBPACK_IMPORTED_MODULE_3__.am)(r.current, 2e3).subscribe(\n      o\n    )), () => {\n      l && l.unsubscribe();\n    };\n  }, [r]), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", { className: \"lk-pagination-control\", \"data-lk-user-interaction\": s }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"button\", { className: \"lk-button\", onClick: a }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(ie, null)), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"span\", { className: \"lk-pagination-count\" }, `${c} of ${t}`), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"button\", { className: \"lk-button\", onClick: n }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(ie, null)));\n}\nconst qt = /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.forwardRef(\n  function({ totalPageCount: n, currentPage: a }, c) {\n    const r = new Array(n).fill(\"\").map((s, o) => o + 1 === a ? /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"span\", { \"data-lk-active\": !0, key: o }) : /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"span\", { key: o }));\n    return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", { ref: c, className: \"lk-pagination-indicator\" }, r);\n  }\n);\nfunction wa({ tracks: t, ...n }) {\n  const a = react__WEBPACK_IMPORTED_MODULE_0__.createRef(), c = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(\n    () => (0,_room_Bb6uLxS5_mjs__WEBPACK_IMPORTED_MODULE_4__.a)(n, { className: \"lk-grid-layout\" }),\n    [n]\n  ), { layout: r } = (0,_hooks_yU_srrIO_mjs__WEBPACK_IMPORTED_MODULE_2__.n)(a, t.length), s = (0,_hooks_yU_srrIO_mjs__WEBPACK_IMPORTED_MODULE_2__.o)(r.maxTiles, t);\n  return (0,_hooks_yU_srrIO_mjs__WEBPACK_IMPORTED_MODULE_2__.p)(a, {\n    onLeftSwipe: s.nextPage,\n    onRightSwipe: s.prevPage\n  }), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", { ref: a, \"data-lk-pagination\": s.totalPageCount > 1, ...c }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(Ce, { tracks: s.tracks }, n.children), t.length > r.maxTiles && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, null, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n    qt,\n    {\n      totalPageCount: s.totalPageCount,\n      currentPage: s.currentPage\n    }\n  ), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(Wt, { pagesContainer: a, ...s })));\n}\nconst $t = 130, Dt = 140, me = 1, Ie = 16 / 10, Ut = (1 - Ie) * -1;\nfunction ka({ tracks: t, orientation: n, ...a }) {\n  const c = react__WEBPACK_IMPORTED_MODULE_0__.useRef(null), [r, s] = react__WEBPACK_IMPORTED_MODULE_0__.useState(0), { width: o, height: l } = (0,_hooks_yU_srrIO_mjs__WEBPACK_IMPORTED_MODULE_2__.q)(c), i = n || (l >= o ? \"vertical\" : \"horizontal\"), d = i === \"vertical\" ? Math.max(o * Ut, $t) : Math.max(l * Ie, Dt), u = (0,_contexts_CsO1QZ3r_mjs__WEBPACK_IMPORTED_MODULE_3__.an)(), v = Math.max(i === \"vertical\" ? (l - u) / d : (o - u) / d, me);\n  let f = Math.round(v);\n  Math.abs(v - r) < 0.5 ? f = Math.round(r) : r !== v && s(v);\n  const p = (0,_hooks_yU_srrIO_mjs__WEBPACK_IMPORTED_MODULE_2__.r)(t, f);\n  return react__WEBPACK_IMPORTED_MODULE_0__.useLayoutEffect(() => {\n    c.current && (c.current.dataset.lkOrientation = i, c.current.style.setProperty(\"--lk-max-visible-tiles\", f.toString()));\n  }, [f, i]), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"aside\", { key: i, className: \"lk-carousel\", ref: c, ...a }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(Ce, { tracks: p }, a.children));\n}\nfunction Ra({\n  value: t,\n  onPinChange: n,\n  onWidgetChange: a,\n  children: c\n}) {\n  const r = (0,_contexts_CsO1QZ3r_mjs__WEBPACK_IMPORTED_MODULE_3__.ao)(t);\n  return react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    _contexts_CsO1QZ3r_mjs__WEBPACK_IMPORTED_MODULE_3__.l.debug(\"PinState Updated\", { state: r.pin.state }), n && r.pin.state && n(r.pin.state);\n  }, [r.pin.state, n]), react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    _contexts_CsO1QZ3r_mjs__WEBPACK_IMPORTED_MODULE_3__.l.debug(\"Widget Updated\", { widgetState: r.widget.state }), a && r.widget.state && a(r.widget.state);\n  }, [a, r.widget.state]), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(_contexts_CsO1QZ3r_mjs__WEBPACK_IMPORTED_MODULE_3__.af.Provider, { value: r }, c);\n}\nconst Ma = /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.forwardRef(\n  function({ trackRef: n, ...a }, c) {\n    const u = (0,_contexts_CsO1QZ3r_mjs__WEBPACK_IMPORTED_MODULE_3__.i)(n), v = (0,_hooks_yU_srrIO_mjs__WEBPACK_IMPORTED_MODULE_2__.s)(u, { bands: 7, loPass: 300 });\n    return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n      \"svg\",\n      {\n        ref: c,\n        width: \"100%\",\n        height: \"100%\",\n        viewBox: \"0 0 200 90\",\n        ...a,\n        className: \"lk-audio-visualizer\"\n      },\n      /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"rect\", { x: \"0\", y: \"0\", width: \"100%\", height: \"100%\" }),\n      /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n        \"g\",\n        {\n          style: {\n            transform: `translate(${130 / 2}px, 0)`\n          }\n        },\n        v.map((f, p) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n          \"rect\",\n          {\n            key: p,\n            x: p * 10,\n            y: 90 / 2 - f * 50 / 2,\n            width: 6,\n            height: f * 50\n          }\n        ))\n      )\n    );\n  }\n);\nfunction ya({ participants: t, ...n }) {\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, null, t.map((a) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(_contexts_CsO1QZ3r_mjs__WEBPACK_IMPORTED_MODULE_3__.aj.Provider, { value: a, key: a.identity }, (0,_room_Bb6uLxS5_mjs__WEBPACK_IMPORTED_MODULE_4__.c)(n.children))));\n}\nfunction ba({ room: t, volume: n, muted: a }) {\n  const c = (0,_hooks_yU_srrIO_mjs__WEBPACK_IMPORTED_MODULE_2__.t)(\n    [livekit_client__WEBPACK_IMPORTED_MODULE_1__.Track.Source.Microphone, livekit_client__WEBPACK_IMPORTED_MODULE_1__.Track.Source.ScreenShareAudio, livekit_client__WEBPACK_IMPORTED_MODULE_1__.Track.Source.Unknown],\n    {\n      updateOnlyOn: [],\n      onlySubscribed: !0,\n      room: t\n    }\n  ).filter((r) => !r.participant.isLocal && r.publication.kind === livekit_client__WEBPACK_IMPORTED_MODULE_1__.Track.Kind.Audio);\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", { style: { display: \"none\" } }, c.map((r) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n    ne,\n    {\n      key: (0,_contexts_CsO1QZ3r_mjs__WEBPACK_IMPORTED_MODULE_3__.p)(r),\n      trackRef: r,\n      volume: n,\n      muted: a\n    }\n  )));\n}\nconst Sa = /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.forwardRef(function({ childrenPosition: n = \"before\", children: a, ...c }, r) {\n  const { name: s } = (0,_hooks_yU_srrIO_mjs__WEBPACK_IMPORTED_MODULE_2__.v)();\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"span\", { ref: r, ...c }, n === \"before\" && a, s, n === \"after\" && a);\n});\nfunction Gt(t) {\n  const n = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(() => (0,_room_Bb6uLxS5_mjs__WEBPACK_IMPORTED_MODULE_4__.a)(t, { className: \"lk-toast\" }), [t]);\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", { ...n }, t.children);\n}\nconst Qt = (t) => {\n  const n = [];\n  for (let a = 0; a < t; a++)\n    n.push([a, t - 1 - a]);\n  return n;\n}, fe = (t) => [[Math.floor(t / 2)], [-1]], Xt = (t, n, a) => {\n  const [c, r] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(0), [s, o] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)([[]]);\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    if (t === \"thinking\")\n      o(fe(n));\n    else if (t === \"connecting\" || t === \"initializing\") {\n      const i = [...Qt(n)];\n      o(i);\n    } else o(t === \"listening\" ? fe(n) : t === void 0 || t === \"speaking\" ? [new Array(n).fill(0).map((i, d) => d)] : [[]]);\n    r(0);\n  }, [t, n]);\n  const l = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);\n  return (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    let i = performance.now();\n    const d = (u) => {\n      u - i >= a && (r((f) => f + 1), i = u), l.current = requestAnimationFrame(d);\n    };\n    return l.current = requestAnimationFrame(d), () => {\n      l.current !== null && cancelAnimationFrame(l.current);\n    };\n  }, [a, n, t, s.length]), s[c % s.length];\n}, Yt = /* @__PURE__ */ new Map([\n  [\"connecting\", 2e3],\n  [\"initializing\", 2e3],\n  [\"listening\", 500],\n  [\"thinking\", 150]\n]), Jt = (t, n) => {\n  if (t === void 0)\n    return 1e3;\n  let a = Yt.get(t);\n  if (a)\n    switch (t) {\n      case \"connecting\":\n        a /= n;\n        break;\n    }\n  return a;\n}, Kt = /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.forwardRef(\n  function({ state: n, options: a, barCount: c = 15, trackRef: r, track: s, children: o, ...l }, i) {\n    const d = (0,_room_Bb6uLxS5_mjs__WEBPACK_IMPORTED_MODULE_4__.a)(l, { className: \"lk-audio-bar-visualizer\" });\n    let u = (0,_contexts_CsO1QZ3r_mjs__WEBPACK_IMPORTED_MODULE_3__.ae)();\n    (r || s) && (u = r || s);\n    const v = (0,_hooks_yU_srrIO_mjs__WEBPACK_IMPORTED_MODULE_2__.s)(u, {\n      bands: c,\n      loPass: 100,\n      hiPass: 200\n    }), f = (a == null ? void 0 : a.minHeight) ?? 20, p = (a == null ? void 0 : a.maxHeight) ?? 100, E = Xt(\n      n,\n      c,\n      Jt(n, c) ?? 100\n    );\n    return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", { ref: i, ...d, \"data-lk-va-state\": n }, v.map(\n      (h, m) => o ? (0,_room_Bb6uLxS5_mjs__WEBPACK_IMPORTED_MODULE_4__.c)(o, {\n        \"data-lk-highlighted\": E.includes(m),\n        \"data-lk-bar-index\": m,\n        className: \"lk-audio-bar\",\n        style: { height: `${Math.min(p, Math.max(f, h * 100 + 5))}%` }\n      }) : /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n        \"span\",\n        {\n          key: m,\n          \"data-lk-highlighted\": E.includes(m),\n          \"data-lk-bar-index\": m,\n          className: `lk-audio-bar ${E.includes(m) && \"lk-highlighted\"}`,\n          style: {\n            // TODO transform animations would be more performant, however the border-radius gets distorted when using scale transforms. a 9-slice approach (or 3 in this case) could work\n            // transform: `scale(1, ${Math.min(maxHeight, Math.max(minHeight, volume))}`,\n            height: `${Math.min(p, Math.max(f, h * 100 + 5))}%`\n          }\n        }\n      )\n    ));\n  }\n), Ca = /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.forwardRef(\n  function({\n    children: n,\n    disableSpeakingIndicator: a,\n    onParticipantClick: c,\n    trackRef: r,\n    ...s\n  }, o) {\n    const l = (0,_contexts_CsO1QZ3r_mjs__WEBPACK_IMPORTED_MODULE_3__.i)(r), { elementProps: i } = (0,_hooks_yU_srrIO_mjs__WEBPACK_IMPORTED_MODULE_2__.l)({\n      trackRef: l,\n      htmlProps: s,\n      disableSpeakingIndicator: a,\n      onParticipantClick: c\n    });\n    return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", { ref: o, style: { position: \"relative\", minHeight: \"160px\" }, ...i }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(_contexts_CsO1QZ3r_mjs__WEBPACK_IMPORTED_MODULE_3__.ak.Provider, { value: l }, n ?? /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, null, (0,_contexts_CsO1QZ3r_mjs__WEBPACK_IMPORTED_MODULE_3__.a1)(l) && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(ne, { trackRef: l }), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(Kt, { barCount: 7, options: { minHeight: 8 } }), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", { className: \"lk-participant-metadata\" }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", { className: \"lk-participant-metadata-item\" }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(be, { trackRef: l }), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(K, null)), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(ye, { className: \"lk-participant-metadata-item\" })))));\n  }\n);\nfunction Ia(t) {\n  const [n, a] = react__WEBPACK_IMPORTED_MODULE_0__.useState(void 0), c = (0,_hooks_yU_srrIO_mjs__WEBPACK_IMPORTED_MODULE_2__.a)(t.room);\n  return react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    switch (c) {\n      case livekit_client__WEBPACK_IMPORTED_MODULE_1__.ConnectionState.Reconnecting:\n        a(\n          /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, null, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(oe, { className: \"lk-spinner\" }), \" Reconnecting\")\n        );\n        break;\n      case livekit_client__WEBPACK_IMPORTED_MODULE_1__.ConnectionState.Connecting:\n        a(\n          /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, null, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(oe, { className: \"lk-spinner\" }), \" Connecting\")\n        );\n        break;\n      case livekit_client__WEBPACK_IMPORTED_MODULE_1__.ConnectionState.Disconnected:\n        a(/* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, null, \"Disconnected\"));\n        break;\n      default:\n        a(void 0);\n        break;\n    }\n  }, [c]), n ? /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(Gt, { className: \"lk-toast-connection-state\" }, n) : /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, null);\n}\nconst xa = /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.forwardRef(\n  function({ entry: n, hideName: a = !1, hideTimestamp: c = !1, messageFormatter: r, ...s }, o) {\n    var f, p, E, h;\n    const l = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(() => r ? r(n.message) : n.message, [n.message, r]), i = !!n.editTimestamp, d = new Date(n.timestamp), u = typeof navigator < \"u\" ? navigator.language : \"en-US\", v = ((f = n.from) == null ? void 0 : f.name) ?? ((p = n.from) == null ? void 0 : p.identity);\n    return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n      \"li\",\n      {\n        ref: o,\n        className: \"lk-chat-entry\",\n        title: d.toLocaleTimeString(u, { timeStyle: \"full\" }),\n        \"data-lk-message-origin\": (E = n.from) != null && E.isLocal ? \"local\" : \"remote\",\n        ...s\n      },\n      (!c || !a || i) && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"span\", { className: \"lk-meta-data\" }, !a && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"strong\", { className: \"lk-participant-name\" }, v), (!c || i) && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"span\", { className: \"lk-timestamp\" }, i && \"edited \", d.toLocaleTimeString(u, { timeStyle: \"short\" }))),\n      /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"span\", { className: \"lk-message-body\" }, l),\n      /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"span\", { className: \"lk-message-attachements\" }, (h = n.attachedFiles) == null ? void 0 : h.map(\n        (m) => m.type.startsWith(\"image/\") && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n          \"img\",\n          {\n            style: { maxWidth: \"300px\", maxHeight: \"300px\" },\n            key: m.name,\n            src: URL.createObjectURL(m),\n            alt: m.name\n          }\n        )\n      ))\n    );\n  }\n);\nfunction Pa(t) {\n  return (0,_contexts_CsO1QZ3r_mjs__WEBPACK_IMPORTED_MODULE_3__.ap)(t, (0,_contexts_CsO1QZ3r_mjs__WEBPACK_IMPORTED_MODULE_3__.aq)()).map((n, a) => {\n    if (typeof n == \"string\")\n      return n;\n    {\n      const c = n.content.toString(), r = n.type === \"url\" ? /^http(s?):\\/\\//.test(c) ? c : `https://${c}` : `mailto:${c}`;\n      return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"a\", { className: \"lk-chat-link\", key: a, href: r, target: \"_blank\", rel: \"noreferrer\" }, c);\n    }\n  });\n}\nfunction Ta(t) {\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(_contexts_CsO1QZ3r_mjs__WEBPACK_IMPORTED_MODULE_3__.ar.Provider, { value: t.session }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(_contexts_CsO1QZ3r_mjs__WEBPACK_IMPORTED_MODULE_3__.R.Provider, { value: t.session.room }, t.children));\n}\n\n//# sourceMappingURL=components-DuRBtGp8.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxpdmVraXQvY29tcG9uZW50cy1yZWFjdC9kaXN0L2NvbXBvbmVudHMtRHVSQnRHcDgubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQTJCO0FBQ3VEO0FBQzBKO0FBQ3RMO0FBQzBHO0FBQ2dKO0FBQ2hULDJCQUEyQiw2Q0FBWTtBQUN2QztBQUNBLFlBQVksaUJBQWlCLEVBQUUsc0RBQUU7QUFDakMsMkJBQTJCLGdEQUFlLGFBQWEsY0FBYztBQUNyRTtBQUNBLHdCQUF3Qiw2Q0FBWTtBQUNwQyxhQUFhLGVBQWU7QUFDNUIsY0FBYyxzREFBRTtBQUNoQiwyQkFBMkIsZ0RBQWUsVUFBVSxjQUFjO0FBQ2xFO0FBQ0Esd0JBQXdCLDZDQUFZO0FBQ3BDO0FBQ0EsWUFBWSxpQkFBaUIsRUFBRSxzREFBRSxHQUFHLFVBQVU7QUFDOUMsMkJBQTJCLGdEQUFlLGFBQWEsY0FBYztBQUNyRTtBQUNBLHdCQUF3Qiw2Q0FBWTtBQUNwQztBQUNBLFlBQVksaUJBQWlCLEVBQUUsc0RBQUU7QUFDakMsMkJBQTJCLGdEQUFlLGFBQWEsY0FBYztBQUNyRTtBQUNBLCtCQUErQixnREFBZSxVQUFVLHdGQUF3RixrQkFBa0IsZ0RBQWUsV0FBVyx1TUFBdU0sbUJBQW1CLGdEQUFlLFdBQVcscUdBQXFHLGdDQUFnQyxnREFBZSxVQUFVLHdGQUF3RixrQkFBa0IsZ0RBQWUsV0FBVyx1TUFBdU0sZ0NBQWdDLGdEQUFlLFVBQVUsd0ZBQXdGLGtCQUFrQixnREFBZTtBQUMza0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdDQUFnQyxnREFBZSxVQUFVLGdGQUFnRixrQkFBa0IsZ0RBQWU7QUFDMUs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIsZ0RBQWU7QUFDbEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxn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QUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVMsMERBQUUsSUFBSSwwREFBRTtBQUNqQjtBQUNBO0FBQ0E7QUFDQSx1R0FBdUcsRUFBRSxjQUFjLEVBQUU7QUFDekgsNkJBQTZCLGdEQUFlLFFBQVEsaUZBQWlGO0FBQ3JJO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQSx5QkFBeUIsZ0RBQWUsQ0FBQyxzREFBRSxhQUFhLGtCQUFrQixrQkFBa0IsZ0RBQWUsQ0FBQyxxREFBRSxhQUFhLHVCQUF1QjtBQUNsSjtBQXdERTtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbGl2ZWtpdC1hZ2VuY3ktZnJvbnRlbmQvLi9ub2RlX21vZHVsZXMvQGxpdmVraXQvY29tcG9uZW50cy1yZWFjdC9kaXN0L2NvbXBvbmVudHMtRHVSQnRHcDgubWpzPzRkNTYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0ICogYXMgZSBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCB7IHVzZVN0YXRlIGFzIEIsIHVzZVJlZiBhcyB6LCB1c2VFZmZlY3QgYXMgViwgdXNlTWVtbyBhcyBOZSB9IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHsgdSBhcyBMZSwgYSBhcyBoZSwgYiBhcyB6ZSwgYyBhcyBWZSwgZCBhcyBGZSwgZSBhcyBaZSwgZiBhcyBnZSwgZyBhcyBIZSwgaCBhcyBCZSwgaSBhcyBqZSwgaiBhcyBfZSwgayBhcyBPZSwgbCBhcyB2ZSwgbSBhcyBXZSwgbiBhcyBxZSwgbyBhcyAkZSwgcCBhcyBEZSwgcSBhcyBVZSwgciBhcyBHZSwgcyBhcyBFZSwgdCBhcyBRZSwgdiBhcyBYZSB9IGZyb20gXCIuL2hvb2tzLXlVLXNycklPLm1qc1wiO1xuaW1wb3J0IHsgYSBhcyBJLCBjIGFzIGVlIH0gZnJvbSBcIi4vcm9vbS1CYjZ1THhTNS5tanNcIjtcbmltcG9ydCB7IFJvb21FdmVudCBhcyBZZSwgVHJhY2sgYXMgUywgQ29ubmVjdGlvblF1YWxpdHkgYXMgUSwgUmVtb3RlVHJhY2tQdWJsaWNhdGlvbiBhcyBKLCBSZW1vdGVBdWRpb1RyYWNrIGFzIEplLCBDb25uZWN0aW9uU3RhdGUgYXMgWCB9IGZyb20gXCJsaXZla2l0LWNsaWVudFwiO1xuaW1wb3J0IHsgYWUgYXMgdGUsIGFmIGFzIHBlLCB3IGFzIEtlLCB1IGFzIGV0LCBmIGFzIHR0LCBjIGFzIGF0LCBhZyBhcyBudCwgWCBhcyBydCwgWSBhcyBjdCwgYTEgYXMgJCwgbCBhcyBqLCBhaCBhcyBxLCBhaSBhcyBsdCwgaSBhcyBfLCBCIGFzIHN0LCBhaiBhcyB3ZSwgYWsgYXMgYWUsIGogYXMgaXQsIGFsIGFzIG90LCBtIGFzIHV0LCBwIGFzIGtlLCBhbSBhcyBkdCwgYW4gYXMgbXQsIGFvIGFzIGZ0LCBhcCBhcyBodCwgYXEgYXMgZ3QsIGFyIGFzIHZ0LCBSIGFzIEV0IH0gZnJvbSBcIi4vY29udGV4dHMtQ3NPMVFaM3IubWpzXCI7XG5jb25zdCBjYSA9IC8qIEBfX1BVUkVfXyAqLyBlLmZvcndhcmRSZWYoXG4gIGZ1bmN0aW9uKG4sIGEpIHtcbiAgICBjb25zdCB7IGJ1dHRvblByb3BzOiBjIH0gPSBMZShuKTtcbiAgICByZXR1cm4gLyogQF9fUFVSRV9fICovIGUuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiLCB7IHJlZjogYSwgLi4uYyB9LCBuLmNoaWxkcmVuKTtcbiAgfVxuKSwgbGEgPSAvKiBAX19QVVJFX18gKi8gZS5mb3J3YXJkUmVmKFxuICBmdW5jdGlvbih7IHJvb206IG4sIC4uLmEgfSwgYykge1xuICAgIGNvbnN0IHIgPSBoZShuKTtcbiAgICByZXR1cm4gLyogQF9fUFVSRV9fICovIGUuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7IHJlZjogYywgLi4uYSB9LCByKTtcbiAgfVxuKSwgc2EgPSAvKiBAX19QVVJFX18gKi8gZS5mb3J3YXJkUmVmKFxuICBmdW5jdGlvbihuLCBhKSB7XG4gICAgY29uc3QgeyBtZXJnZWRQcm9wczogYyB9ID0gemUoeyBwcm9wczogbiB9KTtcbiAgICByZXR1cm4gLyogQF9fUFVSRV9fICovIGUuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiLCB7IHJlZjogYSwgLi4uYyB9LCBuLmNoaWxkcmVuKTtcbiAgfVxuKSwgaWEgPSAvKiBAX19QVVJFX18gKi8gZS5mb3J3YXJkUmVmKFxuICBmdW5jdGlvbihuLCBhKSB7XG4gICAgY29uc3QgeyBidXR0b25Qcm9wczogYyB9ID0gVmUobik7XG4gICAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBlLmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIiwgeyByZWY6IGEsIC4uLmMgfSwgbi5jaGlsZHJlbik7XG4gIH1cbiksIHB0ID0gKHQpID0+IC8qIEBfX1BVUkVfXyAqLyBlLmNyZWF0ZUVsZW1lbnQoXCJzdmdcIiwgeyB4bWxuczogXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiLCB3aWR0aDogMTYsIGhlaWdodDogMTYsIGZpbGw6IFwiY3VycmVudENvbG9yXCIsIC4uLnQgfSwgLyogQF9fUFVSRV9fICovIGUuY3JlYXRlRWxlbWVudChcInBhdGhcIiwgeyBkOiBcIk0xLjM1NC42NDZhLjUuNSAwIDEgMC0uNzA4LjcwOGwxNCAxNGEuNS41IDAgMCAwIC43MDgtLjcwOEwxMSAxMC4yOTNWNC41QTEuNSAxLjUgMCAwIDAgOS41IDNIMy43MDd6TTAgNC41YTEuNSAxLjUgMCAwIDEgLjk0My0xLjM5M2w5LjUzMiA5LjUzM2MtLjI2Mi4yMjQtLjYwMy4zNi0uOTc1LjM2aC04QTEuNSAxLjUgMCAwIDEgMCAxMS41elwiIH0pLCAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KFwicGF0aFwiLCB7IGQ6IFwibTE1LjIgMy42LTIuOCAyLjFhMSAxIDAgMCAwLS40Ljh2M2ExIDEgMCAwIDAgLjQuOGwyLjggMi4xYS41LjUgMCAwIDAgLjgtLjRWNGEuNS41IDAgMCAwLS44LS40elwiIH0pKSwgd3QgPSAodCkgPT4gLyogQF9fUFVSRV9fICovIGUuY3JlYXRlRWxlbWVudChcInN2Z1wiLCB7IHhtbG5zOiBcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIsIHdpZHRoOiAxNiwgaGVpZ2h0OiAxNiwgZmlsbDogXCJjdXJyZW50Q29sb3JcIiwgLi4udCB9LCAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KFwicGF0aFwiLCB7IGQ6IFwiTTAgNC41QTEuNSAxLjUgMCAwIDEgMS41IDNoOEExLjUgMS41IDAgMCAxIDExIDQuNXY3QTEuNSAxLjUgMCAwIDEgOS41IDEzaC04QTEuNSAxLjUgMCAwIDEgMCAxMS41ek0xNS4yIDMuNmwtMi44IDIuMWExIDEgMCAwIDAtLjQuOHYzYTEgMSAwIDAgMCAuNC44bDIuOCAyLjFhLjUuNSAwIDAgMCAuOC0uNFY0YS41LjUgMCAwIDAtLjgtLjR6XCIgfSkpLCBvYSA9ICh0KSA9PiAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KFwic3ZnXCIsIHsgeG1sbnM6IFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiwgd2lkdGg6IDE2LCBoZWlnaHQ6IDE2LCB2aWV3Qm94OiBcIjAgMCAyNCAyNFwiLCAuLi50IH0sIC8qIEBfX1BVUkVfXyAqLyBlLmNyZWF0ZUVsZW1lbnQoXG4gIFwicGF0aFwiLFxuICB7XG4gICAgZmlsbDogXCIjRkZGXCIsXG4gICAgZDogXCJNNC45OSAzLjk5YTEgMSAwIDAgMC0uNjk3IDEuNzE3TDEwLjU4NiAxMmwtNi4yOTMgNi4yOTNhMSAxIDAgMSAwIDEuNDE0IDEuNDE0TDEyIDEzLjQxNGw2LjI5MyA2LjI5M2ExIDEgMCAxIDAgMS40MTQtMS40MTRMMTMuNDE0IDEybDYuMjkzLTYuMjkzYTEgMSAwIDAgMC0uNzI3LTEuNzE3IDEgMSAwIDAgMC0uNjg3LjMwM0wxMiAxMC41ODYgNS43MDcgNC4yOTNhMSAxIDAgMCAwLS43MTctLjMwM3pcIlxuICB9XG4pKSwgdWEgPSAodCkgPT4gLyogQF9fUFVSRV9fICovIGUuY3JlYXRlRWxlbWVudChcInN2Z1wiLCB7IHhtbG5zOiBcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIsIHdpZHRoOiAxNiwgaGVpZ2h0OiAxOCwgZmlsbDogXCJub25lXCIsIC4uLnQgfSwgLyogQF9fUFVSRV9fICovIGUuY3JlYXRlRWxlbWVudChcbiAgXCJwYXRoXCIsXG4gIHtcbiAgICBmaWxsOiBcImN1cnJlbnRDb2xvclwiLFxuICAgIGZpbGxSdWxlOiBcImV2ZW5vZGRcIixcbiAgICBkOiBcIk0wIDIuNzVBMi43NSAyLjc1IDAgMCAxIDIuNzUgMGgxMC41QTIuNzUgMi43NSAwIDAgMSAxNiAyLjc1djEzLjU5NGEuNzUuNzUgMCAwIDEtMS4yMzQuNTcybC0zLjY5MS0zLjEyYTEuMjUgMS4yNSAwIDAgMC0uODA3LS4yOTZIMi43NUEyLjc1IDIuNzUgMCAwIDEgMCAxMC43NXYtOFpNMi43NSAxLjVjLS42OSAwLTEuMjUuNTYtMS4yNSAxLjI1djhjMCAuNjkuNTYgMS4yNSAxLjI1IDEuMjVoNy41MThjLjY1IDAgMS4yNzkuMjMgMS43NzUuNjVsMi40NTcgMi4wNzdWMi43NWMwLS42OS0uNTYtMS4yNS0xLjI1LTEuMjVIMi43NVpcIixcbiAgICBjbGlwUnVsZTogXCJldmVub2RkXCJcbiAgfVxuKSwgLyogQF9fUFVSRV9fICovIGUuY3JlYXRlRWxlbWVudChcbiAgXCJwYXRoXCIsXG4gIHtcbiAgICBmaWxsOiBcImN1cnJlbnRDb2xvclwiLFxuICAgIGZpbGxSdWxlOiBcImV2ZW5vZGRcIixcbiAgICBkOiBcIk0zIDQuNWEuNS41IDAgMCAxIC41LS41aDlhLjUuNSAwIDAgMSAwIDFoLTlhLjUuNSAwIDAgMS0uNS0uNVptMCAyYS41LjUgMCAwIDEgLjUtLjVoOWEuNS41IDAgMCAxIDAgMWgtOWEuNS41IDAgMCAxLS41LS41Wm0wIDJhLjUuNSAwIDAgMSAuNS0uNWg1YS41LjUgMCAwIDEgMCAxaC01YS41LjUgMCAwIDEtLjUtLjVaXCIsXG4gICAgY2xpcFJ1bGU6IFwiZXZlbm9kZFwiXG4gIH1cbikpLCBpZSA9ICh0KSA9PiAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KFwic3ZnXCIsIHsgeG1sbnM6IFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiwgd2lkdGg6IDE2LCBoZWlnaHQ6IDE2LCBmaWxsOiBcIm5vbmVcIiwgLi4udCB9LCAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KFxuICBcInBhdGhcIixcbiAge1xuICAgIGZpbGw6IFwiY3VycmVudGNvbG9yXCIsXG4gICAgZmlsbFJ1bGU6IFwiZXZlbm9kZFwiLFxuICAgIGQ6IFwiTTUuMjkzIDIuMjkzYTEgMSAwIDAgMSAxLjQxNCAwbDQuODIzIDQuODIzYTEuMjUgMS4yNSAwIDAgMSAwIDEuNzY4bC00LjgyMyA0LjgyM2ExIDEgMCAwIDEtMS40MTQtMS40MTRMOS41ODYgOCA1LjI5MyAzLjcwN2ExIDEgMCAwIDEgMC0xLjQxNHpcIixcbiAgICBjbGlwUnVsZTogXCJldmVub2RkXCJcbiAgfVxuKSksIGt0ID0gKHQpID0+IC8qIEBfX1BVUkVfXyAqLyBlLmNyZWF0ZUVsZW1lbnQoXCJzdmdcIiwgeyB4bWxuczogXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiLCB3aWR0aDogMTYsIGhlaWdodDogMTYsIGZpbGw6IFwibm9uZVwiLCAuLi50IH0sIC8qIEBfX1BVUkVfXyAqLyBlLmNyZWF0ZUVsZW1lbnQoXCJnXCIsIHsgc3Ryb2tlOiBcImN1cnJlbnRDb2xvclwiLCBzdHJva2VMaW5lY2FwOiBcInJvdW5kXCIsIHN0cm9rZUxpbmVqb2luOiBcInJvdW5kXCIsIHN0cm9rZVdpZHRoOiAxLjUgfSwgLyogQF9fUFVSRV9fICovIGUuY3JlYXRlRWxlbWVudChcInBhdGhcIiwgeyBkOiBcIk0xMCAxLjc1aDQuMjVtMCAwVjZtMC00LjI1TDkgN002IDE0LjI1SDEuNzVtMCAwVjEwbTAgNC4yNUw3IDlcIiB9KSkpLCBkYSA9ICh0KSA9PiAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KFwic3ZnXCIsIHsgeG1sbnM6IFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiwgd2lkdGg6IDE2LCBoZWlnaHQ6IDE2LCBmaWxsOiBcIm5vbmVcIiwgLi4udCB9LCAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KFxuICBcInBhdGhcIixcbiAge1xuICAgIGZpbGw6IFwiY3VycmVudGNvbG9yXCIsXG4gICAgZmlsbFJ1bGU6IFwiZXZlbm9kZFwiLFxuICAgIGQ6IFwiTTguOTYxLjg5NEM4Ljg3NS0uMjk4IDcuMTI1LS4yOTggNy4wNC44OTRjLS4wNjYuOTEyLTEuMjQ2IDEuMjI4LTEuNzYuNDcyLS42Ny0uOTktMi4xODYtLjExNS0xLjY2NC45Ni4zOTkuODI0LS40NjUgMS42ODgtMS4yODggMS4yODktMS4wNzYtLjUyMi0xLjk1Ljk5NC0uOTYxIDEuNjY1Ljc1Ni41MTMuNDQgMS42OTMtLjQ3MiAxLjc1OS0xLjE5Mi4wODYtMS4xOTIgMS44MzYgMCAxLjkyMi45MTIuMDY2IDEuMjI4IDEuMjQ2LjQ3MiAxLjc2LS45OS42Ny0uMTE1IDIuMTg2Ljk2IDEuNjY0LjgyNC0uMzk5IDEuNjg4LjQ2NSAxLjI4OSAxLjI4OC0uNTIyIDEuMDc2Ljk5NCAxLjk1IDEuNjY1Ljk2MS41MTMtLjc1NiAxLjY5My0uNDQgMS43NTkuNDcyLjA4NiAxLjE5MiAxLjgzNiAxLjE5MiAxLjkyMiAwIC4wNjYtLjkxMiAxLjI0Ni0xLjIyOCAxLjc2LS40NzIuNjcuOTkgMi4xODYuMTE1IDEuNjY0LS45Ni0uMzk5LS44MjQuNDY1LTEuNjg4IDEuMjg4LTEuMjg5IDEuMDc2LjUyMiAxLjk1LS45OTQuOTYxLTEuNjY1LS43NTYtLjUxMy0uNDQtMS42OTMuNDcyLTEuNzU5IDEuMTkyLS4wODYgMS4xOTItMS44MzYgMC0xLjkyMi0uOTEyLS4wNjYtMS4yMjgtMS4yNDYtLjQ3Mi0xLjc2Ljk5LS42Ny4xMTUtMi4xODYtLjk2LTEuNjY0LS44MjQuMzk5LTEuNjg4LS40NjUtMS4yODktMS4yODguNTIyLTEuMDc2LS45OTQtMS45NS0xLjY2NS0uOTYxLS41MTMuNzU2LTEuNjkzLjQ0LTEuNzU5LS40NzJaTTggMTNBNSA1IDAgMSAwIDggM2E1IDUgMCAwIDAgMCAxMFpcIixcbiAgICBjbGlwUnVsZTogXCJldmVub2RkXCJcbiAgfVxuKSksIG1hID0gKHQpID0+IC8qIEBfX1BVUkVfXyAqLyBlLmNyZWF0ZUVsZW1lbnQoXCJzdmdcIiwgeyB4bWxuczogXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiLCB3aWR0aDogMTYsIGhlaWdodDogMTYsIGZpbGw6IFwibm9uZVwiLCAuLi50IH0sIC8qIEBfX1BVUkVfXyAqLyBlLmNyZWF0ZUVsZW1lbnQoXG4gIFwicGF0aFwiLFxuICB7XG4gICAgZmlsbDogXCJjdXJyZW50Q29sb3JcIixcbiAgICBmaWxsUnVsZTogXCJldmVub2RkXCIsXG4gICAgZDogXCJNMiAyLjc1QTIuNzUgMi43NSAwIDAgMSA0Ljc1IDBoNi41QTIuNzUgMi43NSAwIDAgMSAxNCAyLjc1djEwLjVBMi43NSAyLjc1IDAgMCAxIDExLjI1IDE2aC02LjVBMi43NSAyLjc1IDAgMCAxIDIgMTMuMjV2LS41YS43NS43NSAwIDAgMSAxLjUgMHYuNWMwIC42OS41NiAxLjI1IDEuMjUgMS4yNWg2LjVjLjY5IDAgMS4yNS0uNTYgMS4yNS0xLjI1VjIuNzVjMC0uNjktLjU2LTEuMjUtMS4yNS0xLjI1aC02LjVjLS42OSAwLTEuMjUuNTYtMS4yNSAxLjI1di41YS43NS43NSAwIDAgMS0xLjUgMHYtLjVaXCIsXG4gICAgY2xpcFJ1bGU6IFwiZXZlbm9kZFwiXG4gIH1cbiksIC8qIEBfX1BVUkVfXyAqLyBlLmNyZWF0ZUVsZW1lbnQoXG4gIFwicGF0aFwiLFxuICB7XG4gICAgZmlsbDogXCJjdXJyZW50Q29sb3JcIixcbiAgICBmaWxsUnVsZTogXCJldmVub2RkXCIsXG4gICAgZDogXCJNOC43OCA3LjQ3YS43NS43NSAwIDAgMSAwIDEuMDZsLTIuMjUgMi4yNWEuNzUuNzUgMCAxIDEtMS4wNi0xLjA2bC45Ny0uOTdIMS43NWEuNzUuNzUgMCAwIDEgMC0xLjVoNC42OWwtLjk3LS45N2EuNzUuNzUgMCAwIDEgMS4wNi0xLjA2bDIuMjUgMi4yNVpcIixcbiAgICBjbGlwUnVsZTogXCJldmVub2RkXCJcbiAgfVxuKSksIFJ0ID0gKHQpID0+IC8qIEBfX1BVUkVfXyAqLyBlLmNyZWF0ZUVsZW1lbnQoXCJzdmdcIiwgeyB4bWxuczogXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiLCB3aWR0aDogMTYsIGhlaWdodDogMTYsIGZpbGw6IFwibm9uZVwiLCAuLi50IH0sIC8qIEBfX1BVUkVfXyAqLyBlLmNyZWF0ZUVsZW1lbnQoXG4gIFwicGF0aFwiLFxuICB7XG4gICAgZmlsbDogXCJjdXJyZW50Y29sb3JcIixcbiAgICBmaWxsUnVsZTogXCJldmVub2RkXCIsXG4gICAgZDogXCJNNCA2LjEwNFY0YTQgNCAwIDEgMSA4IDB2Mi4xMDRjMS4xNTQuMzI2IDIgMS4zODcgMiAyLjY0NnY0LjVBMi43NSAyLjc1IDAgMCAxIDExLjI1IDE2aC02LjVBMi43NSAyLjc1IDAgMCAxIDIgMTMuMjV2LTQuNWMwLTEuMjU5Ljg0Ni0yLjMyIDItMi42NDZaTTUuNSA0YTIuNSAyLjUgMCAwIDEgNSAwdjJoLTVWNFpcIixcbiAgICBjbGlwUnVsZTogXCJldmVub2RkXCJcbiAgfVxuKSksIE10ID0gKHQpID0+IC8qIEBfX1BVUkVfXyAqLyBlLmNyZWF0ZUVsZW1lbnQoXCJzdmdcIiwgeyB4bWxuczogXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiLCB3aWR0aDogMTYsIGhlaWdodDogMTYsIGZpbGw6IFwiY3VycmVudENvbG9yXCIsIC4uLnQgfSwgLyogQF9fUFVSRV9fICovIGUuY3JlYXRlRWxlbWVudChcInBhdGhcIiwgeyBkOiBcIk0xMi4yMjcgMTEuNTJhNS40NzcgNS40NzcgMCAwIDAgMS4yNDYtMi45Ny41LjUgMCAwIDAtLjk5NS0uMSA0LjQ3OCA0LjQ3OCAwIDAgMS0uOTYyIDIuMzU5bC0xLjA3LTEuMDdDMTAuNzk0IDkuMjQ3IDExIDguNjQ3IDExIDhWM2EzIDMgMCAwIDAtNiAwdjEuMjkzTDEuMzU0LjY0NmEuNS41IDAgMSAwLS43MDguNzA4bDE0IDE0YS41LjUgMCAwIDAgLjcwOC0uNzA4ek04IDEyLjVjLjY4MyAwIDEuMzMtLjE1MiAxLjkxMS0uNDI1bC43NDMuNzQzYy0uNjQ5LjM1OS0xLjM3OC41OS0yLjE1NC42NlYxNWgyYS41LjUgMCAwIDEgMCAxaC01YS41LjUgMCAwIDEgMC0xaDJ2LTEuNTIyYTUuNTAyIDUuNTAyIDAgMCAxLTQuOTczLTQuOTI5LjUuNSAwIDAgMSAuOTk1LS4wOThBNC41IDQuNSAwIDAgMCA4IDEyLjV6XCIgfSksIC8qIEBfX1BVUkVfXyAqLyBlLmNyZWF0ZUVsZW1lbnQoXCJwYXRoXCIsIHsgZDogXCJNOC43NDMgMTAuOTA3IDUgNy4xNjRWOGEzIDMgMCAwIDAgMy43NDMgMi45MDd6XCIgfSkpLCB5dCA9ICh0KSA9PiAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KFwic3ZnXCIsIHsgeG1sbnM6IFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiwgd2lkdGg6IDE2LCBoZWlnaHQ6IDE2LCBmaWxsOiBcImN1cnJlbnRDb2xvclwiLCAuLi50IH0sIC8qIEBfX1BVUkVfXyAqLyBlLmNyZWF0ZUVsZW1lbnQoXG4gIFwicGF0aFwiLFxuICB7XG4gICAgZmlsbFJ1bGU6IFwiZXZlbm9kZFwiLFxuICAgIGQ6IFwiTTIuOTc1IDguMDAyYS41LjUgMCAwIDEgLjU0Ny40NDkgNC41IDQuNSAwIDAgMCA4Ljk1NiAwIC41LjUgMCAxIDEgLjk5NS4wOThBNS41MDIgNS41MDIgMCAwIDEgOC41IDEzLjQ3OFYxNWgyYS41LjUgMCAwIDEgMCAxaC01YS41LjUgMCAwIDEgMC0xaDJ2LTEuNTIyYTUuNTAyIDUuNTAyIDAgMCAxLTQuOTczLTQuOTI5LjUuNSAwIDAgMSAuNDQ4LS41NDd6XCIsXG4gICAgY2xpcFJ1bGU6IFwiZXZlbm9kZFwiXG4gIH1cbiksIC8qIEBfX1BVUkVfXyAqLyBlLmNyZWF0ZUVsZW1lbnQoXCJwYXRoXCIsIHsgZDogXCJNNSAzYTMgMyAwIDEgMSA2IDB2NWEzIDMgMCAwIDEtNiAwelwiIH0pKSwgYnQgPSAodCkgPT4gLyogQF9fUFVSRV9fICovIGUuY3JlYXRlRWxlbWVudChcInN2Z1wiLCB7IHhtbG5zOiBcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIsIHdpZHRoOiAxNiwgaGVpZ2h0OiAxNiwgZmlsbDogXCJjdXJyZW50Y29sb3JcIiwgLi4udCB9LCAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KFwicGF0aFwiLCB7IGQ6IFwiTTAgMTEuNWEuNS41IDAgMCAxIC41LS41aDNhLjUuNSAwIDAgMSAuNS41djRhLjUuNSAwIDAgMS0uNS41aC0zYS41LjUgMCAwIDEtLjUtLjV6bTYtNWEuNS41IDAgMCAxIC41LS41aDNhLjUuNSAwIDAgMSAuNS41djlhLjUuNSAwIDAgMS0uNS41aC0zYS41LjUgMCAwIDEtLjUtLjV6bTYtNmEuNS41IDAgMCAxIC41LS41aDNhLjUuNSAwIDAgMSAuNS41djE1YS41LjUgMCAwIDEtLjUuNWgtM2EuNS41IDAgMCAxLS41LS41elwiIH0pLCAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KFwicGF0aFwiLCB7IGQ6IFwiTTAgMTEuNWEuNS41IDAgMCAxIC41LS41aDNhLjUuNSAwIDAgMSAuNS41djRhLjUuNSAwIDAgMS0uNS41aC0zYS41LjUgMCAwIDEtLjUtLjV6bTYtNWEuNS41IDAgMCAxIC41LS41aDNhLjUuNSAwIDAgMSAuNS41djlhLjUuNSAwIDAgMS0uNS41aC0zYS41LjUgMCAwIDEtLjUtLjV6bTYtNmEuNS41IDAgMCAxIC41LS41aDNhLjUuNSAwIDAgMSAuNS41djE1YS41LjUgMCAwIDEtLjUuNWgtM2EuNS41IDAgMCAxLS41LS41elwiIH0pKSwgU3QgPSAodCkgPT4gLyogQF9fUFVSRV9fICovIGUuY3JlYXRlRWxlbWVudChcInN2Z1wiLCB7IHhtbG5zOiBcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIsIHdpZHRoOiAxNiwgaGVpZ2h0OiAxNiwgZmlsbDogXCJjdXJyZW50Y29sb3JcIiwgLi4udCB9LCAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KFwicGF0aFwiLCB7IGQ6IFwiTTAgMTEuNWEuNS41IDAgMCAxIC41LS41aDNhLjUuNSAwIDAgMSAuNS41djRhLjUuNSAwIDAgMS0uNS41aC0zYS41LjUgMCAwIDEtLjUtLjV6bTYtNWEuNS41IDAgMCAxIC41LS41aDNhLjUuNSAwIDAgMSAuNS41djlhLjUuNSAwIDAgMS0uNS41aC0zYS41LjUgMCAwIDEtLjUtLjV6XCIgfSksIC8qIEBfX1BVUkVfXyAqLyBlLmNyZWF0ZUVsZW1lbnQoXCJwYXRoXCIsIHsgZDogXCJNMCAxMS41YS41LjUgMCAwIDEgLjUtLjVoM2EuNS41IDAgMCAxIC41LjV2NGEuNS41IDAgMCAxLS41LjVoLTNhLjUuNSAwIDAgMS0uNS0uNXptNi01YS41LjUgMCAwIDEgLjUtLjVoM2EuNS41IDAgMCAxIC41LjV2OWEuNS41IDAgMCAxLS41LjVoLTNhLjUuNSAwIDAgMS0uNS0uNXpcIiB9KSwgLyogQF9fUFVSRV9fICovIGUuY3JlYXRlRWxlbWVudChcImdcIiwgeyBvcGFjaXR5OiAwLjI1IH0sIC8qIEBfX1BVUkVfXyAqLyBlLmNyZWF0ZUVsZW1lbnQoXCJwYXRoXCIsIHsgZDogXCJNMTIgLjVhLjUuNSAwIDAgMSAuNS0uNWgzYS41LjUgMCAwIDEgLjUuNXYxNWEuNS41IDAgMCAxLS41LjVoLTNhLjUuNSAwIDAgMS0uNS0uNXpcIiB9KSwgLyogQF9fUFVSRV9fICovIGUuY3JlYXRlRWxlbWVudChcInBhdGhcIiwgeyBkOiBcIk0xMiAuNWEuNS41IDAgMCAxIC41LS41aDNhLjUuNSAwIDAgMSAuNS41djE1YS41LjUgMCAwIDEtLjUuNWgtM2EuNS41IDAgMCAxLS41LS41elwiIH0pKSksIEN0ID0gKHQpID0+IC8qIEBfX1BVUkVfXyAqLyBlLmNyZWF0ZUVsZW1lbnQoXCJzdmdcIiwgeyB4bWxuczogXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiLCB3aWR0aDogMTYsIGhlaWdodDogMTYsIGZpbGw6IFwiY3VycmVudGNvbG9yXCIsIC4uLnQgfSwgLyogQF9fUFVSRV9fICovIGUuY3JlYXRlRWxlbWVudChcInBhdGhcIiwgeyBkOiBcIk0wIDExLjVhLjUuNSAwIDAgMSAuNS0uNWgzYS41LjUgMCAwIDEgLjUuNXY0YS41LjUgMCAwIDEtLjUuNWgtM2EuNS41IDAgMCAxLS41LS41elwiIH0pLCAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KFwicGF0aFwiLCB7IGQ6IFwiTTAgMTEuNWEuNS41IDAgMCAxIC41LS41aDNhLjUuNSAwIDAgMSAuNS41djRhLjUuNSAwIDAgMS0uNS41aC0zYS41LjUgMCAwIDEtLjUtLjV6XCIgfSksIC8qIEBfX1BVUkVfXyAqLyBlLmNyZWF0ZUVsZW1lbnQoXCJnXCIsIHsgb3BhY2l0eTogMC4yNSB9LCAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KFwicGF0aFwiLCB7IGQ6IFwiTTYgNi41YS41LjUgMCAwIDEgLjUtLjVoM2EuNS41IDAgMCAxIC41LjV2OWEuNS41IDAgMCAxLS41LjVoLTNhLjUuNSAwIDAgMS0uNS0uNXpcIiB9KSwgLyogQF9fUFVSRV9fICovIGUuY3JlYXRlRWxlbWVudChcInBhdGhcIiwgeyBkOiBcIk02IDYuNWEuNS41IDAgMCAxIC41LS41aDNhLjUuNSAwIDAgMSAuNS41djlhLjUuNSAwIDAgMS0uNS41aC0zYS41LjUgMCAwIDEtLjUtLjV6bTYtNmEuNS41IDAgMCAxIC41LS41aDNhLjUuNSAwIDAgMSAuNS41djE1YS41LjUgMCAwIDEtLjUuNWgtM2EuNS41IDAgMCAxLS41LS41elwiIH0pLCAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KFwicGF0aFwiLCB7IGQ6IFwiTTEyIC41YS41LjUgMCAwIDEgLjUtLjVoM2EuNS41IDAgMCAxIC41LjV2MTVhLjUuNSAwIDAgMS0uNS41aC0zYS41LjUgMCAwIDEtLjUtLjV6XCIgfSkpKSwgSXQgPSAodCkgPT4gLyogQF9fUFVSRV9fICovIGUuY3JlYXRlRWxlbWVudChcInN2Z1wiLCB7IHhtbG5zOiBcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIsIHdpZHRoOiAxNiwgaGVpZ2h0OiAxNiwgZmlsbDogXCJjdXJyZW50Q29sb3JcIiwgLi4udCB9LCAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KFwiZ1wiLCB7IG9wYWNpdHk6IDAuMjUgfSwgLyogQF9fUFVSRV9fICovIGUuY3JlYXRlRWxlbWVudChcInBhdGhcIiwgeyBkOiBcIk0wIDExLjVhLjUuNSAwIDAgMSAuNS0uNWgzYS41LjUgMCAwIDEgLjUuNXY0YS41LjUgMCAwIDEtLjUuNWgtM2EuNS41IDAgMCAxLS41LS41di00Wm02LTVhLjUuNSAwIDAgMSAuNS0uNWgzYS41LjUgMCAwIDEgLjUuNXY5YS41LjUgMCAwIDEtLjUuNWgtM2EuNS41IDAgMCAxLS41LS41di05Wm02LTZhLjUuNSAwIDAgMSAuNS0uNWgzYS41LjUgMCAwIDEgLjUuNXYxNWEuNS41IDAgMCAxLS41LjVoLTNhLjUuNSAwIDAgMS0uNS0uNVYuNVpcIiB9KSwgLyogQF9fUFVSRV9fICovIGUuY3JlYXRlRWxlbWVudChcInBhdGhcIiwgeyBkOiBcIk0wIDExLjVhLjUuNSAwIDAgMSAuNS0uNWgzYS41LjUgMCAwIDEgLjUuNXY0YS41LjUgMCAwIDEtLjUuNWgtM2EuNS41IDAgMCAxLS41LS41di00Wm02LTVhLjUuNSAwIDAgMSAuNS0uNWgzYS41LjUgMCAwIDEgLjUuNXY5YS41LjUgMCAwIDEtLjUuNWgtM2EuNS41IDAgMCAxLS41LS41di05Wm02LTZhLjUuNSAwIDAgMSAuNS0uNWgzYS41LjUgMCAwIDEgLjUuNXYxNWEuNS41IDAgMCAxLS41LjVoLTNhLjUuNSAwIDAgMS0uNS0uNVYuNVpcIiB9KSkpLCBSZSA9ICh0KSA9PiAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KFwic3ZnXCIsIHsgeG1sbnM6IFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiwgd2lkdGg6IDIwLCBoZWlnaHQ6IDE2LCBmaWxsOiBcIm5vbmVcIiwgLi4udCB9LCAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KFxuICBcInBhdGhcIixcbiAge1xuICAgIGZpbGw6IFwiY3VycmVudENvbG9yXCIsXG4gICAgZmlsbFJ1bGU6IFwiZXZlbm9kZFwiLFxuICAgIGQ6IFwiTTAgMi43NUEyLjc1IDIuNzUgMCAwIDEgMi43NSAwaDE0LjVBMi43NSAyLjc1IDAgMCAxIDIwIDIuNzV2MTAuNUEyLjc1IDIuNzUgMCAwIDEgMTcuMjUgMTZIMi43NUEyLjc1IDIuNzUgMCAwIDEgMCAxMy4yNVYyLjc1Wk0yLjc1IDEuNWMtLjY5IDAtMS4yNS41Ni0xLjI1IDEuMjV2MTAuNWMwIC42OS41NiAxLjI1IDEuMjUgMS4yNWgxNC41Yy42OSAwIDEuMjUtLjU2IDEuMjUtMS4yNVYyLjc1YzAtLjY5LS41Ni0xLjI1LTEuMjUtMS4yNUgyLjc1WlwiLFxuICAgIGNsaXBSdWxlOiBcImV2ZW5vZGRcIlxuICB9XG4pLCAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KFxuICBcInBhdGhcIixcbiAge1xuICAgIGZpbGw6IFwiY3VycmVudENvbG9yXCIsXG4gICAgZmlsbFJ1bGU6IFwiZXZlbm9kZFwiLFxuICAgIGQ6IFwiTTkuNDcgNC4yMmEuNzUuNzUgMCAwIDEgMS4wNiAwbDIuMjUgMi4yNWEuNzUuNzUgMCAwIDEtMS4wNiAxLjA2bC0uOTctLjk3djQuNjlhLjc1Ljc1IDAgMCAxLTEuNSAwVjYuNTZsLS45Ny45N2EuNzUuNzUgMCAwIDEtMS4wNi0xLjA2bDIuMjUtMi4yNVpcIixcbiAgICBjbGlwUnVsZTogXCJldmVub2RkXCJcbiAgfVxuKSksIHh0ID0gKHQpID0+IC8qIEBfX1BVUkVfXyAqLyBlLmNyZWF0ZUVsZW1lbnQoXCJzdmdcIiwgeyB4bWxuczogXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiLCB3aWR0aDogMjAsIGhlaWdodDogMTYsIGZpbGw6IFwibm9uZVwiLCAuLi50IH0sIC8qIEBfX1BVUkVfXyAqLyBlLmNyZWF0ZUVsZW1lbnQoXCJnXCIsIHsgZmlsbDogXCJjdXJyZW50Q29sb3JcIiB9LCAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KFwicGF0aFwiLCB7IGQ6IFwiTTcuMjggNC4yMmEuNzUuNzUgMCAwIDAtMS4wNiAxLjA2TDguOTQgOGwtMi43MiAyLjcyYS43NS43NSAwIDEgMCAxLjA2IDEuMDZMMTAgOS4wNmwyLjcyIDIuNzJhLjc1Ljc1IDAgMSAwIDEuMDYtMS4wNkwxMS4wNiA4bDIuNzItMi43MmEuNzUuNzUgMCAwIDAtMS4wNi0xLjA2TDEwIDYuOTR6XCIgfSksIC8qIEBfX1BVUkVfXyAqLyBlLmNyZWF0ZUVsZW1lbnQoXG4gIFwicGF0aFwiLFxuICB7XG4gICAgZmlsbFJ1bGU6IFwiZXZlbm9kZFwiLFxuICAgIGQ6IFwiTTIuNzUgMEEyLjc1IDIuNzUgMCAwIDAgMCAyLjc1djEwLjVBMi43NSAyLjc1IDAgMCAwIDIuNzUgMTZoMTQuNUEyLjc1IDIuNzUgMCAwIDAgMjAgMTMuMjVWMi43NUEyLjc1IDIuNzUgMCAwIDAgMTcuMjUgMHpNMS41IDIuNzVjMC0uNjkuNTYtMS4yNSAxLjI1LTEuMjVoMTQuNWMuNjkgMCAxLjI1LjU2IDEuMjUgMS4yNXYxMC41YzAgLjY5LS41NiAxLjI1LTEuMjUgMS4yNUgyLjc1Yy0uNjkgMC0xLjI1LS41Ni0xLjI1LTEuMjV6XCIsXG4gICAgY2xpcFJ1bGU6IFwiZXZlbm9kZFwiXG4gIH1cbikpKSwgb2UgPSAodCkgPT4gLyogQF9fUFVSRV9fICovIGUuY3JlYXRlRWxlbWVudChcInN2Z1wiLCB7IHhtbG5zOiBcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIsIHdpZHRoOiAxNiwgaGVpZ2h0OiAxNiwgZmlsbDogXCJub25lXCIsIC4uLnQgfSwgLyogQF9fUFVSRV9fICovIGUuY3JlYXRlRWxlbWVudChcbiAgXCJwYXRoXCIsXG4gIHtcbiAgICBmaWxsOiBcImN1cnJlbnRDb2xvclwiLFxuICAgIGZpbGxSdWxlOiBcImV2ZW5vZGRcIixcbiAgICBkOiBcIk04IDBhLjc1Ljc1IDAgMCAxIC43NS43NXYyLjVhLjc1Ljc1IDAgMCAxLTEuNSAwVi43NUEuNzUuNzUgMCAwIDEgOCAwWlwiLFxuICAgIGNsaXBSdWxlOiBcImV2ZW5vZGRcIlxuICB9XG4pLCAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KFxuICBcInBhdGhcIixcbiAge1xuICAgIGZpbGw6IFwiY3VycmVudENvbG9yXCIsXG4gICAgZmlsbFJ1bGU6IFwiZXZlbm9kZFwiLFxuICAgIGQ6IFwiTTggMTJhLjc1Ljc1IDAgMCAxIC43NS43NXYyLjVhLjc1Ljc1IDAgMCAxLTEuNSAwdi0yLjVBLjc1Ljc1IDAgMCAxIDggMTJaXCIsXG4gICAgY2xpcFJ1bGU6IFwiZXZlbm9kZFwiLFxuICAgIG9wYWNpdHk6IDAuN1xuICB9XG4pLCAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KFxuICBcInBhdGhcIixcbiAge1xuICAgIGZpbGw6IFwiY3VycmVudENvbG9yXCIsXG4gICAgZmlsbFJ1bGU6IFwiZXZlbm9kZFwiLFxuICAgIGQ6IFwiTTEyIDEuMDcyYS43NS43NSAwIDAgMSAuMjc0IDEuMDI0bC0xLjI1IDIuMTY1YS43NS43NSAwIDAgMS0xLjI5OS0uNzVsMS4yNS0yLjE2NUEuNzUuNzUgMCAwIDEgMTIgMS4wNzJaXCIsXG4gICAgY2xpcFJ1bGU6IFwiZXZlbm9kZFwiXG4gIH1cbiksIC8qIEBfX1BVUkVfXyAqLyBlLmNyZWF0ZUVsZW1lbnQoXG4gIFwicGF0aFwiLFxuICB7XG4gICAgZmlsbDogXCJjdXJyZW50Q29sb3JcIixcbiAgICBmaWxsUnVsZTogXCJldmVub2RkXCIsXG4gICAgZDogXCJNNiAxMS40NjRhLjc1Ljc1IDAgMCAxIC4yNzQgMS4wMjVsLTEuMjUgMi4xNjVhLjc1Ljc1IDAgMCAxLTEuMjk5LS43NWwxLjI1LTIuMTY1QS43NS43NSAwIDAgMSA2IDExLjQ2NFpcIixcbiAgICBjbGlwUnVsZTogXCJldmVub2RkXCIsXG4gICAgb3BhY2l0eTogMC42XG4gIH1cbiksIC8qIEBfX1BVUkVfXyAqLyBlLmNyZWF0ZUVsZW1lbnQoXG4gIFwicGF0aFwiLFxuICB7XG4gICAgZmlsbDogXCJjdXJyZW50Q29sb3JcIixcbiAgICBmaWxsUnVsZTogXCJldmVub2RkXCIsXG4gICAgZDogXCJNMTQuOTI4IDRhLjc1Ljc1IDAgMCAxLS4yNzQgMS4wMjVsLTIuMTY1IDEuMjVhLjc1Ljc1IDAgMSAxLS43NS0xLjNsMi4xNjUtMS4yNUEuNzUuNzUgMCAwIDEgMTQuOTI4IDRaXCIsXG4gICAgY2xpcFJ1bGU6IFwiZXZlbm9kZFwiXG4gIH1cbiksIC8qIEBfX1BVUkVfXyAqLyBlLmNyZWF0ZUVsZW1lbnQoXG4gIFwicGF0aFwiLFxuICB7XG4gICAgZmlsbDogXCJjdXJyZW50Q29sb3JcIixcbiAgICBmaWxsUnVsZTogXCJldmVub2RkXCIsXG4gICAgZDogXCJNNC41MzYgMTBhLjc1Ljc1IDAgMCAxLS4yNzUgMS4wMjRsLTIuMTY1IDEuMjVhLjc1Ljc1IDAgMCAxLS43NS0xLjI5OGwyLjE2NS0xLjI1QS43NS43NSAwIDAgMSA0LjUzNiAxMFpcIixcbiAgICBjbGlwUnVsZTogXCJldmVub2RkXCIsXG4gICAgb3BhY2l0eTogMC41XG4gIH1cbiksIC8qIEBfX1BVUkVfXyAqLyBlLmNyZWF0ZUVsZW1lbnQoXG4gIFwicGF0aFwiLFxuICB7XG4gICAgZmlsbDogXCJjdXJyZW50Q29sb3JcIixcbiAgICBmaWxsUnVsZTogXCJldmVub2RkXCIsXG4gICAgZDogXCJNMTYgOGEuNzUuNzUgMCAwIDEtLjc1Ljc1aC0yLjVhLjc1Ljc1IDAgMCAxIDAtMS41aDIuNUEuNzUuNzUgMCAwIDEgMTYgOFpcIixcbiAgICBjbGlwUnVsZTogXCJldmVub2RkXCJcbiAgfVxuKSwgLyogQF9fUFVSRV9fICovIGUuY3JlYXRlRWxlbWVudChcbiAgXCJwYXRoXCIsXG4gIHtcbiAgICBmaWxsOiBcImN1cnJlbnRDb2xvclwiLFxuICAgIGZpbGxSdWxlOiBcImV2ZW5vZGRcIixcbiAgICBkOiBcIk00IDhhLjc1Ljc1IDAgMCAxLS43NS43NUguNzVhLjc1Ljc1IDAgMCAxIDAtMS41aDIuNUEuNzUuNzUgMCAwIDEgNCA4WlwiLFxuICAgIGNsaXBSdWxlOiBcImV2ZW5vZGRcIixcbiAgICBvcGFjaXR5OiAwLjRcbiAgfVxuKSwgLyogQF9fUFVSRV9fICovIGUuY3JlYXRlRWxlbWVudChcbiAgXCJwYXRoXCIsXG4gIHtcbiAgICBmaWxsOiBcImN1cnJlbnRDb2xvclwiLFxuICAgIGZpbGxSdWxlOiBcImV2ZW5vZGRcIixcbiAgICBkOiBcIk0xNC45MjggMTJhLjc1Ljc1IDAgMCAxLTEuMDI0LjI3NGwtMi4xNjUtMS4yNWEuNzUuNzUgMCAwIDEgLjc1LTEuMjk5bDIuMTY1IDEuMjVBLjc1Ljc1IDAgMCAxIDE0LjkyOCAxMlpcIixcbiAgICBjbGlwUnVsZTogXCJldmVub2RkXCIsXG4gICAgb3BhY2l0eTogMC45XG4gIH1cbiksIC8qIEBfX1BVUkVfXyAqLyBlLmNyZWF0ZUVsZW1lbnQoXG4gIFwicGF0aFwiLFxuICB7XG4gICAgZmlsbDogXCJjdXJyZW50Q29sb3JcIixcbiAgICBmaWxsUnVsZTogXCJldmVub2RkXCIsXG4gICAgZDogXCJNNC41MzYgNmEuNzUuNzUgMCAwIDEtMS4wMjUuMjc1bC0yLjE2NS0xLjI1YS43NS43NSAwIDEgMSAuNzUtMS4zbDIuMTY1IDEuMjVBLjc1Ljc1IDAgMCAxIDQuNTM2IDZaXCIsXG4gICAgY2xpcFJ1bGU6IFwiZXZlbm9kZFwiLFxuICAgIG9wYWNpdHk6IDAuM1xuICB9XG4pLCAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KFxuICBcInBhdGhcIixcbiAge1xuICAgIGZpbGw6IFwiY3VycmVudENvbG9yXCIsXG4gICAgZmlsbFJ1bGU6IFwiZXZlbm9kZFwiLFxuICAgIGQ6IFwiTTEyIDE0LjkyOGEuNzUuNzUgMCAwIDEtMS4wMjQtLjI3NGwtMS4yNS0yLjE2NWEuNzUuNzUgMCAwIDEgMS4yOTgtLjc1bDEuMjUgMi4xNjVBLjc1Ljc1IDAgMCAxIDEyIDE0LjkyOFpcIixcbiAgICBjbGlwUnVsZTogXCJldmVub2RkXCIsXG4gICAgb3BhY2l0eTogMC44XG4gIH1cbiksIC8qIEBfX1BVUkVfXyAqLyBlLmNyZWF0ZUVsZW1lbnQoXG4gIFwicGF0aFwiLFxuICB7XG4gICAgZmlsbDogXCJjdXJyZW50Q29sb3JcIixcbiAgICBmaWxsUnVsZTogXCJldmVub2RkXCIsXG4gICAgZDogXCJNNiA0LjUzNmEuNzUuNzUgMCAwIDEtMS4wMjQtLjI3NWwtMS4yNS0yLjE2NWEuNzUuNzUgMCAxIDEgMS4yOTktLjc1bDEuMjUgMi4xNjVBLjc1Ljc1IDAgMCAxIDYgNC41MzZaXCIsXG4gICAgY2xpcFJ1bGU6IFwiZXZlbm9kZFwiLFxuICAgIG9wYWNpdHk6IDAuMlxuICB9XG4pKSwgUHQgPSAodCkgPT4gLyogQF9fUFVSRV9fICovIGUuY3JlYXRlRWxlbWVudChcInN2Z1wiLCB7IHhtbG5zOiBcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIsIHdpZHRoOiAxNiwgaGVpZ2h0OiAxNiwgZmlsbDogXCJub25lXCIsIC4uLnQgfSwgLyogQF9fUFVSRV9fICovIGUuY3JlYXRlRWxlbWVudChcImdcIiwgeyBzdHJva2U6IFwiY3VycmVudENvbG9yXCIsIHN0cm9rZUxpbmVjYXA6IFwicm91bmRcIiwgc3Ryb2tlTGluZWpvaW46IFwicm91bmRcIiwgc3Ryb2tlV2lkdGg6IDEuNSB9LCAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KFwicGF0aFwiLCB7IGQ6IFwiTTEzLjI1IDdIOW0wIDBWMi43NU05IDdsNS4yNS01LjI1TTIuNzUgOUg3bTAgMHY0LjI1TTcgOWwtNS4yNSA1LjI1XCIgfSkpKSwgVHQgPSAvKiBAX19QVVJFX18gKi8gZS5mb3J3YXJkUmVmKFxuICBmdW5jdGlvbih7IHRyYWNrUmVmOiBuLCAuLi5hIH0sIGMpIHtcbiAgICBjb25zdCByID0gdGUoKSwgeyBtZXJnZWRQcm9wczogcywgaW5Gb2N1czogbyB9ID0gRmUoe1xuICAgICAgdHJhY2tSZWY6IG4gPz8gcixcbiAgICAgIHByb3BzOiBhXG4gICAgfSk7XG4gICAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBlLmNyZWF0ZUVsZW1lbnQocGUuQ29uc3VtZXIsIG51bGwsIChsKSA9PiBsICE9PSB2b2lkIDAgJiYgLyogQF9fUFVSRV9fICovIGUuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiLCB7IHJlZjogYywgLi4ucyB9LCBhLmNoaWxkcmVuID8gYS5jaGlsZHJlbiA6IG8gPyAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KFB0LCBudWxsKSA6IC8qIEBfX1BVUkVfXyAqLyBlLmNyZWF0ZUVsZW1lbnQoa3QsIG51bGwpKSk7XG4gIH1cbiksIGZhID0gLyogQF9fUFVSRV9fICovIGUuZm9yd2FyZFJlZihcbiAgZnVuY3Rpb24oe1xuICAgIGtpbmQ6IG4sXG4gICAgaW5pdGlhbFNlbGVjdGlvbjogYSxcbiAgICBvbkFjdGl2ZURldmljZUNoYW5nZTogYyxcbiAgICBvbkRldmljZUxpc3RDaGFuZ2U6IHIsXG4gICAgb25EZXZpY2VTZWxlY3RFcnJvcjogcyxcbiAgICBleGFjdE1hdGNoOiBvLFxuICAgIHRyYWNrOiBsLFxuICAgIHJlcXVlc3RQZXJtaXNzaW9uczogaSxcbiAgICBvbkVycm9yOiBkLFxuICAgIC4uLnVcbiAgfSwgdikge1xuICAgIGNvbnN0IGYgPSBLZSgpLCBwID0gZS51c2VSZWYoXCJkZWZhdWx0XCIpLCBFID0gZS51c2VDYWxsYmFjayhcbiAgICAgICh3KSA9PiB7XG4gICAgICAgIGYgJiYgZi5lbWl0KFllLk1lZGlhRGV2aWNlc0Vycm9yLCB3KSwgZCA9PSBudWxsIHx8IGQodyk7XG4gICAgICB9LFxuICAgICAgW2YsIGRdXG4gICAgKSwgeyBkZXZpY2VzOiBoLCBhY3RpdmVEZXZpY2VJZDogbSwgc2V0QWN0aXZlTWVkaWFEZXZpY2U6IHksIGNsYXNzTmFtZTogQyB9ID0gWmUoe1xuICAgICAga2luZDogbixcbiAgICAgIHJvb206IGYsXG4gICAgICB0cmFjazogbCxcbiAgICAgIHJlcXVlc3RQZXJtaXNzaW9uczogaSxcbiAgICAgIG9uRXJyb3I6IEVcbiAgICB9KTtcbiAgICBlLnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgICBhICE9PSB2b2lkIDAgJiYgeShhKTtcbiAgICB9LCBbeV0pLCBlLnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgICB0eXBlb2YgciA9PSBcImZ1bmN0aW9uXCIgJiYgcihoKTtcbiAgICB9LCBbciwgaF0pLCBlLnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgICBtICE9PSBwLmN1cnJlbnQgJiYgKGMgPT0gbnVsbCB8fCBjKG0pKSwgcC5jdXJyZW50ID0gbTtcbiAgICB9LCBbbV0pO1xuICAgIGNvbnN0IEEgPSBhc3luYyAodykgPT4ge1xuICAgICAgdHJ5IHtcbiAgICAgICAgYXdhaXQgeSh3LCB7IGV4YWN0OiBvID8/ICEwIH0pO1xuICAgICAgfSBjYXRjaCAoTSkge1xuICAgICAgICBpZiAoTSBpbnN0YW5jZW9mIEVycm9yKVxuICAgICAgICAgIHMgPT0gbnVsbCB8fCBzKE0pO1xuICAgICAgICBlbHNlXG4gICAgICAgICAgdGhyb3cgTTtcbiAgICAgIH1cbiAgICB9LCBOID0gZS51c2VNZW1vKFxuICAgICAgKCkgPT4gSSh1LCB7IGNsYXNzTmFtZTogQyB9LCB7IGNsYXNzTmFtZTogXCJsay1saXN0XCIgfSksXG4gICAgICBbQywgdV1cbiAgICApLCBnID0gISFoLmZpbmQoKHcpID0+IHcubGFiZWwudG9Mb3dlckNhc2UoKS5zdGFydHNXaXRoKFwiZGVmYXVsdFwiKSk7XG4gICAgZnVuY3Rpb24gUih3LCBNLCBQKSB7XG4gICAgICByZXR1cm4gdyA9PT0gTSB8fCAhZyAmJiBQID09PSAwICYmIE0gPT09IFwiZGVmYXVsdFwiO1xuICAgIH1cbiAgICByZXR1cm4gLyogQF9fUFVSRV9fICovIGUuY3JlYXRlRWxlbWVudChcInVsXCIsIHsgcmVmOiB2LCAuLi5OIH0sIGgubWFwKCh3LCBNKSA9PiAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KFxuICAgICAgXCJsaVwiLFxuICAgICAge1xuICAgICAgICBrZXk6IHcuZGV2aWNlSWQsXG4gICAgICAgIGlkOiB3LmRldmljZUlkLFxuICAgICAgICBcImRhdGEtbGstYWN0aXZlXCI6IFIody5kZXZpY2VJZCwgbSwgTSksXG4gICAgICAgIFwiYXJpYS1zZWxlY3RlZFwiOiBSKHcuZGV2aWNlSWQsIG0sIE0pLFxuICAgICAgICByb2xlOiBcIm9wdGlvblwiXG4gICAgICB9LFxuICAgICAgLyogQF9fUFVSRV9fICovIGUuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiLCB7IGNsYXNzTmFtZTogXCJsay1idXR0b25cIiwgb25DbGljazogKCkgPT4gQSh3LmRldmljZUlkKSB9LCB3LmxhYmVsKVxuICAgICkpKTtcbiAgfVxuKSwgaGEgPSAvKiBAX19QVVJFX18gKi8gZS5mb3J3YXJkUmVmKFxuICBmdW5jdGlvbih7IGxhYmVsOiBuID0gXCJBbGxvdyBBdWRpb1wiLCAuLi5hIH0sIGMpIHtcbiAgICBjb25zdCByID0gZXQoYS5yb29tKSwgeyBtZXJnZWRQcm9wczogcyB9ID0gZ2UoeyByb29tOiByLCBwcm9wczogYSB9KTtcbiAgICByZXR1cm4gLyogQF9fUFVSRV9fICovIGUuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiLCB7IHJlZjogYywgLi4ucyB9LCBuKTtcbiAgfVxuKSwgZ2EgPSAvKiBAX19QVVJFX18gKi8gZS5mb3J3YXJkUmVmKFxuICBmdW5jdGlvbih7IGxhYmVsOiBuLCAuLi5hIH0sIGMpIHtcbiAgICBjb25zdCByID0gdHQoKSwgeyBtZXJnZWRQcm9wczogcywgY2FuUGxheUF1ZGlvOiBvIH0gPSBnZSh7IHJvb206IHIsIHByb3BzOiBhIH0pLCB7IG1lcmdlZFByb3BzOiBsLCBjYW5QbGF5VmlkZW86IGkgfSA9IEhlKHsgcm9vbTogciwgcHJvcHM6IHMgfSksIHsgc3R5bGU6IGQsIC4uLnUgfSA9IGw7XG4gICAgcmV0dXJuIGQuZGlzcGxheSA9IG8gJiYgaSA/IFwibm9uZVwiIDogXCJibG9ja1wiLCAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIsIHsgcmVmOiBjLCBzdHlsZTogZCwgLi4udSB9LCBuID8/IGBTdGFydCAke28gPyBcIlZpZGVvXCIgOiBcIkF1ZGlvXCJ9YCk7XG4gIH1cbik7XG5mdW5jdGlvbiBNZSh0LCBuKSB7XG4gIHN3aXRjaCAodCkge1xuICAgIGNhc2UgUy5Tb3VyY2UuTWljcm9waG9uZTpcbiAgICAgIHJldHVybiBuID8gLyogQF9fUFVSRV9fICovIGUuY3JlYXRlRWxlbWVudCh5dCwgbnVsbCkgOiAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KE10LCBudWxsKTtcbiAgICBjYXNlIFMuU291cmNlLkNhbWVyYTpcbiAgICAgIHJldHVybiBuID8gLyogQF9fUFVSRV9fICovIGUuY3JlYXRlRWxlbWVudCh3dCwgbnVsbCkgOiAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KHB0LCBudWxsKTtcbiAgICBjYXNlIFMuU291cmNlLlNjcmVlblNoYXJlOlxuICAgICAgcmV0dXJuIG4gPyAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KHh0LCBudWxsKSA6IC8qIEBfX1BVUkVfXyAqLyBlLmNyZWF0ZUVsZW1lbnQoUmUsIG51bGwpO1xuICAgIGRlZmF1bHQ6XG4gICAgICByZXR1cm47XG4gIH1cbn1cbmZ1bmN0aW9uIEF0KHQpIHtcbiAgc3dpdGNoICh0KSB7XG4gICAgY2FzZSBRLkV4Y2VsbGVudDpcbiAgICAgIHJldHVybiAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KGJ0LCBudWxsKTtcbiAgICBjYXNlIFEuR29vZDpcbiAgICAgIHJldHVybiAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KFN0LCBudWxsKTtcbiAgICBjYXNlIFEuUG9vcjpcbiAgICAgIHJldHVybiAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KEN0LCBudWxsKTtcbiAgICBkZWZhdWx0OlxuICAgICAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBlLmNyZWF0ZUVsZW1lbnQoSXQsIG51bGwpO1xuICB9XG59XG5jb25zdCB2YSA9IC8qIEBfX1BVUkVfXyAqLyBlLmZvcndhcmRSZWYoZnVuY3Rpb24oeyBzaG93SWNvbjogbiwgLi4uYSB9LCBjKSB7XG4gIGNvbnN0IHsgYnV0dG9uUHJvcHM6IHIsIGVuYWJsZWQ6IHMgfSA9IEJlKGEpLCBbbywgbF0gPSBlLnVzZVN0YXRlKCExKTtcbiAgcmV0dXJuIGUudXNlRWZmZWN0KCgpID0+IHtcbiAgICBsKCEwKTtcbiAgfSwgW10pLCBvICYmIC8qIEBfX1BVUkVfXyAqLyBlLmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIiwgeyByZWY6IGMsIC4uLnIgfSwgKG4gPz8gITApICYmIE1lKGEuc291cmNlLCBzKSwgYS5jaGlsZHJlbik7XG59KSwgeWUgPSAvKiBAX19QVVJFX18gKi8gZS5mb3J3YXJkUmVmKGZ1bmN0aW9uKG4sIGEpIHtcbiAgY29uc3QgeyBjbGFzc05hbWU6IGMsIHF1YWxpdHk6IHIgfSA9IGplKG4pLCBzID0gZS51c2VNZW1vKCgpID0+ICh7IC4uLkkobiwgeyBjbGFzc05hbWU6IGMgfSksIFwiZGF0YS1say1xdWFsaXR5XCI6IHIgfSksIFtyLCBuLCBjXSk7XG4gIHJldHVybiAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHsgcmVmOiBhLCAuLi5zIH0sIG4uY2hpbGRyZW4gPz8gQXQocikpO1xufSksIEsgPSAvKiBAX19QVVJFX18gKi8gZS5mb3J3YXJkUmVmKFxuICBmdW5jdGlvbih7IHBhcnRpY2lwYW50OiBuLCAuLi5hIH0sIGMpIHtcbiAgICBjb25zdCByID0gYXQobiksIHsgY2xhc3NOYW1lOiBzLCBpbmZvT2JzZXJ2ZXI6IG8gfSA9IGUudXNlTWVtbygoKSA9PiBudChyKSwgW3JdKSwgeyBpZGVudGl0eTogbCwgbmFtZTogaSB9ID0gX2Uobywge1xuICAgICAgbmFtZTogci5uYW1lLFxuICAgICAgaWRlbnRpdHk6IHIuaWRlbnRpdHksXG4gICAgICBtZXRhZGF0YTogci5tZXRhZGF0YVxuICAgIH0pLCBkID0gZS51c2VNZW1vKCgpID0+IEkoYSwgeyBjbGFzc05hbWU6IHMsIFwiZGF0YS1say1wYXJ0aWNpcGFudC1uYW1lXCI6IGkgfSksIFthLCBzLCBpXSk7XG4gICAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBlLmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIsIHsgcmVmOiBjLCAuLi5kIH0sIGkgIT09IFwiXCIgPyBpIDogbCwgYS5jaGlsZHJlbik7XG4gIH1cbiksIGJlID0gLyogQF9fUFVSRV9fICovIGUuZm9yd2FyZFJlZihcbiAgZnVuY3Rpb24oeyB0cmFja1JlZjogbiwgc2hvdzogYSA9IFwiYWx3YXlzXCIsIC4uLmMgfSwgcikge1xuICAgIGNvbnN0IHsgY2xhc3NOYW1lOiBzLCBpc011dGVkOiBvIH0gPSBPZShuKSwgbCA9IGEgPT09IFwiYWx3YXlzXCIgfHwgYSA9PT0gXCJtdXRlZFwiICYmIG8gfHwgYSA9PT0gXCJ1bm11dGVkXCIgJiYgIW8sIGkgPSBlLnVzZU1lbW8oXG4gICAgICAoKSA9PiBJKGMsIHtcbiAgICAgICAgY2xhc3NOYW1lOiBzXG4gICAgICB9KSxcbiAgICAgIFtzLCBjXVxuICAgICk7XG4gICAgcmV0dXJuIGwgPyAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHsgcmVmOiByLCAuLi5pLCBcImRhdGEtbGstbXV0ZWRcIjogbyB9LCBjLmNoaWxkcmVuID8/IE1lKG4uc291cmNlLCAhbykpIDogbnVsbDtcbiAgfVxuKSwgTnQgPSAodCkgPT4gLyogQF9fUFVSRV9fICovIGUuY3JlYXRlRWxlbWVudChcbiAgXCJzdmdcIixcbiAge1xuICAgIHdpZHRoOiAzMjAsXG4gICAgaGVpZ2h0OiAzMjAsXG4gICAgdmlld0JveDogXCIwIDAgMzIwIDMyMFwiLFxuICAgIHByZXNlcnZlQXNwZWN0UmF0aW86IFwieE1pZFlNaWQgbWVldFwiLFxuICAgIGZpbGw6IFwibm9uZVwiLFxuICAgIHhtbG5zOiBcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIsXG4gICAgLi4udFxuICB9LFxuICAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KFxuICAgIFwicGF0aFwiLFxuICAgIHtcbiAgICAgIGQ6IFwiTTE2MCAxODBDMjA0LjE4MiAxODAgMjQwIDE0NC4xODMgMjQwIDEwMEMyNDAgNTUuODE3MiAyMDQuMTgyIDIwIDE2MCAyMEMxMTUuODE3IDIwIDc5Ljk5OTcgNTUuODE3MiA3OS45OTk3IDEwMEM3OS45OTk3IDE0NC4xODMgMTE1LjgxNyAxODAgMTYwIDE4MFpcIixcbiAgICAgIGZpbGw6IFwid2hpdGVcIixcbiAgICAgIGZpbGxPcGFjaXR5OiAwLjI1XG4gICAgfVxuICApLFxuICAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KFxuICAgIFwicGF0aFwiLFxuICAgIHtcbiAgICAgIGQ6IFwiTTk3LjY1NDIgMTk0LjYxNEMxMDMuMjY3IDE5MS44MTggMTA5Ljg0MSAxOTIuNDgxIDExNS41MTkgMTk1LjE0MUMxMjkuMDI1IDIwMS40NjYgMTQ0LjEgMjA1IDE1OS45OTkgMjA1QzE3NS44OTkgMjA1IDE5MC45NzMgMjAxLjQ2NiAyMDQuNDggMTk1LjE0MUMyMTAuMTU4IDE5Mi40ODEgMjE2LjczMiAxOTEuODE4IDIyMi4zNDUgMTk0LjYxNEMyNjIuNzAzIDIxNC43MTkgMjkxLjk4NSAyNTMuNzM2IDI5OC41OTEgMzAwLjA2MkMzMDAuMTUgMzEwLjk5NyAyOTEuMDQ1IDMyMCAyODAgMzIwSDM5Ljk5OTdDMjguOTU0IDMyMCAxOS44NDk1IDMxMC45OTcgMjEuNDA4NyAzMDAuMDYyQzI4LjAxNCAyNTMuNzM2IDU3LjI5NjYgMjE0LjcyIDk3LjY1NDIgMTk0LjYxNFpcIixcbiAgICAgIGZpbGw6IFwid2hpdGVcIixcbiAgICAgIGZpbGxPcGFjaXR5OiAwLjI1XG4gICAgfVxuICApXG4pO1xuZnVuY3Rpb24gU2UodCwgbiA9IHt9KSB7XG4gIGNvbnN0IFthLCBjXSA9IGUudXNlU3RhdGUocnQodCkpLCBbciwgc10gPSBlLnVzZVN0YXRlKGEgPT0gbnVsbCA/IHZvaWQgMCA6IGEuaXNNdXRlZCksIFtvLCBsXSA9IGUudXNlU3RhdGUoYSA9PSBudWxsID8gdm9pZCAwIDogYS5pc1N1YnNjcmliZWQpLCBbaSwgZF0gPSBlLnVzZVN0YXRlKGEgPT0gbnVsbCA/IHZvaWQgMCA6IGEudHJhY2spLCBbdSwgdl0gPSBlLnVzZVN0YXRlKFwibGFuZHNjYXBlXCIpLCBmID0gZS51c2VSZWYoKSwgeyBjbGFzc05hbWU6IHAsIHRyYWNrT2JzZXJ2ZXI6IEUgfSA9IGUudXNlTWVtbygoKSA9PiBjdCh0KSwgW1xuICAgIHQucGFydGljaXBhbnQuc2lkID8/IHQucGFydGljaXBhbnQuaWRlbnRpdHksXG4gICAgdC5zb3VyY2UsXG4gICAgJCh0KSAmJiB0LnB1YmxpY2F0aW9uLnRyYWNrU2lkXG4gIF0pO1xuICByZXR1cm4gZS51c2VFZmZlY3QoKCkgPT4ge1xuICAgIGNvbnN0IGggPSBFLnN1YnNjcmliZSgobSkgPT4ge1xuICAgICAgai5kZWJ1ZyhcInVwZGF0ZSB0cmFja1wiLCBtKSwgYyhtKSwgcyhtID09IG51bGwgPyB2b2lkIDAgOiBtLmlzTXV0ZWQpLCBsKG0gPT0gbnVsbCA/IHZvaWQgMCA6IG0uaXNTdWJzY3JpYmVkKSwgZChtID09IG51bGwgPyB2b2lkIDAgOiBtLnRyYWNrKTtcbiAgICB9KTtcbiAgICByZXR1cm4gKCkgPT4gaCA9PSBudWxsID8gdm9pZCAwIDogaC51bnN1YnNjcmliZSgpO1xuICB9LCBbRV0pLCBlLnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgdmFyIGgsIG07XG4gICAgcmV0dXJuIGkgJiYgKGYuY3VycmVudCAmJiBpLmRldGFjaChmLmN1cnJlbnQpLCAoaCA9IG4uZWxlbWVudCkgIT0gbnVsbCAmJiBoLmN1cnJlbnQgJiYgISh0LnBhcnRpY2lwYW50LmlzTG9jYWwgJiYgKGkgPT0gbnVsbCA/IHZvaWQgMCA6IGkua2luZCkgPT09IFwiYXVkaW9cIikgJiYgaS5hdHRhY2gobi5lbGVtZW50LmN1cnJlbnQpKSwgZi5jdXJyZW50ID0gKG0gPSBuLmVsZW1lbnQpID09IG51bGwgPyB2b2lkIDAgOiBtLmN1cnJlbnQsICgpID0+IHtcbiAgICAgIGYuY3VycmVudCAmJiAoaSA9PSBudWxsIHx8IGkuZGV0YWNoKGYuY3VycmVudCkpO1xuICAgIH07XG4gIH0sIFtpLCBuLmVsZW1lbnRdKSwgZS51c2VFZmZlY3QoKCkgPT4ge1xuICAgIHZhciBoLCBtO1xuICAgIGlmICh0eXBlb2YgKChoID0gYSA9PSBudWxsID8gdm9pZCAwIDogYS5kaW1lbnNpb25zKSA9PSBudWxsID8gdm9pZCAwIDogaC53aWR0aCkgPT0gXCJudW1iZXJcIiAmJiB0eXBlb2YgKChtID0gYSA9PSBudWxsID8gdm9pZCAwIDogYS5kaW1lbnNpb25zKSA9PSBudWxsID8gdm9pZCAwIDogbS5oZWlnaHQpID09IFwibnVtYmVyXCIpIHtcbiAgICAgIGNvbnN0IHkgPSBhLmRpbWVuc2lvbnMud2lkdGggPiBhLmRpbWVuc2lvbnMuaGVpZ2h0ID8gXCJsYW5kc2NhcGVcIiA6IFwicG9ydHJhaXRcIjtcbiAgICAgIHYoeSk7XG4gICAgfVxuICB9LCBbYV0pLCB7XG4gICAgcHVibGljYXRpb246IGEsXG4gICAgaXNNdXRlZDogcixcbiAgICBpc1N1YnNjcmliZWQ6IG8sXG4gICAgdHJhY2s6IGksXG4gICAgZWxlbWVudFByb3BzOiBJKG4ucHJvcHMsIHtcbiAgICAgIGNsYXNzTmFtZTogcCxcbiAgICAgIFwiZGF0YS1say1sb2NhbC1wYXJ0aWNpcGFudFwiOiB0LnBhcnRpY2lwYW50LmlzTG9jYWwsXG4gICAgICBcImRhdGEtbGstc291cmNlXCI6IGEgPT0gbnVsbCA/IHZvaWQgMCA6IGEuc291cmNlLFxuICAgICAgLi4uKGEgPT0gbnVsbCA/IHZvaWQgMCA6IGEua2luZCkgPT09IFwidmlkZW9cIiAmJiB7IFwiZGF0YS1say1vcmllbnRhdGlvblwiOiB1IH1cbiAgICB9KVxuICB9O1xufVxudmFyIFksIHVlO1xuZnVuY3Rpb24gTHQoKSB7XG4gIGlmICh1ZSkgcmV0dXJuIFk7XG4gIHVlID0gMTtcbiAgdmFyIHQgPSBcIkV4cGVjdGVkIGEgZnVuY3Rpb25cIiwgbiA9IE5hTiwgYSA9IFwiW29iamVjdCBTeW1ib2xdXCIsIGMgPSAvXlxccyt8XFxzKyQvZywgciA9IC9eWy0rXTB4WzAtOWEtZl0rJC9pLCBzID0gL14wYlswMV0rJC9pLCBvID0gL14wb1swLTddKyQvaSwgbCA9IHBhcnNlSW50LCBpID0gdHlwZW9mIHEgPT0gXCJvYmplY3RcIiAmJiBxICYmIHEuT2JqZWN0ID09PSBPYmplY3QgJiYgcSwgZCA9IHR5cGVvZiBzZWxmID09IFwib2JqZWN0XCIgJiYgc2VsZiAmJiBzZWxmLk9iamVjdCA9PT0gT2JqZWN0ICYmIHNlbGYsIHUgPSBpIHx8IGQgfHwgRnVuY3Rpb24oXCJyZXR1cm4gdGhpc1wiKSgpLCB2ID0gT2JqZWN0LnByb3RvdHlwZSwgZiA9IHYudG9TdHJpbmcsIHAgPSBNYXRoLm1heCwgRSA9IE1hdGgubWluLCBoID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHUuRGF0ZS5ub3coKTtcbiAgfTtcbiAgZnVuY3Rpb24gbShnLCBSLCB3KSB7XG4gICAgdmFyIE0sIFAsIE8sIEwsIGIsIFQsIEYgPSAwLCByZSA9ICExLCBaID0gITEsIEQgPSAhMDtcbiAgICBpZiAodHlwZW9mIGcgIT0gXCJmdW5jdGlvblwiKVxuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcih0KTtcbiAgICBSID0gTihSKSB8fCAwLCB5KHcpICYmIChyZSA9ICEhdy5sZWFkaW5nLCBaID0gXCJtYXhXYWl0XCIgaW4gdywgTyA9IFogPyBwKE4ody5tYXhXYWl0KSB8fCAwLCBSKSA6IE8sIEQgPSBcInRyYWlsaW5nXCIgaW4gdyA/ICEhdy50cmFpbGluZyA6IEQpO1xuICAgIGZ1bmN0aW9uIFUoaykge1xuICAgICAgdmFyIHggPSBNLCBIID0gUDtcbiAgICAgIHJldHVybiBNID0gUCA9IHZvaWQgMCwgRiA9IGssIEwgPSBnLmFwcGx5KEgsIHgpLCBMO1xuICAgIH1cbiAgICBmdW5jdGlvbiB4ZShrKSB7XG4gICAgICByZXR1cm4gRiA9IGssIGIgPSBzZXRUaW1lb3V0KFcsIFIpLCByZSA/IFUoaykgOiBMO1xuICAgIH1cbiAgICBmdW5jdGlvbiBQZShrKSB7XG4gICAgICB2YXIgeCA9IGsgLSBULCBIID0gayAtIEYsIHNlID0gUiAtIHg7XG4gICAgICByZXR1cm4gWiA/IEUoc2UsIE8gLSBIKSA6IHNlO1xuICAgIH1cbiAgICBmdW5jdGlvbiBjZShrKSB7XG4gICAgICB2YXIgeCA9IGsgLSBULCBIID0gayAtIEY7XG4gICAgICByZXR1cm4gVCA9PT0gdm9pZCAwIHx8IHggPj0gUiB8fCB4IDwgMCB8fCBaICYmIEggPj0gTztcbiAgICB9XG4gICAgZnVuY3Rpb24gVygpIHtcbiAgICAgIHZhciBrID0gaCgpO1xuICAgICAgaWYgKGNlKGspKVxuICAgICAgICByZXR1cm4gbGUoayk7XG4gICAgICBiID0gc2V0VGltZW91dChXLCBQZShrKSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGxlKGspIHtcbiAgICAgIHJldHVybiBiID0gdm9pZCAwLCBEICYmIE0gPyBVKGspIDogKE0gPSBQID0gdm9pZCAwLCBMKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gVGUoKSB7XG4gICAgICBiICE9PSB2b2lkIDAgJiYgY2xlYXJUaW1lb3V0KGIpLCBGID0gMCwgTSA9IFQgPSBQID0gYiA9IHZvaWQgMDtcbiAgICB9XG4gICAgZnVuY3Rpb24gQWUoKSB7XG4gICAgICByZXR1cm4gYiA9PT0gdm9pZCAwID8gTCA6IGxlKGgoKSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIEcoKSB7XG4gICAgICB2YXIgayA9IGgoKSwgeCA9IGNlKGspO1xuICAgICAgaWYgKE0gPSBhcmd1bWVudHMsIFAgPSB0aGlzLCBUID0gaywgeCkge1xuICAgICAgICBpZiAoYiA9PT0gdm9pZCAwKVxuICAgICAgICAgIHJldHVybiB4ZShUKTtcbiAgICAgICAgaWYgKFopXG4gICAgICAgICAgcmV0dXJuIGIgPSBzZXRUaW1lb3V0KFcsIFIpLCBVKFQpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGIgPT09IHZvaWQgMCAmJiAoYiA9IHNldFRpbWVvdXQoVywgUikpLCBMO1xuICAgIH1cbiAgICByZXR1cm4gRy5jYW5jZWwgPSBUZSwgRy5mbHVzaCA9IEFlLCBHO1xuICB9XG4gIGZ1bmN0aW9uIHkoZykge1xuICAgIHZhciBSID0gdHlwZW9mIGc7XG4gICAgcmV0dXJuICEhZyAmJiAoUiA9PSBcIm9iamVjdFwiIHx8IFIgPT0gXCJmdW5jdGlvblwiKTtcbiAgfVxuICBmdW5jdGlvbiBDKGcpIHtcbiAgICByZXR1cm4gISFnICYmIHR5cGVvZiBnID09IFwib2JqZWN0XCI7XG4gIH1cbiAgZnVuY3Rpb24gQShnKSB7XG4gICAgcmV0dXJuIHR5cGVvZiBnID09IFwic3ltYm9sXCIgfHwgQyhnKSAmJiBmLmNhbGwoZykgPT0gYTtcbiAgfVxuICBmdW5jdGlvbiBOKGcpIHtcbiAgICBpZiAodHlwZW9mIGcgPT0gXCJudW1iZXJcIilcbiAgICAgIHJldHVybiBnO1xuICAgIGlmIChBKGcpKVxuICAgICAgcmV0dXJuIG47XG4gICAgaWYgKHkoZykpIHtcbiAgICAgIHZhciBSID0gdHlwZW9mIGcudmFsdWVPZiA9PSBcImZ1bmN0aW9uXCIgPyBnLnZhbHVlT2YoKSA6IGc7XG4gICAgICBnID0geShSKSA/IFIgKyBcIlwiIDogUjtcbiAgICB9XG4gICAgaWYgKHR5cGVvZiBnICE9IFwic3RyaW5nXCIpXG4gICAgICByZXR1cm4gZyA9PT0gMCA/IGcgOiArZztcbiAgICBnID0gZy5yZXBsYWNlKGMsIFwiXCIpO1xuICAgIHZhciB3ID0gcy50ZXN0KGcpO1xuICAgIHJldHVybiB3IHx8IG8udGVzdChnKSA/IGwoZy5zbGljZSgyKSwgdyA/IDIgOiA4KSA6IHIudGVzdChnKSA/IG4gOiArZztcbiAgfVxuICByZXR1cm4gWSA9IG0sIFk7XG59XG52YXIgenQgPSBMdCgpO1xuY29uc3QgZGUgPSAvKiBAX19QVVJFX18gKi8gbHQoenQpO1xuZnVuY3Rpb24gVnQodCkge1xuICBjb25zdCBuID0geih0KTtcbiAgbi5jdXJyZW50ID0gdCwgVihcbiAgICAoKSA9PiAoKSA9PiB7XG4gICAgICBuLmN1cnJlbnQoKTtcbiAgICB9LFxuICAgIFtdXG4gICk7XG59XG5mdW5jdGlvbiBGdCh0LCBuID0gNTAwLCBhKSB7XG4gIGNvbnN0IGMgPSB6KCk7XG4gIFZ0KCgpID0+IHtcbiAgICBjLmN1cnJlbnQgJiYgYy5jdXJyZW50LmNhbmNlbCgpO1xuICB9KTtcbiAgY29uc3QgciA9IE5lKCgpID0+IHtcbiAgICBjb25zdCBzID0gZGUodCwgbiwgYSksIG8gPSAoLi4ubCkgPT4gcyguLi5sKTtcbiAgICByZXR1cm4gby5jYW5jZWwgPSAoKSA9PiB7XG4gICAgICBzLmNhbmNlbCgpO1xuICAgIH0sIG8uaXNQZW5kaW5nID0gKCkgPT4gISFjLmN1cnJlbnQsIG8uZmx1c2ggPSAoKSA9PiBzLmZsdXNoKCksIG87XG4gIH0sIFt0LCBuLCBhXSk7XG4gIHJldHVybiBWKCgpID0+IHtcbiAgICBjLmN1cnJlbnQgPSBkZSh0LCBuLCBhKTtcbiAgfSwgW3QsIG4sIGFdKSwgcjtcbn1cbmZ1bmN0aW9uIFp0KHQsIG4sIGEpIHtcbiAgY29uc3QgYyA9ICgoZCwgdSkgPT4gZCA9PT0gdSksIHIgPSB0IGluc3RhbmNlb2YgRnVuY3Rpb24gPyB0KCkgOiB0LCBbcywgb10gPSBCKHIpLCBsID0geihyKSwgaSA9IEZ0KFxuICAgIG8sXG4gICAgbixcbiAgICBhXG4gICk7XG4gIHJldHVybiBjKGwuY3VycmVudCwgcikgfHwgKGkociksIGwuY3VycmVudCA9IHIpLCBbcywgaV07XG59XG5mdW5jdGlvbiBIdCh7XG4gIHRocmVzaG9sZDogdCA9IDAsXG4gIHJvb3Q6IG4gPSBudWxsLFxuICByb290TWFyZ2luOiBhID0gXCIwJVwiLFxuICBmcmVlemVPbmNlVmlzaWJsZTogYyA9ICExLFxuICBpbml0aWFsSXNJbnRlcnNlY3Rpbmc6IHIgPSAhMSxcbiAgb25DaGFuZ2U6IHNcbn0gPSB7fSkge1xuICB2YXIgbztcbiAgY29uc3QgW2wsIGldID0gQihudWxsKSwgW2QsIHVdID0gQigoKSA9PiAoe1xuICAgIGlzSW50ZXJzZWN0aW5nOiByLFxuICAgIGVudHJ5OiB2b2lkIDBcbiAgfSkpLCB2ID0geigpO1xuICB2LmN1cnJlbnQgPSBzO1xuICBjb25zdCBmID0gKChvID0gZC5lbnRyeSkgPT0gbnVsbCA/IHZvaWQgMCA6IG8uaXNJbnRlcnNlY3RpbmcpICYmIGM7XG4gIFYoKCkgPT4ge1xuICAgIGlmICghbCB8fCAhKFwiSW50ZXJzZWN0aW9uT2JzZXJ2ZXJcIiBpbiB3aW5kb3cpIHx8IGYpXG4gICAgICByZXR1cm47XG4gICAgY29uc3QgaCA9IG5ldyBJbnRlcnNlY3Rpb25PYnNlcnZlcihcbiAgICAgIChtKSA9PiB7XG4gICAgICAgIGNvbnN0IHkgPSBBcnJheS5pc0FycmF5KGgudGhyZXNob2xkcykgPyBoLnRocmVzaG9sZHMgOiBbaC50aHJlc2hvbGRzXTtcbiAgICAgICAgbS5mb3JFYWNoKChDKSA9PiB7XG4gICAgICAgICAgY29uc3QgQSA9IEMuaXNJbnRlcnNlY3RpbmcgJiYgeS5zb21lKChOKSA9PiBDLmludGVyc2VjdGlvblJhdGlvID49IE4pO1xuICAgICAgICAgIHUoeyBpc0ludGVyc2VjdGluZzogQSwgZW50cnk6IEMgfSksIHYuY3VycmVudCAmJiB2LmN1cnJlbnQoQSwgQyk7XG4gICAgICAgIH0pO1xuICAgICAgfSxcbiAgICAgIHsgdGhyZXNob2xkOiB0LCByb290OiBuLCByb290TWFyZ2luOiBhIH1cbiAgICApO1xuICAgIHJldHVybiBoLm9ic2VydmUobCksICgpID0+IHtcbiAgICAgIGguZGlzY29ubmVjdCgpO1xuICAgIH07XG4gIH0sIFtcbiAgICBsLFxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSByZWFjdC1ob29rcy9leGhhdXN0aXZlLWRlcHNcbiAgICBKU09OLnN0cmluZ2lmeSh0KSxcbiAgICBuLFxuICAgIGEsXG4gICAgZixcbiAgICBjXG4gIF0pO1xuICBjb25zdCBwID0geihudWxsKTtcbiAgVigoKSA9PiB7XG4gICAgdmFyIGg7XG4gICAgIWwgJiYgKChoID0gZC5lbnRyeSkgIT0gbnVsbCAmJiBoLnRhcmdldCkgJiYgIWMgJiYgIWYgJiYgcC5jdXJyZW50ICE9PSBkLmVudHJ5LnRhcmdldCAmJiAocC5jdXJyZW50ID0gZC5lbnRyeS50YXJnZXQsIHUoeyBpc0ludGVyc2VjdGluZzogciwgZW50cnk6IHZvaWQgMCB9KSk7XG4gIH0sIFtsLCBkLmVudHJ5LCBjLCBmLCByXSk7XG4gIGNvbnN0IEUgPSBbXG4gICAgaSxcbiAgICAhIWQuaXNJbnRlcnNlY3RpbmcsXG4gICAgZC5lbnRyeVxuICBdO1xuICByZXR1cm4gRS5yZWYgPSBFWzBdLCBFLmlzSW50ZXJzZWN0aW5nID0gRVsxXSwgRS5lbnRyeSA9IEVbMl0sIEU7XG59XG5jb25zdCBCdCA9IC8qIEBfX1BVUkVfXyAqLyBlLmZvcndhcmRSZWYoXG4gIGZ1bmN0aW9uKHtcbiAgICBvblRyYWNrQ2xpY2s6IG4sXG4gICAgb25DbGljazogYSxcbiAgICBvblN1YnNjcmlwdGlvblN0YXR1c0NoYW5nZWQ6IGMsXG4gICAgdHJhY2tSZWY6IHIsXG4gICAgbWFuYWdlU3Vic2NyaXB0aW9uOiBzLFxuICAgIC4uLm9cbiAgfSwgbCkge1xuICAgIGNvbnN0IGkgPSBfKHIpLCBkID0gZS51c2VSZWYobnVsbCk7XG4gICAgZS51c2VJbXBlcmF0aXZlSGFuZGxlKGwsICgpID0+IGQuY3VycmVudCk7XG4gICAgY29uc3QgdSA9IEh0KHsgcm9vdDogZC5jdXJyZW50IH0pLCBbdl0gPSBadCh1LCAzZTMpO1xuICAgIGUudXNlRWZmZWN0KCgpID0+IHtcbiAgICAgIHMgJiYgaS5wdWJsaWNhdGlvbiBpbnN0YW5jZW9mIEogJiYgKHYgPT0gbnVsbCA/IHZvaWQgMCA6IHYuaXNJbnRlcnNlY3RpbmcpID09PSAhMSAmJiAodSA9PSBudWxsID8gdm9pZCAwIDogdS5pc0ludGVyc2VjdGluZykgPT09ICExICYmIGkucHVibGljYXRpb24uc2V0U3Vic2NyaWJlZCghMSk7XG4gICAgfSwgW3YsIGksIHNdKSwgZS51c2VFZmZlY3QoKCkgPT4ge1xuICAgICAgcyAmJiBpLnB1YmxpY2F0aW9uIGluc3RhbmNlb2YgSiAmJiAodSA9PSBudWxsID8gdm9pZCAwIDogdS5pc0ludGVyc2VjdGluZykgPT09ICEwICYmIGkucHVibGljYXRpb24uc2V0U3Vic2NyaWJlZCghMCk7XG4gICAgfSwgW3UsIGksIHNdKTtcbiAgICBjb25zdCB7XG4gICAgICBlbGVtZW50UHJvcHM6IGYsXG4gICAgICBwdWJsaWNhdGlvbjogcCxcbiAgICAgIGlzU3Vic2NyaWJlZDogRVxuICAgIH0gPSBTZShpLCB7XG4gICAgICBlbGVtZW50OiBkLFxuICAgICAgcHJvcHM6IG9cbiAgICB9KTtcbiAgICBlLnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgICBjID09IG51bGwgfHwgYyghIUUpO1xuICAgIH0sIFtFLCBjXSk7XG4gICAgY29uc3QgaCA9IChtKSA9PiB7XG4gICAgICBhID09IG51bGwgfHwgYShtKSwgbiA9PSBudWxsIHx8IG4oeyBwYXJ0aWNpcGFudDogaSA9PSBudWxsID8gdm9pZCAwIDogaS5wYXJ0aWNpcGFudCwgdHJhY2s6IHAgfSk7XG4gICAgfTtcbiAgICByZXR1cm4gLyogQF9fUFVSRV9fICovIGUuY3JlYXRlRWxlbWVudChcInZpZGVvXCIsIHsgcmVmOiBkLCAuLi5mLCBtdXRlZDogITAsIG9uQ2xpY2s6IGggfSk7XG4gIH1cbiksIG5lID0gLyogQF9fUFVSRV9fICovIGUuZm9yd2FyZFJlZihcbiAgZnVuY3Rpb24oeyB0cmFja1JlZjogbiwgb25TdWJzY3JpcHRpb25TdGF0dXNDaGFuZ2VkOiBhLCB2b2x1bWU6IGMsIC4uLnIgfSwgcykge1xuICAgIGNvbnN0IG8gPSBfKG4pLCBsID0gZS51c2VSZWYobnVsbCk7XG4gICAgZS51c2VJbXBlcmF0aXZlSGFuZGxlKHMsICgpID0+IGwuY3VycmVudCk7XG4gICAgY29uc3Qge1xuICAgICAgZWxlbWVudFByb3BzOiBpLFxuICAgICAgaXNTdWJzY3JpYmVkOiBkLFxuICAgICAgdHJhY2s6IHUsXG4gICAgICBwdWJsaWNhdGlvbjogdlxuICAgIH0gPSBTZShvLCB7XG4gICAgICBlbGVtZW50OiBsLFxuICAgICAgcHJvcHM6IHJcbiAgICB9KTtcbiAgICByZXR1cm4gZS51c2VFZmZlY3QoKCkgPT4ge1xuICAgICAgYSA9PSBudWxsIHx8IGEoISFkKTtcbiAgICB9LCBbZCwgYV0pLCBlLnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgICB1ID09PSB2b2lkIDAgfHwgYyA9PT0gdm9pZCAwIHx8ICh1IGluc3RhbmNlb2YgSmUgPyB1LnNldFZvbHVtZShjKSA6IGoud2FybihcIlZvbHVtZSBjYW4gb25seSBiZSBzZXQgb24gcmVtb3RlIGF1ZGlvIHRyYWNrcy5cIikpO1xuICAgIH0sIFtjLCB1XSksIGUudXNlRWZmZWN0KCgpID0+IHtcbiAgICAgIHYgPT09IHZvaWQgMCB8fCByLm11dGVkID09PSB2b2lkIDAgfHwgKHYgaW5zdGFuY2VvZiBKID8gdi5zZXRFbmFibGVkKCFyLm11dGVkKSA6IGoud2FybihcIkNhbiBvbmx5IGNhbGwgc2V0RW5hYmxlZCBvbiByZW1vdGUgdHJhY2sgcHVibGljYXRpb25zLlwiKSk7XG4gICAgfSwgW3IubXV0ZWQsIHYsIHVdKSwgLyogQF9fUFVSRV9fICovIGUuY3JlYXRlRWxlbWVudChcImF1ZGlvXCIsIHsgcmVmOiBsLCAuLi5pIH0pO1xuICB9XG4pO1xuZnVuY3Rpb24ganQodCkge1xuICBjb25zdCBuID0gISFzdCgpO1xuICByZXR1cm4gdC5wYXJ0aWNpcGFudCAmJiAhbiA/IC8qIEBfX1BVUkVfXyAqLyBlLmNyZWF0ZUVsZW1lbnQod2UuUHJvdmlkZXIsIHsgdmFsdWU6IHQucGFydGljaXBhbnQgfSwgdC5jaGlsZHJlbikgOiAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KGUuRnJhZ21lbnQsIG51bGwsIHQuY2hpbGRyZW4pO1xufVxuZnVuY3Rpb24gX3QodCkge1xuICBjb25zdCBuID0gISF0ZSgpO1xuICByZXR1cm4gdC50cmFja1JlZiAmJiAhbiA/IC8qIEBfX1BVUkVfXyAqLyBlLmNyZWF0ZUVsZW1lbnQoYWUuUHJvdmlkZXIsIHsgdmFsdWU6IHQudHJhY2tSZWYgfSwgdC5jaGlsZHJlbikgOiAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KGUuRnJhZ21lbnQsIG51bGwsIHQuY2hpbGRyZW4pO1xufVxuY29uc3QgT3QgPSAvKiBAX19QVVJFX18gKi8gZS5mb3J3YXJkUmVmKFxuICBmdW5jdGlvbih7XG4gICAgdHJhY2tSZWY6IG4sXG4gICAgY2hpbGRyZW46IGEsXG4gICAgb25QYXJ0aWNpcGFudENsaWNrOiBjLFxuICAgIGRpc2FibGVTcGVha2luZ0luZGljYXRvcjogcixcbiAgICAuLi5zXG4gIH0sIG8pIHtcbiAgICB2YXIgcCwgRTtcbiAgICBjb25zdCBsID0gXyhuKSwgeyBlbGVtZW50UHJvcHM6IGkgfSA9IHZlKHtcbiAgICAgIGh0bWxQcm9wczogcyxcbiAgICAgIGRpc2FibGVTcGVha2luZ0luZGljYXRvcjogcixcbiAgICAgIG9uUGFydGljaXBhbnRDbGljazogYyxcbiAgICAgIHRyYWNrUmVmOiBsXG4gICAgfSksIGQgPSBXZShsLnBhcnRpY2lwYW50KSwgdSA9IGl0KCksIHYgPSAocCA9IG90KCkpID09IG51bGwgPyB2b2lkIDAgOiBwLmF1dG9TdWJzY3JpcHRpb24sIGYgPSBlLnVzZUNhbGxiYWNrKFxuICAgICAgKGgpID0+IHtcbiAgICAgICAgbC5zb3VyY2UgJiYgIWggJiYgdSAmJiB1LnBpbi5kaXNwYXRjaCAmJiB1dChsLCB1LnBpbi5zdGF0ZSkgJiYgdS5waW4uZGlzcGF0Y2goeyBtc2c6IFwiY2xlYXJfcGluXCIgfSk7XG4gICAgICB9LFxuICAgICAgW2wsIHVdXG4gICAgKTtcbiAgICByZXR1cm4gLyogQF9fUFVSRV9fICovIGUuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7IHJlZjogbywgc3R5bGU6IHsgcG9zaXRpb246IFwicmVsYXRpdmVcIiB9LCAuLi5pIH0sIC8qIEBfX1BVUkVfXyAqLyBlLmNyZWF0ZUVsZW1lbnQoX3QsIHsgdHJhY2tSZWY6IGwgfSwgLyogQF9fUFVSRV9fICovIGUuY3JlYXRlRWxlbWVudChqdCwgeyBwYXJ0aWNpcGFudDogbC5wYXJ0aWNpcGFudCB9LCBhID8/IC8qIEBfX1BVUkVfXyAqLyBlLmNyZWF0ZUVsZW1lbnQoZS5GcmFnbWVudCwgbnVsbCwgJChsKSAmJiAoKChFID0gbC5wdWJsaWNhdGlvbikgPT0gbnVsbCA/IHZvaWQgMCA6IEUua2luZCkgPT09IFwidmlkZW9cIiB8fCBsLnNvdXJjZSA9PT0gUy5Tb3VyY2UuQ2FtZXJhIHx8IGwuc291cmNlID09PSBTLlNvdXJjZS5TY3JlZW5TaGFyZSkgPyAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KFxuICAgICAgQnQsXG4gICAgICB7XG4gICAgICAgIHRyYWNrUmVmOiBsLFxuICAgICAgICBvblN1YnNjcmlwdGlvblN0YXR1c0NoYW5nZWQ6IGYsXG4gICAgICAgIG1hbmFnZVN1YnNjcmlwdGlvbjogdlxuICAgICAgfVxuICAgICkgOiAkKGwpICYmIC8qIEBfX1BVUkVfXyAqLyBlLmNyZWF0ZUVsZW1lbnQoXG4gICAgICBuZSxcbiAgICAgIHtcbiAgICAgICAgdHJhY2tSZWY6IGwsXG4gICAgICAgIG9uU3Vic2NyaXB0aW9uU3RhdHVzQ2hhbmdlZDogZlxuICAgICAgfVxuICAgICksIC8qIEBfX1BVUkVfXyAqLyBlLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwibGstcGFydGljaXBhbnQtcGxhY2Vob2xkZXJcIiB9LCAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KE50LCBudWxsKSksIC8qIEBfX1BVUkVfXyAqLyBlLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwibGstcGFydGljaXBhbnQtbWV0YWRhdGFcIiB9LCAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcImxrLXBhcnRpY2lwYW50LW1ldGFkYXRhLWl0ZW1cIiB9LCBsLnNvdXJjZSA9PT0gUy5Tb3VyY2UuQ2FtZXJhID8gLyogQF9fUFVSRV9fICovIGUuY3JlYXRlRWxlbWVudChlLkZyYWdtZW50LCBudWxsLCBkICYmIC8qIEBfX1BVUkVfXyAqLyBlLmNyZWF0ZUVsZW1lbnQoUnQsIHsgc3R5bGU6IHsgbWFyZ2luUmlnaHQ6IFwiMC4yNXJlbVwiIH0gfSksIC8qIEBfX1BVUkVfXyAqLyBlLmNyZWF0ZUVsZW1lbnQoXG4gICAgICBiZSxcbiAgICAgIHtcbiAgICAgICAgdHJhY2tSZWY6IHtcbiAgICAgICAgICBwYXJ0aWNpcGFudDogbC5wYXJ0aWNpcGFudCxcbiAgICAgICAgICBzb3VyY2U6IFMuU291cmNlLk1pY3JvcGhvbmVcbiAgICAgICAgfSxcbiAgICAgICAgc2hvdzogXCJtdXRlZFwiXG4gICAgICB9XG4gICAgKSwgLyogQF9fUFVSRV9fICovIGUuY3JlYXRlRWxlbWVudChLLCBudWxsKSkgOiAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KGUuRnJhZ21lbnQsIG51bGwsIC8qIEBfX1BVUkVfXyAqLyBlLmNyZWF0ZUVsZW1lbnQoUmUsIHsgc3R5bGU6IHsgbWFyZ2luUmlnaHQ6IFwiMC4yNXJlbVwiIH0gfSksIC8qIEBfX1BVUkVfXyAqLyBlLmNyZWF0ZUVsZW1lbnQoSywgbnVsbCwgXCIncyBzY3JlZW5cIikpKSwgLyogQF9fUFVSRV9fICovIGUuY3JlYXRlRWxlbWVudCh5ZSwgeyBjbGFzc05hbWU6IFwibGstcGFydGljaXBhbnQtbWV0YWRhdGEtaXRlbVwiIH0pKSksIC8qIEBfX1BVUkVfXyAqLyBlLmNyZWF0ZUVsZW1lbnQoVHQsIHsgdHJhY2tSZWY6IGwgfSkpKSk7XG4gIH1cbik7XG5mdW5jdGlvbiBFYSh0KSB7XG4gIGNvbnN0IG4gPSBJKHQsIHsgY2xhc3NOYW1lOiBcImxrLWZvY3VzLWxheW91dFwiIH0pO1xuICByZXR1cm4gLyogQF9fUFVSRV9fICovIGUuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7IC4uLm4gfSwgdC5jaGlsZHJlbik7XG59XG5mdW5jdGlvbiBwYSh7IHRyYWNrUmVmOiB0LCAuLi5uIH0pIHtcbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBlLmNyZWF0ZUVsZW1lbnQoT3QsIHsgdHJhY2tSZWY6IHQsIC4uLm4gfSk7XG59XG5mdW5jdGlvbiBDZSh7IHRyYWNrczogdCwgLi4ubiB9KSB7XG4gIHJldHVybiAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KGUuRnJhZ21lbnQsIG51bGwsIHQubWFwKChhKSA9PiAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KFxuICAgIGFlLlByb3ZpZGVyLFxuICAgIHtcbiAgICAgIHZhbHVlOiBhLFxuICAgICAga2V5OiBrZShhKVxuICAgIH0sXG4gICAgZWUobi5jaGlsZHJlbilcbiAgKSkpO1xufVxuZnVuY3Rpb24gV3Qoe1xuICB0b3RhbFBhZ2VDb3VudDogdCxcbiAgbmV4dFBhZ2U6IG4sXG4gIHByZXZQYWdlOiBhLFxuICBjdXJyZW50UGFnZTogYyxcbiAgcGFnZXNDb250YWluZXI6IHJcbn0pIHtcbiAgY29uc3QgW3MsIG9dID0gZS51c2VTdGF0ZSghMSk7XG4gIHJldHVybiBlLnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgbGV0IGw7XG4gICAgcmV0dXJuIHIgJiYgKGwgPSBkdChyLmN1cnJlbnQsIDJlMykuc3Vic2NyaWJlKFxuICAgICAgb1xuICAgICkpLCAoKSA9PiB7XG4gICAgICBsICYmIGwudW5zdWJzY3JpYmUoKTtcbiAgICB9O1xuICB9LCBbcl0pLCAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcImxrLXBhZ2luYXRpb24tY29udHJvbFwiLCBcImRhdGEtbGstdXNlci1pbnRlcmFjdGlvblwiOiBzIH0sIC8qIEBfX1BVUkVfXyAqLyBlLmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIiwgeyBjbGFzc05hbWU6IFwibGstYnV0dG9uXCIsIG9uQ2xpY2s6IGEgfSwgLyogQF9fUFVSRV9fICovIGUuY3JlYXRlRWxlbWVudChpZSwgbnVsbCkpLCAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KFwic3BhblwiLCB7IGNsYXNzTmFtZTogXCJsay1wYWdpbmF0aW9uLWNvdW50XCIgfSwgYCR7Y30gb2YgJHt0fWApLCAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIsIHsgY2xhc3NOYW1lOiBcImxrLWJ1dHRvblwiLCBvbkNsaWNrOiBuIH0sIC8qIEBfX1BVUkVfXyAqLyBlLmNyZWF0ZUVsZW1lbnQoaWUsIG51bGwpKSk7XG59XG5jb25zdCBxdCA9IC8qIEBfX1BVUkVfXyAqLyBlLmZvcndhcmRSZWYoXG4gIGZ1bmN0aW9uKHsgdG90YWxQYWdlQ291bnQ6IG4sIGN1cnJlbnRQYWdlOiBhIH0sIGMpIHtcbiAgICBjb25zdCByID0gbmV3IEFycmF5KG4pLmZpbGwoXCJcIikubWFwKChzLCBvKSA9PiBvICsgMSA9PT0gYSA/IC8qIEBfX1BVUkVfXyAqLyBlLmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIsIHsgXCJkYXRhLWxrLWFjdGl2ZVwiOiAhMCwga2V5OiBvIH0pIDogLyogQF9fUFVSRV9fICovIGUuY3JlYXRlRWxlbWVudChcInNwYW5cIiwgeyBrZXk6IG8gfSkpO1xuICAgIHJldHVybiAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHsgcmVmOiBjLCBjbGFzc05hbWU6IFwibGstcGFnaW5hdGlvbi1pbmRpY2F0b3JcIiB9LCByKTtcbiAgfVxuKTtcbmZ1bmN0aW9uIHdhKHsgdHJhY2tzOiB0LCAuLi5uIH0pIHtcbiAgY29uc3QgYSA9IGUuY3JlYXRlUmVmKCksIGMgPSBlLnVzZU1lbW8oXG4gICAgKCkgPT4gSShuLCB7IGNsYXNzTmFtZTogXCJsay1ncmlkLWxheW91dFwiIH0pLFxuICAgIFtuXVxuICApLCB7IGxheW91dDogciB9ID0gcWUoYSwgdC5sZW5ndGgpLCBzID0gJGUoci5tYXhUaWxlcywgdCk7XG4gIHJldHVybiBEZShhLCB7XG4gICAgb25MZWZ0U3dpcGU6IHMubmV4dFBhZ2UsXG4gICAgb25SaWdodFN3aXBlOiBzLnByZXZQYWdlXG4gIH0pLCAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHsgcmVmOiBhLCBcImRhdGEtbGstcGFnaW5hdGlvblwiOiBzLnRvdGFsUGFnZUNvdW50ID4gMSwgLi4uYyB9LCAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KENlLCB7IHRyYWNrczogcy50cmFja3MgfSwgbi5jaGlsZHJlbiksIHQubGVuZ3RoID4gci5tYXhUaWxlcyAmJiAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KGUuRnJhZ21lbnQsIG51bGwsIC8qIEBfX1BVUkVfXyAqLyBlLmNyZWF0ZUVsZW1lbnQoXG4gICAgcXQsXG4gICAge1xuICAgICAgdG90YWxQYWdlQ291bnQ6IHMudG90YWxQYWdlQ291bnQsXG4gICAgICBjdXJyZW50UGFnZTogcy5jdXJyZW50UGFnZVxuICAgIH1cbiAgKSwgLyogQF9fUFVSRV9fICovIGUuY3JlYXRlRWxlbWVudChXdCwgeyBwYWdlc0NvbnRhaW5lcjogYSwgLi4ucyB9KSkpO1xufVxuY29uc3QgJHQgPSAxMzAsIER0ID0gMTQwLCBtZSA9IDEsIEllID0gMTYgLyAxMCwgVXQgPSAoMSAtIEllKSAqIC0xO1xuZnVuY3Rpb24ga2EoeyB0cmFja3M6IHQsIG9yaWVudGF0aW9uOiBuLCAuLi5hIH0pIHtcbiAgY29uc3QgYyA9IGUudXNlUmVmKG51bGwpLCBbciwgc10gPSBlLnVzZVN0YXRlKDApLCB7IHdpZHRoOiBvLCBoZWlnaHQ6IGwgfSA9IFVlKGMpLCBpID0gbiB8fCAobCA+PSBvID8gXCJ2ZXJ0aWNhbFwiIDogXCJob3Jpem9udGFsXCIpLCBkID0gaSA9PT0gXCJ2ZXJ0aWNhbFwiID8gTWF0aC5tYXgobyAqIFV0LCAkdCkgOiBNYXRoLm1heChsICogSWUsIER0KSwgdSA9IG10KCksIHYgPSBNYXRoLm1heChpID09PSBcInZlcnRpY2FsXCIgPyAobCAtIHUpIC8gZCA6IChvIC0gdSkgLyBkLCBtZSk7XG4gIGxldCBmID0gTWF0aC5yb3VuZCh2KTtcbiAgTWF0aC5hYnModiAtIHIpIDwgMC41ID8gZiA9IE1hdGgucm91bmQocikgOiByICE9PSB2ICYmIHModik7XG4gIGNvbnN0IHAgPSBHZSh0LCBmKTtcbiAgcmV0dXJuIGUudXNlTGF5b3V0RWZmZWN0KCgpID0+IHtcbiAgICBjLmN1cnJlbnQgJiYgKGMuY3VycmVudC5kYXRhc2V0LmxrT3JpZW50YXRpb24gPSBpLCBjLmN1cnJlbnQuc3R5bGUuc2V0UHJvcGVydHkoXCItLWxrLW1heC12aXNpYmxlLXRpbGVzXCIsIGYudG9TdHJpbmcoKSkpO1xuICB9LCBbZiwgaV0pLCAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KFwiYXNpZGVcIiwgeyBrZXk6IGksIGNsYXNzTmFtZTogXCJsay1jYXJvdXNlbFwiLCByZWY6IGMsIC4uLmEgfSwgLyogQF9fUFVSRV9fICovIGUuY3JlYXRlRWxlbWVudChDZSwgeyB0cmFja3M6IHAgfSwgYS5jaGlsZHJlbikpO1xufVxuZnVuY3Rpb24gUmEoe1xuICB2YWx1ZTogdCxcbiAgb25QaW5DaGFuZ2U6IG4sXG4gIG9uV2lkZ2V0Q2hhbmdlOiBhLFxuICBjaGlsZHJlbjogY1xufSkge1xuICBjb25zdCByID0gZnQodCk7XG4gIHJldHVybiBlLnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgai5kZWJ1ZyhcIlBpblN0YXRlIFVwZGF0ZWRcIiwgeyBzdGF0ZTogci5waW4uc3RhdGUgfSksIG4gJiYgci5waW4uc3RhdGUgJiYgbihyLnBpbi5zdGF0ZSk7XG4gIH0sIFtyLnBpbi5zdGF0ZSwgbl0pLCBlLnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgai5kZWJ1ZyhcIldpZGdldCBVcGRhdGVkXCIsIHsgd2lkZ2V0U3RhdGU6IHIud2lkZ2V0LnN0YXRlIH0pLCBhICYmIHIud2lkZ2V0LnN0YXRlICYmIGEoci53aWRnZXQuc3RhdGUpO1xuICB9LCBbYSwgci53aWRnZXQuc3RhdGVdKSwgLyogQF9fUFVSRV9fICovIGUuY3JlYXRlRWxlbWVudChwZS5Qcm92aWRlciwgeyB2YWx1ZTogciB9LCBjKTtcbn1cbmNvbnN0IE1hID0gLyogQF9fUFVSRV9fICovIGUuZm9yd2FyZFJlZihcbiAgZnVuY3Rpb24oeyB0cmFja1JlZjogbiwgLi4uYSB9LCBjKSB7XG4gICAgY29uc3QgdSA9IF8obiksIHYgPSBFZSh1LCB7IGJhbmRzOiA3LCBsb1Bhc3M6IDMwMCB9KTtcbiAgICByZXR1cm4gLyogQF9fUFVSRV9fICovIGUuY3JlYXRlRWxlbWVudChcbiAgICAgIFwic3ZnXCIsXG4gICAgICB7XG4gICAgICAgIHJlZjogYyxcbiAgICAgICAgd2lkdGg6IFwiMTAwJVwiLFxuICAgICAgICBoZWlnaHQ6IFwiMTAwJVwiLFxuICAgICAgICB2aWV3Qm94OiBcIjAgMCAyMDAgOTBcIixcbiAgICAgICAgLi4uYSxcbiAgICAgICAgY2xhc3NOYW1lOiBcImxrLWF1ZGlvLXZpc3VhbGl6ZXJcIlxuICAgICAgfSxcbiAgICAgIC8qIEBfX1BVUkVfXyAqLyBlLmNyZWF0ZUVsZW1lbnQoXCJyZWN0XCIsIHsgeDogXCIwXCIsIHk6IFwiMFwiLCB3aWR0aDogXCIxMDAlXCIsIGhlaWdodDogXCIxMDAlXCIgfSksXG4gICAgICAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KFxuICAgICAgICBcImdcIixcbiAgICAgICAge1xuICAgICAgICAgIHN0eWxlOiB7XG4gICAgICAgICAgICB0cmFuc2Zvcm06IGB0cmFuc2xhdGUoJHsxMzAgLyAyfXB4LCAwKWBcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIHYubWFwKChmLCBwKSA9PiAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgIFwicmVjdFwiLFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIGtleTogcCxcbiAgICAgICAgICAgIHg6IHAgKiAxMCxcbiAgICAgICAgICAgIHk6IDkwIC8gMiAtIGYgKiA1MCAvIDIsXG4gICAgICAgICAgICB3aWR0aDogNixcbiAgICAgICAgICAgIGhlaWdodDogZiAqIDUwXG4gICAgICAgICAgfVxuICAgICAgICApKVxuICAgICAgKVxuICAgICk7XG4gIH1cbik7XG5mdW5jdGlvbiB5YSh7IHBhcnRpY2lwYW50czogdCwgLi4ubiB9KSB7XG4gIHJldHVybiAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KGUuRnJhZ21lbnQsIG51bGwsIHQubWFwKChhKSA9PiAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KHdlLlByb3ZpZGVyLCB7IHZhbHVlOiBhLCBrZXk6IGEuaWRlbnRpdHkgfSwgZWUobi5jaGlsZHJlbikpKSk7XG59XG5mdW5jdGlvbiBiYSh7IHJvb206IHQsIHZvbHVtZTogbiwgbXV0ZWQ6IGEgfSkge1xuICBjb25zdCBjID0gUWUoXG4gICAgW1MuU291cmNlLk1pY3JvcGhvbmUsIFMuU291cmNlLlNjcmVlblNoYXJlQXVkaW8sIFMuU291cmNlLlVua25vd25dLFxuICAgIHtcbiAgICAgIHVwZGF0ZU9ubHlPbjogW10sXG4gICAgICBvbmx5U3Vic2NyaWJlZDogITAsXG4gICAgICByb29tOiB0XG4gICAgfVxuICApLmZpbHRlcigocikgPT4gIXIucGFydGljaXBhbnQuaXNMb2NhbCAmJiByLnB1YmxpY2F0aW9uLmtpbmQgPT09IFMuS2luZC5BdWRpbyk7XG4gIHJldHVybiAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHsgc3R5bGU6IHsgZGlzcGxheTogXCJub25lXCIgfSB9LCBjLm1hcCgocikgPT4gLyogQF9fUFVSRV9fICovIGUuY3JlYXRlRWxlbWVudChcbiAgICBuZSxcbiAgICB7XG4gICAgICBrZXk6IGtlKHIpLFxuICAgICAgdHJhY2tSZWY6IHIsXG4gICAgICB2b2x1bWU6IG4sXG4gICAgICBtdXRlZDogYVxuICAgIH1cbiAgKSkpO1xufVxuY29uc3QgU2EgPSAvKiBAX19QVVJFX18gKi8gZS5mb3J3YXJkUmVmKGZ1bmN0aW9uKHsgY2hpbGRyZW5Qb3NpdGlvbjogbiA9IFwiYmVmb3JlXCIsIGNoaWxkcmVuOiBhLCAuLi5jIH0sIHIpIHtcbiAgY29uc3QgeyBuYW1lOiBzIH0gPSBYZSgpO1xuICByZXR1cm4gLyogQF9fUFVSRV9fICovIGUuY3JlYXRlRWxlbWVudChcInNwYW5cIiwgeyByZWY6IHIsIC4uLmMgfSwgbiA9PT0gXCJiZWZvcmVcIiAmJiBhLCBzLCBuID09PSBcImFmdGVyXCIgJiYgYSk7XG59KTtcbmZ1bmN0aW9uIEd0KHQpIHtcbiAgY29uc3QgbiA9IGUudXNlTWVtbygoKSA9PiBJKHQsIHsgY2xhc3NOYW1lOiBcImxrLXRvYXN0XCIgfSksIFt0XSk7XG4gIHJldHVybiAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHsgLi4ubiB9LCB0LmNoaWxkcmVuKTtcbn1cbmNvbnN0IFF0ID0gKHQpID0+IHtcbiAgY29uc3QgbiA9IFtdO1xuICBmb3IgKGxldCBhID0gMDsgYSA8IHQ7IGErKylcbiAgICBuLnB1c2goW2EsIHQgLSAxIC0gYV0pO1xuICByZXR1cm4gbjtcbn0sIGZlID0gKHQpID0+IFtbTWF0aC5mbG9vcih0IC8gMildLCBbLTFdXSwgWHQgPSAodCwgbiwgYSkgPT4ge1xuICBjb25zdCBbYywgcl0gPSBCKDApLCBbcywgb10gPSBCKFtbXV0pO1xuICBWKCgpID0+IHtcbiAgICBpZiAodCA9PT0gXCJ0aGlua2luZ1wiKVxuICAgICAgbyhmZShuKSk7XG4gICAgZWxzZSBpZiAodCA9PT0gXCJjb25uZWN0aW5nXCIgfHwgdCA9PT0gXCJpbml0aWFsaXppbmdcIikge1xuICAgICAgY29uc3QgaSA9IFsuLi5RdChuKV07XG4gICAgICBvKGkpO1xuICAgIH0gZWxzZSBvKHQgPT09IFwibGlzdGVuaW5nXCIgPyBmZShuKSA6IHQgPT09IHZvaWQgMCB8fCB0ID09PSBcInNwZWFraW5nXCIgPyBbbmV3IEFycmF5KG4pLmZpbGwoMCkubWFwKChpLCBkKSA9PiBkKV0gOiBbW11dKTtcbiAgICByKDApO1xuICB9LCBbdCwgbl0pO1xuICBjb25zdCBsID0geihudWxsKTtcbiAgcmV0dXJuIFYoKCkgPT4ge1xuICAgIGxldCBpID0gcGVyZm9ybWFuY2Uubm93KCk7XG4gICAgY29uc3QgZCA9ICh1KSA9PiB7XG4gICAgICB1IC0gaSA+PSBhICYmIChyKChmKSA9PiBmICsgMSksIGkgPSB1KSwgbC5jdXJyZW50ID0gcmVxdWVzdEFuaW1hdGlvbkZyYW1lKGQpO1xuICAgIH07XG4gICAgcmV0dXJuIGwuY3VycmVudCA9IHJlcXVlc3RBbmltYXRpb25GcmFtZShkKSwgKCkgPT4ge1xuICAgICAgbC5jdXJyZW50ICE9PSBudWxsICYmIGNhbmNlbEFuaW1hdGlvbkZyYW1lKGwuY3VycmVudCk7XG4gICAgfTtcbiAgfSwgW2EsIG4sIHQsIHMubGVuZ3RoXSksIHNbYyAlIHMubGVuZ3RoXTtcbn0sIFl0ID0gLyogQF9fUFVSRV9fICovIG5ldyBNYXAoW1xuICBbXCJjb25uZWN0aW5nXCIsIDJlM10sXG4gIFtcImluaXRpYWxpemluZ1wiLCAyZTNdLFxuICBbXCJsaXN0ZW5pbmdcIiwgNTAwXSxcbiAgW1widGhpbmtpbmdcIiwgMTUwXVxuXSksIEp0ID0gKHQsIG4pID0+IHtcbiAgaWYgKHQgPT09IHZvaWQgMClcbiAgICByZXR1cm4gMWUzO1xuICBsZXQgYSA9IFl0LmdldCh0KTtcbiAgaWYgKGEpXG4gICAgc3dpdGNoICh0KSB7XG4gICAgICBjYXNlIFwiY29ubmVjdGluZ1wiOlxuICAgICAgICBhIC89IG47XG4gICAgICAgIGJyZWFrO1xuICAgIH1cbiAgcmV0dXJuIGE7XG59LCBLdCA9IC8qIEBfX1BVUkVfXyAqLyBlLmZvcndhcmRSZWYoXG4gIGZ1bmN0aW9uKHsgc3RhdGU6IG4sIG9wdGlvbnM6IGEsIGJhckNvdW50OiBjID0gMTUsIHRyYWNrUmVmOiByLCB0cmFjazogcywgY2hpbGRyZW46IG8sIC4uLmwgfSwgaSkge1xuICAgIGNvbnN0IGQgPSBJKGwsIHsgY2xhc3NOYW1lOiBcImxrLWF1ZGlvLWJhci12aXN1YWxpemVyXCIgfSk7XG4gICAgbGV0IHUgPSB0ZSgpO1xuICAgIChyIHx8IHMpICYmICh1ID0gciB8fCBzKTtcbiAgICBjb25zdCB2ID0gRWUodSwge1xuICAgICAgYmFuZHM6IGMsXG4gICAgICBsb1Bhc3M6IDEwMCxcbiAgICAgIGhpUGFzczogMjAwXG4gICAgfSksIGYgPSAoYSA9PSBudWxsID8gdm9pZCAwIDogYS5taW5IZWlnaHQpID8/IDIwLCBwID0gKGEgPT0gbnVsbCA/IHZvaWQgMCA6IGEubWF4SGVpZ2h0KSA/PyAxMDAsIEUgPSBYdChcbiAgICAgIG4sXG4gICAgICBjLFxuICAgICAgSnQobiwgYykgPz8gMTAwXG4gICAgKTtcbiAgICByZXR1cm4gLyogQF9fUFVSRV9fICovIGUuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7IHJlZjogaSwgLi4uZCwgXCJkYXRhLWxrLXZhLXN0YXRlXCI6IG4gfSwgdi5tYXAoXG4gICAgICAoaCwgbSkgPT4gbyA/IGVlKG8sIHtcbiAgICAgICAgXCJkYXRhLWxrLWhpZ2hsaWdodGVkXCI6IEUuaW5jbHVkZXMobSksXG4gICAgICAgIFwiZGF0YS1say1iYXItaW5kZXhcIjogbSxcbiAgICAgICAgY2xhc3NOYW1lOiBcImxrLWF1ZGlvLWJhclwiLFxuICAgICAgICBzdHlsZTogeyBoZWlnaHQ6IGAke01hdGgubWluKHAsIE1hdGgubWF4KGYsIGggKiAxMDAgKyA1KSl9JWAgfVxuICAgICAgfSkgOiAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KFxuICAgICAgICBcInNwYW5cIixcbiAgICAgICAge1xuICAgICAgICAgIGtleTogbSxcbiAgICAgICAgICBcImRhdGEtbGstaGlnaGxpZ2h0ZWRcIjogRS5pbmNsdWRlcyhtKSxcbiAgICAgICAgICBcImRhdGEtbGstYmFyLWluZGV4XCI6IG0sXG4gICAgICAgICAgY2xhc3NOYW1lOiBgbGstYXVkaW8tYmFyICR7RS5pbmNsdWRlcyhtKSAmJiBcImxrLWhpZ2hsaWdodGVkXCJ9YCxcbiAgICAgICAgICBzdHlsZToge1xuICAgICAgICAgICAgLy8gVE9ETyB0cmFuc2Zvcm0gYW5pbWF0aW9ucyB3b3VsZCBiZSBtb3JlIHBlcmZvcm1hbnQsIGhvd2V2ZXIgdGhlIGJvcmRlci1yYWRpdXMgZ2V0cyBkaXN0b3J0ZWQgd2hlbiB1c2luZyBzY2FsZSB0cmFuc2Zvcm1zLiBhIDktc2xpY2UgYXBwcm9hY2ggKG9yIDMgaW4gdGhpcyBjYXNlKSBjb3VsZCB3b3JrXG4gICAgICAgICAgICAvLyB0cmFuc2Zvcm06IGBzY2FsZSgxLCAke01hdGgubWluKG1heEhlaWdodCwgTWF0aC5tYXgobWluSGVpZ2h0LCB2b2x1bWUpKX1gLFxuICAgICAgICAgICAgaGVpZ2h0OiBgJHtNYXRoLm1pbihwLCBNYXRoLm1heChmLCBoICogMTAwICsgNSkpfSVgXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICApXG4gICAgKSk7XG4gIH1cbiksIENhID0gLyogQF9fUFVSRV9fICovIGUuZm9yd2FyZFJlZihcbiAgZnVuY3Rpb24oe1xuICAgIGNoaWxkcmVuOiBuLFxuICAgIGRpc2FibGVTcGVha2luZ0luZGljYXRvcjogYSxcbiAgICBvblBhcnRpY2lwYW50Q2xpY2s6IGMsXG4gICAgdHJhY2tSZWY6IHIsXG4gICAgLi4uc1xuICB9LCBvKSB7XG4gICAgY29uc3QgbCA9IF8ociksIHsgZWxlbWVudFByb3BzOiBpIH0gPSB2ZSh7XG4gICAgICB0cmFja1JlZjogbCxcbiAgICAgIGh0bWxQcm9wczogcyxcbiAgICAgIGRpc2FibGVTcGVha2luZ0luZGljYXRvcjogYSxcbiAgICAgIG9uUGFydGljaXBhbnRDbGljazogY1xuICAgIH0pO1xuICAgIHJldHVybiAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHsgcmVmOiBvLCBzdHlsZTogeyBwb3NpdGlvbjogXCJyZWxhdGl2ZVwiLCBtaW5IZWlnaHQ6IFwiMTYwcHhcIiB9LCAuLi5pIH0sIC8qIEBfX1BVUkVfXyAqLyBlLmNyZWF0ZUVsZW1lbnQoYWUuUHJvdmlkZXIsIHsgdmFsdWU6IGwgfSwgbiA/PyAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KGUuRnJhZ21lbnQsIG51bGwsICQobCkgJiYgLyogQF9fUFVSRV9fICovIGUuY3JlYXRlRWxlbWVudChuZSwgeyB0cmFja1JlZjogbCB9KSwgLyogQF9fUFVSRV9fICovIGUuY3JlYXRlRWxlbWVudChLdCwgeyBiYXJDb3VudDogNywgb3B0aW9uczogeyBtaW5IZWlnaHQ6IDggfSB9KSwgLyogQF9fUFVSRV9fICovIGUuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJsay1wYXJ0aWNpcGFudC1tZXRhZGF0YVwiIH0sIC8qIEBfX1BVUkVfXyAqLyBlLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwibGstcGFydGljaXBhbnQtbWV0YWRhdGEtaXRlbVwiIH0sIC8qIEBfX1BVUkVfXyAqLyBlLmNyZWF0ZUVsZW1lbnQoYmUsIHsgdHJhY2tSZWY6IGwgfSksIC8qIEBfX1BVUkVfXyAqLyBlLmNyZWF0ZUVsZW1lbnQoSywgbnVsbCkpLCAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KHllLCB7IGNsYXNzTmFtZTogXCJsay1wYXJ0aWNpcGFudC1tZXRhZGF0YS1pdGVtXCIgfSkpKSkpO1xuICB9XG4pO1xuZnVuY3Rpb24gSWEodCkge1xuICBjb25zdCBbbiwgYV0gPSBlLnVzZVN0YXRlKHZvaWQgMCksIGMgPSBoZSh0LnJvb20pO1xuICByZXR1cm4gZS51c2VFZmZlY3QoKCkgPT4ge1xuICAgIHN3aXRjaCAoYykge1xuICAgICAgY2FzZSBYLlJlY29ubmVjdGluZzpcbiAgICAgICAgYShcbiAgICAgICAgICAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KGUuRnJhZ21lbnQsIG51bGwsIC8qIEBfX1BVUkVfXyAqLyBlLmNyZWF0ZUVsZW1lbnQob2UsIHsgY2xhc3NOYW1lOiBcImxrLXNwaW5uZXJcIiB9KSwgXCIgUmVjb25uZWN0aW5nXCIpXG4gICAgICAgICk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBYLkNvbm5lY3Rpbmc6XG4gICAgICAgIGEoXG4gICAgICAgICAgLyogQF9fUFVSRV9fICovIGUuY3JlYXRlRWxlbWVudChlLkZyYWdtZW50LCBudWxsLCAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KG9lLCB7IGNsYXNzTmFtZTogXCJsay1zcGlubmVyXCIgfSksIFwiIENvbm5lY3RpbmdcIilcbiAgICAgICAgKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIFguRGlzY29ubmVjdGVkOlxuICAgICAgICBhKC8qIEBfX1BVUkVfXyAqLyBlLmNyZWF0ZUVsZW1lbnQoZS5GcmFnbWVudCwgbnVsbCwgXCJEaXNjb25uZWN0ZWRcIikpO1xuICAgICAgICBicmVhaztcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIGEodm9pZCAwKTtcbiAgICAgICAgYnJlYWs7XG4gICAgfVxuICB9LCBbY10pLCBuID8gLyogQF9fUFVSRV9fICovIGUuY3JlYXRlRWxlbWVudChHdCwgeyBjbGFzc05hbWU6IFwibGstdG9hc3QtY29ubmVjdGlvbi1zdGF0ZVwiIH0sIG4pIDogLyogQF9fUFVSRV9fICovIGUuY3JlYXRlRWxlbWVudChlLkZyYWdtZW50LCBudWxsKTtcbn1cbmNvbnN0IHhhID0gLyogQF9fUFVSRV9fICovIGUuZm9yd2FyZFJlZihcbiAgZnVuY3Rpb24oeyBlbnRyeTogbiwgaGlkZU5hbWU6IGEgPSAhMSwgaGlkZVRpbWVzdGFtcDogYyA9ICExLCBtZXNzYWdlRm9ybWF0dGVyOiByLCAuLi5zIH0sIG8pIHtcbiAgICB2YXIgZiwgcCwgRSwgaDtcbiAgICBjb25zdCBsID0gZS51c2VNZW1vKCgpID0+IHIgPyByKG4ubWVzc2FnZSkgOiBuLm1lc3NhZ2UsIFtuLm1lc3NhZ2UsIHJdKSwgaSA9ICEhbi5lZGl0VGltZXN0YW1wLCBkID0gbmV3IERhdGUobi50aW1lc3RhbXApLCB1ID0gdHlwZW9mIG5hdmlnYXRvciA8IFwidVwiID8gbmF2aWdhdG9yLmxhbmd1YWdlIDogXCJlbi1VU1wiLCB2ID0gKChmID0gbi5mcm9tKSA9PSBudWxsID8gdm9pZCAwIDogZi5uYW1lKSA/PyAoKHAgPSBuLmZyb20pID09IG51bGwgPyB2b2lkIDAgOiBwLmlkZW50aXR5KTtcbiAgICByZXR1cm4gLyogQF9fUFVSRV9fICovIGUuY3JlYXRlRWxlbWVudChcbiAgICAgIFwibGlcIixcbiAgICAgIHtcbiAgICAgICAgcmVmOiBvLFxuICAgICAgICBjbGFzc05hbWU6IFwibGstY2hhdC1lbnRyeVwiLFxuICAgICAgICB0aXRsZTogZC50b0xvY2FsZVRpbWVTdHJpbmcodSwgeyB0aW1lU3R5bGU6IFwiZnVsbFwiIH0pLFxuICAgICAgICBcImRhdGEtbGstbWVzc2FnZS1vcmlnaW5cIjogKEUgPSBuLmZyb20pICE9IG51bGwgJiYgRS5pc0xvY2FsID8gXCJsb2NhbFwiIDogXCJyZW1vdGVcIixcbiAgICAgICAgLi4uc1xuICAgICAgfSxcbiAgICAgICghYyB8fCAhYSB8fCBpKSAmJiAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KFwic3BhblwiLCB7IGNsYXNzTmFtZTogXCJsay1tZXRhLWRhdGFcIiB9LCAhYSAmJiAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KFwic3Ryb25nXCIsIHsgY2xhc3NOYW1lOiBcImxrLXBhcnRpY2lwYW50LW5hbWVcIiB9LCB2KSwgKCFjIHx8IGkpICYmIC8qIEBfX1BVUkVfXyAqLyBlLmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIsIHsgY2xhc3NOYW1lOiBcImxrLXRpbWVzdGFtcFwiIH0sIGkgJiYgXCJlZGl0ZWQgXCIsIGQudG9Mb2NhbGVUaW1lU3RyaW5nKHUsIHsgdGltZVN0eWxlOiBcInNob3J0XCIgfSkpKSxcbiAgICAgIC8qIEBfX1BVUkVfXyAqLyBlLmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIsIHsgY2xhc3NOYW1lOiBcImxrLW1lc3NhZ2UtYm9keVwiIH0sIGwpLFxuICAgICAgLyogQF9fUFVSRV9fICovIGUuY3JlYXRlRWxlbWVudChcInNwYW5cIiwgeyBjbGFzc05hbWU6IFwibGstbWVzc2FnZS1hdHRhY2hlbWVudHNcIiB9LCAoaCA9IG4uYXR0YWNoZWRGaWxlcykgPT0gbnVsbCA/IHZvaWQgMCA6IGgubWFwKFxuICAgICAgICAobSkgPT4gbS50eXBlLnN0YXJ0c1dpdGgoXCJpbWFnZS9cIikgJiYgLyogQF9fUFVSRV9fICovIGUuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICBcImltZ1wiLFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIHN0eWxlOiB7IG1heFdpZHRoOiBcIjMwMHB4XCIsIG1heEhlaWdodDogXCIzMDBweFwiIH0sXG4gICAgICAgICAgICBrZXk6IG0ubmFtZSxcbiAgICAgICAgICAgIHNyYzogVVJMLmNyZWF0ZU9iamVjdFVSTChtKSxcbiAgICAgICAgICAgIGFsdDogbS5uYW1lXG4gICAgICAgICAgfVxuICAgICAgICApXG4gICAgICApKVxuICAgICk7XG4gIH1cbik7XG5mdW5jdGlvbiBQYSh0KSB7XG4gIHJldHVybiBodCh0LCBndCgpKS5tYXAoKG4sIGEpID0+IHtcbiAgICBpZiAodHlwZW9mIG4gPT0gXCJzdHJpbmdcIilcbiAgICAgIHJldHVybiBuO1xuICAgIHtcbiAgICAgIGNvbnN0IGMgPSBuLmNvbnRlbnQudG9TdHJpbmcoKSwgciA9IG4udHlwZSA9PT0gXCJ1cmxcIiA/IC9eaHR0cChzPyk6XFwvXFwvLy50ZXN0KGMpID8gYyA6IGBodHRwczovLyR7Y31gIDogYG1haWx0bzoke2N9YDtcbiAgICAgIHJldHVybiAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KFwiYVwiLCB7IGNsYXNzTmFtZTogXCJsay1jaGF0LWxpbmtcIiwga2V5OiBhLCBocmVmOiByLCB0YXJnZXQ6IFwiX2JsYW5rXCIsIHJlbDogXCJub3JlZmVycmVyXCIgfSwgYyk7XG4gICAgfVxuICB9KTtcbn1cbmZ1bmN0aW9uIFRhKHQpIHtcbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBlLmNyZWF0ZUVsZW1lbnQodnQuUHJvdmlkZXIsIHsgdmFsdWU6IHQuc2Vzc2lvbiB9LCAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KEV0LlByb3ZpZGVyLCB7IHZhbHVlOiB0LnNlc3Npb24ucm9vbSB9LCB0LmNoaWxkcmVuKSk7XG59XG5leHBvcnQge1xuICBQdCBhcyAkLFxuICBNYSBhcyBBLFxuICBLdCBhcyBCLFxuICBzYSBhcyBDLFxuICBpYSBhcyBELFxuICBwdCBhcyBFLFxuICBFYSBhcyBGLFxuICB3YSBhcyBHLFxuICB3dCBhcyBILFxuICBpZSBhcyBJLFxuICBrdCBhcyBKLFxuICBSdCBhcyBLLFxuICBSYSBhcyBMLFxuICBmYSBhcyBNLFxuICBNdCBhcyBOLFxuICB5dCBhcyBPLFxuICBPdCBhcyBQLFxuICBidCBhcyBRLFxuICBiYSBhcyBSLFxuICBvYSBhcyBTLFxuICB2YSBhcyBULFxuICBTdCBhcyBVLFxuICBCdCBhcyBWLFxuICBDdCBhcyBXLFxuICBJdCBhcyBYLFxuICBSZSBhcyBZLFxuICB4dCBhcyBaLFxuICBvZSBhcyBfLFxuICB4YSBhcyBhLFxuICBOdCBhcyBiLFxuICB1YSBhcyBjLFxuICBkYSBhcyBkLFxuICBtYSBhcyBlLFxuICBnYSBhcyBmLFxuICBrYSBhcyBnLFxuICBwYSBhcyBoLFxuICBJYSBhcyBpLFxuICBDZSBhcyBqLFxuICBDYSBhcyBrLFxuICBHdCBhcyBsLFxuICBQYSBhcyBtLFxuICBjYSBhcyBuLFxuICBsYSBhcyBvLFxuICBUdCBhcyBwLFxuICBoYSBhcyBxLFxuICB5ZSBhcyByLFxuICBuZSBhcyBzLFxuICBLIGFzIHQsXG4gIGJlIGFzIHUsXG4gIHlhIGFzIHYsXG4gIFNhIGFzIHcsXG4gIGp0IGFzIHgsXG4gIF90IGFzIHksXG4gIFRhIGFzIHpcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jb21wb25lbnRzLUR1UkJ0R3A4Lm1qcy5tYXBcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@livekit/components-react/dist/components-DuRBtGp8.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@livekit/components-react/dist/contexts-CsO1QZ3r.mjs":
/*!***************************************************************************!*\
  !*** ./node_modules/@livekit/components-react/dist/contexts-CsO1QZ3r.mjs ***!
  \***************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   $: () => (/* binding */ Xs),\n/* harmony export */   A: () => (/* binding */ bs),\n/* harmony export */   B: () => (/* binding */ Go),\n/* harmony export */   C: () => (/* binding */ _o),\n/* harmony export */   D: () => (/* binding */ Us),\n/* harmony export */   E: () => (/* binding */ Os),\n/* harmony export */   F: () => (/* binding */ na),\n/* harmony export */   G: () => (/* binding */ fs),\n/* harmony export */   H: () => (/* binding */ As),\n/* harmony export */   I: () => (/* binding */ _s),\n/* harmony export */   J: () => (/* binding */ xs),\n/* harmony export */   K: () => (/* binding */ Ss),\n/* harmony export */   L: () => (/* binding */ Xo),\n/* harmony export */   M: () => (/* binding */ gs),\n/* harmony export */   N: () => (/* binding */ js),\n/* harmony export */   O: () => (/* binding */ Bs),\n/* harmony export */   P: () => (/* binding */ Vs),\n/* harmony export */   Q: () => (/* binding */ Ns),\n/* harmony export */   R: () => (/* binding */ Hn),\n/* harmony export */   S: () => (/* binding */ Is),\n/* harmony export */   T: () => (/* binding */ Ms),\n/* harmony export */   U: () => (/* binding */ ho),\n/* harmony export */   V: () => (/* binding */ qs),\n/* harmony export */   W: () => (/* binding */ vs),\n/* harmony export */   X: () => (/* binding */ zt),\n/* harmony export */   Y: () => (/* binding */ ys),\n/* harmony export */   Z: () => (/* binding */ Ws),\n/* harmony export */   _: () => (/* binding */ Zs),\n/* harmony export */   a: () => (/* binding */ ta),\n/* harmony export */   a0: () => (/* binding */ Es),\n/* harmony export */   a1: () => (/* binding */ B),\n/* harmony export */   a2: () => (/* binding */ Ks),\n/* harmony export */   a3: () => (/* binding */ Qs),\n/* harmony export */   a4: () => (/* binding */ Gs),\n/* harmony export */   a5: () => (/* binding */ hs),\n/* harmony export */   a6: () => (/* binding */ ps),\n/* harmony export */   a7: () => (/* binding */ Ls),\n/* harmony export */   a8: () => (/* binding */ po),\n/* harmony export */   a9: () => (/* binding */ Cs),\n/* harmony export */   aA: () => (/* binding */ aa),\n/* harmony export */   aB: () => (/* binding */ fa),\n/* harmony export */   aC: () => (/* binding */ oa),\n/* harmony export */   aa: () => (/* binding */ ea),\n/* harmony export */   ab: () => (/* binding */ Mo),\n/* harmony export */   ac: () => (/* binding */ Jo),\n/* harmony export */   ad: () => (/* binding */ da),\n/* harmony export */   ae: () => (/* binding */ Bn),\n/* harmony export */   af: () => (/* binding */ Wn),\n/* harmony export */   ag: () => (/* binding */ Fs),\n/* harmony export */   ah: () => (/* binding */ es),\n/* harmony export */   ai: () => (/* binding */ Hr),\n/* harmony export */   aj: () => (/* binding */ Vn),\n/* harmony export */   ak: () => (/* binding */ jn),\n/* harmony export */   al: () => (/* binding */ pa),\n/* harmony export */   am: () => (/* binding */ Js),\n/* harmony export */   an: () => (/* binding */ rs),\n/* harmony export */   ao: () => (/* binding */ ia),\n/* harmony export */   ap: () => (/* binding */ cs),\n/* harmony export */   aq: () => (/* binding */ as),\n/* harmony export */   ar: () => (/* binding */ zn),\n/* harmony export */   as: () => (/* binding */ os),\n/* harmony export */   at: () => (/* binding */ ss),\n/* harmony export */   au: () => (/* binding */ ds),\n/* harmony export */   av: () => (/* binding */ ra),\n/* harmony export */   aw: () => (/* binding */ ts),\n/* harmony export */   ax: () => (/* binding */ is),\n/* harmony export */   ay: () => (/* binding */ us),\n/* harmony export */   az: () => (/* binding */ ls),\n/* harmony export */   b: () => (/* binding */ zs),\n/* harmony export */   c: () => (/* binding */ ca),\n/* harmony export */   d: () => (/* binding */ $s),\n/* harmony export */   e: () => (/* binding */ ws),\n/* harmony export */   f: () => (/* binding */ ua),\n/* harmony export */   g: () => (/* binding */ Do),\n/* harmony export */   h: () => (/* binding */ Ds),\n/* harmony export */   i: () => (/* binding */ sa),\n/* harmony export */   j: () => (/* binding */ Ko),\n/* harmony export */   k: () => (/* binding */ Hs),\n/* harmony export */   l: () => (/* binding */ L),\n/* harmony export */   m: () => (/* binding */ ns),\n/* harmony export */   n: () => (/* binding */ lo),\n/* harmony export */   o: () => (/* binding */ Io),\n/* harmony export */   p: () => (/* binding */ N),\n/* harmony export */   q: () => (/* binding */ Ps),\n/* harmony export */   r: () => (/* binding */ Oo),\n/* harmony export */   s: () => (/* binding */ Ys),\n/* harmony export */   t: () => (/* binding */ Dn),\n/* harmony export */   u: () => (/* binding */ la),\n/* harmony export */   v: () => (/* binding */ ks),\n/* harmony export */   w: () => (/* binding */ Qo),\n/* harmony export */   x: () => (/* binding */ Ts),\n/* harmony export */   y: () => (/* binding */ Rs),\n/* harmony export */   z: () => (/* binding */ ms)\n/* harmony export */ });\n/* harmony import */ var livekit_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! livekit-client */ \"(ssr)/./node_modules/livekit-client/dist/livekit-client.esm.mjs\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n\n\nconst De = Math.min, ue = Math.max, $e = Math.round, _e = Math.floor, J = (e) => ({\n  x: e,\n  y: e\n}), Jn = {\n  left: \"right\",\n  right: \"left\",\n  bottom: \"top\",\n  top: \"bottom\"\n}, Xn = {\n  start: \"end\",\n  end: \"start\"\n};\nfunction Et(e, t, n) {\n  return ue(e, De(t, n));\n}\nfunction He(e, t) {\n  return typeof e == \"function\" ? e(t) : e;\n}\nfunction le(e) {\n  return e.split(\"-\")[0];\n}\nfunction ze(e) {\n  return e.split(\"-\")[1];\n}\nfunction Qt(e) {\n  return e === \"x\" ? \"y\" : \"x\";\n}\nfunction Jt(e) {\n  return e === \"y\" ? \"height\" : \"width\";\n}\nconst Zn = /* @__PURE__ */ new Set([\"top\", \"bottom\"]);\nfunction ie(e) {\n  return Zn.has(le(e)) ? \"y\" : \"x\";\n}\nfunction Xt(e) {\n  return Qt(ie(e));\n}\nfunction er(e, t, n) {\n  n === void 0 && (n = !1);\n  const r = ze(e), i = Xt(e), o = Jt(i);\n  let s = i === \"x\" ? r === (n ? \"end\" : \"start\") ? \"right\" : \"left\" : r === \"start\" ? \"bottom\" : \"top\";\n  return t.reference[o] > t.floating[o] && (s = Ne(s)), [s, Ne(s)];\n}\nfunction tr(e) {\n  const t = Ne(e);\n  return [st(e), t, st(t)];\n}\nfunction st(e) {\n  return e.replace(/start|end/g, (t) => Xn[t]);\n}\nconst Ct = [\"left\", \"right\"], Pt = [\"right\", \"left\"], nr = [\"top\", \"bottom\"], rr = [\"bottom\", \"top\"];\nfunction ir(e, t, n) {\n  switch (e) {\n    case \"top\":\n    case \"bottom\":\n      return n ? t ? Pt : Ct : t ? Ct : Pt;\n    case \"left\":\n    case \"right\":\n      return t ? nr : rr;\n    default:\n      return [];\n  }\n}\nfunction or(e, t, n, r) {\n  const i = ze(e);\n  let o = ir(le(e), n === \"start\", r);\n  return i && (o = o.map((s) => s + \"-\" + i), t && (o = o.concat(o.map(st)))), o;\n}\nfunction Ne(e) {\n  return e.replace(/left|right|bottom|top/g, (t) => Jn[t]);\n}\nfunction sr(e) {\n  return {\n    top: 0,\n    right: 0,\n    bottom: 0,\n    left: 0,\n    ...e\n  };\n}\nfunction ar(e) {\n  return typeof e != \"number\" ? sr(e) : {\n    top: e,\n    right: e,\n    bottom: e,\n    left: e\n  };\n}\nfunction Fe(e) {\n  const {\n    x: t,\n    y: n,\n    width: r,\n    height: i\n  } = e;\n  return {\n    width: r,\n    height: i,\n    top: n,\n    left: t,\n    right: t + r,\n    bottom: n + i,\n    x: t,\n    y: n\n  };\n}\nfunction Ot(e, t, n) {\n  let {\n    reference: r,\n    floating: i\n  } = e;\n  const o = ie(t), s = Xt(t), a = Jt(s), c = le(t), u = o === \"y\", l = r.x + r.width / 2 - i.width / 2, f = r.y + r.height / 2 - i.height / 2, v = r[a] / 2 - i[a] / 2;\n  let d;\n  switch (c) {\n    case \"top\":\n      d = {\n        x: l,\n        y: r.y - i.height\n      };\n      break;\n    case \"bottom\":\n      d = {\n        x: l,\n        y: r.y + r.height\n      };\n      break;\n    case \"right\":\n      d = {\n        x: r.x + r.width,\n        y: f\n      };\n      break;\n    case \"left\":\n      d = {\n        x: r.x - i.width,\n        y: f\n      };\n      break;\n    default:\n      d = {\n        x: r.x,\n        y: r.y\n      };\n  }\n  switch (ze(t)) {\n    case \"start\":\n      d[s] -= v * (n && u ? -1 : 1);\n      break;\n    case \"end\":\n      d[s] += v * (n && u ? -1 : 1);\n      break;\n  }\n  return d;\n}\nconst cr = async (e, t, n) => {\n  const {\n    placement: r = \"bottom\",\n    strategy: i = \"absolute\",\n    middleware: o = [],\n    platform: s\n  } = n, a = o.filter(Boolean), c = await (s.isRTL == null ? void 0 : s.isRTL(t));\n  let u = await s.getElementRects({\n    reference: e,\n    floating: t,\n    strategy: i\n  }), {\n    x: l,\n    y: f\n  } = Ot(u, r, c), v = r, d = {}, m = 0;\n  for (let p = 0; p < a.length; p++) {\n    const {\n      name: g,\n      fn: h\n    } = a[p], {\n      x,\n      y: E,\n      data: O,\n      reset: b\n    } = await h({\n      x: l,\n      y: f,\n      initialPlacement: r,\n      placement: v,\n      strategy: i,\n      middlewareData: d,\n      rects: u,\n      platform: s,\n      elements: {\n        reference: e,\n        floating: t\n      }\n    });\n    l = x ?? l, f = E ?? f, d = {\n      ...d,\n      [g]: {\n        ...d[g],\n        ...O\n      }\n    }, b && m <= 50 && (m++, typeof b == \"object\" && (b.placement && (v = b.placement), b.rects && (u = b.rects === !0 ? await s.getElementRects({\n      reference: e,\n      floating: t,\n      strategy: i\n    }) : b.rects), {\n      x: l,\n      y: f\n    } = Ot(u, v, c)), p = -1);\n  }\n  return {\n    x: l,\n    y: f,\n    placement: v,\n    strategy: i,\n    middlewareData: d\n  };\n};\nasync function Zt(e, t) {\n  var n;\n  t === void 0 && (t = {});\n  const {\n    x: r,\n    y: i,\n    platform: o,\n    rects: s,\n    elements: a,\n    strategy: c\n  } = e, {\n    boundary: u = \"clippingAncestors\",\n    rootBoundary: l = \"viewport\",\n    elementContext: f = \"floating\",\n    altBoundary: v = !1,\n    padding: d = 0\n  } = He(t, e), m = ar(d), g = a[v ? f === \"floating\" ? \"reference\" : \"floating\" : f], h = Fe(await o.getClippingRect({\n    element: (n = await (o.isElement == null ? void 0 : o.isElement(g))) == null || n ? g : g.contextElement || await (o.getDocumentElement == null ? void 0 : o.getDocumentElement(a.floating)),\n    boundary: u,\n    rootBoundary: l,\n    strategy: c\n  })), x = f === \"floating\" ? {\n    x: r,\n    y: i,\n    width: s.floating.width,\n    height: s.floating.height\n  } : s.reference, E = await (o.getOffsetParent == null ? void 0 : o.getOffsetParent(a.floating)), O = await (o.isElement == null ? void 0 : o.isElement(E)) ? await (o.getScale == null ? void 0 : o.getScale(E)) || {\n    x: 1,\n    y: 1\n  } : {\n    x: 1,\n    y: 1\n  }, b = Fe(o.convertOffsetParentRelativeRectToViewportRelativeRect ? await o.convertOffsetParentRelativeRectToViewportRelativeRect({\n    elements: a,\n    rect: x,\n    offsetParent: E,\n    strategy: c\n  }) : x);\n  return {\n    top: (h.top - b.top + m.top) / O.y,\n    bottom: (b.bottom - h.bottom + m.bottom) / O.y,\n    left: (h.left - b.left + m.left) / O.x,\n    right: (b.right - h.right + m.right) / O.x\n  };\n}\nconst ur = function(e) {\n  return e === void 0 && (e = {}), {\n    name: \"flip\",\n    options: e,\n    async fn(t) {\n      var n, r;\n      const {\n        placement: i,\n        middlewareData: o,\n        rects: s,\n        initialPlacement: a,\n        platform: c,\n        elements: u\n      } = t, {\n        mainAxis: l = !0,\n        crossAxis: f = !0,\n        fallbackPlacements: v,\n        fallbackStrategy: d = \"bestFit\",\n        fallbackAxisSideDirection: m = \"none\",\n        flipAlignment: p = !0,\n        ...g\n      } = He(e, t);\n      if ((n = o.arrow) != null && n.alignmentOffset)\n        return {};\n      const h = le(i), x = ie(a), E = le(a) === a, O = await (c.isRTL == null ? void 0 : c.isRTL(u.floating)), b = v || (E || !p ? [Ne(a)] : tr(a)), S = m !== \"none\";\n      !v && S && b.push(...or(a, p, m, O));\n      const C = [a, ...b], $ = await Zt(t, g), M = [];\n      let V = ((r = o.flip) == null ? void 0 : r.overflows) || [];\n      if (l && M.push($[h]), f) {\n        const Q = er(i, s, O);\n        M.push($[Q[0]], $[Q[1]]);\n      }\n      if (V = [...V, {\n        placement: i,\n        overflows: M\n      }], !M.every((Q) => Q <= 0)) {\n        var T, _;\n        const Q = (((T = o.flip) == null ? void 0 : T.index) || 0) + 1, Se = C[Q];\n        if (Se && (!(f === \"alignment\" ? x !== ie(Se) : !1) || // We leave the current main axis only if every placement on that axis\n        // overflows the main axis.\n        V.every((Y) => ie(Y.placement) === x ? Y.overflows[0] > 0 : !0)))\n          return {\n            data: {\n              index: Q,\n              overflows: V\n            },\n            reset: {\n              placement: Se\n            }\n          };\n        let Te = (_ = V.filter((ae) => ae.overflows[0] <= 0).sort((ae, Y) => ae.overflows[1] - Y.overflows[1])[0]) == null ? void 0 : _.placement;\n        if (!Te)\n          switch (d) {\n            case \"bestFit\": {\n              var ee;\n              const ae = (ee = V.filter((Y) => {\n                if (S) {\n                  const re = ie(Y.placement);\n                  return re === x || // Create a bias to the `y` side axis due to horizontal\n                  // reading directions favoring greater width.\n                  re === \"y\";\n                }\n                return !0;\n              }).map((Y) => [Y.placement, Y.overflows.filter((re) => re > 0).reduce((re, Yn) => re + Yn, 0)]).sort((Y, re) => Y[1] - re[1])[0]) == null ? void 0 : ee[0];\n              ae && (Te = ae);\n              break;\n            }\n            case \"initialPlacement\":\n              Te = a;\n              break;\n          }\n        if (i !== Te)\n          return {\n            reset: {\n              placement: Te\n            }\n          };\n      }\n      return {};\n    }\n  };\n}, lr = /* @__PURE__ */ new Set([\"left\", \"top\"]);\nasync function fr(e, t) {\n  const {\n    placement: n,\n    platform: r,\n    elements: i\n  } = e, o = await (r.isRTL == null ? void 0 : r.isRTL(i.floating)), s = le(n), a = ze(n), c = ie(n) === \"y\", u = lr.has(s) ? -1 : 1, l = o && c ? -1 : 1, f = He(t, e);\n  let {\n    mainAxis: v,\n    crossAxis: d,\n    alignmentAxis: m\n  } = typeof f == \"number\" ? {\n    mainAxis: f,\n    crossAxis: 0,\n    alignmentAxis: null\n  } : {\n    mainAxis: f.mainAxis || 0,\n    crossAxis: f.crossAxis || 0,\n    alignmentAxis: f.alignmentAxis\n  };\n  return a && typeof m == \"number\" && (d = a === \"end\" ? m * -1 : m), c ? {\n    x: d * l,\n    y: v * u\n  } : {\n    x: v * u,\n    y: d * l\n  };\n}\nconst dr = function(e) {\n  return e === void 0 && (e = 0), {\n    name: \"offset\",\n    options: e,\n    async fn(t) {\n      var n, r;\n      const {\n        x: i,\n        y: o,\n        placement: s,\n        middlewareData: a\n      } = t, c = await fr(t, e);\n      return s === ((n = a.offset) == null ? void 0 : n.placement) && (r = a.arrow) != null && r.alignmentOffset ? {} : {\n        x: i + c.x,\n        y: o + c.y,\n        data: {\n          ...c,\n          placement: s\n        }\n      };\n    }\n  };\n}, pr = function(e) {\n  return e === void 0 && (e = {}), {\n    name: \"shift\",\n    options: e,\n    async fn(t) {\n      const {\n        x: n,\n        y: r,\n        placement: i\n      } = t, {\n        mainAxis: o = !0,\n        crossAxis: s = !1,\n        limiter: a = {\n          fn: (g) => {\n            let {\n              x: h,\n              y: x\n            } = g;\n            return {\n              x: h,\n              y: x\n            };\n          }\n        },\n        ...c\n      } = He(e, t), u = {\n        x: n,\n        y: r\n      }, l = await Zt(t, c), f = ie(le(i)), v = Qt(f);\n      let d = u[v], m = u[f];\n      if (o) {\n        const g = v === \"y\" ? \"top\" : \"left\", h = v === \"y\" ? \"bottom\" : \"right\", x = d + l[g], E = d - l[h];\n        d = Et(x, d, E);\n      }\n      if (s) {\n        const g = f === \"y\" ? \"top\" : \"left\", h = f === \"y\" ? \"bottom\" : \"right\", x = m + l[g], E = m - l[h];\n        m = Et(x, m, E);\n      }\n      const p = a.fn({\n        ...t,\n        [v]: d,\n        [f]: m\n      });\n      return {\n        ...p,\n        data: {\n          x: p.x - n,\n          y: p.y - r,\n          enabled: {\n            [v]: o,\n            [f]: s\n          }\n        }\n      };\n    }\n  };\n};\nfunction Ye() {\n  return typeof window < \"u\";\n}\nfunction ye(e) {\n  return en(e) ? (e.nodeName || \"\").toLowerCase() : \"#document\";\n}\nfunction j(e) {\n  var t;\n  return (e == null || (t = e.ownerDocument) == null ? void 0 : t.defaultView) || window;\n}\nfunction Z(e) {\n  var t;\n  return (t = (en(e) ? e.ownerDocument : e.document) || window.document) == null ? void 0 : t.documentElement;\n}\nfunction en(e) {\n  return Ye() ? e instanceof Node || e instanceof j(e).Node : !1;\n}\nfunction K(e) {\n  return Ye() ? e instanceof Element || e instanceof j(e).Element : !1;\n}\nfunction X(e) {\n  return Ye() ? e instanceof HTMLElement || e instanceof j(e).HTMLElement : !1;\n}\nfunction At(e) {\n  return !Ye() || typeof ShadowRoot > \"u\" ? !1 : e instanceof ShadowRoot || e instanceof j(e).ShadowRoot;\n}\nconst hr = /* @__PURE__ */ new Set([\"inline\", \"contents\"]);\nfunction Ae(e) {\n  const {\n    overflow: t,\n    overflowX: n,\n    overflowY: r,\n    display: i\n  } = G(e);\n  return /auto|scroll|overlay|hidden|clip/.test(t + r + n) && !hr.has(i);\n}\nconst vr = /* @__PURE__ */ new Set([\"table\", \"td\", \"th\"]);\nfunction mr(e) {\n  return vr.has(ye(e));\n}\nconst gr = [\":popover-open\", \":modal\"];\nfunction qe(e) {\n  return gr.some((t) => {\n    try {\n      return e.matches(t);\n    } catch {\n      return !1;\n    }\n  });\n}\nconst br = [\"transform\", \"translate\", \"scale\", \"rotate\", \"perspective\"], yr = [\"transform\", \"translate\", \"scale\", \"rotate\", \"perspective\", \"filter\"], wr = [\"paint\", \"layout\", \"strict\", \"content\"];\nfunction pt(e) {\n  const t = ht(), n = K(e) ? G(e) : e;\n  return br.some((r) => n[r] ? n[r] !== \"none\" : !1) || (n.containerType ? n.containerType !== \"normal\" : !1) || !t && (n.backdropFilter ? n.backdropFilter !== \"none\" : !1) || !t && (n.filter ? n.filter !== \"none\" : !1) || yr.some((r) => (n.willChange || \"\").includes(r)) || wr.some((r) => (n.contain || \"\").includes(r));\n}\nfunction xr(e) {\n  let t = se(e);\n  for (; X(t) && !me(t); ) {\n    if (pt(t))\n      return t;\n    if (qe(t))\n      return null;\n    t = se(t);\n  }\n  return null;\n}\nfunction ht() {\n  return typeof CSS > \"u\" || !CSS.supports ? !1 : CSS.supports(\"-webkit-backdrop-filter\", \"none\");\n}\nconst Sr = /* @__PURE__ */ new Set([\"html\", \"body\", \"#document\"]);\nfunction me(e) {\n  return Sr.has(ye(e));\n}\nfunction G(e) {\n  return j(e).getComputedStyle(e);\n}\nfunction Ke(e) {\n  return K(e) ? {\n    scrollLeft: e.scrollLeft,\n    scrollTop: e.scrollTop\n  } : {\n    scrollLeft: e.scrollX,\n    scrollTop: e.scrollY\n  };\n}\nfunction se(e) {\n  if (ye(e) === \"html\")\n    return e;\n  const t = (\n    // Step into the shadow DOM of the parent of a slotted node.\n    e.assignedSlot || // DOM Element detected.\n    e.parentNode || // ShadowRoot detected.\n    At(e) && e.host || // Fallback.\n    Z(e)\n  );\n  return At(t) ? t.host : t;\n}\nfunction tn(e) {\n  const t = se(e);\n  return me(t) ? e.ownerDocument ? e.ownerDocument.body : e.body : X(t) && Ae(t) ? t : tn(t);\n}\nfunction Ce(e, t, n) {\n  var r;\n  t === void 0 && (t = []), n === void 0 && (n = !0);\n  const i = tn(e), o = i === ((r = e.ownerDocument) == null ? void 0 : r.body), s = j(i);\n  if (o) {\n    const a = at(s);\n    return t.concat(s, s.visualViewport || [], Ae(i) ? i : [], a && n ? Ce(a) : []);\n  }\n  return t.concat(i, Ce(i, [], n));\n}\nfunction at(e) {\n  return e.parent && Object.getPrototypeOf(e.parent) ? e.frameElement : null;\n}\nfunction nn(e) {\n  const t = G(e);\n  let n = parseFloat(t.width) || 0, r = parseFloat(t.height) || 0;\n  const i = X(e), o = i ? e.offsetWidth : n, s = i ? e.offsetHeight : r, a = $e(n) !== o || $e(r) !== s;\n  return a && (n = o, r = s), {\n    width: n,\n    height: r,\n    $: a\n  };\n}\nfunction vt(e) {\n  return K(e) ? e : e.contextElement;\n}\nfunction he(e) {\n  const t = vt(e);\n  if (!X(t))\n    return J(1);\n  const n = t.getBoundingClientRect(), {\n    width: r,\n    height: i,\n    $: o\n  } = nn(t);\n  let s = (o ? $e(n.width) : n.width) / r, a = (o ? $e(n.height) : n.height) / i;\n  return (!s || !Number.isFinite(s)) && (s = 1), (!a || !Number.isFinite(a)) && (a = 1), {\n    x: s,\n    y: a\n  };\n}\nconst Tr = /* @__PURE__ */ J(0);\nfunction rn(e) {\n  const t = j(e);\n  return !ht() || !t.visualViewport ? Tr : {\n    x: t.visualViewport.offsetLeft,\n    y: t.visualViewport.offsetTop\n  };\n}\nfunction Er(e, t, n) {\n  return t === void 0 && (t = !1), !n || t && n !== j(e) ? !1 : t;\n}\nfunction fe(e, t, n, r) {\n  t === void 0 && (t = !1), n === void 0 && (n = !1);\n  const i = e.getBoundingClientRect(), o = vt(e);\n  let s = J(1);\n  t && (r ? K(r) && (s = he(r)) : s = he(e));\n  const a = Er(o, n, r) ? rn(o) : J(0);\n  let c = (i.left + a.x) / s.x, u = (i.top + a.y) / s.y, l = i.width / s.x, f = i.height / s.y;\n  if (o) {\n    const v = j(o), d = r && K(r) ? j(r) : r;\n    let m = v, p = at(m);\n    for (; p && r && d !== m; ) {\n      const g = he(p), h = p.getBoundingClientRect(), x = G(p), E = h.left + (p.clientLeft + parseFloat(x.paddingLeft)) * g.x, O = h.top + (p.clientTop + parseFloat(x.paddingTop)) * g.y;\n      c *= g.x, u *= g.y, l *= g.x, f *= g.y, c += E, u += O, m = j(p), p = at(m);\n    }\n  }\n  return Fe({\n    width: l,\n    height: f,\n    x: c,\n    y: u\n  });\n}\nfunction Ge(e, t) {\n  const n = Ke(e).scrollLeft;\n  return t ? t.left + n : fe(Z(e)).left + n;\n}\nfunction on(e, t) {\n  const n = e.getBoundingClientRect(), r = n.left + t.scrollLeft - Ge(e, n), i = n.top + t.scrollTop;\n  return {\n    x: r,\n    y: i\n  };\n}\nfunction Cr(e) {\n  let {\n    elements: t,\n    rect: n,\n    offsetParent: r,\n    strategy: i\n  } = e;\n  const o = i === \"fixed\", s = Z(r), a = t ? qe(t.floating) : !1;\n  if (r === s || a && o)\n    return n;\n  let c = {\n    scrollLeft: 0,\n    scrollTop: 0\n  }, u = J(1);\n  const l = J(0), f = X(r);\n  if ((f || !f && !o) && ((ye(r) !== \"body\" || Ae(s)) && (c = Ke(r)), X(r))) {\n    const d = fe(r);\n    u = he(r), l.x = d.x + r.clientLeft, l.y = d.y + r.clientTop;\n  }\n  const v = s && !f && !o ? on(s, c) : J(0);\n  return {\n    width: n.width * u.x,\n    height: n.height * u.y,\n    x: n.x * u.x - c.scrollLeft * u.x + l.x + v.x,\n    y: n.y * u.y - c.scrollTop * u.y + l.y + v.y\n  };\n}\nfunction Pr(e) {\n  return Array.from(e.getClientRects());\n}\nfunction Or(e) {\n  const t = Z(e), n = Ke(e), r = e.ownerDocument.body, i = ue(t.scrollWidth, t.clientWidth, r.scrollWidth, r.clientWidth), o = ue(t.scrollHeight, t.clientHeight, r.scrollHeight, r.clientHeight);\n  let s = -n.scrollLeft + Ge(e);\n  const a = -n.scrollTop;\n  return G(r).direction === \"rtl\" && (s += ue(t.clientWidth, r.clientWidth) - i), {\n    width: i,\n    height: o,\n    x: s,\n    y: a\n  };\n}\nconst kt = 25;\nfunction Ar(e, t) {\n  const n = j(e), r = Z(e), i = n.visualViewport;\n  let o = r.clientWidth, s = r.clientHeight, a = 0, c = 0;\n  if (i) {\n    o = i.width, s = i.height;\n    const l = ht();\n    (!l || l && t === \"fixed\") && (a = i.offsetLeft, c = i.offsetTop);\n  }\n  const u = Ge(r);\n  if (u <= 0) {\n    const l = r.ownerDocument, f = l.body, v = getComputedStyle(f), d = l.compatMode === \"CSS1Compat\" && parseFloat(v.marginLeft) + parseFloat(v.marginRight) || 0, m = Math.abs(r.clientWidth - f.clientWidth - d);\n    m <= kt && (o -= m);\n  } else u <= kt && (o += u);\n  return {\n    width: o,\n    height: s,\n    x: a,\n    y: c\n  };\n}\nconst kr = /* @__PURE__ */ new Set([\"absolute\", \"fixed\"]);\nfunction _r(e, t) {\n  const n = fe(e, !0, t === \"fixed\"), r = n.top + e.clientTop, i = n.left + e.clientLeft, o = X(e) ? he(e) : J(1), s = e.clientWidth * o.x, a = e.clientHeight * o.y, c = i * o.x, u = r * o.y;\n  return {\n    width: s,\n    height: a,\n    x: c,\n    y: u\n  };\n}\nfunction _t(e, t, n) {\n  let r;\n  if (t === \"viewport\")\n    r = Ar(e, n);\n  else if (t === \"document\")\n    r = Or(Z(e));\n  else if (K(t))\n    r = _r(t, n);\n  else {\n    const i = rn(e);\n    r = {\n      x: t.x - i.x,\n      y: t.y - i.y,\n      width: t.width,\n      height: t.height\n    };\n  }\n  return Fe(r);\n}\nfunction sn(e, t) {\n  const n = se(e);\n  return n === t || !K(n) || me(n) ? !1 : G(n).position === \"fixed\" || sn(n, t);\n}\nfunction Lr(e, t) {\n  const n = t.get(e);\n  if (n)\n    return n;\n  let r = Ce(e, [], !1).filter((a) => K(a) && ye(a) !== \"body\"), i = null;\n  const o = G(e).position === \"fixed\";\n  let s = o ? se(e) : e;\n  for (; K(s) && !me(s); ) {\n    const a = G(s), c = pt(s);\n    !c && a.position === \"fixed\" && (i = null), (o ? !c && !i : !c && a.position === \"static\" && !!i && kr.has(i.position) || Ae(s) && !c && sn(e, s)) ? r = r.filter((l) => l !== s) : i = a, s = se(s);\n  }\n  return t.set(e, r), r;\n}\nfunction Ir(e) {\n  let {\n    element: t,\n    boundary: n,\n    rootBoundary: r,\n    strategy: i\n  } = e;\n  const s = [...n === \"clippingAncestors\" ? qe(t) ? [] : Lr(t, this._c) : [].concat(n), r], a = s[0], c = s.reduce((u, l) => {\n    const f = _t(t, l, i);\n    return u.top = ue(f.top, u.top), u.right = De(f.right, u.right), u.bottom = De(f.bottom, u.bottom), u.left = ue(f.left, u.left), u;\n  }, _t(t, a, i));\n  return {\n    width: c.right - c.left,\n    height: c.bottom - c.top,\n    x: c.left,\n    y: c.top\n  };\n}\nfunction Mr(e) {\n  const {\n    width: t,\n    height: n\n  } = nn(e);\n  return {\n    width: t,\n    height: n\n  };\n}\nfunction Rr(e, t, n) {\n  const r = X(t), i = Z(t), o = n === \"fixed\", s = fe(e, !0, o, t);\n  let a = {\n    scrollLeft: 0,\n    scrollTop: 0\n  };\n  const c = J(0);\n  function u() {\n    c.x = Ge(i);\n  }\n  if (r || !r && !o)\n    if ((ye(t) !== \"body\" || Ae(i)) && (a = Ke(t)), r) {\n      const d = fe(t, !0, o, t);\n      c.x = d.x + t.clientLeft, c.y = d.y + t.clientTop;\n    } else i && u();\n  o && !r && i && u();\n  const l = i && !r && !o ? on(i, a) : J(0), f = s.left + a.scrollLeft - c.x - l.x, v = s.top + a.scrollTop - c.y - l.y;\n  return {\n    x: f,\n    y: v,\n    width: s.width,\n    height: s.height\n  };\n}\nfunction et(e) {\n  return G(e).position === \"static\";\n}\nfunction Lt(e, t) {\n  if (!X(e) || G(e).position === \"fixed\")\n    return null;\n  if (t)\n    return t(e);\n  let n = e.offsetParent;\n  return Z(e) === n && (n = n.ownerDocument.body), n;\n}\nfunction an(e, t) {\n  const n = j(e);\n  if (qe(e))\n    return n;\n  if (!X(e)) {\n    let i = se(e);\n    for (; i && !me(i); ) {\n      if (K(i) && !et(i))\n        return i;\n      i = se(i);\n    }\n    return n;\n  }\n  let r = Lt(e, t);\n  for (; r && mr(r) && et(r); )\n    r = Lt(r, t);\n  return r && me(r) && et(r) && !pt(r) ? n : r || xr(e) || n;\n}\nconst Dr = async function(e) {\n  const t = this.getOffsetParent || an, n = this.getDimensions, r = await n(e.floating);\n  return {\n    reference: Rr(e.reference, await t(e.floating), e.strategy),\n    floating: {\n      x: 0,\n      y: 0,\n      width: r.width,\n      height: r.height\n    }\n  };\n};\nfunction $r(e) {\n  return G(e).direction === \"rtl\";\n}\nconst Nr = {\n  convertOffsetParentRelativeRectToViewportRelativeRect: Cr,\n  getDocumentElement: Z,\n  getClippingRect: Ir,\n  getOffsetParent: an,\n  getElementRects: Dr,\n  getClientRects: Pr,\n  getDimensions: Mr,\n  getScale: he,\n  isElement: K,\n  isRTL: $r\n};\nfunction cn(e, t) {\n  return e.x === t.x && e.y === t.y && e.width === t.width && e.height === t.height;\n}\nfunction Fr(e, t) {\n  let n = null, r;\n  const i = Z(e);\n  function o() {\n    var a;\n    clearTimeout(r), (a = n) == null || a.disconnect(), n = null;\n  }\n  function s(a, c) {\n    a === void 0 && (a = !1), c === void 0 && (c = 1), o();\n    const u = e.getBoundingClientRect(), {\n      left: l,\n      top: f,\n      width: v,\n      height: d\n    } = u;\n    if (a || t(), !v || !d)\n      return;\n    const m = _e(f), p = _e(i.clientWidth - (l + v)), g = _e(i.clientHeight - (f + d)), h = _e(l), E = {\n      rootMargin: -m + \"px \" + -p + \"px \" + -g + \"px \" + -h + \"px\",\n      threshold: ue(0, De(1, c)) || 1\n    };\n    let O = !0;\n    function b(S) {\n      const C = S[0].intersectionRatio;\n      if (C !== c) {\n        if (!O)\n          return s();\n        C ? s(!1, C) : r = setTimeout(() => {\n          s(!1, 1e-7);\n        }, 1e3);\n      }\n      C === 1 && !cn(u, e.getBoundingClientRect()) && s(), O = !1;\n    }\n    try {\n      n = new IntersectionObserver(b, {\n        ...E,\n        // Handle <iframe>s\n        root: i.ownerDocument\n      });\n    } catch {\n      n = new IntersectionObserver(b, E);\n    }\n    n.observe(e);\n  }\n  return s(!0), o;\n}\nfunction Ur(e, t, n, r) {\n  r === void 0 && (r = {});\n  const {\n    ancestorScroll: i = !0,\n    ancestorResize: o = !0,\n    elementResize: s = typeof ResizeObserver == \"function\",\n    layoutShift: a = typeof IntersectionObserver == \"function\",\n    animationFrame: c = !1\n  } = r, u = vt(e), l = i || o ? [...u ? Ce(u) : [], ...Ce(t)] : [];\n  l.forEach((h) => {\n    i && h.addEventListener(\"scroll\", n, {\n      passive: !0\n    }), o && h.addEventListener(\"resize\", n);\n  });\n  const f = u && a ? Fr(u, n) : null;\n  let v = -1, d = null;\n  s && (d = new ResizeObserver((h) => {\n    let [x] = h;\n    x && x.target === u && d && (d.unobserve(t), cancelAnimationFrame(v), v = requestAnimationFrame(() => {\n      var E;\n      (E = d) == null || E.observe(t);\n    })), n();\n  }), u && !c && d.observe(u), d.observe(t));\n  let m, p = c ? fe(e) : null;\n  c && g();\n  function g() {\n    const h = fe(e);\n    p && !cn(p, h) && n(), p = h, m = requestAnimationFrame(g);\n  }\n  return n(), () => {\n    var h;\n    l.forEach((x) => {\n      i && x.removeEventListener(\"scroll\", n), o && x.removeEventListener(\"resize\", n);\n    }), f == null || f(), (h = d) == null || h.disconnect(), d = null, c && cancelAnimationFrame(m);\n  };\n}\nconst Wr = dr, jr = pr, Br = ur, Vr = (e, t, n) => {\n  const r = /* @__PURE__ */ new Map(), i = {\n    platform: Nr,\n    ...n\n  }, o = {\n    ...i.platform,\n    _c: r\n  };\n  return cr(e, t, {\n    ...i,\n    platform: o\n  });\n};\nvar es = typeof globalThis < \"u\" ? globalThis : typeof window < \"u\" ? window : typeof global < \"u\" ? global : typeof self < \"u\" ? self : {};\nfunction Hr(e) {\n  return e && e.__esModule && Object.prototype.hasOwnProperty.call(e, \"default\") ? e.default : e;\n}\nvar Me = { exports: {} }, zr = Me.exports, It;\nfunction Yr() {\n  return It || (It = 1, (function(e) {\n    (function(t, n) {\n      e.exports ? e.exports = n() : t.log = n();\n    })(zr, function() {\n      var t = function() {\n      }, n = \"undefined\", r = typeof window !== n && typeof window.navigator !== n && /Trident\\/|MSIE /.test(window.navigator.userAgent), i = [\n        \"trace\",\n        \"debug\",\n        \"info\",\n        \"warn\",\n        \"error\"\n      ], o = {}, s = null;\n      function a(p, g) {\n        var h = p[g];\n        if (typeof h.bind == \"function\")\n          return h.bind(p);\n        try {\n          return Function.prototype.bind.call(h, p);\n        } catch {\n          return function() {\n            return Function.prototype.apply.apply(h, [p, arguments]);\n          };\n        }\n      }\n      function c() {\n        console.log && (console.log.apply ? console.log.apply(console, arguments) : Function.prototype.apply.apply(console.log, [console, arguments])), console.trace && console.trace();\n      }\n      function u(p) {\n        return p === \"debug\" && (p = \"log\"), typeof console === n ? !1 : p === \"trace\" && r ? c : console[p] !== void 0 ? a(console, p) : console.log !== void 0 ? a(console, \"log\") : t;\n      }\n      function l() {\n        for (var p = this.getLevel(), g = 0; g < i.length; g++) {\n          var h = i[g];\n          this[h] = g < p ? t : this.methodFactory(h, p, this.name);\n        }\n        if (this.log = this.debug, typeof console === n && p < this.levels.SILENT)\n          return \"No console available for logging\";\n      }\n      function f(p) {\n        return function() {\n          typeof console !== n && (l.call(this), this[p].apply(this, arguments));\n        };\n      }\n      function v(p, g, h) {\n        return u(p) || f.apply(this, arguments);\n      }\n      function d(p, g) {\n        var h = this, x, E, O, b = \"loglevel\";\n        typeof p == \"string\" ? b += \":\" + p : typeof p == \"symbol\" && (b = void 0);\n        function S(T) {\n          var _ = (i[T] || \"silent\").toUpperCase();\n          if (!(typeof window === n || !b)) {\n            try {\n              window.localStorage[b] = _;\n              return;\n            } catch {\n            }\n            try {\n              window.document.cookie = encodeURIComponent(b) + \"=\" + _ + \";\";\n            } catch {\n            }\n          }\n        }\n        function C() {\n          var T;\n          if (!(typeof window === n || !b)) {\n            try {\n              T = window.localStorage[b];\n            } catch {\n            }\n            if (typeof T === n)\n              try {\n                var _ = window.document.cookie, ee = encodeURIComponent(b), Q = _.indexOf(ee + \"=\");\n                Q !== -1 && (T = /^([^;]+)/.exec(\n                  _.slice(Q + ee.length + 1)\n                )[1]);\n              } catch {\n              }\n            return h.levels[T] === void 0 && (T = void 0), T;\n          }\n        }\n        function $() {\n          if (!(typeof window === n || !b)) {\n            try {\n              window.localStorage.removeItem(b);\n            } catch {\n            }\n            try {\n              window.document.cookie = encodeURIComponent(b) + \"=; expires=Thu, 01 Jan 1970 00:00:00 UTC\";\n            } catch {\n            }\n          }\n        }\n        function M(T) {\n          var _ = T;\n          if (typeof _ == \"string\" && h.levels[_.toUpperCase()] !== void 0 && (_ = h.levels[_.toUpperCase()]), typeof _ == \"number\" && _ >= 0 && _ <= h.levels.SILENT)\n            return _;\n          throw new TypeError(\"log.setLevel() called with invalid level: \" + T);\n        }\n        h.name = p, h.levels = {\n          TRACE: 0,\n          DEBUG: 1,\n          INFO: 2,\n          WARN: 3,\n          ERROR: 4,\n          SILENT: 5\n        }, h.methodFactory = g || v, h.getLevel = function() {\n          return O ?? E ?? x;\n        }, h.setLevel = function(T, _) {\n          return O = M(T), _ !== !1 && S(O), l.call(h);\n        }, h.setDefaultLevel = function(T) {\n          E = M(T), C() || h.setLevel(T, !1);\n        }, h.resetLevel = function() {\n          O = null, $(), l.call(h);\n        }, h.enableAll = function(T) {\n          h.setLevel(h.levels.TRACE, T);\n        }, h.disableAll = function(T) {\n          h.setLevel(h.levels.SILENT, T);\n        }, h.rebuild = function() {\n          if (s !== h && (x = M(s.getLevel())), l.call(h), s === h)\n            for (var T in o)\n              o[T].rebuild();\n        }, x = M(\n          s ? s.getLevel() : \"WARN\"\n        );\n        var V = C();\n        V != null && (O = M(V)), l.call(h);\n      }\n      s = new d(), s.getLogger = function(g) {\n        if (typeof g != \"symbol\" && typeof g != \"string\" || g === \"\")\n          throw new TypeError(\"You must supply a name when creating a logger.\");\n        var h = o[g];\n        return h || (h = o[g] = new d(\n          g,\n          s.methodFactory\n        )), h;\n      };\n      var m = typeof window !== n ? window.log : void 0;\n      return s.noConflict = function() {\n        return typeof window !== n && window.log === s && (window.log = m), s;\n      }, s.getLoggers = function() {\n        return o;\n      }, s.default = s, s;\n    });\n  })(Me)), Me.exports;\n}\nvar qr = Yr();\nconst Kr = /* @__PURE__ */ Hr(qr);\nvar ct = function(e, t) {\n  return ct = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(n, r) {\n    n.__proto__ = r;\n  } || function(n, r) {\n    for (var i in r) Object.prototype.hasOwnProperty.call(r, i) && (n[i] = r[i]);\n  }, ct(e, t);\n};\nfunction ne(e, t) {\n  if (typeof t != \"function\" && t !== null)\n    throw new TypeError(\"Class extends value \" + String(t) + \" is not a constructor or null\");\n  ct(e, t);\n  function n() {\n    this.constructor = e;\n  }\n  e.prototype = t === null ? Object.create(t) : (n.prototype = t.prototype, new n());\n}\nfunction Gr(e, t, n, r) {\n  function i(o) {\n    return o instanceof n ? o : new n(function(s) {\n      s(o);\n    });\n  }\n  return new (n || (n = Promise))(function(o, s) {\n    function a(l) {\n      try {\n        u(r.next(l));\n      } catch (f) {\n        s(f);\n      }\n    }\n    function c(l) {\n      try {\n        u(r.throw(l));\n      } catch (f) {\n        s(f);\n      }\n    }\n    function u(l) {\n      l.done ? o(l.value) : i(l.value).then(a, c);\n    }\n    u((r = r.apply(e, t || [])).next());\n  });\n}\nfunction un(e, t) {\n  var n = { label: 0, sent: function() {\n    if (o[0] & 1) throw o[1];\n    return o[1];\n  }, trys: [], ops: [] }, r, i, o, s = Object.create((typeof Iterator == \"function\" ? Iterator : Object).prototype);\n  return s.next = a(0), s.throw = a(1), s.return = a(2), typeof Symbol == \"function\" && (s[Symbol.iterator] = function() {\n    return this;\n  }), s;\n  function a(u) {\n    return function(l) {\n      return c([u, l]);\n    };\n  }\n  function c(u) {\n    if (r) throw new TypeError(\"Generator is already executing.\");\n    for (; s && (s = 0, u[0] && (n = 0)), n; ) try {\n      if (r = 1, i && (o = u[0] & 2 ? i.return : u[0] ? i.throw || ((o = i.return) && o.call(i), 0) : i.next) && !(o = o.call(i, u[1])).done) return o;\n      switch (i = 0, o && (u = [u[0] & 2, o.value]), u[0]) {\n        case 0:\n        case 1:\n          o = u;\n          break;\n        case 4:\n          return n.label++, { value: u[1], done: !1 };\n        case 5:\n          n.label++, i = u[1], u = [0];\n          continue;\n        case 7:\n          u = n.ops.pop(), n.trys.pop();\n          continue;\n        default:\n          if (o = n.trys, !(o = o.length > 0 && o[o.length - 1]) && (u[0] === 6 || u[0] === 2)) {\n            n = 0;\n            continue;\n          }\n          if (u[0] === 3 && (!o || u[1] > o[0] && u[1] < o[3])) {\n            n.label = u[1];\n            break;\n          }\n          if (u[0] === 6 && n.label < o[1]) {\n            n.label = o[1], o = u;\n            break;\n          }\n          if (o && n.label < o[2]) {\n            n.label = o[2], n.ops.push(u);\n            break;\n          }\n          o[2] && n.ops.pop(), n.trys.pop();\n          continue;\n      }\n      u = t.call(e, n);\n    } catch (l) {\n      u = [6, l], i = 0;\n    } finally {\n      r = o = 0;\n    }\n    if (u[0] & 5) throw u[1];\n    return { value: u[0] ? u[1] : void 0, done: !0 };\n  }\n}\nfunction ge(e) {\n  var t = typeof Symbol == \"function\" && Symbol.iterator, n = t && e[t], r = 0;\n  if (n) return n.call(e);\n  if (e && typeof e.length == \"number\") return {\n    next: function() {\n      return e && r >= e.length && (e = void 0), { value: e && e[r++], done: !e };\n    }\n  };\n  throw new TypeError(t ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n}\nfunction de(e, t) {\n  var n = typeof Symbol == \"function\" && e[Symbol.iterator];\n  if (!n) return e;\n  var r = n.call(e), i, o = [], s;\n  try {\n    for (; (t === void 0 || t-- > 0) && !(i = r.next()).done; ) o.push(i.value);\n  } catch (a) {\n    s = { error: a };\n  } finally {\n    try {\n      i && !i.done && (n = r.return) && n.call(r);\n    } finally {\n      if (s) throw s.error;\n    }\n  }\n  return o;\n}\nfunction be(e, t, n) {\n  if (n || arguments.length === 2) for (var r = 0, i = t.length, o; r < i; r++)\n    (o || !(r in t)) && (o || (o = Array.prototype.slice.call(t, 0, r)), o[r] = t[r]);\n  return e.concat(o || Array.prototype.slice.call(t));\n}\nfunction ve(e) {\n  return this instanceof ve ? (this.v = e, this) : new ve(e);\n}\nfunction Qr(e, t, n) {\n  if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\n  var r = n.apply(e, t || []), i, o = [];\n  return i = Object.create((typeof AsyncIterator == \"function\" ? AsyncIterator : Object).prototype), a(\"next\"), a(\"throw\"), a(\"return\", s), i[Symbol.asyncIterator] = function() {\n    return this;\n  }, i;\n  function s(d) {\n    return function(m) {\n      return Promise.resolve(m).then(d, f);\n    };\n  }\n  function a(d, m) {\n    r[d] && (i[d] = function(p) {\n      return new Promise(function(g, h) {\n        o.push([d, p, g, h]) > 1 || c(d, p);\n      });\n    }, m && (i[d] = m(i[d])));\n  }\n  function c(d, m) {\n    try {\n      u(r[d](m));\n    } catch (p) {\n      v(o[0][3], p);\n    }\n  }\n  function u(d) {\n    d.value instanceof ve ? Promise.resolve(d.value.v).then(l, f) : v(o[0][2], d);\n  }\n  function l(d) {\n    c(\"next\", d);\n  }\n  function f(d) {\n    c(\"throw\", d);\n  }\n  function v(d, m) {\n    d(m), o.shift(), o.length && c(o[0][0], o[0][1]);\n  }\n}\nfunction Jr(e) {\n  if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\n  var t = e[Symbol.asyncIterator], n;\n  return t ? t.call(e) : (e = typeof ge == \"function\" ? ge(e) : e[Symbol.iterator](), n = {}, r(\"next\"), r(\"throw\"), r(\"return\"), n[Symbol.asyncIterator] = function() {\n    return this;\n  }, n);\n  function r(o) {\n    n[o] = e[o] && function(s) {\n      return new Promise(function(a, c) {\n        s = e[o](s), i(a, c, s.done, s.value);\n      });\n    };\n  }\n  function i(o, s, a, c) {\n    Promise.resolve(c).then(function(u) {\n      o({ value: u, done: a });\n    }, s);\n  }\n}\nfunction P(e) {\n  return typeof e == \"function\";\n}\nfunction mt(e) {\n  var t = function(r) {\n    Error.call(r), r.stack = new Error().stack;\n  }, n = e(t);\n  return n.prototype = Object.create(Error.prototype), n.prototype.constructor = n, n;\n}\nvar tt = mt(function(e) {\n  return function(n) {\n    e(this), this.message = n ? n.length + ` errors occurred during unsubscription:\n` + n.map(function(r, i) {\n      return i + 1 + \") \" + r.toString();\n    }).join(`\n  `) : \"\", this.name = \"UnsubscriptionError\", this.errors = n;\n  };\n});\nfunction Ue(e, t) {\n  if (e) {\n    var n = e.indexOf(t);\n    0 <= n && e.splice(n, 1);\n  }\n}\nvar ke = (function() {\n  function e(t) {\n    this.initialTeardown = t, this.closed = !1, this._parentage = null, this._finalizers = null;\n  }\n  return e.prototype.unsubscribe = function() {\n    var t, n, r, i, o;\n    if (!this.closed) {\n      this.closed = !0;\n      var s = this._parentage;\n      if (s)\n        if (this._parentage = null, Array.isArray(s))\n          try {\n            for (var a = ge(s), c = a.next(); !c.done; c = a.next()) {\n              var u = c.value;\n              u.remove(this);\n            }\n          } catch (p) {\n            t = { error: p };\n          } finally {\n            try {\n              c && !c.done && (n = a.return) && n.call(a);\n            } finally {\n              if (t) throw t.error;\n            }\n          }\n        else\n          s.remove(this);\n      var l = this.initialTeardown;\n      if (P(l))\n        try {\n          l();\n        } catch (p) {\n          o = p instanceof tt ? p.errors : [p];\n        }\n      var f = this._finalizers;\n      if (f) {\n        this._finalizers = null;\n        try {\n          for (var v = ge(f), d = v.next(); !d.done; d = v.next()) {\n            var m = d.value;\n            try {\n              Mt(m);\n            } catch (p) {\n              o = o ?? [], p instanceof tt ? o = be(be([], de(o)), de(p.errors)) : o.push(p);\n            }\n          }\n        } catch (p) {\n          r = { error: p };\n        } finally {\n          try {\n            d && !d.done && (i = v.return) && i.call(v);\n          } finally {\n            if (r) throw r.error;\n          }\n        }\n      }\n      if (o)\n        throw new tt(o);\n    }\n  }, e.prototype.add = function(t) {\n    var n;\n    if (t && t !== this)\n      if (this.closed)\n        Mt(t);\n      else {\n        if (t instanceof e) {\n          if (t.closed || t._hasParent(this))\n            return;\n          t._addParent(this);\n        }\n        (this._finalizers = (n = this._finalizers) !== null && n !== void 0 ? n : []).push(t);\n      }\n  }, e.prototype._hasParent = function(t) {\n    var n = this._parentage;\n    return n === t || Array.isArray(n) && n.includes(t);\n  }, e.prototype._addParent = function(t) {\n    var n = this._parentage;\n    this._parentage = Array.isArray(n) ? (n.push(t), n) : n ? [n, t] : t;\n  }, e.prototype._removeParent = function(t) {\n    var n = this._parentage;\n    n === t ? this._parentage = null : Array.isArray(n) && Ue(n, t);\n  }, e.prototype.remove = function(t) {\n    var n = this._finalizers;\n    n && Ue(n, t), t instanceof e && t._removeParent(this);\n  }, e.EMPTY = (function() {\n    var t = new e();\n    return t.closed = !0, t;\n  })(), e;\n})(), ln = ke.EMPTY;\nfunction fn(e) {\n  return e instanceof ke || e && \"closed\" in e && P(e.remove) && P(e.add) && P(e.unsubscribe);\n}\nfunction Mt(e) {\n  P(e) ? e() : e.unsubscribe();\n}\nvar Xr = {\n  Promise: void 0\n}, Zr = {\n  setTimeout: function(e, t) {\n    for (var n = [], r = 2; r < arguments.length; r++)\n      n[r - 2] = arguments[r];\n    return setTimeout.apply(void 0, be([e, t], de(n)));\n  },\n  clearTimeout: function(e) {\n    return clearTimeout(e);\n  },\n  delegate: void 0\n};\nfunction dn(e) {\n  Zr.setTimeout(function() {\n    throw e;\n  });\n}\nfunction We() {\n}\nfunction Re(e) {\n  e();\n}\nvar gt = (function(e) {\n  ne(t, e);\n  function t(n) {\n    var r = e.call(this) || this;\n    return r.isStopped = !1, n ? (r.destination = n, fn(n) && n.add(r)) : r.destination = ni, r;\n  }\n  return t.create = function(n, r, i) {\n    return new Pe(n, r, i);\n  }, t.prototype.next = function(n) {\n    this.isStopped || this._next(n);\n  }, t.prototype.error = function(n) {\n    this.isStopped || (this.isStopped = !0, this._error(n));\n  }, t.prototype.complete = function() {\n    this.isStopped || (this.isStopped = !0, this._complete());\n  }, t.prototype.unsubscribe = function() {\n    this.closed || (this.isStopped = !0, e.prototype.unsubscribe.call(this), this.destination = null);\n  }, t.prototype._next = function(n) {\n    this.destination.next(n);\n  }, t.prototype._error = function(n) {\n    try {\n      this.destination.error(n);\n    } finally {\n      this.unsubscribe();\n    }\n  }, t.prototype._complete = function() {\n    try {\n      this.destination.complete();\n    } finally {\n      this.unsubscribe();\n    }\n  }, t;\n})(ke), ei = (function() {\n  function e(t) {\n    this.partialObserver = t;\n  }\n  return e.prototype.next = function(t) {\n    var n = this.partialObserver;\n    if (n.next)\n      try {\n        n.next(t);\n      } catch (r) {\n        Le(r);\n      }\n  }, e.prototype.error = function(t) {\n    var n = this.partialObserver;\n    if (n.error)\n      try {\n        n.error(t);\n      } catch (r) {\n        Le(r);\n      }\n    else\n      Le(t);\n  }, e.prototype.complete = function() {\n    var t = this.partialObserver;\n    if (t.complete)\n      try {\n        t.complete();\n      } catch (n) {\n        Le(n);\n      }\n  }, e;\n})(), Pe = (function(e) {\n  ne(t, e);\n  function t(n, r, i) {\n    var o = e.call(this) || this, s;\n    return P(n) || !n ? s = {\n      next: n ?? void 0,\n      error: r ?? void 0,\n      complete: i ?? void 0\n    } : s = n, o.destination = new ei(s), o;\n  }\n  return t;\n})(gt);\nfunction Le(e) {\n  dn(e);\n}\nfunction ti(e) {\n  throw e;\n}\nvar ni = {\n  closed: !0,\n  next: We,\n  error: ti,\n  complete: We\n}, bt = (function() {\n  return typeof Symbol == \"function\" && Symbol.observable || \"@@observable\";\n})();\nfunction Qe(e) {\n  return e;\n}\nfunction ri(e) {\n  return e.length === 0 ? Qe : e.length === 1 ? e[0] : function(n) {\n    return e.reduce(function(r, i) {\n      return i(r);\n    }, n);\n  };\n}\nvar k = (function() {\n  function e(t) {\n    t && (this._subscribe = t);\n  }\n  return e.prototype.lift = function(t) {\n    var n = new e();\n    return n.source = this, n.operator = t, n;\n  }, e.prototype.subscribe = function(t, n, r) {\n    var i = this, o = oi(t) ? t : new Pe(t, n, r);\n    return Re(function() {\n      var s = i, a = s.operator, c = s.source;\n      o.add(a ? a.call(o, c) : c ? i._subscribe(o) : i._trySubscribe(o));\n    }), o;\n  }, e.prototype._trySubscribe = function(t) {\n    try {\n      return this._subscribe(t);\n    } catch (n) {\n      t.error(n);\n    }\n  }, e.prototype.forEach = function(t, n) {\n    var r = this;\n    return n = Rt(n), new n(function(i, o) {\n      var s = new Pe({\n        next: function(a) {\n          try {\n            t(a);\n          } catch (c) {\n            o(c), s.unsubscribe();\n          }\n        },\n        error: o,\n        complete: i\n      });\n      r.subscribe(s);\n    });\n  }, e.prototype._subscribe = function(t) {\n    var n;\n    return (n = this.source) === null || n === void 0 ? void 0 : n.subscribe(t);\n  }, e.prototype[bt] = function() {\n    return this;\n  }, e.prototype.pipe = function() {\n    for (var t = [], n = 0; n < arguments.length; n++)\n      t[n] = arguments[n];\n    return ri(t)(this);\n  }, e.prototype.toPromise = function(t) {\n    var n = this;\n    return t = Rt(t), new t(function(r, i) {\n      var o;\n      n.subscribe(function(s) {\n        return o = s;\n      }, function(s) {\n        return i(s);\n      }, function() {\n        return r(o);\n      });\n    });\n  }, e.create = function(t) {\n    return new e(t);\n  }, e;\n})();\nfunction Rt(e) {\n  var t;\n  return (t = e ?? Xr.Promise) !== null && t !== void 0 ? t : Promise;\n}\nfunction ii(e) {\n  return e && P(e.next) && P(e.error) && P(e.complete);\n}\nfunction oi(e) {\n  return e && e instanceof gt || ii(e) && fn(e);\n}\nfunction si(e) {\n  return P(e == null ? void 0 : e.lift);\n}\nfunction W(e) {\n  return function(t) {\n    if (si(t))\n      return t.lift(function(n) {\n        try {\n          return e(n, this);\n        } catch (r) {\n          this.error(r);\n        }\n      });\n    throw new TypeError(\"Unable to lift unknown Observable type\");\n  };\n}\nfunction F(e, t, n, r, i) {\n  return new ai(e, t, n, r, i);\n}\nvar ai = (function(e) {\n  ne(t, e);\n  function t(n, r, i, o, s, a) {\n    var c = e.call(this, n) || this;\n    return c.onFinalize = s, c.shouldUnsubscribe = a, c._next = r ? function(u) {\n      try {\n        r(u);\n      } catch (l) {\n        n.error(l);\n      }\n    } : e.prototype._next, c._error = o ? function(u) {\n      try {\n        o(u);\n      } catch (l) {\n        n.error(l);\n      } finally {\n        this.unsubscribe();\n      }\n    } : e.prototype._error, c._complete = i ? function() {\n      try {\n        i();\n      } catch (u) {\n        n.error(u);\n      } finally {\n        this.unsubscribe();\n      }\n    } : e.prototype._complete, c;\n  }\n  return t.prototype.unsubscribe = function() {\n    var n;\n    if (!this.shouldUnsubscribe || this.shouldUnsubscribe()) {\n      var r = this.closed;\n      e.prototype.unsubscribe.call(this), !r && ((n = this.onFinalize) === null || n === void 0 || n.call(this));\n    }\n  }, t;\n})(gt), ci = mt(function(e) {\n  return function() {\n    e(this), this.name = \"ObjectUnsubscribedError\", this.message = \"object unsubscribed\";\n  };\n}), te = (function(e) {\n  ne(t, e);\n  function t() {\n    var n = e.call(this) || this;\n    return n.closed = !1, n.currentObservers = null, n.observers = [], n.isStopped = !1, n.hasError = !1, n.thrownError = null, n;\n  }\n  return t.prototype.lift = function(n) {\n    var r = new Dt(this, this);\n    return r.operator = n, r;\n  }, t.prototype._throwIfClosed = function() {\n    if (this.closed)\n      throw new ci();\n  }, t.prototype.next = function(n) {\n    var r = this;\n    Re(function() {\n      var i, o;\n      if (r._throwIfClosed(), !r.isStopped) {\n        r.currentObservers || (r.currentObservers = Array.from(r.observers));\n        try {\n          for (var s = ge(r.currentObservers), a = s.next(); !a.done; a = s.next()) {\n            var c = a.value;\n            c.next(n);\n          }\n        } catch (u) {\n          i = { error: u };\n        } finally {\n          try {\n            a && !a.done && (o = s.return) && o.call(s);\n          } finally {\n            if (i) throw i.error;\n          }\n        }\n      }\n    });\n  }, t.prototype.error = function(n) {\n    var r = this;\n    Re(function() {\n      if (r._throwIfClosed(), !r.isStopped) {\n        r.hasError = r.isStopped = !0, r.thrownError = n;\n        for (var i = r.observers; i.length; )\n          i.shift().error(n);\n      }\n    });\n  }, t.prototype.complete = function() {\n    var n = this;\n    Re(function() {\n      if (n._throwIfClosed(), !n.isStopped) {\n        n.isStopped = !0;\n        for (var r = n.observers; r.length; )\n          r.shift().complete();\n      }\n    });\n  }, t.prototype.unsubscribe = function() {\n    this.isStopped = this.closed = !0, this.observers = this.currentObservers = null;\n  }, Object.defineProperty(t.prototype, \"observed\", {\n    get: function() {\n      var n;\n      return ((n = this.observers) === null || n === void 0 ? void 0 : n.length) > 0;\n    },\n    enumerable: !1,\n    configurable: !0\n  }), t.prototype._trySubscribe = function(n) {\n    return this._throwIfClosed(), e.prototype._trySubscribe.call(this, n);\n  }, t.prototype._subscribe = function(n) {\n    return this._throwIfClosed(), this._checkFinalizedStatuses(n), this._innerSubscribe(n);\n  }, t.prototype._innerSubscribe = function(n) {\n    var r = this, i = this, o = i.hasError, s = i.isStopped, a = i.observers;\n    return o || s ? ln : (this.currentObservers = null, a.push(n), new ke(function() {\n      r.currentObservers = null, Ue(a, n);\n    }));\n  }, t.prototype._checkFinalizedStatuses = function(n) {\n    var r = this, i = r.hasError, o = r.thrownError, s = r.isStopped;\n    i ? n.error(o) : s && n.complete();\n  }, t.prototype.asObservable = function() {\n    var n = new k();\n    return n.source = this, n;\n  }, t.create = function(n, r) {\n    return new Dt(n, r);\n  }, t;\n})(k), Dt = (function(e) {\n  ne(t, e);\n  function t(n, r) {\n    var i = e.call(this) || this;\n    return i.destination = n, i.source = r, i;\n  }\n  return t.prototype.next = function(n) {\n    var r, i;\n    (i = (r = this.destination) === null || r === void 0 ? void 0 : r.next) === null || i === void 0 || i.call(r, n);\n  }, t.prototype.error = function(n) {\n    var r, i;\n    (i = (r = this.destination) === null || r === void 0 ? void 0 : r.error) === null || i === void 0 || i.call(r, n);\n  }, t.prototype.complete = function() {\n    var n, r;\n    (r = (n = this.destination) === null || n === void 0 ? void 0 : n.complete) === null || r === void 0 || r.call(n);\n  }, t.prototype._subscribe = function(n) {\n    var r, i;\n    return (i = (r = this.source) === null || r === void 0 ? void 0 : r.subscribe(n)) !== null && i !== void 0 ? i : ln;\n  }, t;\n})(te), pn = (function(e) {\n  ne(t, e);\n  function t(n) {\n    var r = e.call(this) || this;\n    return r._value = n, r;\n  }\n  return Object.defineProperty(t.prototype, \"value\", {\n    get: function() {\n      return this.getValue();\n    },\n    enumerable: !1,\n    configurable: !0\n  }), t.prototype._subscribe = function(n) {\n    var r = e.prototype._subscribe.call(this, n);\n    return !r.closed && n.next(this._value), r;\n  }, t.prototype.getValue = function() {\n    var n = this, r = n.hasError, i = n.thrownError, o = n._value;\n    if (r)\n      throw i;\n    return this._throwIfClosed(), o;\n  }, t.prototype.next = function(n) {\n    e.prototype.next.call(this, this._value = n);\n  }, t;\n})(te), ui = {\n  now: function() {\n    return Date.now();\n  }\n}, li = (function(e) {\n  ne(t, e);\n  function t(n, r) {\n    return e.call(this) || this;\n  }\n  return t.prototype.schedule = function(n, r) {\n    return this;\n  }, t;\n})(ke), $t = {\n  setInterval: function(e, t) {\n    for (var n = [], r = 2; r < arguments.length; r++)\n      n[r - 2] = arguments[r];\n    return setInterval.apply(void 0, be([e, t], de(n)));\n  },\n  clearInterval: function(e) {\n    return clearInterval(e);\n  },\n  delegate: void 0\n}, fi = (function(e) {\n  ne(t, e);\n  function t(n, r) {\n    var i = e.call(this, n, r) || this;\n    return i.scheduler = n, i.work = r, i.pending = !1, i;\n  }\n  return t.prototype.schedule = function(n, r) {\n    var i;\n    if (r === void 0 && (r = 0), this.closed)\n      return this;\n    this.state = n;\n    var o = this.id, s = this.scheduler;\n    return o != null && (this.id = this.recycleAsyncId(s, o, r)), this.pending = !0, this.delay = r, this.id = (i = this.id) !== null && i !== void 0 ? i : this.requestAsyncId(s, this.id, r), this;\n  }, t.prototype.requestAsyncId = function(n, r, i) {\n    return i === void 0 && (i = 0), $t.setInterval(n.flush.bind(n, this), i);\n  }, t.prototype.recycleAsyncId = function(n, r, i) {\n    if (i === void 0 && (i = 0), i != null && this.delay === i && this.pending === !1)\n      return r;\n    r != null && $t.clearInterval(r);\n  }, t.prototype.execute = function(n, r) {\n    if (this.closed)\n      return new Error(\"executing a cancelled action\");\n    this.pending = !1;\n    var i = this._execute(n, r);\n    if (i)\n      return i;\n    this.pending === !1 && this.id != null && (this.id = this.recycleAsyncId(this.scheduler, this.id, null));\n  }, t.prototype._execute = function(n, r) {\n    var i = !1, o;\n    try {\n      this.work(n);\n    } catch (s) {\n      i = !0, o = s || new Error(\"Scheduled action threw falsy error\");\n    }\n    if (i)\n      return this.unsubscribe(), o;\n  }, t.prototype.unsubscribe = function() {\n    if (!this.closed) {\n      var n = this, r = n.id, i = n.scheduler, o = i.actions;\n      this.work = this.state = this.scheduler = null, this.pending = !1, Ue(o, this), r != null && (this.id = this.recycleAsyncId(i, r, null)), this.delay = null, e.prototype.unsubscribe.call(this);\n    }\n  }, t;\n})(li), Nt = (function() {\n  function e(t, n) {\n    n === void 0 && (n = e.now), this.schedulerActionCtor = t, this.now = n;\n  }\n  return e.prototype.schedule = function(t, n, r) {\n    return n === void 0 && (n = 0), new this.schedulerActionCtor(this, t).schedule(r, n);\n  }, e.now = ui.now, e;\n})(), di = (function(e) {\n  ne(t, e);\n  function t(n, r) {\n    r === void 0 && (r = Nt.now);\n    var i = e.call(this, n, r) || this;\n    return i.actions = [], i._active = !1, i;\n  }\n  return t.prototype.flush = function(n) {\n    var r = this.actions;\n    if (this._active) {\n      r.push(n);\n      return;\n    }\n    var i;\n    this._active = !0;\n    do\n      if (i = n.execute(n.state, n.delay))\n        break;\n    while (n = r.shift());\n    if (this._active = !1, i) {\n      for (; n = r.shift(); )\n        n.unsubscribe();\n      throw i;\n    }\n  }, t;\n})(Nt), pi = new di(fi);\nfunction hi(e) {\n  return e && P(e.schedule);\n}\nfunction vi(e) {\n  return e[e.length - 1];\n}\nfunction yt(e) {\n  return hi(vi(e)) ? e.pop() : void 0;\n}\nvar wt = (function(e) {\n  return e && typeof e.length == \"number\" && typeof e != \"function\";\n});\nfunction hn(e) {\n  return P(e == null ? void 0 : e.then);\n}\nfunction vn(e) {\n  return P(e[bt]);\n}\nfunction mn(e) {\n  return Symbol.asyncIterator && P(e == null ? void 0 : e[Symbol.asyncIterator]);\n}\nfunction gn(e) {\n  return new TypeError(\"You provided \" + (e !== null && typeof e == \"object\" ? \"an invalid object\" : \"'\" + e + \"'\") + \" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.\");\n}\nfunction mi() {\n  return typeof Symbol != \"function\" || !Symbol.iterator ? \"@@iterator\" : Symbol.iterator;\n}\nvar bn = mi();\nfunction yn(e) {\n  return P(e == null ? void 0 : e[bn]);\n}\nfunction wn(e) {\n  return Qr(this, arguments, function() {\n    var n, r, i, o;\n    return un(this, function(s) {\n      switch (s.label) {\n        case 0:\n          n = e.getReader(), s.label = 1;\n        case 1:\n          s.trys.push([1, , 9, 10]), s.label = 2;\n        case 2:\n          return [4, ve(n.read())];\n        case 3:\n          return r = s.sent(), i = r.value, o = r.done, o ? [4, ve(void 0)] : [3, 5];\n        case 4:\n          return [2, s.sent()];\n        case 5:\n          return [4, ve(i)];\n        case 6:\n          return [4, s.sent()];\n        case 7:\n          return s.sent(), [3, 2];\n        case 8:\n          return [3, 10];\n        case 9:\n          return n.releaseLock(), [7];\n        case 10:\n          return [2];\n      }\n    });\n  });\n}\nfunction xn(e) {\n  return P(e == null ? void 0 : e.getReader);\n}\nfunction z(e) {\n  if (e instanceof k)\n    return e;\n  if (e != null) {\n    if (vn(e))\n      return gi(e);\n    if (wt(e))\n      return bi(e);\n    if (hn(e))\n      return yi(e);\n    if (mn(e))\n      return Sn(e);\n    if (yn(e))\n      return wi(e);\n    if (xn(e))\n      return xi(e);\n  }\n  throw gn(e);\n}\nfunction gi(e) {\n  return new k(function(t) {\n    var n = e[bt]();\n    if (P(n.subscribe))\n      return n.subscribe(t);\n    throw new TypeError(\"Provided object does not correctly implement Symbol.observable\");\n  });\n}\nfunction bi(e) {\n  return new k(function(t) {\n    for (var n = 0; n < e.length && !t.closed; n++)\n      t.next(e[n]);\n    t.complete();\n  });\n}\nfunction yi(e) {\n  return new k(function(t) {\n    e.then(function(n) {\n      t.closed || (t.next(n), t.complete());\n    }, function(n) {\n      return t.error(n);\n    }).then(null, dn);\n  });\n}\nfunction wi(e) {\n  return new k(function(t) {\n    var n, r;\n    try {\n      for (var i = ge(e), o = i.next(); !o.done; o = i.next()) {\n        var s = o.value;\n        if (t.next(s), t.closed)\n          return;\n      }\n    } catch (a) {\n      n = { error: a };\n    } finally {\n      try {\n        o && !o.done && (r = i.return) && r.call(i);\n      } finally {\n        if (n) throw n.error;\n      }\n    }\n    t.complete();\n  });\n}\nfunction Sn(e) {\n  return new k(function(t) {\n    Si(e, t).catch(function(n) {\n      return t.error(n);\n    });\n  });\n}\nfunction xi(e) {\n  return Sn(wn(e));\n}\nfunction Si(e, t) {\n  var n, r, i, o;\n  return Gr(this, void 0, void 0, function() {\n    var s, a;\n    return un(this, function(c) {\n      switch (c.label) {\n        case 0:\n          c.trys.push([0, 5, 6, 11]), n = Jr(e), c.label = 1;\n        case 1:\n          return [4, n.next()];\n        case 2:\n          if (r = c.sent(), !!r.done) return [3, 4];\n          if (s = r.value, t.next(s), t.closed)\n            return [2];\n          c.label = 3;\n        case 3:\n          return [3, 1];\n        case 4:\n          return [3, 11];\n        case 5:\n          return a = c.sent(), i = { error: a }, [3, 11];\n        case 6:\n          return c.trys.push([6, , 9, 10]), r && !r.done && (o = n.return) ? [4, o.call(n)] : [3, 8];\n        case 7:\n          c.sent(), c.label = 8;\n        case 8:\n          return [3, 10];\n        case 9:\n          if (i) throw i.error;\n          return [7];\n        case 10:\n          return [7];\n        case 11:\n          return t.complete(), [2];\n      }\n    });\n  });\n}\nfunction oe(e, t, n, r, i) {\n  r === void 0 && (r = 0), i === void 0 && (i = !1);\n  var o = t.schedule(function() {\n    n(), i ? e.add(this.schedule(null, r)) : this.unsubscribe();\n  }, r);\n  if (e.add(o), !i)\n    return o;\n}\nfunction Tn(e, t) {\n  return t === void 0 && (t = 0), W(function(n, r) {\n    n.subscribe(F(r, function(i) {\n      return oe(r, e, function() {\n        return r.next(i);\n      }, t);\n    }, function() {\n      return oe(r, e, function() {\n        return r.complete();\n      }, t);\n    }, function(i) {\n      return oe(r, e, function() {\n        return r.error(i);\n      }, t);\n    }));\n  });\n}\nfunction En(e, t) {\n  return t === void 0 && (t = 0), W(function(n, r) {\n    r.add(e.schedule(function() {\n      return n.subscribe(r);\n    }, t));\n  });\n}\nfunction Ti(e, t) {\n  return z(e).pipe(En(t), Tn(t));\n}\nfunction Ei(e, t) {\n  return z(e).pipe(En(t), Tn(t));\n}\nfunction Ci(e, t) {\n  return new k(function(n) {\n    var r = 0;\n    return t.schedule(function() {\n      r === e.length ? n.complete() : (n.next(e[r++]), n.closed || this.schedule());\n    });\n  });\n}\nfunction Pi(e, t) {\n  return new k(function(n) {\n    var r;\n    return oe(n, t, function() {\n      r = e[bn](), oe(n, t, function() {\n        var i, o, s;\n        try {\n          i = r.next(), o = i.value, s = i.done;\n        } catch (a) {\n          n.error(a);\n          return;\n        }\n        s ? n.complete() : n.next(o);\n      }, 0, !0);\n    }), function() {\n      return P(r == null ? void 0 : r.return) && r.return();\n    };\n  });\n}\nfunction Cn(e, t) {\n  if (!e)\n    throw new Error(\"Iterable cannot be null\");\n  return new k(function(n) {\n    oe(n, t, function() {\n      var r = e[Symbol.asyncIterator]();\n      oe(n, t, function() {\n        r.next().then(function(i) {\n          i.done ? n.complete() : n.next(i.value);\n        });\n      }, 0, !0);\n    });\n  });\n}\nfunction Oi(e, t) {\n  return Cn(wn(e), t);\n}\nfunction Ai(e, t) {\n  if (e != null) {\n    if (vn(e))\n      return Ti(e, t);\n    if (wt(e))\n      return Ci(e, t);\n    if (hn(e))\n      return Ei(e, t);\n    if (mn(e))\n      return Cn(e, t);\n    if (yn(e))\n      return Pi(e, t);\n    if (xn(e))\n      return Oi(e, t);\n  }\n  throw gn(e);\n}\nfunction Je(e, t) {\n  return t ? Ai(e, t) : z(e);\n}\nfunction Ft() {\n  for (var e = [], t = 0; t < arguments.length; t++)\n    e[t] = arguments[t];\n  var n = yt(e);\n  return Je(e, n);\n}\nfunction ki(e) {\n  return e instanceof Date && !isNaN(e);\n}\nvar _i = mt(function(e) {\n  return function(n) {\n    n === void 0 && (n = null), e(this), this.message = \"Timeout has occurred\", this.name = \"TimeoutError\", this.info = n;\n  };\n});\nfunction Li(e, t) {\n  var n = ki(e) ? { first: e } : typeof e == \"number\" ? { each: e } : e, r = n.first, i = n.each, o = n.with, s = o === void 0 ? Ii : o, a = n.scheduler, c = a === void 0 ? pi : a, u = n.meta, l = u === void 0 ? null : u;\n  if (r == null && i == null)\n    throw new TypeError(\"No timeout provided.\");\n  return W(function(f, v) {\n    var d, m, p = null, g = 0, h = function(x) {\n      m = oe(v, c, function() {\n        try {\n          d.unsubscribe(), z(s({\n            meta: l,\n            lastValue: p,\n            seen: g\n          })).subscribe(v);\n        } catch (E) {\n          v.error(E);\n        }\n      }, x);\n    };\n    d = f.subscribe(F(v, function(x) {\n      m == null || m.unsubscribe(), g++, v.next(p = x), i > 0 && h(i);\n    }, void 0, void 0, function() {\n      m != null && m.closed || m == null || m.unsubscribe(), p = null;\n    })), !g && h(r != null ? typeof r == \"number\" ? r : +r - c.now() : i);\n  });\n}\nfunction Ii(e) {\n  throw new _i(e);\n}\nfunction A(e, t) {\n  return W(function(n, r) {\n    var i = 0;\n    n.subscribe(F(r, function(o) {\n      r.next(e.call(t, o, i++));\n    }));\n  });\n}\nvar Mi = Array.isArray;\nfunction Ri(e, t) {\n  return Mi(t) ? e.apply(void 0, be([], de(t))) : e(t);\n}\nfunction Di(e) {\n  return A(function(t) {\n    return Ri(e, t);\n  });\n}\nfunction $i(e, t, n, r, i, o, s, a) {\n  var c = [], u = 0, l = 0, f = !1, v = function() {\n    f && !c.length && !u && t.complete();\n  }, d = function(p) {\n    return u < r ? m(p) : c.push(p);\n  }, m = function(p) {\n    u++;\n    var g = !1;\n    z(n(p, l++)).subscribe(F(t, function(h) {\n      t.next(h);\n    }, function() {\n      g = !0;\n    }, void 0, function() {\n      if (g)\n        try {\n          u--;\n          for (var h = function() {\n            var x = c.shift();\n            s || m(x);\n          }; c.length && u < r; )\n            h();\n          v();\n        } catch (x) {\n          t.error(x);\n        }\n    }));\n  };\n  return e.subscribe(F(t, d, function() {\n    f = !0, v();\n  })), function() {\n  };\n}\nfunction xt(e, t, n) {\n  return n === void 0 && (n = 1 / 0), P(t) ? xt(function(r, i) {\n    return A(function(o, s) {\n      return t(r, o, i, s);\n    })(z(e(r, i)));\n  }, n) : (typeof t == \"number\" && (n = t), W(function(r, i) {\n    return $i(r, i, e, n);\n  }));\n}\nfunction Ni(e) {\n  return xt(Qe, e);\n}\nfunction Fi() {\n  return Ni(1);\n}\nfunction je() {\n  for (var e = [], t = 0; t < arguments.length; t++)\n    e[t] = arguments[t];\n  return Fi()(Je(e, yt(e)));\n}\nvar Ui = [\"addListener\", \"removeListener\"], Wi = [\"addEventListener\", \"removeEventListener\"], ji = [\"on\", \"off\"];\nfunction ut(e, t, n, r) {\n  if (P(n) && (r = n, n = void 0), r)\n    return ut(e, t, n).pipe(Di(r));\n  var i = de(Hi(e) ? Wi.map(function(a) {\n    return function(c) {\n      return e[a](t, c, n);\n    };\n  }) : Bi(e) ? Ui.map(Ut(e, t)) : Vi(e) ? ji.map(Ut(e, t)) : [], 2), o = i[0], s = i[1];\n  if (!o && wt(e))\n    return xt(function(a) {\n      return ut(a, t, n);\n    })(z(e));\n  if (!o)\n    throw new TypeError(\"Invalid event target\");\n  return new k(function(a) {\n    var c = function() {\n      for (var u = [], l = 0; l < arguments.length; l++)\n        u[l] = arguments[l];\n      return a.next(1 < u.length ? u : u[0]);\n    };\n    return o(c), function() {\n      return s(c);\n    };\n  });\n}\nfunction Ut(e, t) {\n  return function(n) {\n    return function(r) {\n      return e[n](t, r);\n    };\n  };\n}\nfunction Bi(e) {\n  return P(e.addListener) && P(e.removeListener);\n}\nfunction Vi(e) {\n  return P(e.on) && P(e.off);\n}\nfunction Hi(e) {\n  return P(e.addEventListener) && P(e.removeEventListener);\n}\nfunction Xe(e, t) {\n  return W(function(n, r) {\n    var i = 0;\n    n.subscribe(F(r, function(o) {\n      return e.call(t, o, i++) && r.next(o);\n    }));\n  });\n}\nfunction zi(e, t, n, r, i) {\n  return function(o, s) {\n    var a = n, c = t, u = 0;\n    o.subscribe(F(s, function(l) {\n      var f = u++;\n      c = a ? e(c, l, f) : (a = !0, l), s.next(c);\n    }, i));\n  };\n}\nfunction Yi(e, t) {\n  return t === void 0 && (t = Qe), e = e ?? qi, W(function(n, r) {\n    var i, o = !0;\n    n.subscribe(F(r, function(s) {\n      var a = t(s);\n      (o || !e(i, a)) && (o = !1, i = a, r.next(s));\n    }));\n  });\n}\nfunction qi(e, t) {\n  return e === t;\n}\nfunction lt(e, t) {\n  return W(zi(e, t, arguments.length >= 2, !0));\n}\nfunction Ki(e) {\n  e === void 0 && (e = {});\n  var t = e.connector, n = t === void 0 ? function() {\n    return new te();\n  } : t, r = e.resetOnError, i = r === void 0 ? !0 : r, o = e.resetOnComplete, s = o === void 0 ? !0 : o, a = e.resetOnRefCountZero, c = a === void 0 ? !0 : a;\n  return function(u) {\n    var l, f, v, d = 0, m = !1, p = !1, g = function() {\n      f == null || f.unsubscribe(), f = void 0;\n    }, h = function() {\n      g(), l = v = void 0, m = p = !1;\n    }, x = function() {\n      var E = l;\n      h(), E == null || E.unsubscribe();\n    };\n    return W(function(E, O) {\n      d++, !p && !m && g();\n      var b = v = v ?? n();\n      O.add(function() {\n        d--, d === 0 && !p && !m && (f = nt(x, c));\n      }), b.subscribe(O), !l && d > 0 && (l = new Pe({\n        next: function(S) {\n          return b.next(S);\n        },\n        error: function(S) {\n          p = !0, g(), f = nt(h, i, S), b.error(S);\n        },\n        complete: function() {\n          m = !0, g(), f = nt(h, s), b.complete();\n        }\n      }), z(E).subscribe(l));\n    })(u);\n  };\n}\nfunction nt(e, t) {\n  for (var n = [], r = 2; r < arguments.length; r++)\n    n[r - 2] = arguments[r];\n  if (t === !0) {\n    e();\n    return;\n  }\n  if (t !== !1) {\n    var i = new Pe({\n      next: function() {\n        i.unsubscribe(), e();\n      }\n    });\n    return z(t.apply(void 0, be([], de(n)))).subscribe(i);\n  }\n}\nfunction Gi(e) {\n  return W(function(t, n) {\n    var r = !1, i = F(n, function() {\n      i == null || i.unsubscribe(), r = !0;\n    }, We);\n    z(e).subscribe(i), t.subscribe(F(n, function(o) {\n      return r && n.next(o);\n    }));\n  });\n}\nfunction D() {\n  for (var e = [], t = 0; t < arguments.length; t++)\n    e[t] = arguments[t];\n  var n = yt(e);\n  return W(function(r, i) {\n    (n ? je(e, r, n) : je(e, r)).subscribe(i);\n  });\n}\nfunction Pn(e, t) {\n  return W(function(n, r) {\n    var i = null, o = 0, s = !1, a = function() {\n      return s && !i && r.complete();\n    };\n    n.subscribe(F(r, function(c) {\n      i == null || i.unsubscribe();\n      var u = 0, l = o++;\n      z(e(c, l)).subscribe(i = F(r, function(f) {\n        return r.next(t ? t(c, f, l, u++) : f);\n      }, function() {\n        i = null, a();\n      }));\n    }, function() {\n      s = !0, a();\n    }));\n  });\n}\nfunction Wt(e) {\n  return W(function(t, n) {\n    z(e).subscribe(F(n, function() {\n      return n.complete();\n    }, We)), !n.closed && t.subscribe(n);\n  });\n}\nfunction Qi(e, t, n) {\n  var r = P(e) || t || n ? { next: e, error: t, complete: n } : e;\n  return r ? W(function(i, o) {\n    var s;\n    (s = r.subscribe) === null || s === void 0 || s.call(r);\n    var a = !0;\n    i.subscribe(F(o, function(c) {\n      var u;\n      (u = r.next) === null || u === void 0 || u.call(r, c), o.next(c);\n    }, function() {\n      var c;\n      a = !1, (c = r.complete) === null || c === void 0 || c.call(r), o.complete();\n    }, function(c) {\n      var u;\n      a = !1, (u = r.error) === null || u === void 0 || u.call(r, c), o.error(c);\n    }, function() {\n      var c, u;\n      a && ((c = r.unsubscribe) === null || c === void 0 || c.call(r)), (u = r.finalize) === null || u === void 0 || u.call(r);\n    }));\n  }) : Qe;\n}\nvar Ji = Object.defineProperty, Xi = Object.defineProperties, Zi = Object.getOwnPropertyDescriptors, jt = Object.getOwnPropertySymbols, eo = Object.prototype.hasOwnProperty, to = Object.prototype.propertyIsEnumerable, Bt = (e, t, n) => t in e ? Ji(e, t, { enumerable: !0, configurable: !0, writable: !0, value: n }) : e[t] = n, q = (e, t) => {\n  for (var n in t || (t = {}))\n    eo.call(t, n) && Bt(e, n, t[n]);\n  if (jt)\n    for (var n of jt(t))\n      to.call(t, n) && Bt(e, n, t[n]);\n  return e;\n}, ce = (e, t) => Xi(e, Zi(t)), H = (e, t, n) => new Promise((r, i) => {\n  var o = (c) => {\n    try {\n      a(n.next(c));\n    } catch (u) {\n      i(u);\n    }\n  }, s = (c) => {\n    try {\n      a(n.throw(c));\n    } catch (u) {\n      i(u);\n    }\n  }, a = (c) => c.done ? r(c.value) : Promise.resolve(c.value).then(o, s);\n  a((n = n.apply(e, t)).next());\n}), On = \"lk\";\nfunction B(e) {\n  return typeof e > \"u\" ? !1 : no(e) || ro(e);\n}\nfunction no(e) {\n  var t;\n  return e ? e.hasOwnProperty(\"participant\") && e.hasOwnProperty(\"source\") && e.hasOwnProperty(\"track\") && typeof ((t = e.publication) == null ? void 0 : t.track) < \"u\" : !1;\n}\nfunction ro(e) {\n  return e ? e.hasOwnProperty(\"participant\") && e.hasOwnProperty(\"source\") && e.hasOwnProperty(\"publication\") && typeof e.publication < \"u\" : !1;\n}\nfunction Oe(e) {\n  return e ? e.hasOwnProperty(\"participant\") && e.hasOwnProperty(\"source\") && typeof e.publication > \"u\" : !1;\n}\nfunction N(e) {\n  if (typeof e == \"string\" || typeof e == \"number\")\n    return `${e}`;\n  if (Oe(e))\n    return `${e.participant.identity}_${e.source}_placeholder`;\n  if (B(e))\n    return `${e.participant.identity}_${e.publication.source}_${e.publication.trackSid}`;\n  throw new Error(`Can't generate a id for the given track reference: ${e}`);\n}\nfunction ts(e, t) {\n  return e === void 0 || t === void 0 ? !1 : B(e) && B(t) ? e.publication.trackSid === t.publication.trackSid : N(e) === N(t);\n}\nfunction ns(e, t) {\n  return typeof t > \"u\" ? !1 : B(e) ? t.some(\n    (n) => n.participant.identity === e.participant.identity && B(n) && n.publication.trackSid === e.publication.trackSid\n  ) : Oe(e) ? t.some(\n    (n) => n.participant.identity === e.participant.identity && Oe(n) && n.source === e.source\n  ) : !1;\n}\nfunction io(e, t) {\n  return Oe(e) && B(t) && t.participant.identity === e.participant.identity && t.source === e.source;\n}\nfunction rs() {\n  const e = document.createElement(\"p\");\n  e.style.width = \"100%\", e.style.height = \"200px\";\n  const t = document.createElement(\"div\");\n  t.style.position = \"absolute\", t.style.top = \"0px\", t.style.left = \"0px\", t.style.visibility = \"hidden\", t.style.width = \"200px\", t.style.height = \"150px\", t.style.overflow = \"hidden\", t.appendChild(e), document.body.appendChild(t);\n  const n = e.offsetWidth;\n  t.style.overflow = \"scroll\";\n  let r = e.offsetWidth;\n  return n === r && (r = t.clientWidth), document.body.removeChild(t), n - r;\n}\nfunction is() {\n  return typeof document < \"u\";\n}\nfunction oo(e) {\n  e = q({}, e);\n  const t = \"(?:(?:[a-z]+:)?//)?\", n = \"(?:\\\\S+(?::\\\\S*)?@)?\", r = new RegExp(\n    \"(?:25[0-5]|2[0-4]\\\\d|1\\\\d\\\\d|[1-9]\\\\d|\\\\d)(?:\\\\.(?:25[0-5]|2[0-4]\\\\d|1\\\\d\\\\d|[1-9]\\\\d|\\\\d)){3}\",\n    \"g\"\n  ).source, u = `(?:${t}|www\\\\.)${n}(?:localhost|${r}|(?:(?:[a-z\\\\u00a1-\\\\uffff0-9][-_]*)*[a-z\\\\u00a1-\\\\uffff0-9]+)(?:\\\\.(?:[a-z\\\\u00a1-\\\\uffff0-9]-*)*[a-z\\\\u00a1-\\\\uffff0-9]+)*(?:\\\\.(?:[a-z\\\\u00a1-\\\\uffff]{2,}))\\\\.?)(?::\\\\d{2,5})?(?:[/?#][^\\\\s\"]*)?`;\n  return e.exact ? new RegExp(`(?:^${u}$)`, \"i\") : new RegExp(u, \"ig\");\n}\nvar Vt = \"[^\\\\.\\\\s@:](?:[^\\\\s@:]*[^\\\\s@:\\\\.])?@[^\\\\.\\\\s@]+(?:\\\\.[^\\\\.\\\\s@]+)*\";\nfunction so({ exact: e } = {}) {\n  return e ? new RegExp(`^${Vt}$`) : new RegExp(Vt, \"g\");\n}\nfunction os(e, t, n) {\n  return Ur(e, t, () => H(this, null, function* () {\n    const { x: i, y: o } = yield Vr(e, t, {\n      placement: \"top\",\n      middleware: [Wr(6), Br(), jr({ padding: 5 })]\n    });\n    n == null || n(i, o);\n  }));\n}\nfunction ss(e, t) {\n  return !e.contains(t.target);\n}\nvar as = () => ({\n  email: so(),\n  url: oo({})\n});\nfunction cs(e, t) {\n  const n = Object.entries(t).map(\n    ([o, s], a) => Array.from(e.matchAll(s)).map(({ index: c, 0: u }) => ({\n      type: o,\n      weight: a,\n      content: u,\n      index: c ?? 0\n    }))\n  ).flat().sort((o, s) => {\n    const a = o.index - s.index;\n    return a !== 0 ? a : o.weight - s.weight;\n  }).filter(({ index: o }, s, a) => {\n    if (s === 0) return !0;\n    const c = a[s - 1];\n    return c.index + c.content.length <= o;\n  }), r = [];\n  let i = 0;\n  for (const { type: o, content: s, index: a } of n)\n    a > i && r.push(e.substring(i, a)), r.push({ type: o, content: s }), i = a + s.length;\n  return e.length > i && r.push(e.substring(i)), r;\n}\nvar ao = [\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.ConnectionStateChanged,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.RoomMetadataChanged,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.ActiveSpeakersChanged,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.ConnectionQualityChanged,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.ParticipantConnected,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.ParticipantDisconnected,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.ParticipantPermissionsChanged,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.ParticipantMetadataChanged,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.ParticipantNameChanged,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.ParticipantAttributesChanged,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.TrackMuted,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.TrackUnmuted,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.TrackPublished,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.TrackUnpublished,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.TrackStreamStateChanged,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.TrackSubscriptionFailed,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.TrackSubscriptionPermissionChanged,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.TrackSubscriptionStatusChanged\n], An = [\n  ...ao,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.LocalTrackPublished,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.LocalTrackUnpublished\n], co = [\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.TrackPublished,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.TrackUnpublished,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.TrackMuted,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.TrackUnmuted,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.TrackStreamStateChanged,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.TrackSubscribed,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.TrackUnsubscribed,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.TrackSubscriptionPermissionChanged,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.TrackSubscriptionFailed,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.LocalTrackPublished,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.LocalTrackUnpublished\n], uo = [\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.ConnectionQualityChanged,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.IsSpeakingChanged,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.ParticipantMetadataChanged,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.ParticipantPermissionsChanged,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.TrackMuted,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.TrackUnmuted,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.TrackPublished,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.TrackUnpublished,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.TrackStreamStateChanged,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.TrackSubscriptionFailed,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.TrackSubscriptionPermissionChanged,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.TrackSubscriptionStatusChanged\n], kn = [\n  ...uo,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.LocalTrackPublished,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.LocalTrackUnpublished\n], L = Kr.getLogger(\"lk-components-js\");\nL.setDefaultLevel(\"WARN\");\nfunction us(e, t = {}) {\n  var n;\n  L.setLevel(e), (0,livekit_client__WEBPACK_IMPORTED_MODULE_0__.setLogLevel)((n = t.liveKitClientLogLevel) != null ? n : e);\n}\nfunction ls(e, t = {}) {\n  var n;\n  const r = L.methodFactory;\n  L.methodFactory = (i, o, s) => {\n    const a = r(i, o, s), c = livekit_client__WEBPACK_IMPORTED_MODULE_0__.LogLevel[i], u = c >= o && c < livekit_client__WEBPACK_IMPORTED_MODULE_0__.LogLevel.silent;\n    return (l, f) => {\n      f ? a(l, f) : a(l), u && e(c, l, f);\n    };\n  }, L.setLevel(L.getLevel()), (0,livekit_client__WEBPACK_IMPORTED_MODULE_0__.setLogExtension)((n = t.liveKitClientLogExtension) != null ? n : e);\n}\nvar fs = [\n  {\n    columns: 1,\n    rows: 1\n  },\n  {\n    columns: 1,\n    rows: 2,\n    orientation: \"portrait\"\n  },\n  {\n    columns: 2,\n    rows: 1,\n    orientation: \"landscape\"\n  },\n  {\n    columns: 2,\n    rows: 2,\n    minWidth: 560\n  },\n  {\n    columns: 3,\n    rows: 3,\n    minWidth: 700\n  },\n  {\n    columns: 4,\n    rows: 4,\n    minWidth: 960\n  },\n  {\n    columns: 5,\n    rows: 5,\n    minWidth: 1100\n  }\n];\nfunction lo(e, t, n, r) {\n  if (e.length < 1)\n    throw new Error(\"At least one grid layout definition must be provided.\");\n  const i = fo(e);\n  if (n <= 0 || r <= 0)\n    return i[0];\n  let o = 0;\n  const s = n / r > 1 ? \"landscape\" : \"portrait\";\n  let a = i.find((c, u, l) => {\n    o = u;\n    const f = l.findIndex((v, d) => {\n      const m = !v.orientation || v.orientation === s, p = d > u, g = v.maxTiles === c.maxTiles;\n      return p && g && m;\n    }) !== -1;\n    return c.maxTiles >= t && !f;\n  });\n  if (a === void 0)\n    if (a = i[i.length - 1], a)\n      L.warn(\n        `No layout found for: participantCount: ${t}, width/height: ${n}/${r} fallback to biggest available layout (${a}).`\n      );\n    else\n      throw new Error(\"No layout or fallback layout found.\");\n  if ((n < a.minWidth || r < a.minHeight) && o > 0) {\n    const c = i[o - 1];\n    a = lo(\n      i.slice(0, o),\n      c.maxTiles,\n      n,\n      r\n    );\n  }\n  return a;\n}\nfunction fo(e) {\n  return [...e].map((t) => {\n    var n, r;\n    return {\n      name: `${t.columns}x${t.rows}`,\n      columns: t.columns,\n      rows: t.rows,\n      maxTiles: t.columns * t.rows,\n      minWidth: (n = t.minWidth) != null ? n : 0,\n      minHeight: (r = t.minHeight) != null ? r : 0,\n      orientation: t.orientation\n    };\n  }).sort((t, n) => t.maxTiles !== n.maxTiles ? t.maxTiles - n.maxTiles : t.minWidth !== 0 || n.minWidth !== 0 ? t.minWidth - n.minWidth : t.minHeight !== 0 || n.minHeight !== 0 ? t.minHeight - n.minHeight : 0);\n}\nfunction ds() {\n  return typeof navigator < \"u\" && navigator.mediaDevices && !!navigator.mediaDevices.getDisplayMedia;\n}\nfunction ps(e, t) {\n  var n;\n  return ce(q({}, e), {\n    receivedAtMediaTimestamp: (n = t.rtpTimestamp) != null ? n : 0,\n    receivedAt: t.timestamp\n  });\n}\nfunction hs(e, t, n) {\n  return [...e, ...t].reduceRight((r, i) => (r.find((o) => o.id === i.id) || r.unshift(i), r), []).slice(0 - n);\n}\nvar po = /* @__PURE__ */ ((e) => (e.AgentState = \"lk.agent.state\", e.PublishOnBehalf = \"lk.publish_on_behalf\", e.TranscriptionFinal = \"lk.transcription_final\", e.TranscriptionSegmentId = \"lk.segment_id\", e.TranscribedTrackId = \"lk.transcribed_track_id\", e))(po || {}), _n = [], Ln = {\n  showChat: !1,\n  unreadMessages: 0,\n  showSettings: !1\n};\nfunction ho(e) {\n  return typeof e == \"object\";\n}\nfunction vs(e) {\n  return Array.isArray(e) && e.filter(ho).length > 0;\n}\nfunction In(e, t) {\n  return t.audioLevel - e.audioLevel;\n}\nfunction Mn(e, t) {\n  return e.isSpeaking === t.isSpeaking ? 0 : e.isSpeaking ? -1 : 1;\n}\nfunction Rn(e, t) {\n  var n, r, i, o;\n  return e.lastSpokeAt !== void 0 || t.lastSpokeAt !== void 0 ? ((r = (n = t.lastSpokeAt) == null ? void 0 : n.getTime()) != null ? r : 0) - ((o = (i = e.lastSpokeAt) == null ? void 0 : i.getTime()) != null ? o : 0) : 0;\n}\nfunction Be(e, t) {\n  var n, r, i, o;\n  return ((r = (n = e.joinedAt) == null ? void 0 : n.getTime()) != null ? r : 0) - ((o = (i = t.joinedAt) == null ? void 0 : i.getTime()) != null ? o : 0);\n}\nfunction vo(e, t) {\n  return B(e) ? B(t) ? 0 : -1 : B(t) ? 1 : 0;\n}\nfunction mo(e, t) {\n  const n = e.participant.isCameraEnabled, r = t.participant.isCameraEnabled;\n  return n !== r ? n ? -1 : 1 : 0;\n}\nfunction ms(e) {\n  const t = [], n = [], r = [], i = [];\n  e.forEach((a) => {\n    a.participant.isLocal && a.source === livekit_client__WEBPACK_IMPORTED_MODULE_0__.Track.Source.Camera ? t.push(a) : a.source === livekit_client__WEBPACK_IMPORTED_MODULE_0__.Track.Source.ScreenShare ? n.push(a) : a.source === livekit_client__WEBPACK_IMPORTED_MODULE_0__.Track.Source.Camera ? r.push(a) : i.push(a);\n  });\n  const o = go(n), s = bo(r);\n  return [...t, ...o, ...s, ...i];\n}\nfunction go(e) {\n  const t = [], n = [];\n  return e.forEach((i) => {\n    i.participant.isLocal ? t.push(i) : n.push(i);\n  }), t.sort((i, o) => Be(i.participant, o.participant)), n.sort((i, o) => Be(i.participant, o.participant)), [...n, ...t];\n}\nfunction bo(e) {\n  const t = [], n = [];\n  return e.forEach((r) => {\n    r.participant.isLocal ? t.push(r) : n.push(r);\n  }), n.sort((r, i) => r.participant.isSpeaking && i.participant.isSpeaking ? In(r.participant, i.participant) : r.participant.isSpeaking !== i.participant.isSpeaking ? Mn(r.participant, i.participant) : r.participant.lastSpokeAt !== i.participant.lastSpokeAt ? Rn(r.participant, i.participant) : B(r) !== B(i) ? vo(r, i) : r.participant.isCameraEnabled !== i.participant.isCameraEnabled ? mo(r, i) : Be(r.participant, i.participant)), [...t, ...n];\n}\nfunction gs(e) {\n  const t = [...e];\n  t.sort((r, i) => {\n    if (r.isSpeaking && i.isSpeaking)\n      return In(r, i);\n    if (r.isSpeaking !== i.isSpeaking)\n      return Mn(r, i);\n    if (r.lastSpokeAt !== i.lastSpokeAt)\n      return Rn(r, i);\n    const o = r.videoTrackPublications.size > 0, s = i.videoTrackPublications.size > 0;\n    return o !== s ? o ? -1 : 1 : Be(r, i);\n  });\n  const n = t.find((r) => r.isLocal);\n  if (n) {\n    const r = t.indexOf(n);\n    r >= 0 && (t.splice(r, 1), t.length > 0 ? t.splice(0, 0, n) : t.push(n));\n  }\n  return t;\n}\nfunction yo(e, t) {\n  return e.reduce(\n    (n, r, i) => i % t === 0 ? [...n, [r]] : [...n.slice(0, -1), [...n.slice(-1)[0], r]],\n    []\n  );\n}\nfunction Ht(e, t) {\n  const n = Math.max(e.length, t.length);\n  return new Array(n).fill([]).map((r, i) => [e[i], t[i]]);\n}\nfunction Ve(e, t, n) {\n  return e.filter((r) => !t.map((i) => n(i)).includes(n(r)));\n}\nfunction ft(e) {\n  return e.map((t) => typeof t == \"string\" || typeof t == \"number\" ? `${t}` : N(t));\n}\nfunction wo(e, t) {\n  return {\n    dropped: Ve(e, t, N),\n    added: Ve(t, e, N)\n  };\n}\nfunction xo(e) {\n  return e.added.length !== 0 || e.dropped.length !== 0;\n}\nfunction dt(e, t) {\n  const n = t.findIndex(\n    (r) => N(r) === N(e)\n  );\n  if (n === -1)\n    throw new Error(\n      `Element not part of the array: ${N(\n        e\n      )} not in ${ft(t)}`\n    );\n  return n;\n}\nfunction So(e, t, n) {\n  const r = dt(e, n), i = dt(t, n);\n  return n.splice(r, 1, t), n.splice(i, 1, e), n;\n}\nfunction To(e, t) {\n  const n = dt(e, t);\n  return t.splice(n, 1), t;\n}\nfunction Eo(e, t) {\n  return [...t, e];\n}\nfunction rt(e, t) {\n  return yo(e, t);\n}\nfunction bs(e, t, n) {\n  let r = Co(e, t);\n  if (r.length < t.length) {\n    const s = Ve(t, r, N);\n    r = [...r, ...s];\n  }\n  const i = rt(r, n), o = rt(t, n);\n  if (Ht(i, o).forEach(([s, a], c) => {\n    if (s && a) {\n      const u = rt(r, n)[c], l = wo(u, a);\n      xo(l) && (L.debug(\n        `Detected visual changes on page: ${c}, current: ${ft(\n          s\n        )}, next: ${ft(a)}`,\n        { changes: l }\n      ), l.added.length === l.dropped.length && Ht(l.added, l.dropped).forEach(([f, v]) => {\n        if (f && v)\n          r = So(f, v, r);\n        else\n          throw new Error(\n            `For a swap action we need a addition and a removal one is missing: ${f}, ${v}`\n          );\n      }), l.added.length === 0 && l.dropped.length > 0 && l.dropped.forEach((f) => {\n        r = To(f, r);\n      }), l.added.length > 0 && l.dropped.length === 0 && l.added.forEach((f) => {\n        r = Eo(f, r);\n      }));\n    }\n  }), r.length > t.length) {\n    const s = Ve(r, t, N);\n    r = r.filter(\n      (a) => !s.map(N).includes(N(a))\n    );\n  }\n  return r;\n}\nfunction Co(e, t) {\n  return e.map((n) => {\n    const r = t.find(\n      (i) => (\n        // If the IDs match or ..\n        N(n) === N(i) || // ... if the current item is a placeholder and the new item is the track reference can replace it.\n        typeof n != \"number\" && Oe(n) && B(i) && io(n, i)\n      )\n    );\n    return r ?? n;\n  });\n}\nfunction U(e) {\n  return `${On}-${e}`;\n}\nfunction ys(e) {\n  const t = zt(e), n = Dn(e.participant).pipe(\n    A(() => zt(e)),\n    D(t)\n  );\n  return { className: U(\n    e.source === livekit_client__WEBPACK_IMPORTED_MODULE_0__.Track.Source.Camera || e.source === livekit_client__WEBPACK_IMPORTED_MODULE_0__.Track.Source.ScreenShare ? \"participant-media-video\" : \"participant-media-audio\"\n  ), trackObserver: n };\n}\nfunction zt(e) {\n  if (B(e))\n    return e.publication;\n  {\n    const { source: t, name: n, participant: r } = e;\n    if (t && n)\n      return r.getTrackPublications().find((i) => i.source === t && i.trackName === n);\n    if (n)\n      return r.getTrackPublicationByName(n);\n    if (t)\n      return r.getTrackPublication(t);\n    throw new Error(\"At least one of source and name needs to be defined\");\n  }\n}\nfunction pe(e, ...t) {\n  return new k((r) => {\n    const i = () => {\n      r.next(e);\n    };\n    return t.forEach((s) => {\n      e.on(s, i);\n    }), () => {\n      t.forEach((s) => {\n        e.off(s, i);\n      });\n    };\n  }).pipe(D(e));\n}\nfunction we(e, t) {\n  return new k((r) => {\n    const i = (...s) => {\n      r.next(s);\n    };\n    return e.on(t, i), () => {\n      e.off(t, i);\n    };\n  });\n}\nfunction ws(e) {\n  return we(e, livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.ConnectionStateChanged).pipe(\n    A(([t]) => t),\n    D(e.state)\n  );\n}\nfunction xs(e) {\n  return pe(\n    e,\n    livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.RoomMetadataChanged,\n    livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.ConnectionStateChanged\n  ).pipe(\n    A((n) => ({ name: n.name, metadata: n.metadata }))\n  );\n}\nfunction Ss(e) {\n  return we(e, livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.ActiveSpeakersChanged).pipe(\n    A(([t]) => t)\n  );\n}\nfunction Ts(e, t, n = !0) {\n  const r = new k((o) => {\n    livekit_client__WEBPACK_IMPORTED_MODULE_0__.Room.getLocalDevices(e, n).then((s) => {\n      o.next(s), o.complete();\n    }).catch((s) => {\n      t == null || t(s), o.next([]), o.complete();\n    });\n  }), i = new k((o) => {\n    var s;\n    const a = () => H(this, null, function* () {\n      try {\n        const c = yield livekit_client__WEBPACK_IMPORTED_MODULE_0__.Room.getLocalDevices(e, n);\n        o.next(c);\n      } catch (c) {\n        t == null || t(c);\n      }\n    });\n    if (typeof window < \"u\") {\n      if (!window.isSecureContext)\n        throw new Error(\n          \"Accessing media devices is available only in secure contexts (HTTPS and localhost), in some or all supporting browsers. See: https://developer.mozilla.org/en-US/docs/Web/API/Navigator/mediaDevices\"\n        );\n      (s = navigator == null ? void 0 : navigator.mediaDevices) == null || s.addEventListener(\"devicechange\", a);\n    }\n    return () => {\n      var c;\n      (c = navigator == null ? void 0 : navigator.mediaDevices) == null || c.removeEventListener(\"devicechange\", a);\n    };\n  });\n  return je(r, i);\n}\nfunction Po(e) {\n  return we(e, livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.DataReceived);\n}\nfunction Oo(e) {\n  return pe(e, livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.AudioPlaybackStatusChanged).pipe(\n    A((n) => ({ canPlayAudio: n.canPlaybackAudio }))\n  );\n}\nfunction Ao(e) {\n  return pe(e, livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.VideoPlaybackStatusChanged).pipe(\n    A((n) => ({ canPlayVideo: n.canPlaybackVideo }))\n  );\n}\nfunction ko(e, t) {\n  return we(e, livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.ActiveDeviceChanged).pipe(\n    Xe(([n]) => n === t),\n    A(([n, r]) => (L.debug(\"activeDeviceObservable | RoomEvent.ActiveDeviceChanged\", { kind: n, deviceId: r }), r))\n  );\n}\nfunction Es(e, t) {\n  return we(e, livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.ParticipantEncryptionStatusChanged).pipe(\n    Xe(\n      ([, n]) => (t == null ? void 0 : t.identity) === (n == null ? void 0 : n.identity) || !n && (t == null ? void 0 : t.identity) === e.localParticipant.identity\n    ),\n    A(([n]) => n),\n    D(\n      t != null && t.isLocal ? t.isE2EEEnabled : !!(t != null && t.isEncrypted)\n    )\n  );\n}\nfunction Cs(e) {\n  return we(e, livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.RecordingStatusChanged).pipe(\n    A(([t]) => t),\n    D(e.isRecording)\n  );\n}\nfunction xe(e, ...t) {\n  return new k((r) => {\n    const i = () => {\n      r.next(e);\n    };\n    return t.forEach((s) => {\n      e.on(s, i);\n    }), () => {\n      t.forEach((s) => {\n        e.off(s, i);\n      });\n    };\n  }).pipe(D(e));\n}\nfunction Dn(e) {\n  return xe(\n    e,\n    livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.TrackMuted,\n    livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.TrackUnmuted,\n    livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.ParticipantPermissionsChanged,\n    // ParticipantEvent.IsSpeakingChanged,\n    livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.TrackPublished,\n    livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.TrackUnpublished,\n    livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.LocalTrackPublished,\n    livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.LocalTrackUnpublished,\n    livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.MediaDevicesError,\n    livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.TrackSubscriptionStatusChanged\n    // ParticipantEvent.ConnectionQualityChanged,\n  ).pipe(\n    A((n) => {\n      const { isMicrophoneEnabled: r, isCameraEnabled: i, isScreenShareEnabled: o } = n, s = n.getTrackPublication(livekit_client__WEBPACK_IMPORTED_MODULE_0__.Track.Source.Microphone), a = n.getTrackPublication(livekit_client__WEBPACK_IMPORTED_MODULE_0__.Track.Source.Camera);\n      return {\n        isCameraEnabled: i,\n        isMicrophoneEnabled: r,\n        isScreenShareEnabled: o,\n        cameraTrack: a,\n        microphoneTrack: s,\n        participant: n\n      };\n    })\n  );\n}\nfunction _o(e) {\n  return e ? xe(\n    e,\n    livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.ParticipantMetadataChanged,\n    livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.ParticipantNameChanged\n  ).pipe(\n    A(({ name: n, identity: r, metadata: i }) => ({\n      name: n,\n      identity: r,\n      metadata: i\n    })),\n    D({\n      name: e.name,\n      identity: e.identity,\n      metadata: e.metadata\n    })\n  ) : void 0;\n}\nfunction Lo(e) {\n  return Ze(\n    e,\n    livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.ConnectionQualityChanged\n  ).pipe(\n    A(([n]) => n),\n    D(e.connectionQuality)\n  );\n}\nfunction Ze(e, t) {\n  return new k((r) => {\n    const i = (...s) => {\n      r.next(s);\n    };\n    return e.on(t, i), () => {\n      e.off(t, i);\n    };\n  });\n}\nfunction Io(e) {\n  var t, n, r, i;\n  return xe(\n    e.participant,\n    livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.TrackMuted,\n    livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.TrackUnmuted,\n    livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.TrackSubscribed,\n    livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.TrackUnsubscribed,\n    livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.LocalTrackPublished,\n    livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.LocalTrackUnpublished\n  ).pipe(\n    A((o) => {\n      var s, a;\n      const c = (s = e.publication) != null ? s : o.getTrackPublication(e.source);\n      return (a = c == null ? void 0 : c.isMuted) != null ? a : !0;\n    }),\n    D(\n      (i = (r = (t = e.publication) == null ? void 0 : t.isMuted) != null ? r : (n = e.participant.getTrackPublication(e.source)) == null ? void 0 : n.isMuted) != null ? i : !0\n    )\n  );\n}\nfunction Ps(e) {\n  return Ze(e, livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.IsSpeakingChanged).pipe(\n    A(([t]) => t)\n  );\n}\nfunction Os(e, t = {}) {\n  var n;\n  let r;\n  const i = new k((c) => (r = c, () => a.unsubscribe())).pipe(D(Array.from(e.remoteParticipants.values()))), o = (n = t.additionalRoomEvents) != null ? n : An, s = Array.from(\n    /* @__PURE__ */ new Set([\n      livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.ParticipantConnected,\n      livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.ParticipantDisconnected,\n      livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.ConnectionStateChanged,\n      ...o\n    ])\n  ), a = pe(e, ...s).subscribe(\n    (c) => r == null ? void 0 : r.next(Array.from(c.remoteParticipants.values()))\n  );\n  return e.remoteParticipants.size > 0 && (r == null || r.next(Array.from(e.remoteParticipants.values()))), i;\n}\nfunction As(e, t, n = {}) {\n  var r;\n  const i = (r = n.additionalEvents) != null ? r : kn;\n  return pe(\n    e,\n    livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.ParticipantConnected,\n    livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.ParticipantDisconnected,\n    livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.ConnectionStateChanged\n  ).pipe(\n    Pn((s) => {\n      const a = s.getParticipantByIdentity(t);\n      return a ? xe(a, ...i) : new k((c) => c.next(void 0));\n    }),\n    D(e.getParticipantByIdentity(t))\n  );\n}\nfunction ks(e) {\n  return Ze(\n    e,\n    livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.ParticipantPermissionsChanged\n  ).pipe(\n    A(() => e.permissions),\n    D(e.permissions)\n  );\n}\nfunction _s(e, { kind: t, identity: n }, r = {}) {\n  var i;\n  const o = (i = r.additionalEvents) != null ? i : kn, s = (c) => {\n    let u = !0;\n    return t && (u = u && c.kind === t), n && (u = u && c.identity === n), u;\n  };\n  return pe(\n    e,\n    livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.ParticipantConnected,\n    livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.ParticipantDisconnected,\n    livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.ConnectionStateChanged\n  ).pipe(\n    Pn((c) => {\n      const u = Array.from(c.remoteParticipants.values()).find(\n        (l) => s(l)\n      );\n      return u ? xe(u, ...o) : new k((l) => l.next(void 0));\n    }),\n    D(Array.from(e.remoteParticipants.values()).find((c) => s(c)))\n  );\n}\nfunction Ls(e) {\n  return typeof e > \"u\" ? new k() : Ze(e, livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.AttributesChanged).pipe(\n    A(([t]) => ({\n      changed: t,\n      attributes: e.attributes\n    })),\n    D({ changed: e.attributes, attributes: e.attributes })\n  );\n}\nfunction Is(e, t, n, r, i) {\n  const { localParticipant: o } = t, s = (f, v) => {\n    let d = !1;\n    switch (f) {\n      case livekit_client__WEBPACK_IMPORTED_MODULE_0__.Track.Source.Camera:\n        d = v.isCameraEnabled;\n        break;\n      case livekit_client__WEBPACK_IMPORTED_MODULE_0__.Track.Source.Microphone:\n        d = v.isMicrophoneEnabled;\n        break;\n      case livekit_client__WEBPACK_IMPORTED_MODULE_0__.Track.Source.ScreenShare:\n        d = v.isScreenShareEnabled;\n        break;\n    }\n    return d;\n  }, a = Dn(o).pipe(\n    A((f) => s(e, f.participant)),\n    D(s(e, o))\n  ), c = new te(), u = (f, v) => H(this, null, function* () {\n    try {\n      switch (v ?? (v = n), c.next(!0), e) {\n        case livekit_client__WEBPACK_IMPORTED_MODULE_0__.Track.Source.Camera:\n          return yield o.setCameraEnabled(\n            f ?? !o.isCameraEnabled,\n            v,\n            r\n          ), o.isCameraEnabled;\n        case livekit_client__WEBPACK_IMPORTED_MODULE_0__.Track.Source.Microphone:\n          return yield o.setMicrophoneEnabled(\n            f ?? !o.isMicrophoneEnabled,\n            v,\n            r\n          ), o.isMicrophoneEnabled;\n        case livekit_client__WEBPACK_IMPORTED_MODULE_0__.Track.Source.ScreenShare:\n          return yield o.setScreenShareEnabled(\n            f ?? !o.isScreenShareEnabled,\n            v,\n            r\n          ), o.isScreenShareEnabled;\n        default:\n          throw new TypeError(\"Tried to toggle unsupported source\");\n      }\n    } catch (d) {\n      if (i && d instanceof Error) {\n        i == null || i(d);\n        return;\n      } else\n        throw d;\n    } finally {\n      c.next(!1);\n    }\n  });\n  return {\n    className: U(\"button\"),\n    toggle: u,\n    enabledObserver: a,\n    pendingObserver: c.asObservable()\n  };\n}\nfunction Ms() {\n  let e = !1;\n  const t = new te(), n = new te(), r = (o) => H(this, null, function* () {\n    n.next(!0), e = o ?? !e, t.next(e), n.next(!1);\n  });\n  return {\n    className: U(\"button\"),\n    toggle: r,\n    enabledObserver: t.asObservable(),\n    pendingObserver: n.asObservable()\n  };\n}\nfunction Rs(e, t, n) {\n  const r = new pn(void 0), i = ko(t, e), o = (a, ...c) => H(this, [a, ...c], function* (u, l = {}) {\n    var f, v, d;\n    if (t) {\n      const m = (0,livekit_client__WEBPACK_IMPORTED_MODULE_0__.getBrowser)();\n      if (e === \"audiooutput\" && ((m == null ? void 0 : m.name) === \"Safari\" || (m == null ? void 0 : m.os) === \"iOS\")) {\n        L.warn(\"Switching audio output device is not supported on Safari and iOS.\");\n        return;\n      }\n      L.debug(`Switching active device of kind \"${e}\" with id ${u}.`), yield t.switchActiveDevice(e, u, l.exact);\n      const p = (f = t.getActiveDevice(e)) != null ? f : u;\n      p !== u && u !== \"default\" && L.info(\n        `We tried to select the device with id (${u}), but the browser decided to select the device with id (${p}) instead.`\n      );\n      let g;\n      e === \"audioinput\" ? g = (v = t.localParticipant.getTrackPublication(livekit_client__WEBPACK_IMPORTED_MODULE_0__.Track.Source.Microphone)) == null ? void 0 : v.track : e === \"videoinput\" && (g = (d = t.localParticipant.getTrackPublication(livekit_client__WEBPACK_IMPORTED_MODULE_0__.Track.Source.Camera)) == null ? void 0 : d.track);\n      const h = u === \"default\" && !g || u === \"default\" && (g == null ? void 0 : g.mediaStreamTrack.label.startsWith(\"Default\"));\n      r.next(h ? u : p);\n    }\n  });\n  return {\n    className: U(\"media-device-select\"),\n    activeDeviceObservable: i,\n    setActiveMediaDevice: o\n  };\n}\nfunction Ds(e) {\n  const t = (r) => {\n    e.disconnect(r);\n  };\n  return { className: U(\"disconnect-button\"), disconnect: t };\n}\nfunction $s(e) {\n  const t = U(\"connection-quality\"), n = Lo(e);\n  return { className: t, connectionQualityObserver: n };\n}\nfunction Ns(e) {\n  let t = \"track-muted-indicator-camera\";\n  switch (e.source) {\n    case livekit_client__WEBPACK_IMPORTED_MODULE_0__.Track.Source.Camera:\n      t = \"track-muted-indicator-camera\";\n      break;\n    case livekit_client__WEBPACK_IMPORTED_MODULE_0__.Track.Source.Microphone:\n      t = \"track-muted-indicator-microphone\";\n      break;\n  }\n  const n = U(t), r = Io(e);\n  return { className: n, mediaMutedObserver: r };\n}\nfunction Fs(e) {\n  return { className: \"lk-participant-name\", infoObserver: _o(e) };\n}\nfunction Us() {\n  return {\n    className: U(\"participant-tile\")\n  };\n}\nvar Mo = {\n  CHAT: \"lk.chat\",\n  TRANSCRIPTION: \"lk.transcription\"\n}, Ro = {\n  CHAT: \"lk-chat-topic\"\n};\nfunction $n(e, t) {\n  return H(this, arguments, function* (n, r, i = {}) {\n    const { reliable: o, destinationIdentities: s, topic: a } = i;\n    yield n.publishData(r, {\n      destinationIdentities: s,\n      topic: a,\n      reliable: o\n    });\n  });\n}\nfunction Do(e, t, n) {\n  const r = Array.isArray(t) ? t : [t], i = Po(e).pipe(\n    Xe(\n      ([, , , c]) => t === void 0 || c !== void 0 && r.includes(c)\n    ),\n    A(([c, u, , l]) => {\n      const f = {\n        payload: c,\n        topic: l,\n        from: u\n      };\n      return n == null || n(f), f;\n    })\n  );\n  let o;\n  const s = new k((c) => {\n    o = c;\n  });\n  return { messageObservable: i, isSendingObservable: s, send: (c, ...u) => H(this, [c, ...u], function* (l, f = {}) {\n    o.next(!0);\n    try {\n      yield $n(e.localParticipant, l, q({ topic: r[0] }, f));\n    } finally {\n      o.next(!1);\n    }\n  }) };\n}\nvar Ie = /* @__PURE__ */ new WeakMap();\nfunction $o(e) {\n  return e.ignoreLegacy == !0;\n}\nvar No = (e) => JSON.parse(new TextDecoder().decode(e)), Fo = (e) => new TextEncoder().encode(JSON.stringify(e));\nfunction Ws(e, t) {\n  var n, r, i, o, s, a;\n  const c = () => {\n    var b, S, C;\n    return ((b = e.serverInfo) == null ? void 0 : b.edition) === 1 || !!((S = e.serverInfo) != null && S.version) && (0,livekit_client__WEBPACK_IMPORTED_MODULE_0__.compareVersions)((C = e.serverInfo) == null ? void 0 : C.version, \"1.8.2\") > 0;\n  }, u = new te(), l = (n = t == null ? void 0 : t.channelTopic) != null ? n : Mo.CHAT, f = (r = t == null ? void 0 : t.channelTopic) != null ? r : Ro.CHAT;\n  let v = !1;\n  Ie.has(e) || (v = !0);\n  const d = (i = Ie.get(e)) != null ? i : /* @__PURE__ */ new Map(), m = (o = d.get(l)) != null ? o : new te();\n  d.set(l, m), Ie.set(e, d);\n  const p = (s = t == null ? void 0 : t.messageDecoder) != null ? s : No;\n  if (v) {\n    e.registerTextStreamHandler(l, (S, C) => H(this, null, function* () {\n      const { id: $, timestamp: M } = S.info;\n      Je(S).pipe(\n        lt((T, _) => T + _),\n        A((T) => ({\n          id: $,\n          timestamp: M,\n          message: T,\n          from: e.getParticipantByIdentity(C.identity),\n          type: \"chatMessage\"\n          // editTimestamp: type === 'update' ? timestamp : undefined,\n        }))\n      ).subscribe({\n        next: (T) => m.next(T)\n      });\n    }));\n    const { messageObservable: b } = Do(e, [f]);\n    b.pipe(\n      A((S) => {\n        const C = p(S.payload);\n        return $o(C) ? void 0 : ce(q({}, C), {\n          type: \"chatMessage\",\n          from: S.from\n        });\n      }),\n      Xe((S) => !!S),\n      Wt(u)\n    ).subscribe(m);\n  }\n  const g = m.pipe(\n    lt((b, S) => {\n      if (\"id\" in S && b.find((C) => {\n        var $, M;\n        return (($ = C.from) == null ? void 0 : $.identity) === ((M = S.from) == null ? void 0 : M.identity) && C.id === S.id;\n      })) {\n        const C = b.findIndex(($) => $.id === S.id);\n        if (C > -1) {\n          const $ = b[C];\n          b[C] = ce(q({}, S), {\n            timestamp: $.timestamp,\n            editTimestamp: S.timestamp\n          });\n        }\n        return [...b];\n      }\n      return [...b, S];\n    }, []),\n    Wt(u)\n  ), h = new pn(!1), x = (a = t == null ? void 0 : t.messageEncoder) != null ? a : Fo, E = (b, S) => H(this, null, function* () {\n    var C;\n    S || (S = {}), (C = S.topic) != null || (S.topic = l), h.next(!0);\n    try {\n      const M = {\n        id: (yield e.localParticipant.sendText(b, S)).id,\n        timestamp: Date.now(),\n        message: b\n      }, V = ce(q({}, M), {\n        attachedFiles: S.attachments\n      }), T = ce(q({}, V), {\n        type: \"chatMessage\",\n        from: e.localParticipant,\n        attributes: S.attributes\n      });\n      m.next(T);\n      const _ = x(ce(q({}, M), {\n        ignoreLegacy: c()\n      }));\n      try {\n        yield $n(e.localParticipant, _, {\n          reliable: !0,\n          topic: f\n        });\n      } catch (ee) {\n        L.info(\"could not send message in legacy chat format\", ee);\n      }\n      return T;\n    } finally {\n      h.next(!1);\n    }\n  });\n  function O() {\n    u.next(), u.complete(), m.complete(), Ie.delete(e), e.unregisterTextStreamHandler(l);\n  }\n  return e.once(livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.Disconnected, O), {\n    messageObservable: g,\n    isSendingObservable: h,\n    send: E\n  };\n}\nfunction js() {\n  const e = (n) => H(this, null, function* () {\n    L.info(\"Start Audio for room: \", n), yield n.startAudio();\n  });\n  return { className: U(\"start-audio-button\"), roomAudioPlaybackAllowedObservable: Oo, handleStartAudioPlayback: e };\n}\nfunction Bs() {\n  const e = (n) => H(this, null, function* () {\n    L.info(\"Start Video for room: \", n), yield n.startVideo();\n  });\n  return { className: U(\"start-audio-button\"), roomVideoPlaybackAllowedObservable: Ao, handleStartVideoPlayback: e };\n}\nfunction Vs() {\n  return { className: [U(\"button\"), U(\"chat-toggle\")].join(\" \") };\n}\nfunction Hs() {\n  return { className: [U(\"button\"), U(\"focus-toggle-button\")].join(\" \") };\n}\nfunction zs() {\n  return { className: \"lk-clear-pin-button lk-button\" };\n}\nfunction Ys() {\n  return { className: \"lk-room-container\" };\n}\nfunction Yt(e, t, n = !0) {\n  const i = [e.localParticipant, ...Array.from(e.remoteParticipants.values())], o = [];\n  return i.forEach((s) => {\n    t.forEach((a) => {\n      const c = Array.from(\n        s.trackPublications.values()\n      ).filter(\n        (u) => u.source === a && // either return all or only the ones that are subscribed\n        (!n || u.track)\n      ).map((u) => ({\n        participant: s,\n        publication: u,\n        source: u.source\n      }));\n      o.push(...c);\n    });\n  }), { trackReferences: o, participants: i };\n}\nfunction qt(e, t, n = !1) {\n  const { sources: r, kind: i, name: o } = t;\n  return Array.from(e.trackPublications.values()).filter(\n    (a) => (!r || r.includes(a.source)) && (!i || a.kind === i) && (!o || a.trackName === o) && // either return all or only the ones that are subscribed\n    (!n || a.track)\n  ).map((a) => ({\n    participant: e,\n    publication: a,\n    source: a.source\n  }));\n}\nfunction qs(e, t, n) {\n  var r, i;\n  const o = (r = n.additionalRoomEvents) != null ? r : An, s = (i = n.onlySubscribed) != null ? i : !0, a = Array.from(\n    (/* @__PURE__ */ new Set([\n      livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.ParticipantConnected,\n      livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.ParticipantDisconnected,\n      livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.ConnectionStateChanged,\n      livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.LocalTrackPublished,\n      livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.LocalTrackUnpublished,\n      livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.TrackPublished,\n      livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.TrackUnpublished,\n      livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.TrackSubscriptionStatusChanged,\n      ...o\n    ])).values()\n  );\n  return pe(e, ...a).pipe(\n    A((u) => {\n      const l = Yt(u, t, s);\n      return L.debug(`TrackReference[] was updated. (length ${l.trackReferences.length})`, l), l;\n    }),\n    D(Yt(e, t, s))\n  );\n}\nfunction Ks(e, t) {\n  return xe(e, ...co).pipe(\n    A((r) => {\n      const i = qt(r, t);\n      return L.debug(`TrackReference[] was updated. (length ${i.length})`, i), i;\n    }),\n    D(qt(e, t))\n  );\n}\nfunction Nn(e, t) {\n  return new k((r) => {\n    const i = (...s) => {\n      r.next(s);\n    };\n    return e.on(t, i), () => {\n      e.off(t, i);\n    };\n  });\n}\nfunction Gs(e) {\n  return Nn(e, livekit_client__WEBPACK_IMPORTED_MODULE_0__.TrackEvent.TranscriptionReceived);\n}\nfunction Qs(e) {\n  return Nn(e, livekit_client__WEBPACK_IMPORTED_MODULE_0__.TrackEvent.TimeSyncUpdate).pipe(\n    A(([t]) => t)\n  );\n}\nfunction Js(e, t = 1e3) {\n  if (e === null) return Ft(!1);\n  const n = ut(e, \"mousemove\", { passive: !0 }).pipe(A(() => !0)), r = n.pipe(\n    Li({\n      each: t,\n      with: () => je(Ft(!1), r.pipe(Gi(n)))\n    }),\n    Yi()\n  );\n  return r;\n}\nfunction Uo(e, t) {\n  if (typeof localStorage > \"u\") {\n    L.error(\"Local storage is not available.\");\n    return;\n  }\n  try {\n    if (t) {\n      const n = Object.fromEntries(\n        Object.entries(t).filter(([, r]) => r !== \"\")\n      );\n      localStorage.setItem(e, JSON.stringify(n));\n    }\n  } catch (n) {\n    L.error(`Error setting item to local storage: ${n}`);\n  }\n}\nfunction Wo(e) {\n  if (typeof localStorage > \"u\") {\n    L.error(\"Local storage is not available.\");\n    return;\n  }\n  try {\n    const t = localStorage.getItem(e);\n    if (!t) {\n      L.warn(`Item with key ${e} does not exist in local storage.`);\n      return;\n    }\n    return JSON.parse(t);\n  } catch (t) {\n    L.error(`Error getting item from local storage: ${t}`);\n    return;\n  }\n}\nfunction jo(e) {\n  return {\n    load: () => Wo(e),\n    save: (t) => Uo(e, t)\n  };\n}\nvar Bo = `${On}-user-choices`, Ee = {\n  videoEnabled: !0,\n  audioEnabled: !0,\n  videoDeviceId: \"default\",\n  audioDeviceId: \"default\",\n  username: \"\"\n}, { load: Vo, save: Ho } = jo(Bo);\nfunction Xs(e, t = !1) {\n  t !== !0 && Ho(e);\n}\nfunction Zs(e, t = !1) {\n  var n, r, i, o, s;\n  const a = {\n    videoEnabled: (n = e == null ? void 0 : e.videoEnabled) != null ? n : Ee.videoEnabled,\n    audioEnabled: (r = e == null ? void 0 : e.audioEnabled) != null ? r : Ee.audioEnabled,\n    videoDeviceId: (i = e == null ? void 0 : e.videoDeviceId) != null ? i : Ee.videoDeviceId,\n    audioDeviceId: (o = e == null ? void 0 : e.audioDeviceId) != null ? o : Ee.audioDeviceId,\n    username: (s = e == null ? void 0 : e.username) != null ? s : Ee.username\n  };\n  if (t)\n    return a;\n  {\n    const c = Vo();\n    return q(q({}, a), c ?? {});\n  }\n}\nvar it = null, ot = null, zo = 0;\nfunction Kt() {\n  return it || (it = /* @__PURE__ */ new Map()), it;\n}\nfunction Yo() {\n  return ot || (ot = /* @__PURE__ */ new WeakMap()), ot;\n}\nfunction qo(e, t) {\n  const n = Yo();\n  let r = n.get(e);\n  return r || (r = `room_${zo++}`, n.set(e, r)), `${r}:${t}`;\n}\nfunction ea(e, t) {\n  const n = qo(e, t), r = Kt(), i = r.get(n);\n  if (i)\n    return i;\n  const o = new te();\n  let s = [];\n  const a = \"lk.segment_id\", c = o.pipe(\n    Qi({\n      subscribe: () => {\n        e.registerTextStreamHandler(t, (u, l) => H(this, null, function* () {\n          var f;\n          const v = Je(u).pipe(\n            lt((m, p) => m + p, \"\")\n          ), d = !!((f = u.info.attributes) != null && f[a]);\n          v.subscribe((m) => {\n            const p = s.findIndex(\n              (g) => {\n                var h, x;\n                return g.streamInfo.id === u.info.id || d && ((h = g.streamInfo.attributes) == null ? void 0 : h[a]) === ((x = u.info.attributes) == null ? void 0 : x[a]);\n              }\n            );\n            p !== -1 ? (s[p] = ce(q({}, s[p]), {\n              text: m\n            }), o.next([...s])) : (s.push({\n              text: m,\n              participantInfo: l,\n              streamInfo: u.info\n            }), o.next([...s]));\n          });\n        }));\n      },\n      finalize: () => {\n        e.unregisterTextStreamHandler(t);\n      }\n    }),\n    Ki()\n  );\n  return r.set(n, c), e.on(livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.Disconnected, () => {\n    Kt().delete(n), s = [], o.next([]);\n  }), c;\n}\nfunction Fn(e, t) {\n  if (t.msg === \"show_chat\")\n    return { ...e, showChat: !0, unreadMessages: 0 };\n  if (t.msg === \"hide_chat\")\n    return { ...e, showChat: !1 };\n  if (t.msg === \"toggle_chat\") {\n    const n = { ...e, showChat: !e.showChat };\n    return n.showChat === !0 && (n.unreadMessages = 0), n;\n  } else return t.msg === \"unread_msg\" ? { ...e, unreadMessages: t.count } : t.msg === \"toggle_settings\" ? { ...e, showSettings: !e.showSettings } : { ...e };\n}\nfunction Un(e, t) {\n  return t.msg === \"set_pin\" ? [t.trackReference] : t.msg === \"clear_pin\" ? [] : { ...e };\n}\nconst Wn = react__WEBPACK_IMPORTED_MODULE_1__.createContext(void 0);\nfunction ta() {\n  const e = react__WEBPACK_IMPORTED_MODULE_1__.useContext(Wn);\n  if (!e)\n    throw Error(\"Tried to access LayoutContext context outside a LayoutContextProvider provider.\");\n  return e;\n}\nfunction na(e) {\n  const t = Ko();\n  if (e ?? (e = t), !e)\n    throw Error(\"Tried to access LayoutContext context outside a LayoutContextProvider provider.\");\n  return e;\n}\nfunction ra() {\n  const [e, t] = react__WEBPACK_IMPORTED_MODULE_1__.useReducer(Un, _n), [n, r] = react__WEBPACK_IMPORTED_MODULE_1__.useReducer(Fn, Ln);\n  return {\n    pin: { dispatch: t, state: e },\n    widget: { dispatch: r, state: n }\n  };\n}\nfunction ia(e) {\n  const [t, n] = react__WEBPACK_IMPORTED_MODULE_1__.useReducer(Un, _n), [r, i] = react__WEBPACK_IMPORTED_MODULE_1__.useReducer(Fn, Ln);\n  return e ?? {\n    pin: { dispatch: n, state: t },\n    widget: { dispatch: i, state: r }\n  };\n}\nfunction Ko() {\n  return react__WEBPACK_IMPORTED_MODULE_1__.useContext(Wn);\n}\nconst jn = react__WEBPACK_IMPORTED_MODULE_1__.createContext(\n  void 0\n);\nfunction oa() {\n  const e = react__WEBPACK_IMPORTED_MODULE_1__.useContext(jn);\n  if (!e)\n    throw Error(\"tried to access track context outside of track context provider\");\n  return e;\n}\nfunction Bn() {\n  return react__WEBPACK_IMPORTED_MODULE_1__.useContext(jn);\n}\nfunction sa(e) {\n  const t = Bn(), n = e ?? t;\n  if (!n)\n    throw new Error(\n      \"No TrackRef, make sure you are inside a TrackRefContext or pass the TrackRef explicitly\"\n    );\n  return n;\n}\nconst Vn = react__WEBPACK_IMPORTED_MODULE_1__.createContext(void 0);\nfunction aa() {\n  const e = react__WEBPACK_IMPORTED_MODULE_1__.useContext(Vn);\n  if (!e)\n    throw Error(\"tried to access participant context outside of participant context provider\");\n  return e;\n}\nfunction Go() {\n  return react__WEBPACK_IMPORTED_MODULE_1__.useContext(Vn);\n}\nfunction ca(e) {\n  const t = Go(), n = Bn(), r = e ?? t ?? (n == null ? void 0 : n.participant);\n  if (!r)\n    throw new Error(\n      \"No participant provided, make sure you are inside a participant context or pass the participant explicitly\"\n    );\n  return r;\n}\nconst Hn = react__WEBPACK_IMPORTED_MODULE_1__.createContext(void 0);\nfunction ua() {\n  const e = react__WEBPACK_IMPORTED_MODULE_1__.useContext(Hn);\n  if (!e)\n    throw Error(\"tried to access room context outside of livekit room component\");\n  return e;\n}\nfunction Qo() {\n  return react__WEBPACK_IMPORTED_MODULE_1__.useContext(Hn);\n}\nfunction la(e) {\n  const t = Qo(), n = e ?? t;\n  if (!n)\n    throw new Error(\n      \"No room provided, make sure you are inside a Room context or pass the room explicitly\"\n    );\n  return n;\n}\nconst zn = react__WEBPACK_IMPORTED_MODULE_1__.createContext(void 0);\nfunction fa() {\n  const e = react__WEBPACK_IMPORTED_MODULE_1__.useContext(zn);\n  if (!e)\n    throw Error(\"tried to access session context outside of SessionProvider component\");\n  return e;\n}\nfunction Jo() {\n  return react__WEBPACK_IMPORTED_MODULE_1__.useContext(zn);\n}\nfunction da(e) {\n  const t = Jo(), n = e ?? t;\n  if (!n)\n    throw new Error(\n      \"No session provided, make sure you are inside a Session context or pass the session explicitly\"\n    );\n  return n;\n}\nconst Xo = react__WEBPACK_IMPORTED_MODULE_1__.createContext(void 0);\nfunction pa(e) {\n  const t = react__WEBPACK_IMPORTED_MODULE_1__.useContext(Xo);\n  if (e === !0) {\n    if (t)\n      return t;\n    throw Error(\"tried to access feature context, but none is present\");\n  }\n  return t;\n}\n\n//# sourceMappingURL=contexts-CsO1QZ3r.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxpdmVraXQvY29tcG9uZW50cy1yZWFjdC9kaXN0L2NvbnRleHRzLUNzTzFRWjNyLm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFvTjtBQUN6TDtBQUMzQjtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQSxJQUFJLDRCQUE0QjtBQUNoQyxrQkFBa0IsY0FBYztBQUNoQztBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQ0FBZ0M7QUFDaEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWU7QUFDZjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUixzSEFBc0g7QUFDdEg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNELGdDQUFnQztBQUNoQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWM7QUFDZDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVMsZ0JBQWdCO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLG1CQUFtQjtBQUM5QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUyxnQkFBZ0I7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNB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QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0EsR0FBRztBQUNILENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0EsNEJBQTRCLHNCQUFzQjtBQUNsRDtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0EsR0FBRztBQUNIO0FBQ0EsR0FBRztBQUNIO0FBQ0EsR0FBRztBQUNIO0FBQ0EsR0FBRztBQUNIO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0EsR0FBRztBQUNILENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLEdBQUc7QUFDSDtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWTtBQUNaO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBLEtBQUs7QUFDTCxHQUFHO0FBQ0g7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBLEdBQUc7QUFDSCw0QkFBNEIsc0JBQXNCO0FBQ2xEO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBLE9BQU87QUFDUDtBQUNBLE9BQU87QUFDUCxLQUFLO0FBQ0wsR0FBRztBQUNIO0FBQ0EsR0FBRztBQUNILENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSCxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2REFBNkQsU0FBUztBQUN0RTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1YsZ0JBQWdCO0FBQ2hCLFVBQVU7QUFDVjtBQUNBO0FBQ0EsWUFBWTtBQUNaO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtDQUFrQyxVQUFVO0FBQzVDO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0NBQWtDLFVBQVU7QUFDNUM7QUFDQTtBQUNBLEtBQUs7QUFDTCxHQUFHO0FBQ0g7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQSxHQUFHO0FBQ0g7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLEdBQUc7QUFDSDtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQSxHQUFHO0FBQ0gsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0EsR0FBRztBQUNILENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNILENBQUM7QUFDRDtBQUNBLDRCQUE0QixzQkFBc0I7QUFDbEQ7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNILENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNILENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWEsZUFBZTtBQUM1QjtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FB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Ly4vbm9kZV9tb2R1bGVzL0BsaXZla2l0L2NvbXBvbmVudHMtcmVhY3QvZGlzdC9jb250ZXh0cy1Dc08xUVozci5tanM/ZTMzNSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBzZXRMb2dMZXZlbCBhcyBxbiwgTG9nTGV2ZWwgYXMgU3QsIHNldExvZ0V4dGVuc2lvbiBhcyBLbiwgUm9vbUV2ZW50IGFzIHksIFBhcnRpY2lwYW50RXZlbnQgYXMgdywgVHJhY2sgYXMgUiwgVHJhY2tFdmVudCBhcyBHdCwgZ2V0QnJvd3NlciBhcyBHbiwgY29tcGFyZVZlcnNpb25zIGFzIFFuLCBSb29tIGFzIFR0IH0gZnJvbSBcImxpdmVraXQtY2xpZW50XCI7XG5pbXBvcnQgKiBhcyBJIGZyb20gXCJyZWFjdFwiO1xuY29uc3QgRGUgPSBNYXRoLm1pbiwgdWUgPSBNYXRoLm1heCwgJGUgPSBNYXRoLnJvdW5kLCBfZSA9IE1hdGguZmxvb3IsIEogPSAoZSkgPT4gKHtcbiAgeDogZSxcbiAgeTogZVxufSksIEpuID0ge1xuICBsZWZ0OiBcInJpZ2h0XCIsXG4gIHJpZ2h0OiBcImxlZnRcIixcbiAgYm90dG9tOiBcInRvcFwiLFxuICB0b3A6IFwiYm90dG9tXCJcbn0sIFhuID0ge1xuICBzdGFydDogXCJlbmRcIixcbiAgZW5kOiBcInN0YXJ0XCJcbn07XG5mdW5jdGlvbiBFdChlLCB0LCBuKSB7XG4gIHJldHVybiB1ZShlLCBEZSh0LCBuKSk7XG59XG5mdW5jdGlvbiBIZShlLCB0KSB7XG4gIHJldHVybiB0eXBlb2YgZSA9PSBcImZ1bmN0aW9uXCIgPyBlKHQpIDogZTtcbn1cbmZ1bmN0aW9uIGxlKGUpIHtcbiAgcmV0dXJuIGUuc3BsaXQoXCItXCIpWzBdO1xufVxuZnVuY3Rpb24gemUoZSkge1xuICByZXR1cm4gZS5zcGxpdChcIi1cIilbMV07XG59XG5mdW5jdGlvbiBRdChlKSB7XG4gIHJldHVybiBlID09PSBcInhcIiA/IFwieVwiIDogXCJ4XCI7XG59XG5mdW5jdGlvbiBKdChlKSB7XG4gIHJldHVybiBlID09PSBcInlcIiA/IFwiaGVpZ2h0XCIgOiBcIndpZHRoXCI7XG59XG5jb25zdCBabiA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgU2V0KFtcInRvcFwiLCBcImJvdHRvbVwiXSk7XG5mdW5jdGlvbiBpZShlKSB7XG4gIHJldHVybiBabi5oYXMobGUoZSkpID8gXCJ5XCIgOiBcInhcIjtcbn1cbmZ1bmN0aW9uIFh0KGUpIHtcbiAgcmV0dXJuIFF0KGllKGUpKTtcbn1cbmZ1bmN0aW9uIGVyKGUsIHQsIG4pIHtcbiAgbiA9PT0gdm9pZCAwICYmIChuID0gITEpO1xuICBjb25zdCByID0gemUoZSksIGkgPSBYdChlKSwgbyA9IEp0KGkpO1xuICBsZXQgcyA9IGkgPT09IFwieFwiID8gciA9PT0gKG4gPyBcImVuZFwiIDogXCJzdGFydFwiKSA/IFwicmlnaHRcIiA6IFwibGVmdFwiIDogciA9PT0gXCJzdGFydFwiID8gXCJib3R0b21cIiA6IFwidG9wXCI7XG4gIHJldHVybiB0LnJlZmVyZW5jZVtvXSA+IHQuZmxvYXRpbmdbb10gJiYgKHMgPSBOZShzKSksIFtzLCBOZShzKV07XG59XG5mdW5jdGlvbiB0cihlKSB7XG4gIGNvbnN0IHQgPSBOZShlKTtcbiAgcmV0dXJuIFtzdChlKSwgdCwgc3QodCldO1xufVxuZnVuY3Rpb24gc3QoZSkge1xuICByZXR1cm4gZS5yZXBsYWNlKC9zdGFydHxlbmQvZywgKHQpID0+IFhuW3RdKTtcbn1cbmNvbnN0IEN0ID0gW1wibGVmdFwiLCBcInJpZ2h0XCJdLCBQdCA9IFtcInJpZ2h0XCIsIFwibGVmdFwiXSwgbnIgPSBbXCJ0b3BcIiwgXCJib3R0b21cIl0sIHJyID0gW1wiYm90dG9tXCIsIFwidG9wXCJdO1xuZnVuY3Rpb24gaXIoZSwgdCwgbikge1xuICBzd2l0Y2ggKGUpIHtcbiAgICBjYXNlIFwidG9wXCI6XG4gICAgY2FzZSBcImJvdHRvbVwiOlxuICAgICAgcmV0dXJuIG4gPyB0ID8gUHQgOiBDdCA6IHQgPyBDdCA6IFB0O1xuICAgIGNhc2UgXCJsZWZ0XCI6XG4gICAgY2FzZSBcInJpZ2h0XCI6XG4gICAgICByZXR1cm4gdCA/IG5yIDogcnI7XG4gICAgZGVmYXVsdDpcbiAgICAgIHJldHVybiBbXTtcbiAgfVxufVxuZnVuY3Rpb24gb3IoZSwgdCwgbiwgcikge1xuICBjb25zdCBpID0gemUoZSk7XG4gIGxldCBvID0gaXIobGUoZSksIG4gPT09IFwic3RhcnRcIiwgcik7XG4gIHJldHVybiBpICYmIChvID0gby5tYXAoKHMpID0+IHMgKyBcIi1cIiArIGkpLCB0ICYmIChvID0gby5jb25jYXQoby5tYXAoc3QpKSkpLCBvO1xufVxuZnVuY3Rpb24gTmUoZSkge1xuICByZXR1cm4gZS5yZXBsYWNlKC9sZWZ0fHJpZ2h0fGJvdHRvbXx0b3AvZywgKHQpID0+IEpuW3RdKTtcbn1cbmZ1bmN0aW9uIHNyKGUpIHtcbiAgcmV0dXJuIHtcbiAgICB0b3A6IDAsXG4gICAgcmlnaHQ6IDAsXG4gICAgYm90dG9tOiAwLFxuICAgIGxlZnQ6IDAsXG4gICAgLi4uZVxuICB9O1xufVxuZnVuY3Rpb24gYXIoZSkge1xuICByZXR1cm4gdHlwZW9mIGUgIT0gXCJudW1iZXJcIiA/IHNyKGUpIDoge1xuICAgIHRvcDogZSxcbiAgICByaWdodDogZSxcbiAgICBib3R0b206IGUsXG4gICAgbGVmdDogZVxuICB9O1xufVxuZnVuY3Rpb24gRmUoZSkge1xuICBjb25zdCB7XG4gICAgeDogdCxcbiAgICB5OiBuLFxuICAgIHdpZHRoOiByLFxuICAgIGhlaWdodDogaVxuICB9ID0gZTtcbiAgcmV0dXJuIHtcbiAgICB3aWR0aDogcixcbiAgICBoZWlnaHQ6IGksXG4gICAgdG9wOiBuLFxuICAgIGxlZnQ6IHQsXG4gICAgcmlnaHQ6IHQgKyByLFxuICAgIGJvdHRvbTogbiArIGksXG4gICAgeDogdCxcbiAgICB5OiBuXG4gIH07XG59XG5mdW5jdGlvbiBPdChlLCB0LCBuKSB7XG4gIGxldCB7XG4gICAgcmVmZXJlbmNlOiByLFxuICAgIGZsb2F0aW5nOiBpXG4gIH0gPSBlO1xuICBjb25zdCBvID0gaWUodCksIHMgPSBYdCh0KSwgYSA9IEp0KHMpLCBjID0gbGUodCksIHUgPSBvID09PSBcInlcIiwgbCA9IHIueCArIHIud2lkdGggLyAyIC0gaS53aWR0aCAvIDIsIGYgPSByLnkgKyByLmhlaWdodCAvIDIgLSBpLmhlaWdodCAvIDIsIHYgPSByW2FdIC8gMiAtIGlbYV0gLyAyO1xuICBsZXQgZDtcbiAgc3dpdGNoIChjKSB7XG4gICAgY2FzZSBcInRvcFwiOlxuICAgICAgZCA9IHtcbiAgICAgICAgeDogbCxcbiAgICAgICAgeTogci55IC0gaS5oZWlnaHRcbiAgICAgIH07XG4gICAgICBicmVhaztcbiAgICBjYXNlIFwiYm90dG9tXCI6XG4gICAgICBkID0ge1xuICAgICAgICB4OiBsLFxuICAgICAgICB5OiByLnkgKyByLmhlaWdodFxuICAgICAgfTtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgXCJyaWdodFwiOlxuICAgICAgZCA9IHtcbiAgICAgICAgeDogci54ICsgci53aWR0aCxcbiAgICAgICAgeTogZlxuICAgICAgfTtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgXCJsZWZ0XCI6XG4gICAgICBkID0ge1xuICAgICAgICB4OiByLnggLSBpLndpZHRoLFxuICAgICAgICB5OiBmXG4gICAgICB9O1xuICAgICAgYnJlYWs7XG4gICAgZGVmYXVsdDpcbiAgICAgIGQgPSB7XG4gICAgICAgIHg6IHIueCxcbiAgICAgICAgeTogci55XG4gICAgICB9O1xuICB9XG4gIHN3aXRjaCAoemUodCkpIHtcbiAgICBjYXNlIFwic3RhcnRcIjpcbiAgICAgIGRbc10gLT0gdiAqIChuICYmIHUgPyAtMSA6IDEpO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSBcImVuZFwiOlxuICAgICAgZFtzXSArPSB2ICogKG4gJiYgdSA/IC0xIDogMSk7XG4gICAgICBicmVhaztcbiAgfVxuICByZXR1cm4gZDtcbn1cbmNvbnN0IGNyID0gYXN5bmMgKGUsIHQsIG4pID0+IHtcbiAgY29uc3Qge1xuICAgIHBsYWNlbWVudDogciA9IFwiYm90dG9tXCIsXG4gICAgc3RyYXRlZ3k6IGkgPSBcImFic29sdXRlXCIsXG4gICAgbWlkZGxld2FyZTogbyA9IFtdLFxuICAgIHBsYXRmb3JtOiBzXG4gIH0gPSBuLCBhID0gby5maWx0ZXIoQm9vbGVhbiksIGMgPSBhd2FpdCAocy5pc1JUTCA9PSBudWxsID8gdm9pZCAwIDogcy5pc1JUTCh0KSk7XG4gIGxldCB1ID0gYXdhaXQgcy5nZXRFbGVtZW50UmVjdHMoe1xuICAgIHJlZmVyZW5jZTogZSxcbiAgICBmbG9hdGluZzogdCxcbiAgICBzdHJhdGVneTogaVxuICB9KSwge1xuICAgIHg6IGwsXG4gICAgeTogZlxuICB9ID0gT3QodSwgciwgYyksIHYgPSByLCBkID0ge30sIG0gPSAwO1xuICBmb3IgKGxldCBwID0gMDsgcCA8IGEubGVuZ3RoOyBwKyspIHtcbiAgICBjb25zdCB7XG4gICAgICBuYW1lOiBnLFxuICAgICAgZm46IGhcbiAgICB9ID0gYVtwXSwge1xuICAgICAgeCxcbiAgICAgIHk6IEUsXG4gICAgICBkYXRhOiBPLFxuICAgICAgcmVzZXQ6IGJcbiAgICB9ID0gYXdhaXQgaCh7XG4gICAgICB4OiBsLFxuICAgICAgeTogZixcbiAgICAgIGluaXRpYWxQbGFjZW1lbnQ6IHIsXG4gICAgICBwbGFjZW1lbnQ6IHYsXG4gICAgICBzdHJhdGVneTogaSxcbiAgICAgIG1pZGRsZXdhcmVEYXRhOiBkLFxuICAgICAgcmVjdHM6IHUsXG4gICAgICBwbGF0Zm9ybTogcyxcbiAgICAgIGVsZW1lbnRzOiB7XG4gICAgICAgIHJlZmVyZW5jZTogZSxcbiAgICAgICAgZmxvYXRpbmc6IHRcbiAgICAgIH1cbiAgICB9KTtcbiAgICBsID0geCA/PyBsLCBmID0gRSA/PyBmLCBkID0ge1xuICAgICAgLi4uZCxcbiAgICAgIFtnXToge1xuICAgICAgICAuLi5kW2ddLFxuICAgICAgICAuLi5PXG4gICAgICB9XG4gICAgfSwgYiAmJiBtIDw9IDUwICYmIChtKyssIHR5cGVvZiBiID09IFwib2JqZWN0XCIgJiYgKGIucGxhY2VtZW50ICYmICh2ID0gYi5wbGFjZW1lbnQpLCBiLnJlY3RzICYmICh1ID0gYi5yZWN0cyA9PT0gITAgPyBhd2FpdCBzLmdldEVsZW1lbnRSZWN0cyh7XG4gICAgICByZWZlcmVuY2U6IGUsXG4gICAgICBmbG9hdGluZzogdCxcbiAgICAgIHN0cmF0ZWd5OiBpXG4gICAgfSkgOiBiLnJlY3RzKSwge1xuICAgICAgeDogbCxcbiAgICAgIHk6IGZcbiAgICB9ID0gT3QodSwgdiwgYykpLCBwID0gLTEpO1xuICB9XG4gIHJldHVybiB7XG4gICAgeDogbCxcbiAgICB5OiBmLFxuICAgIHBsYWNlbWVudDogdixcbiAgICBzdHJhdGVneTogaSxcbiAgICBtaWRkbGV3YXJlRGF0YTogZFxuICB9O1xufTtcbmFzeW5jIGZ1bmN0aW9uIFp0KGUsIHQpIHtcbiAgdmFyIG47XG4gIHQgPT09IHZvaWQgMCAmJiAodCA9IHt9KTtcbiAgY29uc3Qge1xuICAgIHg6IHIsXG4gICAgeTogaSxcbiAgICBwbGF0Zm9ybTogbyxcbiAgICByZWN0czogcyxcbiAgICBlbGVtZW50czogYSxcbiAgICBzdHJhdGVneTogY1xuICB9ID0gZSwge1xuICAgIGJvdW5kYXJ5OiB1ID0gXCJjbGlwcGluZ0FuY2VzdG9yc1wiLFxuICAgIHJvb3RCb3VuZGFyeTogbCA9IFwidmlld3BvcnRcIixcbiAgICBlbGVtZW50Q29udGV4dDogZiA9IFwiZmxvYXRpbmdcIixcbiAgICBhbHRCb3VuZGFyeTogdiA9ICExLFxuICAgIHBhZGRpbmc6IGQgPSAwXG4gIH0gPSBIZSh0LCBlKSwgbSA9IGFyKGQpLCBnID0gYVt2ID8gZiA9PT0gXCJmbG9hdGluZ1wiID8gXCJyZWZlcmVuY2VcIiA6IFwiZmxvYXRpbmdcIiA6IGZdLCBoID0gRmUoYXdhaXQgby5nZXRDbGlwcGluZ1JlY3Qoe1xuICAgIGVsZW1lbnQ6IChuID0gYXdhaXQgKG8uaXNFbGVtZW50ID09IG51bGwgPyB2b2lkIDAgOiBvLmlzRWxlbWVudChnKSkpID09IG51bGwgfHwgbiA/IGcgOiBnLmNvbnRleHRFbGVtZW50IHx8IGF3YWl0IChvLmdldERvY3VtZW50RWxlbWVudCA9PSBudWxsID8gdm9pZCAwIDogby5nZXREb2N1bWVudEVsZW1lbnQoYS5mbG9hdGluZykpLFxuICAgIGJvdW5kYXJ5OiB1LFxuICAgIHJvb3RCb3VuZGFyeTogbCxcbiAgICBzdHJhdGVneTogY1xuICB9KSksIHggPSBmID09PSBcImZsb2F0aW5nXCIgPyB7XG4gICAgeDogcixcbiAgICB5OiBpLFxuICAgIHdpZHRoOiBzLmZsb2F0aW5nLndpZHRoLFxuICAgIGhlaWdodDogcy5mbG9hdGluZy5oZWlnaHRcbiAgfSA6IHMucmVmZXJlbmNlLCBFID0gYXdhaXQgKG8uZ2V0T2Zmc2V0UGFyZW50ID09IG51bGwgPyB2b2lkIDAgOiBvLmdldE9mZnNldFBhcmVudChhLmZsb2F0aW5nKSksIE8gPSBhd2FpdCAoby5pc0VsZW1lbnQgPT0gbnVsbCA/IHZvaWQgMCA6IG8uaXNFbGVtZW50KEUpKSA/IGF3YWl0IChvLmdldFNjYWxlID09IG51bGwgPyB2b2lkIDAgOiBvLmdldFNjYWxlKEUpKSB8fCB7XG4gICAgeDogMSxcbiAgICB5OiAxXG4gIH0gOiB7XG4gICAgeDogMSxcbiAgICB5OiAxXG4gIH0sIGIgPSBGZShvLmNvbnZlcnRPZmZzZXRQYXJlbnRSZWxhdGl2ZVJlY3RUb1ZpZXdwb3J0UmVsYXRpdmVSZWN0ID8gYXdhaXQgby5jb252ZXJ0T2Zmc2V0UGFyZW50UmVsYXRpdmVSZWN0VG9WaWV3cG9ydFJlbGF0aXZlUmVjdCh7XG4gICAgZWxlbWVudHM6IGEsXG4gICAgcmVjdDogeCxcbiAgICBvZmZzZXRQYXJlbnQ6IEUsXG4gICAgc3RyYXRlZ3k6IGNcbiAgfSkgOiB4KTtcbiAgcmV0dXJuIHtcbiAgICB0b3A6IChoLnRvcCAtIGIudG9wICsgbS50b3ApIC8gTy55LFxuICAgIGJvdHRvbTogKGIuYm90dG9tIC0gaC5ib3R0b20gKyBtLmJvdHRvbSkgLyBPLnksXG4gICAgbGVmdDogKGgubGVmdCAtIGIubGVmdCArIG0ubGVmdCkgLyBPLngsXG4gICAgcmlnaHQ6IChiLnJpZ2h0IC0gaC5yaWdodCArIG0ucmlnaHQpIC8gTy54XG4gIH07XG59XG5jb25zdCB1ciA9IGZ1bmN0aW9uKGUpIHtcbiAgcmV0dXJuIGUgPT09IHZvaWQgMCAmJiAoZSA9IHt9KSwge1xuICAgIG5hbWU6IFwiZmxpcFwiLFxuICAgIG9wdGlvbnM6IGUsXG4gICAgYXN5bmMgZm4odCkge1xuICAgICAgdmFyIG4sIHI7XG4gICAgICBjb25zdCB7XG4gICAgICAgIHBsYWNlbWVudDogaSxcbiAgICAgICAgbWlkZGxld2FyZURhdGE6IG8sXG4gICAgICAgIHJlY3RzOiBzLFxuICAgICAgICBpbml0aWFsUGxhY2VtZW50OiBhLFxuICAgICAgICBwbGF0Zm9ybTogYyxcbiAgICAgICAgZWxlbWVudHM6IHVcbiAgICAgIH0gPSB0LCB7XG4gICAgICAgIG1haW5BeGlzOiBsID0gITAsXG4gICAgICAgIGNyb3NzQXhpczogZiA9ICEwLFxuICAgICAgICBmYWxsYmFja1BsYWNlbWVudHM6IHYsXG4gICAgICAgIGZhbGxiYWNrU3RyYXRlZ3k6IGQgPSBcImJlc3RGaXRcIixcbiAgICAgICAgZmFsbGJhY2tBeGlzU2lkZURpcmVjdGlvbjogbSA9IFwibm9uZVwiLFxuICAgICAgICBmbGlwQWxpZ25tZW50OiBwID0gITAsXG4gICAgICAgIC4uLmdcbiAgICAgIH0gPSBIZShlLCB0KTtcbiAgICAgIGlmICgobiA9IG8uYXJyb3cpICE9IG51bGwgJiYgbi5hbGlnbm1lbnRPZmZzZXQpXG4gICAgICAgIHJldHVybiB7fTtcbiAgICAgIGNvbnN0IGggPSBsZShpKSwgeCA9IGllKGEpLCBFID0gbGUoYSkgPT09IGEsIE8gPSBhd2FpdCAoYy5pc1JUTCA9PSBudWxsID8gdm9pZCAwIDogYy5pc1JUTCh1LmZsb2F0aW5nKSksIGIgPSB2IHx8IChFIHx8ICFwID8gW05lKGEpXSA6IHRyKGEpKSwgUyA9IG0gIT09IFwibm9uZVwiO1xuICAgICAgIXYgJiYgUyAmJiBiLnB1c2goLi4ub3IoYSwgcCwgbSwgTykpO1xuICAgICAgY29uc3QgQyA9IFthLCAuLi5iXSwgJCA9IGF3YWl0IFp0KHQsIGcpLCBNID0gW107XG4gICAgICBsZXQgViA9ICgociA9IG8uZmxpcCkgPT0gbnVsbCA/IHZvaWQgMCA6IHIub3ZlcmZsb3dzKSB8fCBbXTtcbiAgICAgIGlmIChsICYmIE0ucHVzaCgkW2hdKSwgZikge1xuICAgICAgICBjb25zdCBRID0gZXIoaSwgcywgTyk7XG4gICAgICAgIE0ucHVzaCgkW1FbMF1dLCAkW1FbMV1dKTtcbiAgICAgIH1cbiAgICAgIGlmIChWID0gWy4uLlYsIHtcbiAgICAgICAgcGxhY2VtZW50OiBpLFxuICAgICAgICBvdmVyZmxvd3M6IE1cbiAgICAgIH1dLCAhTS5ldmVyeSgoUSkgPT4gUSA8PSAwKSkge1xuICAgICAgICB2YXIgVCwgXztcbiAgICAgICAgY29uc3QgUSA9ICgoKFQgPSBvLmZsaXApID09IG51bGwgPyB2b2lkIDAgOiBULmluZGV4KSB8fCAwKSArIDEsIFNlID0gQ1tRXTtcbiAgICAgICAgaWYgKFNlICYmICghKGYgPT09IFwiYWxpZ25tZW50XCIgPyB4ICE9PSBpZShTZSkgOiAhMSkgfHwgLy8gV2UgbGVhdmUgdGhlIGN1cnJlbnQgbWFpbiBheGlzIG9ubHkgaWYgZXZlcnkgcGxhY2VtZW50IG9uIHRoYXQgYXhpc1xuICAgICAgICAvLyBvdmVyZmxvd3MgdGhlIG1haW4gYXhpcy5cbiAgICAgICAgVi5ldmVyeSgoWSkgPT4gaWUoWS5wbGFjZW1lbnQpID09PSB4ID8gWS5vdmVyZmxvd3NbMF0gPiAwIDogITApKSlcbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICBpbmRleDogUSxcbiAgICAgICAgICAgICAgb3ZlcmZsb3dzOiBWXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgcmVzZXQ6IHtcbiAgICAgICAgICAgICAgcGxhY2VtZW50OiBTZVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH07XG4gICAgICAgIGxldCBUZSA9IChfID0gVi5maWx0ZXIoKGFlKSA9PiBhZS5vdmVyZmxvd3NbMF0gPD0gMCkuc29ydCgoYWUsIFkpID0+IGFlLm92ZXJmbG93c1sxXSAtIFkub3ZlcmZsb3dzWzFdKVswXSkgPT0gbnVsbCA/IHZvaWQgMCA6IF8ucGxhY2VtZW50O1xuICAgICAgICBpZiAoIVRlKVxuICAgICAgICAgIHN3aXRjaCAoZCkge1xuICAgICAgICAgICAgY2FzZSBcImJlc3RGaXRcIjoge1xuICAgICAgICAgICAgICB2YXIgZWU7XG4gICAgICAgICAgICAgIGNvbnN0IGFlID0gKGVlID0gVi5maWx0ZXIoKFkpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoUykge1xuICAgICAgICAgICAgICAgICAgY29uc3QgcmUgPSBpZShZLnBsYWNlbWVudCk7XG4gICAgICAgICAgICAgICAgICByZXR1cm4gcmUgPT09IHggfHwgLy8gQ3JlYXRlIGEgYmlhcyB0byB0aGUgYHlgIHNpZGUgYXhpcyBkdWUgdG8gaG9yaXpvbnRhbFxuICAgICAgICAgICAgICAgICAgLy8gcmVhZGluZyBkaXJlY3Rpb25zIGZhdm9yaW5nIGdyZWF0ZXIgd2lkdGguXG4gICAgICAgICAgICAgICAgICByZSA9PT0gXCJ5XCI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiAhMDtcbiAgICAgICAgICAgICAgfSkubWFwKChZKSA9PiBbWS5wbGFjZW1lbnQsIFkub3ZlcmZsb3dzLmZpbHRlcigocmUpID0+IHJlID4gMCkucmVkdWNlKChyZSwgWW4pID0+IHJlICsgWW4sIDApXSkuc29ydCgoWSwgcmUpID0+IFlbMV0gLSByZVsxXSlbMF0pID09IG51bGwgPyB2b2lkIDAgOiBlZVswXTtcbiAgICAgICAgICAgICAgYWUgJiYgKFRlID0gYWUpO1xuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhc2UgXCJpbml0aWFsUGxhY2VtZW50XCI6XG4gICAgICAgICAgICAgIFRlID0gYTtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICBpZiAoaSAhPT0gVGUpXG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHJlc2V0OiB7XG4gICAgICAgICAgICAgIHBsYWNlbWVudDogVGVcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9O1xuICAgICAgfVxuICAgICAgcmV0dXJuIHt9O1xuICAgIH1cbiAgfTtcbn0sIGxyID0gLyogQF9fUFVSRV9fICovIG5ldyBTZXQoW1wibGVmdFwiLCBcInRvcFwiXSk7XG5hc3luYyBmdW5jdGlvbiBmcihlLCB0KSB7XG4gIGNvbnN0IHtcbiAgICBwbGFjZW1lbnQ6IG4sXG4gICAgcGxhdGZvcm06IHIsXG4gICAgZWxlbWVudHM6IGlcbiAgfSA9IGUsIG8gPSBhd2FpdCAoci5pc1JUTCA9PSBudWxsID8gdm9pZCAwIDogci5pc1JUTChpLmZsb2F0aW5nKSksIHMgPSBsZShuKSwgYSA9IHplKG4pLCBjID0gaWUobikgPT09IFwieVwiLCB1ID0gbHIuaGFzKHMpID8gLTEgOiAxLCBsID0gbyAmJiBjID8gLTEgOiAxLCBmID0gSGUodCwgZSk7XG4gIGxldCB7XG4gICAgbWFpbkF4aXM6IHYsXG4gICAgY3Jvc3NBeGlzOiBkLFxuICAgIGFsaWdubWVudEF4aXM6IG1cbiAgfSA9IHR5cGVvZiBmID09IFwibnVtYmVyXCIgPyB7XG4gICAgbWFpbkF4aXM6IGYsXG4gICAgY3Jvc3NBeGlzOiAwLFxuICAgIGFsaWdubWVudEF4aXM6IG51bGxcbiAgfSA6IHtcbiAgICBtYWluQXhpczogZi5tYWluQXhpcyB8fCAwLFxuICAgIGNyb3NzQXhpczogZi5jcm9zc0F4aXMgfHwgMCxcbiAgICBhbGlnbm1lbnRBeGlzOiBmLmFsaWdubWVudEF4aXNcbiAgfTtcbiAgcmV0dXJuIGEgJiYgdHlwZW9mIG0gPT0gXCJudW1iZXJcIiAmJiAoZCA9IGEgPT09IFwiZW5kXCIgPyBtICogLTEgOiBtKSwgYyA/IHtcbiAgICB4OiBkICogbCxcbiAgICB5OiB2ICogdVxuICB9IDoge1xuICAgIHg6IHYgKiB1LFxuICAgIHk6IGQgKiBsXG4gIH07XG59XG5jb25zdCBkciA9IGZ1bmN0aW9uKGUpIHtcbiAgcmV0dXJuIGUgPT09IHZvaWQgMCAmJiAoZSA9IDApLCB7XG4gICAgbmFtZTogXCJvZmZzZXRcIixcbiAgICBvcHRpb25zOiBlLFxuICAgIGFzeW5jIGZuKHQpIHtcbiAgICAgIHZhciBuLCByO1xuICAgICAgY29uc3Qge1xuICAgICAgICB4OiBpLFxuICAgICAgICB5OiBvLFxuICAgICAgICBwbGFjZW1lbnQ6IHMsXG4gICAgICAgIG1pZGRsZXdhcmVEYXRhOiBhXG4gICAgICB9ID0gdCwgYyA9IGF3YWl0IGZyKHQsIGUpO1xuICAgICAgcmV0dXJuIHMgPT09ICgobiA9IGEub2Zmc2V0KSA9PSBudWxsID8gdm9pZCAwIDogbi5wbGFjZW1lbnQpICYmIChyID0gYS5hcnJvdykgIT0gbnVsbCAmJiByLmFsaWdubWVudE9mZnNldCA/IHt9IDoge1xuICAgICAgICB4OiBpICsgYy54LFxuICAgICAgICB5OiBvICsgYy55LFxuICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgLi4uYyxcbiAgICAgICAgICBwbGFjZW1lbnQ6IHNcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICB9XG4gIH07XG59LCBwciA9IGZ1bmN0aW9uKGUpIHtcbiAgcmV0dXJuIGUgPT09IHZvaWQgMCAmJiAoZSA9IHt9KSwge1xuICAgIG5hbWU6IFwic2hpZnRcIixcbiAgICBvcHRpb25zOiBlLFxuICAgIGFzeW5jIGZuKHQpIHtcbiAgICAgIGNvbnN0IHtcbiAgICAgICAgeDogbixcbiAgICAgICAgeTogcixcbiAgICAgICAgcGxhY2VtZW50OiBpXG4gICAgICB9ID0gdCwge1xuICAgICAgICBtYWluQXhpczogbyA9ICEwLFxuICAgICAgICBjcm9zc0F4aXM6IHMgPSAhMSxcbiAgICAgICAgbGltaXRlcjogYSA9IHtcbiAgICAgICAgICBmbjogKGcpID0+IHtcbiAgICAgICAgICAgIGxldCB7XG4gICAgICAgICAgICAgIHg6IGgsXG4gICAgICAgICAgICAgIHk6IHhcbiAgICAgICAgICAgIH0gPSBnO1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgeDogaCxcbiAgICAgICAgICAgICAgeTogeFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIC4uLmNcbiAgICAgIH0gPSBIZShlLCB0KSwgdSA9IHtcbiAgICAgICAgeDogbixcbiAgICAgICAgeTogclxuICAgICAgfSwgbCA9IGF3YWl0IFp0KHQsIGMpLCBmID0gaWUobGUoaSkpLCB2ID0gUXQoZik7XG4gICAgICBsZXQgZCA9IHVbdl0sIG0gPSB1W2ZdO1xuICAgICAgaWYgKG8pIHtcbiAgICAgICAgY29uc3QgZyA9IHYgPT09IFwieVwiID8gXCJ0b3BcIiA6IFwibGVmdFwiLCBoID0gdiA9PT0gXCJ5XCIgPyBcImJvdHRvbVwiIDogXCJyaWdodFwiLCB4ID0gZCArIGxbZ10sIEUgPSBkIC0gbFtoXTtcbiAgICAgICAgZCA9IEV0KHgsIGQsIEUpO1xuICAgICAgfVxuICAgICAgaWYgKHMpIHtcbiAgICAgICAgY29uc3QgZyA9IGYgPT09IFwieVwiID8gXCJ0b3BcIiA6IFwibGVmdFwiLCBoID0gZiA9PT0gXCJ5XCIgPyBcImJvdHRvbVwiIDogXCJyaWdodFwiLCB4ID0gbSArIGxbZ10sIEUgPSBtIC0gbFtoXTtcbiAgICAgICAgbSA9IEV0KHgsIG0sIEUpO1xuICAgICAgfVxuICAgICAgY29uc3QgcCA9IGEuZm4oe1xuICAgICAgICAuLi50LFxuICAgICAgICBbdl06IGQsXG4gICAgICAgIFtmXTogbVxuICAgICAgfSk7XG4gICAgICByZXR1cm4ge1xuICAgICAgICAuLi5wLFxuICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgeDogcC54IC0gbixcbiAgICAgICAgICB5OiBwLnkgLSByLFxuICAgICAgICAgIGVuYWJsZWQ6IHtcbiAgICAgICAgICAgIFt2XTogbyxcbiAgICAgICAgICAgIFtmXTogc1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfTtcbiAgICB9XG4gIH07XG59O1xuZnVuY3Rpb24gWWUoKSB7XG4gIHJldHVybiB0eXBlb2Ygd2luZG93IDwgXCJ1XCI7XG59XG5mdW5jdGlvbiB5ZShlKSB7XG4gIHJldHVybiBlbihlKSA/IChlLm5vZGVOYW1lIHx8IFwiXCIpLnRvTG93ZXJDYXNlKCkgOiBcIiNkb2N1bWVudFwiO1xufVxuZnVuY3Rpb24gaihlKSB7XG4gIHZhciB0O1xuICByZXR1cm4gKGUgPT0gbnVsbCB8fCAodCA9IGUub3duZXJEb2N1bWVudCkgPT0gbnVsbCA/IHZvaWQgMCA6IHQuZGVmYXVsdFZpZXcpIHx8IHdpbmRvdztcbn1cbmZ1bmN0aW9uIFooZSkge1xuICB2YXIgdDtcbiAgcmV0dXJuICh0ID0gKGVuKGUpID8gZS5vd25lckRvY3VtZW50IDogZS5kb2N1bWVudCkgfHwgd2luZG93LmRvY3VtZW50KSA9PSBudWxsID8gdm9pZCAwIDogdC5kb2N1bWVudEVsZW1lbnQ7XG59XG5mdW5jdGlvbiBlbihlKSB7XG4gIHJldHVybiBZZSgpID8gZSBpbnN0YW5jZW9mIE5vZGUgfHwgZSBpbnN0YW5jZW9mIGooZSkuTm9kZSA6ICExO1xufVxuZnVuY3Rpb24gSyhlKSB7XG4gIHJldHVybiBZZSgpID8gZSBpbnN0YW5jZW9mIEVsZW1lbnQgfHwgZSBpbnN0YW5jZW9mIGooZSkuRWxlbWVudCA6ICExO1xufVxuZnVuY3Rpb24gWChlKSB7XG4gIHJldHVybiBZZSgpID8gZSBpbnN0YW5jZW9mIEhUTUxFbGVtZW50IHx8IGUgaW5zdGFuY2VvZiBqKGUpLkhUTUxFbGVtZW50IDogITE7XG59XG5mdW5jdGlvbiBBdChlKSB7XG4gIHJldHVybiAhWWUoKSB8fCB0eXBlb2YgU2hhZG93Um9vdCA+IFwidVwiID8gITEgOiBlIGluc3RhbmNlb2YgU2hhZG93Um9vdCB8fCBlIGluc3RhbmNlb2YgaihlKS5TaGFkb3dSb290O1xufVxuY29uc3QgaHIgPSAvKiBAX19QVVJFX18gKi8gbmV3IFNldChbXCJpbmxpbmVcIiwgXCJjb250ZW50c1wiXSk7XG5mdW5jdGlvbiBBZShlKSB7XG4gIGNvbnN0IHtcbiAgICBvdmVyZmxvdzogdCxcbiAgICBvdmVyZmxvd1g6IG4sXG4gICAgb3ZlcmZsb3dZOiByLFxuICAgIGRpc3BsYXk6IGlcbiAgfSA9IEcoZSk7XG4gIHJldHVybiAvYXV0b3xzY3JvbGx8b3ZlcmxheXxoaWRkZW58Y2xpcC8udGVzdCh0ICsgciArIG4pICYmICFoci5oYXMoaSk7XG59XG5jb25zdCB2ciA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgU2V0KFtcInRhYmxlXCIsIFwidGRcIiwgXCJ0aFwiXSk7XG5mdW5jdGlvbiBtcihlKSB7XG4gIHJldHVybiB2ci5oYXMoeWUoZSkpO1xufVxuY29uc3QgZ3IgPSBbXCI6cG9wb3Zlci1vcGVuXCIsIFwiOm1vZGFsXCJdO1xuZnVuY3Rpb24gcWUoZSkge1xuICByZXR1cm4gZ3Iuc29tZSgodCkgPT4ge1xuICAgIHRyeSB7XG4gICAgICByZXR1cm4gZS5tYXRjaGVzKHQpO1xuICAgIH0gY2F0Y2gge1xuICAgICAgcmV0dXJuICExO1xuICAgIH1cbiAgfSk7XG59XG5jb25zdCBiciA9IFtcInRyYW5zZm9ybVwiLCBcInRyYW5zbGF0ZVwiLCBcInNjYWxlXCIsIFwicm90YXRlXCIsIFwicGVyc3BlY3RpdmVcIl0sIHlyID0gW1widHJhbnNmb3JtXCIsIFwidHJhbnNsYXRlXCIsIFwic2NhbGVcIiwgXCJyb3RhdGVcIiwgXCJwZXJzcGVjdGl2ZVwiLCBcImZpbHRlclwiXSwgd3IgPSBbXCJwYWludFwiLCBcImxheW91dFwiLCBcInN0cmljdFwiLCBcImNvbnRlbnRcIl07XG5mdW5jdGlvbiBwdChlKSB7XG4gIGNvbnN0IHQgPSBodCgpLCBuID0gSyhlKSA/IEcoZSkgOiBlO1xuICByZXR1cm4gYnIuc29tZSgocikgPT4gbltyXSA/IG5bcl0gIT09IFwibm9uZVwiIDogITEpIHx8IChuLmNvbnRhaW5lclR5cGUgPyBuLmNvbnRhaW5lclR5cGUgIT09IFwibm9ybWFsXCIgOiAhMSkgfHwgIXQgJiYgKG4uYmFja2Ryb3BGaWx0ZXIgPyBuLmJhY2tkcm9wRmlsdGVyICE9PSBcIm5vbmVcIiA6ICExKSB8fCAhdCAmJiAobi5maWx0ZXIgPyBuLmZpbHRlciAhPT0gXCJub25lXCIgOiAhMSkgfHwgeXIuc29tZSgocikgPT4gKG4ud2lsbENoYW5nZSB8fCBcIlwiKS5pbmNsdWRlcyhyKSkgfHwgd3Iuc29tZSgocikgPT4gKG4uY29udGFpbiB8fCBcIlwiKS5pbmNsdWRlcyhyKSk7XG59XG5mdW5jdGlvbiB4cihlKSB7XG4gIGxldCB0ID0gc2UoZSk7XG4gIGZvciAoOyBYKHQpICYmICFtZSh0KTsgKSB7XG4gICAgaWYgKHB0KHQpKVxuICAgICAgcmV0dXJuIHQ7XG4gICAgaWYgKHFlKHQpKVxuICAgICAgcmV0dXJuIG51bGw7XG4gICAgdCA9IHNlKHQpO1xuICB9XG4gIHJldHVybiBudWxsO1xufVxuZnVuY3Rpb24gaHQoKSB7XG4gIHJldHVybiB0eXBlb2YgQ1NTID4gXCJ1XCIgfHwgIUNTUy5zdXBwb3J0cyA/ICExIDogQ1NTLnN1cHBvcnRzKFwiLXdlYmtpdC1iYWNrZHJvcC1maWx0ZXJcIiwgXCJub25lXCIpO1xufVxuY29uc3QgU3IgPSAvKiBAX19QVVJFX18gKi8gbmV3IFNldChbXCJodG1sXCIsIFwiYm9keVwiLCBcIiNkb2N1bWVudFwiXSk7XG5mdW5jdGlvbiBtZShlKSB7XG4gIHJldHVybiBTci5oYXMoeWUoZSkpO1xufVxuZnVuY3Rpb24gRyhlKSB7XG4gIHJldHVybiBqKGUpLmdldENvbXB1dGVkU3R5bGUoZSk7XG59XG5mdW5jdGlvbiBLZShlKSB7XG4gIHJldHVybiBLKGUpID8ge1xuICAgIHNjcm9sbExlZnQ6IGUuc2Nyb2xsTGVmdCxcbiAgICBzY3JvbGxUb3A6IGUuc2Nyb2xsVG9wXG4gIH0gOiB7XG4gICAgc2Nyb2xsTGVmdDogZS5zY3JvbGxYLFxuICAgIHNjcm9sbFRvcDogZS5zY3JvbGxZXG4gIH07XG59XG5mdW5jdGlvbiBzZShlKSB7XG4gIGlmICh5ZShlKSA9PT0gXCJodG1sXCIpXG4gICAgcmV0dXJuIGU7XG4gIGNvbnN0IHQgPSAoXG4gICAgLy8gU3RlcCBpbnRvIHRoZSBzaGFkb3cgRE9NIG9mIHRoZSBwYXJlbnQgb2YgYSBzbG90dGVkIG5vZGUuXG4gICAgZS5hc3NpZ25lZFNsb3QgfHwgLy8gRE9NIEVsZW1lbnQgZGV0ZWN0ZWQuXG4gICAgZS5wYXJlbnROb2RlIHx8IC8vIFNoYWRvd1Jvb3QgZGV0ZWN0ZWQuXG4gICAgQXQoZSkgJiYgZS5ob3N0IHx8IC8vIEZhbGxiYWNrLlxuICAgIFooZSlcbiAgKTtcbiAgcmV0dXJuIEF0KHQpID8gdC5ob3N0IDogdDtcbn1cbmZ1bmN0aW9uIHRuKGUpIHtcbiAgY29uc3QgdCA9IHNlKGUpO1xuICByZXR1cm4gbWUodCkgPyBlLm93bmVyRG9jdW1lbnQgPyBlLm93bmVyRG9jdW1lbnQuYm9keSA6IGUuYm9keSA6IFgodCkgJiYgQWUodCkgPyB0IDogdG4odCk7XG59XG5mdW5jdGlvbiBDZShlLCB0LCBuKSB7XG4gIHZhciByO1xuICB0ID09PSB2b2lkIDAgJiYgKHQgPSBbXSksIG4gPT09IHZvaWQgMCAmJiAobiA9ICEwKTtcbiAgY29uc3QgaSA9IHRuKGUpLCBvID0gaSA9PT0gKChyID0gZS5vd25lckRvY3VtZW50KSA9PSBudWxsID8gdm9pZCAwIDogci5ib2R5KSwgcyA9IGooaSk7XG4gIGlmIChvKSB7XG4gICAgY29uc3QgYSA9IGF0KHMpO1xuICAgIHJldHVybiB0LmNvbmNhdChzLCBzLnZpc3VhbFZpZXdwb3J0IHx8IFtdLCBBZShpKSA/IGkgOiBbXSwgYSAmJiBuID8gQ2UoYSkgOiBbXSk7XG4gIH1cbiAgcmV0dXJuIHQuY29uY2F0KGksIENlKGksIFtdLCBuKSk7XG59XG5mdW5jdGlvbiBhdChlKSB7XG4gIHJldHVybiBlLnBhcmVudCAmJiBPYmplY3QuZ2V0UHJvdG90eXBlT2YoZS5wYXJlbnQpID8gZS5mcmFtZUVsZW1lbnQgOiBudWxsO1xufVxuZnVuY3Rpb24gbm4oZSkge1xuICBjb25zdCB0ID0gRyhlKTtcbiAgbGV0IG4gPSBwYXJzZUZsb2F0KHQud2lkdGgpIHx8IDAsIHIgPSBwYXJzZUZsb2F0KHQuaGVpZ2h0KSB8fCAwO1xuICBjb25zdCBpID0gWChlKSwgbyA9IGkgPyBlLm9mZnNldFdpZHRoIDogbiwgcyA9IGkgPyBlLm9mZnNldEhlaWdodCA6IHIsIGEgPSAkZShuKSAhPT0gbyB8fCAkZShyKSAhPT0gcztcbiAgcmV0dXJuIGEgJiYgKG4gPSBvLCByID0gcyksIHtcbiAgICB3aWR0aDogbixcbiAgICBoZWlnaHQ6IHIsXG4gICAgJDogYVxuICB9O1xufVxuZnVuY3Rpb24gdnQoZSkge1xuICByZXR1cm4gSyhlKSA/IGUgOiBlLmNvbnRleHRFbGVtZW50O1xufVxuZnVuY3Rpb24gaGUoZSkge1xuICBjb25zdCB0ID0gdnQoZSk7XG4gIGlmICghWCh0KSlcbiAgICByZXR1cm4gSigxKTtcbiAgY29uc3QgbiA9IHQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCksIHtcbiAgICB3aWR0aDogcixcbiAgICBoZWlnaHQ6IGksXG4gICAgJDogb1xuICB9ID0gbm4odCk7XG4gIGxldCBzID0gKG8gPyAkZShuLndpZHRoKSA6IG4ud2lkdGgpIC8gciwgYSA9IChvID8gJGUobi5oZWlnaHQpIDogbi5oZWlnaHQpIC8gaTtcbiAgcmV0dXJuICghcyB8fCAhTnVtYmVyLmlzRmluaXRlKHMpKSAmJiAocyA9IDEpLCAoIWEgfHwgIU51bWJlci5pc0Zpbml0ZShhKSkgJiYgKGEgPSAxKSwge1xuICAgIHg6IHMsXG4gICAgeTogYVxuICB9O1xufVxuY29uc3QgVHIgPSAvKiBAX19QVVJFX18gKi8gSigwKTtcbmZ1bmN0aW9uIHJuKGUpIHtcbiAgY29uc3QgdCA9IGooZSk7XG4gIHJldHVybiAhaHQoKSB8fCAhdC52aXN1YWxWaWV3cG9ydCA/IFRyIDoge1xuICAgIHg6IHQudmlzdWFsVmlld3BvcnQub2Zmc2V0TGVmdCxcbiAgICB5OiB0LnZpc3VhbFZpZXdwb3J0Lm9mZnNldFRvcFxuICB9O1xufVxuZnVuY3Rpb24gRXIoZSwgdCwgbikge1xuICByZXR1cm4gdCA9PT0gdm9pZCAwICYmICh0ID0gITEpLCAhbiB8fCB0ICYmIG4gIT09IGooZSkgPyAhMSA6IHQ7XG59XG5mdW5jdGlvbiBmZShlLCB0LCBuLCByKSB7XG4gIHQgPT09IHZvaWQgMCAmJiAodCA9ICExKSwgbiA9PT0gdm9pZCAwICYmIChuID0gITEpO1xuICBjb25zdCBpID0gZS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSwgbyA9IHZ0KGUpO1xuICBsZXQgcyA9IEooMSk7XG4gIHQgJiYgKHIgPyBLKHIpICYmIChzID0gaGUocikpIDogcyA9IGhlKGUpKTtcbiAgY29uc3QgYSA9IEVyKG8sIG4sIHIpID8gcm4obykgOiBKKDApO1xuICBsZXQgYyA9IChpLmxlZnQgKyBhLngpIC8gcy54LCB1ID0gKGkudG9wICsgYS55KSAvIHMueSwgbCA9IGkud2lkdGggLyBzLngsIGYgPSBpLmhlaWdodCAvIHMueTtcbiAgaWYgKG8pIHtcbiAgICBjb25zdCB2ID0gaihvKSwgZCA9IHIgJiYgSyhyKSA/IGoocikgOiByO1xuICAgIGxldCBtID0gdiwgcCA9IGF0KG0pO1xuICAgIGZvciAoOyBwICYmIHIgJiYgZCAhPT0gbTsgKSB7XG4gICAgICBjb25zdCBnID0gaGUocCksIGggPSBwLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLCB4ID0gRyhwKSwgRSA9IGgubGVmdCArIChwLmNsaWVudExlZnQgKyBwYXJzZUZsb2F0KHgucGFkZGluZ0xlZnQpKSAqIGcueCwgTyA9IGgudG9wICsgKHAuY2xpZW50VG9wICsgcGFyc2VGbG9hdCh4LnBhZGRpbmdUb3ApKSAqIGcueTtcbiAgICAgIGMgKj0gZy54LCB1ICo9IGcueSwgbCAqPSBnLngsIGYgKj0gZy55LCBjICs9IEUsIHUgKz0gTywgbSA9IGoocCksIHAgPSBhdChtKTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIEZlKHtcbiAgICB3aWR0aDogbCxcbiAgICBoZWlnaHQ6IGYsXG4gICAgeDogYyxcbiAgICB5OiB1XG4gIH0pO1xufVxuZnVuY3Rpb24gR2UoZSwgdCkge1xuICBjb25zdCBuID0gS2UoZSkuc2Nyb2xsTGVmdDtcbiAgcmV0dXJuIHQgPyB0LmxlZnQgKyBuIDogZmUoWihlKSkubGVmdCArIG47XG59XG5mdW5jdGlvbiBvbihlLCB0KSB7XG4gIGNvbnN0IG4gPSBlLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLCByID0gbi5sZWZ0ICsgdC5zY3JvbGxMZWZ0IC0gR2UoZSwgbiksIGkgPSBuLnRvcCArIHQuc2Nyb2xsVG9wO1xuICByZXR1cm4ge1xuICAgIHg6IHIsXG4gICAgeTogaVxuICB9O1xufVxuZnVuY3Rpb24gQ3IoZSkge1xuICBsZXQge1xuICAgIGVsZW1lbnRzOiB0LFxuICAgIHJlY3Q6IG4sXG4gICAgb2Zmc2V0UGFyZW50OiByLFxuICAgIHN0cmF0ZWd5OiBpXG4gIH0gPSBlO1xuICBjb25zdCBvID0gaSA9PT0gXCJmaXhlZFwiLCBzID0gWihyKSwgYSA9IHQgPyBxZSh0LmZsb2F0aW5nKSA6ICExO1xuICBpZiAociA9PT0gcyB8fCBhICYmIG8pXG4gICAgcmV0dXJuIG47XG4gIGxldCBjID0ge1xuICAgIHNjcm9sbExlZnQ6IDAsXG4gICAgc2Nyb2xsVG9wOiAwXG4gIH0sIHUgPSBKKDEpO1xuICBjb25zdCBsID0gSigwKSwgZiA9IFgocik7XG4gIGlmICgoZiB8fCAhZiAmJiAhbykgJiYgKCh5ZShyKSAhPT0gXCJib2R5XCIgfHwgQWUocykpICYmIChjID0gS2UocikpLCBYKHIpKSkge1xuICAgIGNvbnN0IGQgPSBmZShyKTtcbiAgICB1ID0gaGUociksIGwueCA9IGQueCArIHIuY2xpZW50TGVmdCwgbC55ID0gZC55ICsgci5jbGllbnRUb3A7XG4gIH1cbiAgY29uc3QgdiA9IHMgJiYgIWYgJiYgIW8gPyBvbihzLCBjKSA6IEooMCk7XG4gIHJldHVybiB7XG4gICAgd2lkdGg6IG4ud2lkdGggKiB1LngsXG4gICAgaGVpZ2h0OiBuLmhlaWdodCAqIHUueSxcbiAgICB4OiBuLnggKiB1LnggLSBjLnNjcm9sbExlZnQgKiB1LnggKyBsLnggKyB2LngsXG4gICAgeTogbi55ICogdS55IC0gYy5zY3JvbGxUb3AgKiB1LnkgKyBsLnkgKyB2LnlcbiAgfTtcbn1cbmZ1bmN0aW9uIFByKGUpIHtcbiAgcmV0dXJuIEFycmF5LmZyb20oZS5nZXRDbGllbnRSZWN0cygpKTtcbn1cbmZ1bmN0aW9uIE9yKGUpIHtcbiAgY29uc3QgdCA9IFooZSksIG4gPSBLZShlKSwgciA9IGUub3duZXJEb2N1bWVudC5ib2R5LCBpID0gdWUodC5zY3JvbGxXaWR0aCwgdC5jbGllbnRXaWR0aCwgci5zY3JvbGxXaWR0aCwgci5jbGllbnRXaWR0aCksIG8gPSB1ZSh0LnNjcm9sbEhlaWdodCwgdC5jbGllbnRIZWlnaHQsIHIuc2Nyb2xsSGVpZ2h0LCByLmNsaWVudEhlaWdodCk7XG4gIGxldCBzID0gLW4uc2Nyb2xsTGVmdCArIEdlKGUpO1xuICBjb25zdCBhID0gLW4uc2Nyb2xsVG9wO1xuICByZXR1cm4gRyhyKS5kaXJlY3Rpb24gPT09IFwicnRsXCIgJiYgKHMgKz0gdWUodC5jbGllbnRXaWR0aCwgci5jbGllbnRXaWR0aCkgLSBpKSwge1xuICAgIHdpZHRoOiBpLFxuICAgIGhlaWdodDogbyxcbiAgICB4OiBzLFxuICAgIHk6IGFcbiAgfTtcbn1cbmNvbnN0IGt0ID0gMjU7XG5mdW5jdGlvbiBBcihlLCB0KSB7XG4gIGNvbnN0IG4gPSBqKGUpLCByID0gWihlKSwgaSA9IG4udmlzdWFsVmlld3BvcnQ7XG4gIGxldCBvID0gci5jbGllbnRXaWR0aCwgcyA9IHIuY2xpZW50SGVpZ2h0LCBhID0gMCwgYyA9IDA7XG4gIGlmIChpKSB7XG4gICAgbyA9IGkud2lkdGgsIHMgPSBpLmhlaWdodDtcbiAgICBjb25zdCBsID0gaHQoKTtcbiAgICAoIWwgfHwgbCAmJiB0ID09PSBcImZpeGVkXCIpICYmIChhID0gaS5vZmZzZXRMZWZ0LCBjID0gaS5vZmZzZXRUb3ApO1xuICB9XG4gIGNvbnN0IHUgPSBHZShyKTtcbiAgaWYgKHUgPD0gMCkge1xuICAgIGNvbnN0IGwgPSByLm93bmVyRG9jdW1lbnQsIGYgPSBsLmJvZHksIHYgPSBnZXRDb21wdXRlZFN0eWxlKGYpLCBkID0gbC5jb21wYXRNb2RlID09PSBcIkNTUzFDb21wYXRcIiAmJiBwYXJzZUZsb2F0KHYubWFyZ2luTGVmdCkgKyBwYXJzZUZsb2F0KHYubWFyZ2luUmlnaHQpIHx8IDAsIG0gPSBNYXRoLmFicyhyLmNsaWVudFdpZHRoIC0gZi5jbGllbnRXaWR0aCAtIGQpO1xuICAgIG0gPD0ga3QgJiYgKG8gLT0gbSk7XG4gIH0gZWxzZSB1IDw9IGt0ICYmIChvICs9IHUpO1xuICByZXR1cm4ge1xuICAgIHdpZHRoOiBvLFxuICAgIGhlaWdodDogcyxcbiAgICB4OiBhLFxuICAgIHk6IGNcbiAgfTtcbn1cbmNvbnN0IGtyID0gLyogQF9fUFVSRV9fICovIG5ldyBTZXQoW1wiYWJzb2x1dGVcIiwgXCJmaXhlZFwiXSk7XG5mdW5jdGlvbiBfcihlLCB0KSB7XG4gIGNvbnN0IG4gPSBmZShlLCAhMCwgdCA9PT0gXCJmaXhlZFwiKSwgciA9IG4udG9wICsgZS5jbGllbnRUb3AsIGkgPSBuLmxlZnQgKyBlLmNsaWVudExlZnQsIG8gPSBYKGUpID8gaGUoZSkgOiBKKDEpLCBzID0gZS5jbGllbnRXaWR0aCAqIG8ueCwgYSA9IGUuY2xpZW50SGVpZ2h0ICogby55LCBjID0gaSAqIG8ueCwgdSA9IHIgKiBvLnk7XG4gIHJldHVybiB7XG4gICAgd2lkdGg6IHMsXG4gICAgaGVpZ2h0OiBhLFxuICAgIHg6IGMsXG4gICAgeTogdVxuICB9O1xufVxuZnVuY3Rpb24gX3QoZSwgdCwgbikge1xuICBsZXQgcjtcbiAgaWYgKHQgPT09IFwidmlld3BvcnRcIilcbiAgICByID0gQXIoZSwgbik7XG4gIGVsc2UgaWYgKHQgPT09IFwiZG9jdW1lbnRcIilcbiAgICByID0gT3IoWihlKSk7XG4gIGVsc2UgaWYgKEsodCkpXG4gICAgciA9IF9yKHQsIG4pO1xuICBlbHNlIHtcbiAgICBjb25zdCBpID0gcm4oZSk7XG4gICAgciA9IHtcbiAgICAgIHg6IHQueCAtIGkueCxcbiAgICAgIHk6IHQueSAtIGkueSxcbiAgICAgIHdpZHRoOiB0LndpZHRoLFxuICAgICAgaGVpZ2h0OiB0LmhlaWdodFxuICAgIH07XG4gIH1cbiAgcmV0dXJuIEZlKHIpO1xufVxuZnVuY3Rpb24gc24oZSwgdCkge1xuICBjb25zdCBuID0gc2UoZSk7XG4gIHJldHVybiBuID09PSB0IHx8ICFLKG4pIHx8IG1lKG4pID8gITEgOiBHKG4pLnBvc2l0aW9uID09PSBcImZpeGVkXCIgfHwgc24obiwgdCk7XG59XG5mdW5jdGlvbiBMcihlLCB0KSB7XG4gIGNvbnN0IG4gPSB0LmdldChlKTtcbiAgaWYgKG4pXG4gICAgcmV0dXJuIG47XG4gIGxldCByID0gQ2UoZSwgW10sICExKS5maWx0ZXIoKGEpID0+IEsoYSkgJiYgeWUoYSkgIT09IFwiYm9keVwiKSwgaSA9IG51bGw7XG4gIGNvbnN0IG8gPSBHKGUpLnBvc2l0aW9uID09PSBcImZpeGVkXCI7XG4gIGxldCBzID0gbyA/IHNlKGUpIDogZTtcbiAgZm9yICg7IEsocykgJiYgIW1lKHMpOyApIHtcbiAgICBjb25zdCBhID0gRyhzKSwgYyA9IHB0KHMpO1xuICAgICFjICYmIGEucG9zaXRpb24gPT09IFwiZml4ZWRcIiAmJiAoaSA9IG51bGwpLCAobyA/ICFjICYmICFpIDogIWMgJiYgYS5wb3NpdGlvbiA9PT0gXCJzdGF0aWNcIiAmJiAhIWkgJiYga3IuaGFzKGkucG9zaXRpb24pIHx8IEFlKHMpICYmICFjICYmIHNuKGUsIHMpKSA/IHIgPSByLmZpbHRlcigobCkgPT4gbCAhPT0gcykgOiBpID0gYSwgcyA9IHNlKHMpO1xuICB9XG4gIHJldHVybiB0LnNldChlLCByKSwgcjtcbn1cbmZ1bmN0aW9uIElyKGUpIHtcbiAgbGV0IHtcbiAgICBlbGVtZW50OiB0LFxuICAgIGJvdW5kYXJ5OiBuLFxuICAgIHJvb3RCb3VuZGFyeTogcixcbiAgICBzdHJhdGVneTogaVxuICB9ID0gZTtcbiAgY29uc3QgcyA9IFsuLi5uID09PSBcImNsaXBwaW5nQW5jZXN0b3JzXCIgPyBxZSh0KSA/IFtdIDogTHIodCwgdGhpcy5fYykgOiBbXS5jb25jYXQobiksIHJdLCBhID0gc1swXSwgYyA9IHMucmVkdWNlKCh1LCBsKSA9PiB7XG4gICAgY29uc3QgZiA9IF90KHQsIGwsIGkpO1xuICAgIHJldHVybiB1LnRvcCA9IHVlKGYudG9wLCB1LnRvcCksIHUucmlnaHQgPSBEZShmLnJpZ2h0LCB1LnJpZ2h0KSwgdS5ib3R0b20gPSBEZShmLmJvdHRvbSwgdS5ib3R0b20pLCB1LmxlZnQgPSB1ZShmLmxlZnQsIHUubGVmdCksIHU7XG4gIH0sIF90KHQsIGEsIGkpKTtcbiAgcmV0dXJuIHtcbiAgICB3aWR0aDogYy5yaWdodCAtIGMubGVmdCxcbiAgICBoZWlnaHQ6IGMuYm90dG9tIC0gYy50b3AsXG4gICAgeDogYy5sZWZ0LFxuICAgIHk6IGMudG9wXG4gIH07XG59XG5mdW5jdGlvbiBNcihlKSB7XG4gIGNvbnN0IHtcbiAgICB3aWR0aDogdCxcbiAgICBoZWlnaHQ6IG5cbiAgfSA9IG5uKGUpO1xuICByZXR1cm4ge1xuICAgIHdpZHRoOiB0LFxuICAgIGhlaWdodDogblxuICB9O1xufVxuZnVuY3Rpb24gUnIoZSwgdCwgbikge1xuICBjb25zdCByID0gWCh0KSwgaSA9IFoodCksIG8gPSBuID09PSBcImZpeGVkXCIsIHMgPSBmZShlLCAhMCwgbywgdCk7XG4gIGxldCBhID0ge1xuICAgIHNjcm9sbExlZnQ6IDAsXG4gICAgc2Nyb2xsVG9wOiAwXG4gIH07XG4gIGNvbnN0IGMgPSBKKDApO1xuICBmdW5jdGlvbiB1KCkge1xuICAgIGMueCA9IEdlKGkpO1xuICB9XG4gIGlmIChyIHx8ICFyICYmICFvKVxuICAgIGlmICgoeWUodCkgIT09IFwiYm9keVwiIHx8IEFlKGkpKSAmJiAoYSA9IEtlKHQpKSwgcikge1xuICAgICAgY29uc3QgZCA9IGZlKHQsICEwLCBvLCB0KTtcbiAgICAgIGMueCA9IGQueCArIHQuY2xpZW50TGVmdCwgYy55ID0gZC55ICsgdC5jbGllbnRUb3A7XG4gICAgfSBlbHNlIGkgJiYgdSgpO1xuICBvICYmICFyICYmIGkgJiYgdSgpO1xuICBjb25zdCBsID0gaSAmJiAhciAmJiAhbyA/IG9uKGksIGEpIDogSigwKSwgZiA9IHMubGVmdCArIGEuc2Nyb2xsTGVmdCAtIGMueCAtIGwueCwgdiA9IHMudG9wICsgYS5zY3JvbGxUb3AgLSBjLnkgLSBsLnk7XG4gIHJldHVybiB7XG4gICAgeDogZixcbiAgICB5OiB2LFxuICAgIHdpZHRoOiBzLndpZHRoLFxuICAgIGhlaWdodDogcy5oZWlnaHRcbiAgfTtcbn1cbmZ1bmN0aW9uIGV0KGUpIHtcbiAgcmV0dXJuIEcoZSkucG9zaXRpb24gPT09IFwic3RhdGljXCI7XG59XG5mdW5jdGlvbiBMdChlLCB0KSB7XG4gIGlmICghWChlKSB8fCBHKGUpLnBvc2l0aW9uID09PSBcImZpeGVkXCIpXG4gICAgcmV0dXJuIG51bGw7XG4gIGlmICh0KVxuICAgIHJldHVybiB0KGUpO1xuICBsZXQgbiA9IGUub2Zmc2V0UGFyZW50O1xuICByZXR1cm4gWihlKSA9PT0gbiAmJiAobiA9IG4ub3duZXJEb2N1bWVudC5ib2R5KSwgbjtcbn1cbmZ1bmN0aW9uIGFuKGUsIHQpIHtcbiAgY29uc3QgbiA9IGooZSk7XG4gIGlmIChxZShlKSlcbiAgICByZXR1cm4gbjtcbiAgaWYgKCFYKGUpKSB7XG4gICAgbGV0IGkgPSBzZShlKTtcbiAgICBmb3IgKDsgaSAmJiAhbWUoaSk7ICkge1xuICAgICAgaWYgKEsoaSkgJiYgIWV0KGkpKVxuICAgICAgICByZXR1cm4gaTtcbiAgICAgIGkgPSBzZShpKTtcbiAgICB9XG4gICAgcmV0dXJuIG47XG4gIH1cbiAgbGV0IHIgPSBMdChlLCB0KTtcbiAgZm9yICg7IHIgJiYgbXIocikgJiYgZXQocik7IClcbiAgICByID0gTHQociwgdCk7XG4gIHJldHVybiByICYmIG1lKHIpICYmIGV0KHIpICYmICFwdChyKSA/IG4gOiByIHx8IHhyKGUpIHx8IG47XG59XG5jb25zdCBEciA9IGFzeW5jIGZ1bmN0aW9uKGUpIHtcbiAgY29uc3QgdCA9IHRoaXMuZ2V0T2Zmc2V0UGFyZW50IHx8IGFuLCBuID0gdGhpcy5nZXREaW1lbnNpb25zLCByID0gYXdhaXQgbihlLmZsb2F0aW5nKTtcbiAgcmV0dXJuIHtcbiAgICByZWZlcmVuY2U6IFJyKGUucmVmZXJlbmNlLCBhd2FpdCB0KGUuZmxvYXRpbmcpLCBlLnN0cmF0ZWd5KSxcbiAgICBmbG9hdGluZzoge1xuICAgICAgeDogMCxcbiAgICAgIHk6IDAsXG4gICAgICB3aWR0aDogci53aWR0aCxcbiAgICAgIGhlaWdodDogci5oZWlnaHRcbiAgICB9XG4gIH07XG59O1xuZnVuY3Rpb24gJHIoZSkge1xuICByZXR1cm4gRyhlKS5kaXJlY3Rpb24gPT09IFwicnRsXCI7XG59XG5jb25zdCBOciA9IHtcbiAgY29udmVydE9mZnNldFBhcmVudFJlbGF0aXZlUmVjdFRvVmlld3BvcnRSZWxhdGl2ZVJlY3Q6IENyLFxuICBnZXREb2N1bWVudEVsZW1lbnQ6IFosXG4gIGdldENsaXBwaW5nUmVjdDogSXIsXG4gIGdldE9mZnNldFBhcmVudDogYW4sXG4gIGdldEVsZW1lbnRSZWN0czogRHIsXG4gIGdldENsaWVudFJlY3RzOiBQcixcbiAgZ2V0RGltZW5zaW9uczogTXIsXG4gIGdldFNjYWxlOiBoZSxcbiAgaXNFbGVtZW50OiBLLFxuICBpc1JUTDogJHJcbn07XG5mdW5jdGlvbiBjbihlLCB0KSB7XG4gIHJldHVybiBlLnggPT09IHQueCAmJiBlLnkgPT09IHQueSAmJiBlLndpZHRoID09PSB0LndpZHRoICYmIGUuaGVpZ2h0ID09PSB0LmhlaWdodDtcbn1cbmZ1bmN0aW9uIEZyKGUsIHQpIHtcbiAgbGV0IG4gPSBudWxsLCByO1xuICBjb25zdCBpID0gWihlKTtcbiAgZnVuY3Rpb24gbygpIHtcbiAgICB2YXIgYTtcbiAgICBjbGVhclRpbWVvdXQociksIChhID0gbikgPT0gbnVsbCB8fCBhLmRpc2Nvbm5lY3QoKSwgbiA9IG51bGw7XG4gIH1cbiAgZnVuY3Rpb24gcyhhLCBjKSB7XG4gICAgYSA9PT0gdm9pZCAwICYmIChhID0gITEpLCBjID09PSB2b2lkIDAgJiYgKGMgPSAxKSwgbygpO1xuICAgIGNvbnN0IHUgPSBlLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLCB7XG4gICAgICBsZWZ0OiBsLFxuICAgICAgdG9wOiBmLFxuICAgICAgd2lkdGg6IHYsXG4gICAgICBoZWlnaHQ6IGRcbiAgICB9ID0gdTtcbiAgICBpZiAoYSB8fCB0KCksICF2IHx8ICFkKVxuICAgICAgcmV0dXJuO1xuICAgIGNvbnN0IG0gPSBfZShmKSwgcCA9IF9lKGkuY2xpZW50V2lkdGggLSAobCArIHYpKSwgZyA9IF9lKGkuY2xpZW50SGVpZ2h0IC0gKGYgKyBkKSksIGggPSBfZShsKSwgRSA9IHtcbiAgICAgIHJvb3RNYXJnaW46IC1tICsgXCJweCBcIiArIC1wICsgXCJweCBcIiArIC1nICsgXCJweCBcIiArIC1oICsgXCJweFwiLFxuICAgICAgdGhyZXNob2xkOiB1ZSgwLCBEZSgxLCBjKSkgfHwgMVxuICAgIH07XG4gICAgbGV0IE8gPSAhMDtcbiAgICBmdW5jdGlvbiBiKFMpIHtcbiAgICAgIGNvbnN0IEMgPSBTWzBdLmludGVyc2VjdGlvblJhdGlvO1xuICAgICAgaWYgKEMgIT09IGMpIHtcbiAgICAgICAgaWYgKCFPKVxuICAgICAgICAgIHJldHVybiBzKCk7XG4gICAgICAgIEMgPyBzKCExLCBDKSA6IHIgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICBzKCExLCAxZS03KTtcbiAgICAgICAgfSwgMWUzKTtcbiAgICAgIH1cbiAgICAgIEMgPT09IDEgJiYgIWNuKHUsIGUuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkpICYmIHMoKSwgTyA9ICExO1xuICAgIH1cbiAgICB0cnkge1xuICAgICAgbiA9IG5ldyBJbnRlcnNlY3Rpb25PYnNlcnZlcihiLCB7XG4gICAgICAgIC4uLkUsXG4gICAgICAgIC8vIEhhbmRsZSA8aWZyYW1lPnNcbiAgICAgICAgcm9vdDogaS5vd25lckRvY3VtZW50XG4gICAgICB9KTtcbiAgICB9IGNhdGNoIHtcbiAgICAgIG4gPSBuZXcgSW50ZXJzZWN0aW9uT2JzZXJ2ZXIoYiwgRSk7XG4gICAgfVxuICAgIG4ub2JzZXJ2ZShlKTtcbiAgfVxuICByZXR1cm4gcyghMCksIG87XG59XG5mdW5jdGlvbiBVcihlLCB0LCBuLCByKSB7XG4gIHIgPT09IHZvaWQgMCAmJiAociA9IHt9KTtcbiAgY29uc3Qge1xuICAgIGFuY2VzdG9yU2Nyb2xsOiBpID0gITAsXG4gICAgYW5jZXN0b3JSZXNpemU6IG8gPSAhMCxcbiAgICBlbGVtZW50UmVzaXplOiBzID0gdHlwZW9mIFJlc2l6ZU9ic2VydmVyID09IFwiZnVuY3Rpb25cIixcbiAgICBsYXlvdXRTaGlmdDogYSA9IHR5cGVvZiBJbnRlcnNlY3Rpb25PYnNlcnZlciA9PSBcImZ1bmN0aW9uXCIsXG4gICAgYW5pbWF0aW9uRnJhbWU6IGMgPSAhMVxuICB9ID0gciwgdSA9IHZ0KGUpLCBsID0gaSB8fCBvID8gWy4uLnUgPyBDZSh1KSA6IFtdLCAuLi5DZSh0KV0gOiBbXTtcbiAgbC5mb3JFYWNoKChoKSA9PiB7XG4gICAgaSAmJiBoLmFkZEV2ZW50TGlzdGVuZXIoXCJzY3JvbGxcIiwgbiwge1xuICAgICAgcGFzc2l2ZTogITBcbiAgICB9KSwgbyAmJiBoLmFkZEV2ZW50TGlzdGVuZXIoXCJyZXNpemVcIiwgbik7XG4gIH0pO1xuICBjb25zdCBmID0gdSAmJiBhID8gRnIodSwgbikgOiBudWxsO1xuICBsZXQgdiA9IC0xLCBkID0gbnVsbDtcbiAgcyAmJiAoZCA9IG5ldyBSZXNpemVPYnNlcnZlcigoaCkgPT4ge1xuICAgIGxldCBbeF0gPSBoO1xuICAgIHggJiYgeC50YXJnZXQgPT09IHUgJiYgZCAmJiAoZC51bm9ic2VydmUodCksIGNhbmNlbEFuaW1hdGlvbkZyYW1lKHYpLCB2ID0gcmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcbiAgICAgIHZhciBFO1xuICAgICAgKEUgPSBkKSA9PSBudWxsIHx8IEUub2JzZXJ2ZSh0KTtcbiAgICB9KSksIG4oKTtcbiAgfSksIHUgJiYgIWMgJiYgZC5vYnNlcnZlKHUpLCBkLm9ic2VydmUodCkpO1xuICBsZXQgbSwgcCA9IGMgPyBmZShlKSA6IG51bGw7XG4gIGMgJiYgZygpO1xuICBmdW5jdGlvbiBnKCkge1xuICAgIGNvbnN0IGggPSBmZShlKTtcbiAgICBwICYmICFjbihwLCBoKSAmJiBuKCksIHAgPSBoLCBtID0gcmVxdWVzdEFuaW1hdGlvbkZyYW1lKGcpO1xuICB9XG4gIHJldHVybiBuKCksICgpID0+IHtcbiAgICB2YXIgaDtcbiAgICBsLmZvckVhY2goKHgpID0+IHtcbiAgICAgIGkgJiYgeC5yZW1vdmVFdmVudExpc3RlbmVyKFwic2Nyb2xsXCIsIG4pLCBvICYmIHgucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInJlc2l6ZVwiLCBuKTtcbiAgICB9KSwgZiA9PSBudWxsIHx8IGYoKSwgKGggPSBkKSA9PSBudWxsIHx8IGguZGlzY29ubmVjdCgpLCBkID0gbnVsbCwgYyAmJiBjYW5jZWxBbmltYXRpb25GcmFtZShtKTtcbiAgfTtcbn1cbmNvbnN0IFdyID0gZHIsIGpyID0gcHIsIEJyID0gdXIsIFZyID0gKGUsIHQsIG4pID0+IHtcbiAgY29uc3QgciA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCksIGkgPSB7XG4gICAgcGxhdGZvcm06IE5yLFxuICAgIC4uLm5cbiAgfSwgbyA9IHtcbiAgICAuLi5pLnBsYXRmb3JtLFxuICAgIF9jOiByXG4gIH07XG4gIHJldHVybiBjcihlLCB0LCB7XG4gICAgLi4uaSxcbiAgICBwbGF0Zm9ybTogb1xuICB9KTtcbn07XG52YXIgZXMgPSB0eXBlb2YgZ2xvYmFsVGhpcyA8IFwidVwiID8gZ2xvYmFsVGhpcyA6IHR5cGVvZiB3aW5kb3cgPCBcInVcIiA/IHdpbmRvdyA6IHR5cGVvZiBnbG9iYWwgPCBcInVcIiA/IGdsb2JhbCA6IHR5cGVvZiBzZWxmIDwgXCJ1XCIgPyBzZWxmIDoge307XG5mdW5jdGlvbiBIcihlKSB7XG4gIHJldHVybiBlICYmIGUuX19lc01vZHVsZSAmJiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZSwgXCJkZWZhdWx0XCIpID8gZS5kZWZhdWx0IDogZTtcbn1cbnZhciBNZSA9IHsgZXhwb3J0czoge30gfSwgenIgPSBNZS5leHBvcnRzLCBJdDtcbmZ1bmN0aW9uIFlyKCkge1xuICByZXR1cm4gSXQgfHwgKEl0ID0gMSwgKGZ1bmN0aW9uKGUpIHtcbiAgICAoZnVuY3Rpb24odCwgbikge1xuICAgICAgZS5leHBvcnRzID8gZS5leHBvcnRzID0gbigpIDogdC5sb2cgPSBuKCk7XG4gICAgfSkoenIsIGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHQgPSBmdW5jdGlvbigpIHtcbiAgICAgIH0sIG4gPSBcInVuZGVmaW5lZFwiLCByID0gdHlwZW9mIHdpbmRvdyAhPT0gbiAmJiB0eXBlb2Ygd2luZG93Lm5hdmlnYXRvciAhPT0gbiAmJiAvVHJpZGVudFxcL3xNU0lFIC8udGVzdCh3aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudCksIGkgPSBbXG4gICAgICAgIFwidHJhY2VcIixcbiAgICAgICAgXCJkZWJ1Z1wiLFxuICAgICAgICBcImluZm9cIixcbiAgICAgICAgXCJ3YXJuXCIsXG4gICAgICAgIFwiZXJyb3JcIlxuICAgICAgXSwgbyA9IHt9LCBzID0gbnVsbDtcbiAgICAgIGZ1bmN0aW9uIGEocCwgZykge1xuICAgICAgICB2YXIgaCA9IHBbZ107XG4gICAgICAgIGlmICh0eXBlb2YgaC5iaW5kID09IFwiZnVuY3Rpb25cIilcbiAgICAgICAgICByZXR1cm4gaC5iaW5kKHApO1xuICAgICAgICB0cnkge1xuICAgICAgICAgIHJldHVybiBGdW5jdGlvbi5wcm90b3R5cGUuYmluZC5jYWxsKGgsIHApO1xuICAgICAgICB9IGNhdGNoIHtcbiAgICAgICAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZXR1cm4gRnVuY3Rpb24ucHJvdG90eXBlLmFwcGx5LmFwcGx5KGgsIFtwLCBhcmd1bWVudHNdKTtcbiAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBmdW5jdGlvbiBjKCkge1xuICAgICAgICBjb25zb2xlLmxvZyAmJiAoY29uc29sZS5sb2cuYXBwbHkgPyBjb25zb2xlLmxvZy5hcHBseShjb25zb2xlLCBhcmd1bWVudHMpIDogRnVuY3Rpb24ucHJvdG90eXBlLmFwcGx5LmFwcGx5KGNvbnNvbGUubG9nLCBbY29uc29sZSwgYXJndW1lbnRzXSkpLCBjb25zb2xlLnRyYWNlICYmIGNvbnNvbGUudHJhY2UoKTtcbiAgICAgIH1cbiAgICAgIGZ1bmN0aW9uIHUocCkge1xuICAgICAgICByZXR1cm4gcCA9PT0gXCJkZWJ1Z1wiICYmIChwID0gXCJsb2dcIiksIHR5cGVvZiBjb25zb2xlID09PSBuID8gITEgOiBwID09PSBcInRyYWNlXCIgJiYgciA/IGMgOiBjb25zb2xlW3BdICE9PSB2b2lkIDAgPyBhKGNvbnNvbGUsIHApIDogY29uc29sZS5sb2cgIT09IHZvaWQgMCA/IGEoY29uc29sZSwgXCJsb2dcIikgOiB0O1xuICAgICAgfVxuICAgICAgZnVuY3Rpb24gbCgpIHtcbiAgICAgICAgZm9yICh2YXIgcCA9IHRoaXMuZ2V0TGV2ZWwoKSwgZyA9IDA7IGcgPCBpLmxlbmd0aDsgZysrKSB7XG4gICAgICAgICAgdmFyIGggPSBpW2ddO1xuICAgICAgICAgIHRoaXNbaF0gPSBnIDwgcCA/IHQgOiB0aGlzLm1ldGhvZEZhY3RvcnkoaCwgcCwgdGhpcy5uYW1lKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5sb2cgPSB0aGlzLmRlYnVnLCB0eXBlb2YgY29uc29sZSA9PT0gbiAmJiBwIDwgdGhpcy5sZXZlbHMuU0lMRU5UKVxuICAgICAgICAgIHJldHVybiBcIk5vIGNvbnNvbGUgYXZhaWxhYmxlIGZvciBsb2dnaW5nXCI7XG4gICAgICB9XG4gICAgICBmdW5jdGlvbiBmKHApIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHR5cGVvZiBjb25zb2xlICE9PSBuICYmIChsLmNhbGwodGhpcyksIHRoaXNbcF0uYXBwbHkodGhpcywgYXJndW1lbnRzKSk7XG4gICAgICAgIH07XG4gICAgICB9XG4gICAgICBmdW5jdGlvbiB2KHAsIGcsIGgpIHtcbiAgICAgICAgcmV0dXJuIHUocCkgfHwgZi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgfVxuICAgICAgZnVuY3Rpb24gZChwLCBnKSB7XG4gICAgICAgIHZhciBoID0gdGhpcywgeCwgRSwgTywgYiA9IFwibG9nbGV2ZWxcIjtcbiAgICAgICAgdHlwZW9mIHAgPT0gXCJzdHJpbmdcIiA/IGIgKz0gXCI6XCIgKyBwIDogdHlwZW9mIHAgPT0gXCJzeW1ib2xcIiAmJiAoYiA9IHZvaWQgMCk7XG4gICAgICAgIGZ1bmN0aW9uIFMoVCkge1xuICAgICAgICAgIHZhciBfID0gKGlbVF0gfHwgXCJzaWxlbnRcIikudG9VcHBlckNhc2UoKTtcbiAgICAgICAgICBpZiAoISh0eXBlb2Ygd2luZG93ID09PSBuIHx8ICFiKSkge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgd2luZG93LmxvY2FsU3RvcmFnZVtiXSA9IF87XG4gICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH0gY2F0Y2gge1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgd2luZG93LmRvY3VtZW50LmNvb2tpZSA9IGVuY29kZVVSSUNvbXBvbmVudChiKSArIFwiPVwiICsgXyArIFwiO1wiO1xuICAgICAgICAgICAgfSBjYXRjaCB7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGZ1bmN0aW9uIEMoKSB7XG4gICAgICAgICAgdmFyIFQ7XG4gICAgICAgICAgaWYgKCEodHlwZW9mIHdpbmRvdyA9PT0gbiB8fCAhYikpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgIFQgPSB3aW5kb3cubG9jYWxTdG9yYWdlW2JdO1xuICAgICAgICAgICAgfSBjYXRjaCB7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodHlwZW9mIFQgPT09IG4pXG4gICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgdmFyIF8gPSB3aW5kb3cuZG9jdW1lbnQuY29va2llLCBlZSA9IGVuY29kZVVSSUNvbXBvbmVudChiKSwgUSA9IF8uaW5kZXhPZihlZSArIFwiPVwiKTtcbiAgICAgICAgICAgICAgICBRICE9PSAtMSAmJiAoVCA9IC9eKFteO10rKS8uZXhlYyhcbiAgICAgICAgICAgICAgICAgIF8uc2xpY2UoUSArIGVlLmxlbmd0aCArIDEpXG4gICAgICAgICAgICAgICAgKVsxXSk7XG4gICAgICAgICAgICAgIH0gY2F0Y2gge1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gaC5sZXZlbHNbVF0gPT09IHZvaWQgMCAmJiAoVCA9IHZvaWQgMCksIFQ7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGZ1bmN0aW9uICQoKSB7XG4gICAgICAgICAgaWYgKCEodHlwZW9mIHdpbmRvdyA9PT0gbiB8fCAhYikpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgIHdpbmRvdy5sb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShiKTtcbiAgICAgICAgICAgIH0gY2F0Y2gge1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgd2luZG93LmRvY3VtZW50LmNvb2tpZSA9IGVuY29kZVVSSUNvbXBvbmVudChiKSArIFwiPTsgZXhwaXJlcz1UaHUsIDAxIEphbiAxOTcwIDAwOjAwOjAwIFVUQ1wiO1xuICAgICAgICAgICAgfSBjYXRjaCB7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGZ1bmN0aW9uIE0oVCkge1xuICAgICAgICAgIHZhciBfID0gVDtcbiAgICAgICAgICBpZiAodHlwZW9mIF8gPT0gXCJzdHJpbmdcIiAmJiBoLmxldmVsc1tfLnRvVXBwZXJDYXNlKCldICE9PSB2b2lkIDAgJiYgKF8gPSBoLmxldmVsc1tfLnRvVXBwZXJDYXNlKCldKSwgdHlwZW9mIF8gPT0gXCJudW1iZXJcIiAmJiBfID49IDAgJiYgXyA8PSBoLmxldmVscy5TSUxFTlQpXG4gICAgICAgICAgICByZXR1cm4gXztcbiAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwibG9nLnNldExldmVsKCkgY2FsbGVkIHdpdGggaW52YWxpZCBsZXZlbDogXCIgKyBUKTtcbiAgICAgICAgfVxuICAgICAgICBoLm5hbWUgPSBwLCBoLmxldmVscyA9IHtcbiAgICAgICAgICBUUkFDRTogMCxcbiAgICAgICAgICBERUJVRzogMSxcbiAgICAgICAgICBJTkZPOiAyLFxuICAgICAgICAgIFdBUk46IDMsXG4gICAgICAgICAgRVJST1I6IDQsXG4gICAgICAgICAgU0lMRU5UOiA1XG4gICAgICAgIH0sIGgubWV0aG9kRmFjdG9yeSA9IGcgfHwgdiwgaC5nZXRMZXZlbCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHJldHVybiBPID8/IEUgPz8geDtcbiAgICAgICAgfSwgaC5zZXRMZXZlbCA9IGZ1bmN0aW9uKFQsIF8pIHtcbiAgICAgICAgICByZXR1cm4gTyA9IE0oVCksIF8gIT09ICExICYmIFMoTyksIGwuY2FsbChoKTtcbiAgICAgICAgfSwgaC5zZXREZWZhdWx0TGV2ZWwgPSBmdW5jdGlvbihUKSB7XG4gICAgICAgICAgRSA9IE0oVCksIEMoKSB8fCBoLnNldExldmVsKFQsICExKTtcbiAgICAgICAgfSwgaC5yZXNldExldmVsID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgTyA9IG51bGwsICQoKSwgbC5jYWxsKGgpO1xuICAgICAgICB9LCBoLmVuYWJsZUFsbCA9IGZ1bmN0aW9uKFQpIHtcbiAgICAgICAgICBoLnNldExldmVsKGgubGV2ZWxzLlRSQUNFLCBUKTtcbiAgICAgICAgfSwgaC5kaXNhYmxlQWxsID0gZnVuY3Rpb24oVCkge1xuICAgICAgICAgIGguc2V0TGV2ZWwoaC5sZXZlbHMuU0lMRU5ULCBUKTtcbiAgICAgICAgfSwgaC5yZWJ1aWxkID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgaWYgKHMgIT09IGggJiYgKHggPSBNKHMuZ2V0TGV2ZWwoKSkpLCBsLmNhbGwoaCksIHMgPT09IGgpXG4gICAgICAgICAgICBmb3IgKHZhciBUIGluIG8pXG4gICAgICAgICAgICAgIG9bVF0ucmVidWlsZCgpO1xuICAgICAgICB9LCB4ID0gTShcbiAgICAgICAgICBzID8gcy5nZXRMZXZlbCgpIDogXCJXQVJOXCJcbiAgICAgICAgKTtcbiAgICAgICAgdmFyIFYgPSBDKCk7XG4gICAgICAgIFYgIT0gbnVsbCAmJiAoTyA9IE0oVikpLCBsLmNhbGwoaCk7XG4gICAgICB9XG4gICAgICBzID0gbmV3IGQoKSwgcy5nZXRMb2dnZXIgPSBmdW5jdGlvbihnKSB7XG4gICAgICAgIGlmICh0eXBlb2YgZyAhPSBcInN5bWJvbFwiICYmIHR5cGVvZiBnICE9IFwic3RyaW5nXCIgfHwgZyA9PT0gXCJcIilcbiAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiWW91IG11c3Qgc3VwcGx5IGEgbmFtZSB3aGVuIGNyZWF0aW5nIGEgbG9nZ2VyLlwiKTtcbiAgICAgICAgdmFyIGggPSBvW2ddO1xuICAgICAgICByZXR1cm4gaCB8fCAoaCA9IG9bZ10gPSBuZXcgZChcbiAgICAgICAgICBnLFxuICAgICAgICAgIHMubWV0aG9kRmFjdG9yeVxuICAgICAgICApKSwgaDtcbiAgICAgIH07XG4gICAgICB2YXIgbSA9IHR5cGVvZiB3aW5kb3cgIT09IG4gPyB3aW5kb3cubG9nIDogdm9pZCAwO1xuICAgICAgcmV0dXJuIHMubm9Db25mbGljdCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gdHlwZW9mIHdpbmRvdyAhPT0gbiAmJiB3aW5kb3cubG9nID09PSBzICYmICh3aW5kb3cubG9nID0gbSksIHM7XG4gICAgICB9LCBzLmdldExvZ2dlcnMgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIG87XG4gICAgICB9LCBzLmRlZmF1bHQgPSBzLCBzO1xuICAgIH0pO1xuICB9KShNZSkpLCBNZS5leHBvcnRzO1xufVxudmFyIHFyID0gWXIoKTtcbmNvbnN0IEtyID0gLyogQF9fUFVSRV9fICovIEhyKHFyKTtcbnZhciBjdCA9IGZ1bmN0aW9uKGUsIHQpIHtcbiAgcmV0dXJuIGN0ID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8IHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24obiwgcikge1xuICAgIG4uX19wcm90b19fID0gcjtcbiAgfSB8fCBmdW5jdGlvbihuLCByKSB7XG4gICAgZm9yICh2YXIgaSBpbiByKSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwociwgaSkgJiYgKG5baV0gPSByW2ldKTtcbiAgfSwgY3QoZSwgdCk7XG59O1xuZnVuY3Rpb24gbmUoZSwgdCkge1xuICBpZiAodHlwZW9mIHQgIT0gXCJmdW5jdGlvblwiICYmIHQgIT09IG51bGwpXG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNsYXNzIGV4dGVuZHMgdmFsdWUgXCIgKyBTdHJpbmcodCkgKyBcIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsXCIpO1xuICBjdChlLCB0KTtcbiAgZnVuY3Rpb24gbigpIHtcbiAgICB0aGlzLmNvbnN0cnVjdG9yID0gZTtcbiAgfVxuICBlLnByb3RvdHlwZSA9IHQgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKHQpIDogKG4ucHJvdG90eXBlID0gdC5wcm90b3R5cGUsIG5ldyBuKCkpO1xufVxuZnVuY3Rpb24gR3IoZSwgdCwgbiwgcikge1xuICBmdW5jdGlvbiBpKG8pIHtcbiAgICByZXR1cm4gbyBpbnN0YW5jZW9mIG4gPyBvIDogbmV3IG4oZnVuY3Rpb24ocykge1xuICAgICAgcyhvKTtcbiAgICB9KTtcbiAgfVxuICByZXR1cm4gbmV3IChuIHx8IChuID0gUHJvbWlzZSkpKGZ1bmN0aW9uKG8sIHMpIHtcbiAgICBmdW5jdGlvbiBhKGwpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIHUoci5uZXh0KGwpKTtcbiAgICAgIH0gY2F0Y2ggKGYpIHtcbiAgICAgICAgcyhmKTtcbiAgICAgIH1cbiAgICB9XG4gICAgZnVuY3Rpb24gYyhsKSB7XG4gICAgICB0cnkge1xuICAgICAgICB1KHIudGhyb3cobCkpO1xuICAgICAgfSBjYXRjaCAoZikge1xuICAgICAgICBzKGYpO1xuICAgICAgfVxuICAgIH1cbiAgICBmdW5jdGlvbiB1KGwpIHtcbiAgICAgIGwuZG9uZSA/IG8obC52YWx1ZSkgOiBpKGwudmFsdWUpLnRoZW4oYSwgYyk7XG4gICAgfVxuICAgIHUoKHIgPSByLmFwcGx5KGUsIHQgfHwgW10pKS5uZXh0KCkpO1xuICB9KTtcbn1cbmZ1bmN0aW9uIHVuKGUsIHQpIHtcbiAgdmFyIG4gPSB7IGxhYmVsOiAwLCBzZW50OiBmdW5jdGlvbigpIHtcbiAgICBpZiAob1swXSAmIDEpIHRocm93IG9bMV07XG4gICAgcmV0dXJuIG9bMV07XG4gIH0sIHRyeXM6IFtdLCBvcHM6IFtdIH0sIHIsIGksIG8sIHMgPSBPYmplY3QuY3JlYXRlKCh0eXBlb2YgSXRlcmF0b3IgPT0gXCJmdW5jdGlvblwiID8gSXRlcmF0b3IgOiBPYmplY3QpLnByb3RvdHlwZSk7XG4gIHJldHVybiBzLm5leHQgPSBhKDApLCBzLnRocm93ID0gYSgxKSwgcy5yZXR1cm4gPSBhKDIpLCB0eXBlb2YgU3ltYm9sID09IFwiZnVuY3Rpb25cIiAmJiAoc1tTeW1ib2wuaXRlcmF0b3JdID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH0pLCBzO1xuICBmdW5jdGlvbiBhKHUpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24obCkge1xuICAgICAgcmV0dXJuIGMoW3UsIGxdKTtcbiAgICB9O1xuICB9XG4gIGZ1bmN0aW9uIGModSkge1xuICAgIGlmIChyKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiR2VuZXJhdG9yIGlzIGFscmVhZHkgZXhlY3V0aW5nLlwiKTtcbiAgICBmb3IgKDsgcyAmJiAocyA9IDAsIHVbMF0gJiYgKG4gPSAwKSksIG47ICkgdHJ5IHtcbiAgICAgIGlmIChyID0gMSwgaSAmJiAobyA9IHVbMF0gJiAyID8gaS5yZXR1cm4gOiB1WzBdID8gaS50aHJvdyB8fCAoKG8gPSBpLnJldHVybikgJiYgby5jYWxsKGkpLCAwKSA6IGkubmV4dCkgJiYgIShvID0gby5jYWxsKGksIHVbMV0pKS5kb25lKSByZXR1cm4gbztcbiAgICAgIHN3aXRjaCAoaSA9IDAsIG8gJiYgKHUgPSBbdVswXSAmIDIsIG8udmFsdWVdKSwgdVswXSkge1xuICAgICAgICBjYXNlIDA6XG4gICAgICAgIGNhc2UgMTpcbiAgICAgICAgICBvID0gdTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSA0OlxuICAgICAgICAgIHJldHVybiBuLmxhYmVsKyssIHsgdmFsdWU6IHVbMV0sIGRvbmU6ICExIH07XG4gICAgICAgIGNhc2UgNTpcbiAgICAgICAgICBuLmxhYmVsKyssIGkgPSB1WzFdLCB1ID0gWzBdO1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICBjYXNlIDc6XG4gICAgICAgICAgdSA9IG4ub3BzLnBvcCgpLCBuLnRyeXMucG9wKCk7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgaWYgKG8gPSBuLnRyeXMsICEobyA9IG8ubGVuZ3RoID4gMCAmJiBvW28ubGVuZ3RoIC0gMV0pICYmICh1WzBdID09PSA2IHx8IHVbMF0gPT09IDIpKSB7XG4gICAgICAgICAgICBuID0gMDtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAodVswXSA9PT0gMyAmJiAoIW8gfHwgdVsxXSA+IG9bMF0gJiYgdVsxXSA8IG9bM10pKSB7XG4gICAgICAgICAgICBuLmxhYmVsID0gdVsxXTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAodVswXSA9PT0gNiAmJiBuLmxhYmVsIDwgb1sxXSkge1xuICAgICAgICAgICAgbi5sYWJlbCA9IG9bMV0sIG8gPSB1O1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChvICYmIG4ubGFiZWwgPCBvWzJdKSB7XG4gICAgICAgICAgICBuLmxhYmVsID0gb1syXSwgbi5vcHMucHVzaCh1KTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgICBvWzJdICYmIG4ub3BzLnBvcCgpLCBuLnRyeXMucG9wKCk7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICB1ID0gdC5jYWxsKGUsIG4pO1xuICAgIH0gY2F0Y2ggKGwpIHtcbiAgICAgIHUgPSBbNiwgbF0sIGkgPSAwO1xuICAgIH0gZmluYWxseSB7XG4gICAgICByID0gbyA9IDA7XG4gICAgfVxuICAgIGlmICh1WzBdICYgNSkgdGhyb3cgdVsxXTtcbiAgICByZXR1cm4geyB2YWx1ZTogdVswXSA/IHVbMV0gOiB2b2lkIDAsIGRvbmU6ICEwIH07XG4gIH1cbn1cbmZ1bmN0aW9uIGdlKGUpIHtcbiAgdmFyIHQgPSB0eXBlb2YgU3ltYm9sID09IFwiZnVuY3Rpb25cIiAmJiBTeW1ib2wuaXRlcmF0b3IsIG4gPSB0ICYmIGVbdF0sIHIgPSAwO1xuICBpZiAobikgcmV0dXJuIG4uY2FsbChlKTtcbiAgaWYgKGUgJiYgdHlwZW9mIGUubGVuZ3RoID09IFwibnVtYmVyXCIpIHJldHVybiB7XG4gICAgbmV4dDogZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gZSAmJiByID49IGUubGVuZ3RoICYmIChlID0gdm9pZCAwKSwgeyB2YWx1ZTogZSAmJiBlW3IrK10sIGRvbmU6ICFlIH07XG4gICAgfVxuICB9O1xuICB0aHJvdyBuZXcgVHlwZUVycm9yKHQgPyBcIk9iamVjdCBpcyBub3QgaXRlcmFibGUuXCIgOiBcIlN5bWJvbC5pdGVyYXRvciBpcyBub3QgZGVmaW5lZC5cIik7XG59XG5mdW5jdGlvbiBkZShlLCB0KSB7XG4gIHZhciBuID0gdHlwZW9mIFN5bWJvbCA9PSBcImZ1bmN0aW9uXCIgJiYgZVtTeW1ib2wuaXRlcmF0b3JdO1xuICBpZiAoIW4pIHJldHVybiBlO1xuICB2YXIgciA9IG4uY2FsbChlKSwgaSwgbyA9IFtdLCBzO1xuICB0cnkge1xuICAgIGZvciAoOyAodCA9PT0gdm9pZCAwIHx8IHQtLSA+IDApICYmICEoaSA9IHIubmV4dCgpKS5kb25lOyApIG8ucHVzaChpLnZhbHVlKTtcbiAgfSBjYXRjaCAoYSkge1xuICAgIHMgPSB7IGVycm9yOiBhIH07XG4gIH0gZmluYWxseSB7XG4gICAgdHJ5IHtcbiAgICAgIGkgJiYgIWkuZG9uZSAmJiAobiA9IHIucmV0dXJuKSAmJiBuLmNhbGwocik7XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIGlmIChzKSB0aHJvdyBzLmVycm9yO1xuICAgIH1cbiAgfVxuICByZXR1cm4gbztcbn1cbmZ1bmN0aW9uIGJlKGUsIHQsIG4pIHtcbiAgaWYgKG4gfHwgYXJndW1lbnRzLmxlbmd0aCA9PT0gMikgZm9yICh2YXIgciA9IDAsIGkgPSB0Lmxlbmd0aCwgbzsgciA8IGk7IHIrKylcbiAgICAobyB8fCAhKHIgaW4gdCkpICYmIChvIHx8IChvID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwodCwgMCwgcikpLCBvW3JdID0gdFtyXSk7XG4gIHJldHVybiBlLmNvbmNhdChvIHx8IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKHQpKTtcbn1cbmZ1bmN0aW9uIHZlKGUpIHtcbiAgcmV0dXJuIHRoaXMgaW5zdGFuY2VvZiB2ZSA/ICh0aGlzLnYgPSBlLCB0aGlzKSA6IG5ldyB2ZShlKTtcbn1cbmZ1bmN0aW9uIFFyKGUsIHQsIG4pIHtcbiAgaWYgKCFTeW1ib2wuYXN5bmNJdGVyYXRvcikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN5bWJvbC5hc3luY0l0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLlwiKTtcbiAgdmFyIHIgPSBuLmFwcGx5KGUsIHQgfHwgW10pLCBpLCBvID0gW107XG4gIHJldHVybiBpID0gT2JqZWN0LmNyZWF0ZSgodHlwZW9mIEFzeW5jSXRlcmF0b3IgPT0gXCJmdW5jdGlvblwiID8gQXN5bmNJdGVyYXRvciA6IE9iamVjdCkucHJvdG90eXBlKSwgYShcIm5leHRcIiksIGEoXCJ0aHJvd1wiKSwgYShcInJldHVyblwiLCBzKSwgaVtTeW1ib2wuYXN5bmNJdGVyYXRvcl0gPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcztcbiAgfSwgaTtcbiAgZnVuY3Rpb24gcyhkKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKG0pIHtcbiAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUobSkudGhlbihkLCBmKTtcbiAgICB9O1xuICB9XG4gIGZ1bmN0aW9uIGEoZCwgbSkge1xuICAgIHJbZF0gJiYgKGlbZF0gPSBmdW5jdGlvbihwKSB7XG4gICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24oZywgaCkge1xuICAgICAgICBvLnB1c2goW2QsIHAsIGcsIGhdKSA+IDEgfHwgYyhkLCBwKTtcbiAgICAgIH0pO1xuICAgIH0sIG0gJiYgKGlbZF0gPSBtKGlbZF0pKSk7XG4gIH1cbiAgZnVuY3Rpb24gYyhkLCBtKSB7XG4gICAgdHJ5IHtcbiAgICAgIHUocltkXShtKSk7XG4gICAgfSBjYXRjaCAocCkge1xuICAgICAgdihvWzBdWzNdLCBwKTtcbiAgICB9XG4gIH1cbiAgZnVuY3Rpb24gdShkKSB7XG4gICAgZC52YWx1ZSBpbnN0YW5jZW9mIHZlID8gUHJvbWlzZS5yZXNvbHZlKGQudmFsdWUudikudGhlbihsLCBmKSA6IHYob1swXVsyXSwgZCk7XG4gIH1cbiAgZnVuY3Rpb24gbChkKSB7XG4gICAgYyhcIm5leHRcIiwgZCk7XG4gIH1cbiAgZnVuY3Rpb24gZihkKSB7XG4gICAgYyhcInRocm93XCIsIGQpO1xuICB9XG4gIGZ1bmN0aW9uIHYoZCwgbSkge1xuICAgIGQobSksIG8uc2hpZnQoKSwgby5sZW5ndGggJiYgYyhvWzBdWzBdLCBvWzBdWzFdKTtcbiAgfVxufVxuZnVuY3Rpb24gSnIoZSkge1xuICBpZiAoIVN5bWJvbC5hc3luY0l0ZXJhdG9yKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3ltYm9sLmFzeW5jSXRlcmF0b3IgaXMgbm90IGRlZmluZWQuXCIpO1xuICB2YXIgdCA9IGVbU3ltYm9sLmFzeW5jSXRlcmF0b3JdLCBuO1xuICByZXR1cm4gdCA/IHQuY2FsbChlKSA6IChlID0gdHlwZW9mIGdlID09IFwiZnVuY3Rpb25cIiA/IGdlKGUpIDogZVtTeW1ib2wuaXRlcmF0b3JdKCksIG4gPSB7fSwgcihcIm5leHRcIiksIHIoXCJ0aHJvd1wiKSwgcihcInJldHVyblwiKSwgbltTeW1ib2wuYXN5bmNJdGVyYXRvcl0gPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcztcbiAgfSwgbik7XG4gIGZ1bmN0aW9uIHIobykge1xuICAgIG5bb10gPSBlW29dICYmIGZ1bmN0aW9uKHMpIHtcbiAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihhLCBjKSB7XG4gICAgICAgIHMgPSBlW29dKHMpLCBpKGEsIGMsIHMuZG9uZSwgcy52YWx1ZSk7XG4gICAgICB9KTtcbiAgICB9O1xuICB9XG4gIGZ1bmN0aW9uIGkobywgcywgYSwgYykge1xuICAgIFByb21pc2UucmVzb2x2ZShjKS50aGVuKGZ1bmN0aW9uKHUpIHtcbiAgICAgIG8oeyB2YWx1ZTogdSwgZG9uZTogYSB9KTtcbiAgICB9LCBzKTtcbiAgfVxufVxuZnVuY3Rpb24gUChlKSB7XG4gIHJldHVybiB0eXBlb2YgZSA9PSBcImZ1bmN0aW9uXCI7XG59XG5mdW5jdGlvbiBtdChlKSB7XG4gIHZhciB0ID0gZnVuY3Rpb24ocikge1xuICAgIEVycm9yLmNhbGwociksIHIuc3RhY2sgPSBuZXcgRXJyb3IoKS5zdGFjaztcbiAgfSwgbiA9IGUodCk7XG4gIHJldHVybiBuLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoRXJyb3IucHJvdG90eXBlKSwgbi5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBuLCBuO1xufVxudmFyIHR0ID0gbXQoZnVuY3Rpb24oZSkge1xuICByZXR1cm4gZnVuY3Rpb24obikge1xuICAgIGUodGhpcyksIHRoaXMubWVzc2FnZSA9IG4gPyBuLmxlbmd0aCArIGAgZXJyb3JzIG9jY3VycmVkIGR1cmluZyB1bnN1YnNjcmlwdGlvbjpcbmAgKyBuLm1hcChmdW5jdGlvbihyLCBpKSB7XG4gICAgICByZXR1cm4gaSArIDEgKyBcIikgXCIgKyByLnRvU3RyaW5nKCk7XG4gICAgfSkuam9pbihgXG4gIGApIDogXCJcIiwgdGhpcy5uYW1lID0gXCJVbnN1YnNjcmlwdGlvbkVycm9yXCIsIHRoaXMuZXJyb3JzID0gbjtcbiAgfTtcbn0pO1xuZnVuY3Rpb24gVWUoZSwgdCkge1xuICBpZiAoZSkge1xuICAgIHZhciBuID0gZS5pbmRleE9mKHQpO1xuICAgIDAgPD0gbiAmJiBlLnNwbGljZShuLCAxKTtcbiAgfVxufVxudmFyIGtlID0gKGZ1bmN0aW9uKCkge1xuICBmdW5jdGlvbiBlKHQpIHtcbiAgICB0aGlzLmluaXRpYWxUZWFyZG93biA9IHQsIHRoaXMuY2xvc2VkID0gITEsIHRoaXMuX3BhcmVudGFnZSA9IG51bGwsIHRoaXMuX2ZpbmFsaXplcnMgPSBudWxsO1xuICB9XG4gIHJldHVybiBlLnByb3RvdHlwZS51bnN1YnNjcmliZSA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciB0LCBuLCByLCBpLCBvO1xuICAgIGlmICghdGhpcy5jbG9zZWQpIHtcbiAgICAgIHRoaXMuY2xvc2VkID0gITA7XG4gICAgICB2YXIgcyA9IHRoaXMuX3BhcmVudGFnZTtcbiAgICAgIGlmIChzKVxuICAgICAgICBpZiAodGhpcy5fcGFyZW50YWdlID0gbnVsbCwgQXJyYXkuaXNBcnJheShzKSlcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgZm9yICh2YXIgYSA9IGdlKHMpLCBjID0gYS5uZXh0KCk7ICFjLmRvbmU7IGMgPSBhLm5leHQoKSkge1xuICAgICAgICAgICAgICB2YXIgdSA9IGMudmFsdWU7XG4gICAgICAgICAgICAgIHUucmVtb3ZlKHRoaXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gY2F0Y2ggKHApIHtcbiAgICAgICAgICAgIHQgPSB7IGVycm9yOiBwIH07XG4gICAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgIGMgJiYgIWMuZG9uZSAmJiAobiA9IGEucmV0dXJuKSAmJiBuLmNhbGwoYSk7XG4gICAgICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgICAgICBpZiAodCkgdGhyb3cgdC5lcnJvcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIGVsc2VcbiAgICAgICAgICBzLnJlbW92ZSh0aGlzKTtcbiAgICAgIHZhciBsID0gdGhpcy5pbml0aWFsVGVhcmRvd247XG4gICAgICBpZiAoUChsKSlcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBsKCk7XG4gICAgICAgIH0gY2F0Y2ggKHApIHtcbiAgICAgICAgICBvID0gcCBpbnN0YW5jZW9mIHR0ID8gcC5lcnJvcnMgOiBbcF07XG4gICAgICAgIH1cbiAgICAgIHZhciBmID0gdGhpcy5fZmluYWxpemVycztcbiAgICAgIGlmIChmKSB7XG4gICAgICAgIHRoaXMuX2ZpbmFsaXplcnMgPSBudWxsO1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGZvciAodmFyIHYgPSBnZShmKSwgZCA9IHYubmV4dCgpOyAhZC5kb25lOyBkID0gdi5uZXh0KCkpIHtcbiAgICAgICAgICAgIHZhciBtID0gZC52YWx1ZTtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgIE10KG0pO1xuICAgICAgICAgICAgfSBjYXRjaCAocCkge1xuICAgICAgICAgICAgICBvID0gbyA/PyBbXSwgcCBpbnN0YW5jZW9mIHR0ID8gbyA9IGJlKGJlKFtdLCBkZShvKSksIGRlKHAuZXJyb3JzKSkgOiBvLnB1c2gocCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChwKSB7XG4gICAgICAgICAgciA9IHsgZXJyb3I6IHAgfTtcbiAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgZCAmJiAhZC5kb25lICYmIChpID0gdi5yZXR1cm4pICYmIGkuY2FsbCh2KTtcbiAgICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgICAgaWYgKHIpIHRocm93IHIuZXJyb3I7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAobylcbiAgICAgICAgdGhyb3cgbmV3IHR0KG8pO1xuICAgIH1cbiAgfSwgZS5wcm90b3R5cGUuYWRkID0gZnVuY3Rpb24odCkge1xuICAgIHZhciBuO1xuICAgIGlmICh0ICYmIHQgIT09IHRoaXMpXG4gICAgICBpZiAodGhpcy5jbG9zZWQpXG4gICAgICAgIE10KHQpO1xuICAgICAgZWxzZSB7XG4gICAgICAgIGlmICh0IGluc3RhbmNlb2YgZSkge1xuICAgICAgICAgIGlmICh0LmNsb3NlZCB8fCB0Ll9oYXNQYXJlbnQodGhpcykpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgdC5fYWRkUGFyZW50KHRoaXMpO1xuICAgICAgICB9XG4gICAgICAgICh0aGlzLl9maW5hbGl6ZXJzID0gKG4gPSB0aGlzLl9maW5hbGl6ZXJzKSAhPT0gbnVsbCAmJiBuICE9PSB2b2lkIDAgPyBuIDogW10pLnB1c2godCk7XG4gICAgICB9XG4gIH0sIGUucHJvdG90eXBlLl9oYXNQYXJlbnQgPSBmdW5jdGlvbih0KSB7XG4gICAgdmFyIG4gPSB0aGlzLl9wYXJlbnRhZ2U7XG4gICAgcmV0dXJuIG4gPT09IHQgfHwgQXJyYXkuaXNBcnJheShuKSAmJiBuLmluY2x1ZGVzKHQpO1xuICB9LCBlLnByb3RvdHlwZS5fYWRkUGFyZW50ID0gZnVuY3Rpb24odCkge1xuICAgIHZhciBuID0gdGhpcy5fcGFyZW50YWdlO1xuICAgIHRoaXMuX3BhcmVudGFnZSA9IEFycmF5LmlzQXJyYXkobikgPyAobi5wdXNoKHQpLCBuKSA6IG4gPyBbbiwgdF0gOiB0O1xuICB9LCBlLnByb3RvdHlwZS5fcmVtb3ZlUGFyZW50ID0gZnVuY3Rpb24odCkge1xuICAgIHZhciBuID0gdGhpcy5fcGFyZW50YWdlO1xuICAgIG4gPT09IHQgPyB0aGlzLl9wYXJlbnRhZ2UgPSBudWxsIDogQXJyYXkuaXNBcnJheShuKSAmJiBVZShuLCB0KTtcbiAgfSwgZS5wcm90b3R5cGUucmVtb3ZlID0gZnVuY3Rpb24odCkge1xuICAgIHZhciBuID0gdGhpcy5fZmluYWxpemVycztcbiAgICBuICYmIFVlKG4sIHQpLCB0IGluc3RhbmNlb2YgZSAmJiB0Ll9yZW1vdmVQYXJlbnQodGhpcyk7XG4gIH0sIGUuRU1QVFkgPSAoZnVuY3Rpb24oKSB7XG4gICAgdmFyIHQgPSBuZXcgZSgpO1xuICAgIHJldHVybiB0LmNsb3NlZCA9ICEwLCB0O1xuICB9KSgpLCBlO1xufSkoKSwgbG4gPSBrZS5FTVBUWTtcbmZ1bmN0aW9uIGZuKGUpIHtcbiAgcmV0dXJuIGUgaW5zdGFuY2VvZiBrZSB8fCBlICYmIFwiY2xvc2VkXCIgaW4gZSAmJiBQKGUucmVtb3ZlKSAmJiBQKGUuYWRkKSAmJiBQKGUudW5zdWJzY3JpYmUpO1xufVxuZnVuY3Rpb24gTXQoZSkge1xuICBQKGUpID8gZSgpIDogZS51bnN1YnNjcmliZSgpO1xufVxudmFyIFhyID0ge1xuICBQcm9taXNlOiB2b2lkIDBcbn0sIFpyID0ge1xuICBzZXRUaW1lb3V0OiBmdW5jdGlvbihlLCB0KSB7XG4gICAgZm9yICh2YXIgbiA9IFtdLCByID0gMjsgciA8IGFyZ3VtZW50cy5sZW5ndGg7IHIrKylcbiAgICAgIG5bciAtIDJdID0gYXJndW1lbnRzW3JdO1xuICAgIHJldHVybiBzZXRUaW1lb3V0LmFwcGx5KHZvaWQgMCwgYmUoW2UsIHRdLCBkZShuKSkpO1xuICB9LFxuICBjbGVhclRpbWVvdXQ6IGZ1bmN0aW9uKGUpIHtcbiAgICByZXR1cm4gY2xlYXJUaW1lb3V0KGUpO1xuICB9LFxuICBkZWxlZ2F0ZTogdm9pZCAwXG59O1xuZnVuY3Rpb24gZG4oZSkge1xuICBaci5zZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgIHRocm93IGU7XG4gIH0pO1xufVxuZnVuY3Rpb24gV2UoKSB7XG59XG5mdW5jdGlvbiBSZShlKSB7XG4gIGUoKTtcbn1cbnZhciBndCA9IChmdW5jdGlvbihlKSB7XG4gIG5lKHQsIGUpO1xuICBmdW5jdGlvbiB0KG4pIHtcbiAgICB2YXIgciA9IGUuY2FsbCh0aGlzKSB8fCB0aGlzO1xuICAgIHJldHVybiByLmlzU3RvcHBlZCA9ICExLCBuID8gKHIuZGVzdGluYXRpb24gPSBuLCBmbihuKSAmJiBuLmFkZChyKSkgOiByLmRlc3RpbmF0aW9uID0gbmksIHI7XG4gIH1cbiAgcmV0dXJuIHQuY3JlYXRlID0gZnVuY3Rpb24obiwgciwgaSkge1xuICAgIHJldHVybiBuZXcgUGUobiwgciwgaSk7XG4gIH0sIHQucHJvdG90eXBlLm5leHQgPSBmdW5jdGlvbihuKSB7XG4gICAgdGhpcy5pc1N0b3BwZWQgfHwgdGhpcy5fbmV4dChuKTtcbiAgfSwgdC5wcm90b3R5cGUuZXJyb3IgPSBmdW5jdGlvbihuKSB7XG4gICAgdGhpcy5pc1N0b3BwZWQgfHwgKHRoaXMuaXNTdG9wcGVkID0gITAsIHRoaXMuX2Vycm9yKG4pKTtcbiAgfSwgdC5wcm90b3R5cGUuY29tcGxldGUgPSBmdW5jdGlvbigpIHtcbiAgICB0aGlzLmlzU3RvcHBlZCB8fCAodGhpcy5pc1N0b3BwZWQgPSAhMCwgdGhpcy5fY29tcGxldGUoKSk7XG4gIH0sIHQucHJvdG90eXBlLnVuc3Vic2NyaWJlID0gZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5jbG9zZWQgfHwgKHRoaXMuaXNTdG9wcGVkID0gITAsIGUucHJvdG90eXBlLnVuc3Vic2NyaWJlLmNhbGwodGhpcyksIHRoaXMuZGVzdGluYXRpb24gPSBudWxsKTtcbiAgfSwgdC5wcm90b3R5cGUuX25leHQgPSBmdW5jdGlvbihuKSB7XG4gICAgdGhpcy5kZXN0aW5hdGlvbi5uZXh0KG4pO1xuICB9LCB0LnByb3RvdHlwZS5fZXJyb3IgPSBmdW5jdGlvbihuKSB7XG4gICAgdHJ5IHtcbiAgICAgIHRoaXMuZGVzdGluYXRpb24uZXJyb3Iobik7XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIHRoaXMudW5zdWJzY3JpYmUoKTtcbiAgICB9XG4gIH0sIHQucHJvdG90eXBlLl9jb21wbGV0ZSA9IGZ1bmN0aW9uKCkge1xuICAgIHRyeSB7XG4gICAgICB0aGlzLmRlc3RpbmF0aW9uLmNvbXBsZXRlKCk7XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIHRoaXMudW5zdWJzY3JpYmUoKTtcbiAgICB9XG4gIH0sIHQ7XG59KShrZSksIGVpID0gKGZ1bmN0aW9uKCkge1xuICBmdW5jdGlvbiBlKHQpIHtcbiAgICB0aGlzLnBhcnRpYWxPYnNlcnZlciA9IHQ7XG4gIH1cbiAgcmV0dXJuIGUucHJvdG90eXBlLm5leHQgPSBmdW5jdGlvbih0KSB7XG4gICAgdmFyIG4gPSB0aGlzLnBhcnRpYWxPYnNlcnZlcjtcbiAgICBpZiAobi5uZXh0KVxuICAgICAgdHJ5IHtcbiAgICAgICAgbi5uZXh0KHQpO1xuICAgICAgfSBjYXRjaCAocikge1xuICAgICAgICBMZShyKTtcbiAgICAgIH1cbiAgfSwgZS5wcm90b3R5cGUuZXJyb3IgPSBmdW5jdGlvbih0KSB7XG4gICAgdmFyIG4gPSB0aGlzLnBhcnRpYWxPYnNlcnZlcjtcbiAgICBpZiAobi5lcnJvcilcbiAgICAgIHRyeSB7XG4gICAgICAgIG4uZXJyb3IodCk7XG4gICAgICB9IGNhdGNoIChyKSB7XG4gICAgICAgIExlKHIpO1xuICAgICAgfVxuICAgIGVsc2VcbiAgICAgIExlKHQpO1xuICB9LCBlLnByb3RvdHlwZS5jb21wbGV0ZSA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciB0ID0gdGhpcy5wYXJ0aWFsT2JzZXJ2ZXI7XG4gICAgaWYgKHQuY29tcGxldGUpXG4gICAgICB0cnkge1xuICAgICAgICB0LmNvbXBsZXRlKCk7XG4gICAgICB9IGNhdGNoIChuKSB7XG4gICAgICAgIExlKG4pO1xuICAgICAgfVxuICB9LCBlO1xufSkoKSwgUGUgPSAoZnVuY3Rpb24oZSkge1xuICBuZSh0LCBlKTtcbiAgZnVuY3Rpb24gdChuLCByLCBpKSB7XG4gICAgdmFyIG8gPSBlLmNhbGwodGhpcykgfHwgdGhpcywgcztcbiAgICByZXR1cm4gUChuKSB8fCAhbiA/IHMgPSB7XG4gICAgICBuZXh0OiBuID8/IHZvaWQgMCxcbiAgICAgIGVycm9yOiByID8/IHZvaWQgMCxcbiAgICAgIGNvbXBsZXRlOiBpID8/IHZvaWQgMFxuICAgIH0gOiBzID0gbiwgby5kZXN0aW5hdGlvbiA9IG5ldyBlaShzKSwgbztcbiAgfVxuICByZXR1cm4gdDtcbn0pKGd0KTtcbmZ1bmN0aW9uIExlKGUpIHtcbiAgZG4oZSk7XG59XG5mdW5jdGlvbiB0aShlKSB7XG4gIHRocm93IGU7XG59XG52YXIgbmkgPSB7XG4gIGNsb3NlZDogITAsXG4gIG5leHQ6IFdlLFxuICBlcnJvcjogdGksXG4gIGNvbXBsZXRlOiBXZVxufSwgYnQgPSAoZnVuY3Rpb24oKSB7XG4gIHJldHVybiB0eXBlb2YgU3ltYm9sID09IFwiZnVuY3Rpb25cIiAmJiBTeW1ib2wub2JzZXJ2YWJsZSB8fCBcIkBAb2JzZXJ2YWJsZVwiO1xufSkoKTtcbmZ1bmN0aW9uIFFlKGUpIHtcbiAgcmV0dXJuIGU7XG59XG5mdW5jdGlvbiByaShlKSB7XG4gIHJldHVybiBlLmxlbmd0aCA9PT0gMCA/IFFlIDogZS5sZW5ndGggPT09IDEgPyBlWzBdIDogZnVuY3Rpb24obikge1xuICAgIHJldHVybiBlLnJlZHVjZShmdW5jdGlvbihyLCBpKSB7XG4gICAgICByZXR1cm4gaShyKTtcbiAgICB9LCBuKTtcbiAgfTtcbn1cbnZhciBrID0gKGZ1bmN0aW9uKCkge1xuICBmdW5jdGlvbiBlKHQpIHtcbiAgICB0ICYmICh0aGlzLl9zdWJzY3JpYmUgPSB0KTtcbiAgfVxuICByZXR1cm4gZS5wcm90b3R5cGUubGlmdCA9IGZ1bmN0aW9uKHQpIHtcbiAgICB2YXIgbiA9IG5ldyBlKCk7XG4gICAgcmV0dXJuIG4uc291cmNlID0gdGhpcywgbi5vcGVyYXRvciA9IHQsIG47XG4gIH0sIGUucHJvdG90eXBlLnN1YnNjcmliZSA9IGZ1bmN0aW9uKHQsIG4sIHIpIHtcbiAgICB2YXIgaSA9IHRoaXMsIG8gPSBvaSh0KSA/IHQgOiBuZXcgUGUodCwgbiwgcik7XG4gICAgcmV0dXJuIFJlKGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHMgPSBpLCBhID0gcy5vcGVyYXRvciwgYyA9IHMuc291cmNlO1xuICAgICAgby5hZGQoYSA/IGEuY2FsbChvLCBjKSA6IGMgPyBpLl9zdWJzY3JpYmUobykgOiBpLl90cnlTdWJzY3JpYmUobykpO1xuICAgIH0pLCBvO1xuICB9LCBlLnByb3RvdHlwZS5fdHJ5U3Vic2NyaWJlID0gZnVuY3Rpb24odCkge1xuICAgIHRyeSB7XG4gICAgICByZXR1cm4gdGhpcy5fc3Vic2NyaWJlKHQpO1xuICAgIH0gY2F0Y2ggKG4pIHtcbiAgICAgIHQuZXJyb3Iobik7XG4gICAgfVxuICB9LCBlLnByb3RvdHlwZS5mb3JFYWNoID0gZnVuY3Rpb24odCwgbikge1xuICAgIHZhciByID0gdGhpcztcbiAgICByZXR1cm4gbiA9IFJ0KG4pLCBuZXcgbihmdW5jdGlvbihpLCBvKSB7XG4gICAgICB2YXIgcyA9IG5ldyBQZSh7XG4gICAgICAgIG5leHQ6IGZ1bmN0aW9uKGEpIHtcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgdChhKTtcbiAgICAgICAgICB9IGNhdGNoIChjKSB7XG4gICAgICAgICAgICBvKGMpLCBzLnVuc3Vic2NyaWJlKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBlcnJvcjogbyxcbiAgICAgICAgY29tcGxldGU6IGlcbiAgICAgIH0pO1xuICAgICAgci5zdWJzY3JpYmUocyk7XG4gICAgfSk7XG4gIH0sIGUucHJvdG90eXBlLl9zdWJzY3JpYmUgPSBmdW5jdGlvbih0KSB7XG4gICAgdmFyIG47XG4gICAgcmV0dXJuIChuID0gdGhpcy5zb3VyY2UpID09PSBudWxsIHx8IG4gPT09IHZvaWQgMCA/IHZvaWQgMCA6IG4uc3Vic2NyaWJlKHQpO1xuICB9LCBlLnByb3RvdHlwZVtidF0gPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcztcbiAgfSwgZS5wcm90b3R5cGUucGlwZSA9IGZ1bmN0aW9uKCkge1xuICAgIGZvciAodmFyIHQgPSBbXSwgbiA9IDA7IG4gPCBhcmd1bWVudHMubGVuZ3RoOyBuKyspXG4gICAgICB0W25dID0gYXJndW1lbnRzW25dO1xuICAgIHJldHVybiByaSh0KSh0aGlzKTtcbiAgfSwgZS5wcm90b3R5cGUudG9Qcm9taXNlID0gZnVuY3Rpb24odCkge1xuICAgIHZhciBuID0gdGhpcztcbiAgICByZXR1cm4gdCA9IFJ0KHQpLCBuZXcgdChmdW5jdGlvbihyLCBpKSB7XG4gICAgICB2YXIgbztcbiAgICAgIG4uc3Vic2NyaWJlKGZ1bmN0aW9uKHMpIHtcbiAgICAgICAgcmV0dXJuIG8gPSBzO1xuICAgICAgfSwgZnVuY3Rpb24ocykge1xuICAgICAgICByZXR1cm4gaShzKTtcbiAgICAgIH0sIGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gcihvKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9LCBlLmNyZWF0ZSA9IGZ1bmN0aW9uKHQpIHtcbiAgICByZXR1cm4gbmV3IGUodCk7XG4gIH0sIGU7XG59KSgpO1xuZnVuY3Rpb24gUnQoZSkge1xuICB2YXIgdDtcbiAgcmV0dXJuICh0ID0gZSA/PyBYci5Qcm9taXNlKSAhPT0gbnVsbCAmJiB0ICE9PSB2b2lkIDAgPyB0IDogUHJvbWlzZTtcbn1cbmZ1bmN0aW9uIGlpKGUpIHtcbiAgcmV0dXJuIGUgJiYgUChlLm5leHQpICYmIFAoZS5lcnJvcikgJiYgUChlLmNvbXBsZXRlKTtcbn1cbmZ1bmN0aW9uIG9pKGUpIHtcbiAgcmV0dXJuIGUgJiYgZSBpbnN0YW5jZW9mIGd0IHx8IGlpKGUpICYmIGZuKGUpO1xufVxuZnVuY3Rpb24gc2koZSkge1xuICByZXR1cm4gUChlID09IG51bGwgPyB2b2lkIDAgOiBlLmxpZnQpO1xufVxuZnVuY3Rpb24gVyhlKSB7XG4gIHJldHVybiBmdW5jdGlvbih0KSB7XG4gICAgaWYgKHNpKHQpKVxuICAgICAgcmV0dXJuIHQubGlmdChmdW5jdGlvbihuKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgcmV0dXJuIGUobiwgdGhpcyk7XG4gICAgICAgIH0gY2F0Y2ggKHIpIHtcbiAgICAgICAgICB0aGlzLmVycm9yKHIpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiVW5hYmxlIHRvIGxpZnQgdW5rbm93biBPYnNlcnZhYmxlIHR5cGVcIik7XG4gIH07XG59XG5mdW5jdGlvbiBGKGUsIHQsIG4sIHIsIGkpIHtcbiAgcmV0dXJuIG5ldyBhaShlLCB0LCBuLCByLCBpKTtcbn1cbnZhciBhaSA9IChmdW5jdGlvbihlKSB7XG4gIG5lKHQsIGUpO1xuICBmdW5jdGlvbiB0KG4sIHIsIGksIG8sIHMsIGEpIHtcbiAgICB2YXIgYyA9IGUuY2FsbCh0aGlzLCBuKSB8fCB0aGlzO1xuICAgIHJldHVybiBjLm9uRmluYWxpemUgPSBzLCBjLnNob3VsZFVuc3Vic2NyaWJlID0gYSwgYy5fbmV4dCA9IHIgPyBmdW5jdGlvbih1KSB7XG4gICAgICB0cnkge1xuICAgICAgICByKHUpO1xuICAgICAgfSBjYXRjaCAobCkge1xuICAgICAgICBuLmVycm9yKGwpO1xuICAgICAgfVxuICAgIH0gOiBlLnByb3RvdHlwZS5fbmV4dCwgYy5fZXJyb3IgPSBvID8gZnVuY3Rpb24odSkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgbyh1KTtcbiAgICAgIH0gY2F0Y2ggKGwpIHtcbiAgICAgICAgbi5lcnJvcihsKTtcbiAgICAgIH0gZmluYWxseSB7XG4gICAgICAgIHRoaXMudW5zdWJzY3JpYmUoKTtcbiAgICAgIH1cbiAgICB9IDogZS5wcm90b3R5cGUuX2Vycm9yLCBjLl9jb21wbGV0ZSA9IGkgPyBmdW5jdGlvbigpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGkoKTtcbiAgICAgIH0gY2F0Y2ggKHUpIHtcbiAgICAgICAgbi5lcnJvcih1KTtcbiAgICAgIH0gZmluYWxseSB7XG4gICAgICAgIHRoaXMudW5zdWJzY3JpYmUoKTtcbiAgICAgIH1cbiAgICB9IDogZS5wcm90b3R5cGUuX2NvbXBsZXRlLCBjO1xuICB9XG4gIHJldHVybiB0LnByb3RvdHlwZS51bnN1YnNjcmliZSA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBuO1xuICAgIGlmICghdGhpcy5zaG91bGRVbnN1YnNjcmliZSB8fCB0aGlzLnNob3VsZFVuc3Vic2NyaWJlKCkpIHtcbiAgICAgIHZhciByID0gdGhpcy5jbG9zZWQ7XG4gICAgICBlLnByb3RvdHlwZS51bnN1YnNjcmliZS5jYWxsKHRoaXMpLCAhciAmJiAoKG4gPSB0aGlzLm9uRmluYWxpemUpID09PSBudWxsIHx8IG4gPT09IHZvaWQgMCB8fCBuLmNhbGwodGhpcykpO1xuICAgIH1cbiAgfSwgdDtcbn0pKGd0KSwgY2kgPSBtdChmdW5jdGlvbihlKSB7XG4gIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICBlKHRoaXMpLCB0aGlzLm5hbWUgPSBcIk9iamVjdFVuc3Vic2NyaWJlZEVycm9yXCIsIHRoaXMubWVzc2FnZSA9IFwib2JqZWN0IHVuc3Vic2NyaWJlZFwiO1xuICB9O1xufSksIHRlID0gKGZ1bmN0aW9uKGUpIHtcbiAgbmUodCwgZSk7XG4gIGZ1bmN0aW9uIHQoKSB7XG4gICAgdmFyIG4gPSBlLmNhbGwodGhpcykgfHwgdGhpcztcbiAgICByZXR1cm4gbi5jbG9zZWQgPSAhMSwgbi5jdXJyZW50T2JzZXJ2ZXJzID0gbnVsbCwgbi5vYnNlcnZlcnMgPSBbXSwgbi5pc1N0b3BwZWQgPSAhMSwgbi5oYXNFcnJvciA9ICExLCBuLnRocm93bkVycm9yID0gbnVsbCwgbjtcbiAgfVxuICByZXR1cm4gdC5wcm90b3R5cGUubGlmdCA9IGZ1bmN0aW9uKG4pIHtcbiAgICB2YXIgciA9IG5ldyBEdCh0aGlzLCB0aGlzKTtcbiAgICByZXR1cm4gci5vcGVyYXRvciA9IG4sIHI7XG4gIH0sIHQucHJvdG90eXBlLl90aHJvd0lmQ2xvc2VkID0gZnVuY3Rpb24oKSB7XG4gICAgaWYgKHRoaXMuY2xvc2VkKVxuICAgICAgdGhyb3cgbmV3IGNpKCk7XG4gIH0sIHQucHJvdG90eXBlLm5leHQgPSBmdW5jdGlvbihuKSB7XG4gICAgdmFyIHIgPSB0aGlzO1xuICAgIFJlKGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIGksIG87XG4gICAgICBpZiAoci5fdGhyb3dJZkNsb3NlZCgpLCAhci5pc1N0b3BwZWQpIHtcbiAgICAgICAgci5jdXJyZW50T2JzZXJ2ZXJzIHx8IChyLmN1cnJlbnRPYnNlcnZlcnMgPSBBcnJheS5mcm9tKHIub2JzZXJ2ZXJzKSk7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgZm9yICh2YXIgcyA9IGdlKHIuY3VycmVudE9ic2VydmVycyksIGEgPSBzLm5leHQoKTsgIWEuZG9uZTsgYSA9IHMubmV4dCgpKSB7XG4gICAgICAgICAgICB2YXIgYyA9IGEudmFsdWU7XG4gICAgICAgICAgICBjLm5leHQobik7XG4gICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoICh1KSB7XG4gICAgICAgICAgaSA9IHsgZXJyb3I6IHUgfTtcbiAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgYSAmJiAhYS5kb25lICYmIChvID0gcy5yZXR1cm4pICYmIG8uY2FsbChzKTtcbiAgICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgICAgaWYgKGkpIHRocm93IGkuZXJyb3I7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG4gIH0sIHQucHJvdG90eXBlLmVycm9yID0gZnVuY3Rpb24obikge1xuICAgIHZhciByID0gdGhpcztcbiAgICBSZShmdW5jdGlvbigpIHtcbiAgICAgIGlmIChyLl90aHJvd0lmQ2xvc2VkKCksICFyLmlzU3RvcHBlZCkge1xuICAgICAgICByLmhhc0Vycm9yID0gci5pc1N0b3BwZWQgPSAhMCwgci50aHJvd25FcnJvciA9IG47XG4gICAgICAgIGZvciAodmFyIGkgPSByLm9ic2VydmVyczsgaS5sZW5ndGg7IClcbiAgICAgICAgICBpLnNoaWZ0KCkuZXJyb3Iobik7XG4gICAgICB9XG4gICAgfSk7XG4gIH0sIHQucHJvdG90eXBlLmNvbXBsZXRlID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIG4gPSB0aGlzO1xuICAgIFJlKGZ1bmN0aW9uKCkge1xuICAgICAgaWYgKG4uX3Rocm93SWZDbG9zZWQoKSwgIW4uaXNTdG9wcGVkKSB7XG4gICAgICAgIG4uaXNTdG9wcGVkID0gITA7XG4gICAgICAgIGZvciAodmFyIHIgPSBuLm9ic2VydmVyczsgci5sZW5ndGg7IClcbiAgICAgICAgICByLnNoaWZ0KCkuY29tcGxldGUoKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSwgdC5wcm90b3R5cGUudW5zdWJzY3JpYmUgPSBmdW5jdGlvbigpIHtcbiAgICB0aGlzLmlzU3RvcHBlZCA9IHRoaXMuY2xvc2VkID0gITAsIHRoaXMub2JzZXJ2ZXJzID0gdGhpcy5jdXJyZW50T2JzZXJ2ZXJzID0gbnVsbDtcbiAgfSwgT2JqZWN0LmRlZmluZVByb3BlcnR5KHQucHJvdG90eXBlLCBcIm9ic2VydmVkXCIsIHtcbiAgICBnZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIG47XG4gICAgICByZXR1cm4gKChuID0gdGhpcy5vYnNlcnZlcnMpID09PSBudWxsIHx8IG4gPT09IHZvaWQgMCA/IHZvaWQgMCA6IG4ubGVuZ3RoKSA+IDA7XG4gICAgfSxcbiAgICBlbnVtZXJhYmxlOiAhMSxcbiAgICBjb25maWd1cmFibGU6ICEwXG4gIH0pLCB0LnByb3RvdHlwZS5fdHJ5U3Vic2NyaWJlID0gZnVuY3Rpb24obikge1xuICAgIHJldHVybiB0aGlzLl90aHJvd0lmQ2xvc2VkKCksIGUucHJvdG90eXBlLl90cnlTdWJzY3JpYmUuY2FsbCh0aGlzLCBuKTtcbiAgfSwgdC5wcm90b3R5cGUuX3N1YnNjcmliZSA9IGZ1bmN0aW9uKG4pIHtcbiAgICByZXR1cm4gdGhpcy5fdGhyb3dJZkNsb3NlZCgpLCB0aGlzLl9jaGVja0ZpbmFsaXplZFN0YXR1c2VzKG4pLCB0aGlzLl9pbm5lclN1YnNjcmliZShuKTtcbiAgfSwgdC5wcm90b3R5cGUuX2lubmVyU3Vic2NyaWJlID0gZnVuY3Rpb24obikge1xuICAgIHZhciByID0gdGhpcywgaSA9IHRoaXMsIG8gPSBpLmhhc0Vycm9yLCBzID0gaS5pc1N0b3BwZWQsIGEgPSBpLm9ic2VydmVycztcbiAgICByZXR1cm4gbyB8fCBzID8gbG4gOiAodGhpcy5jdXJyZW50T2JzZXJ2ZXJzID0gbnVsbCwgYS5wdXNoKG4pLCBuZXcga2UoZnVuY3Rpb24oKSB7XG4gICAgICByLmN1cnJlbnRPYnNlcnZlcnMgPSBudWxsLCBVZShhLCBuKTtcbiAgICB9KSk7XG4gIH0sIHQucHJvdG90eXBlLl9jaGVja0ZpbmFsaXplZFN0YXR1c2VzID0gZnVuY3Rpb24obikge1xuICAgIHZhciByID0gdGhpcywgaSA9IHIuaGFzRXJyb3IsIG8gPSByLnRocm93bkVycm9yLCBzID0gci5pc1N0b3BwZWQ7XG4gICAgaSA/IG4uZXJyb3IobykgOiBzICYmIG4uY29tcGxldGUoKTtcbiAgfSwgdC5wcm90b3R5cGUuYXNPYnNlcnZhYmxlID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIG4gPSBuZXcgaygpO1xuICAgIHJldHVybiBuLnNvdXJjZSA9IHRoaXMsIG47XG4gIH0sIHQuY3JlYXRlID0gZnVuY3Rpb24obiwgcikge1xuICAgIHJldHVybiBuZXcgRHQobiwgcik7XG4gIH0sIHQ7XG59KShrKSwgRHQgPSAoZnVuY3Rpb24oZSkge1xuICBuZSh0LCBlKTtcbiAgZnVuY3Rpb24gdChuLCByKSB7XG4gICAgdmFyIGkgPSBlLmNhbGwodGhpcykgfHwgdGhpcztcbiAgICByZXR1cm4gaS5kZXN0aW5hdGlvbiA9IG4sIGkuc291cmNlID0gciwgaTtcbiAgfVxuICByZXR1cm4gdC5wcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uKG4pIHtcbiAgICB2YXIgciwgaTtcbiAgICAoaSA9IChyID0gdGhpcy5kZXN0aW5hdGlvbikgPT09IG51bGwgfHwgciA9PT0gdm9pZCAwID8gdm9pZCAwIDogci5uZXh0KSA9PT0gbnVsbCB8fCBpID09PSB2b2lkIDAgfHwgaS5jYWxsKHIsIG4pO1xuICB9LCB0LnByb3RvdHlwZS5lcnJvciA9IGZ1bmN0aW9uKG4pIHtcbiAgICB2YXIgciwgaTtcbiAgICAoaSA9IChyID0gdGhpcy5kZXN0aW5hdGlvbikgPT09IG51bGwgfHwgciA9PT0gdm9pZCAwID8gdm9pZCAwIDogci5lcnJvcikgPT09IG51bGwgfHwgaSA9PT0gdm9pZCAwIHx8IGkuY2FsbChyLCBuKTtcbiAgfSwgdC5wcm90b3R5cGUuY29tcGxldGUgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgbiwgcjtcbiAgICAociA9IChuID0gdGhpcy5kZXN0aW5hdGlvbikgPT09IG51bGwgfHwgbiA9PT0gdm9pZCAwID8gdm9pZCAwIDogbi5jb21wbGV0ZSkgPT09IG51bGwgfHwgciA9PT0gdm9pZCAwIHx8IHIuY2FsbChuKTtcbiAgfSwgdC5wcm90b3R5cGUuX3N1YnNjcmliZSA9IGZ1bmN0aW9uKG4pIHtcbiAgICB2YXIgciwgaTtcbiAgICByZXR1cm4gKGkgPSAociA9IHRoaXMuc291cmNlKSA9PT0gbnVsbCB8fCByID09PSB2b2lkIDAgPyB2b2lkIDAgOiByLnN1YnNjcmliZShuKSkgIT09IG51bGwgJiYgaSAhPT0gdm9pZCAwID8gaSA6IGxuO1xuICB9LCB0O1xufSkodGUpLCBwbiA9IChmdW5jdGlvbihlKSB7XG4gIG5lKHQsIGUpO1xuICBmdW5jdGlvbiB0KG4pIHtcbiAgICB2YXIgciA9IGUuY2FsbCh0aGlzKSB8fCB0aGlzO1xuICAgIHJldHVybiByLl92YWx1ZSA9IG4sIHI7XG4gIH1cbiAgcmV0dXJuIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LnByb3RvdHlwZSwgXCJ2YWx1ZVwiLCB7XG4gICAgZ2V0OiBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiB0aGlzLmdldFZhbHVlKCk7XG4gICAgfSxcbiAgICBlbnVtZXJhYmxlOiAhMSxcbiAgICBjb25maWd1cmFibGU6ICEwXG4gIH0pLCB0LnByb3RvdHlwZS5fc3Vic2NyaWJlID0gZnVuY3Rpb24obikge1xuICAgIHZhciByID0gZS5wcm90b3R5cGUuX3N1YnNjcmliZS5jYWxsKHRoaXMsIG4pO1xuICAgIHJldHVybiAhci5jbG9zZWQgJiYgbi5uZXh0KHRoaXMuX3ZhbHVlKSwgcjtcbiAgfSwgdC5wcm90b3R5cGUuZ2V0VmFsdWUgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgbiA9IHRoaXMsIHIgPSBuLmhhc0Vycm9yLCBpID0gbi50aHJvd25FcnJvciwgbyA9IG4uX3ZhbHVlO1xuICAgIGlmIChyKVxuICAgICAgdGhyb3cgaTtcbiAgICByZXR1cm4gdGhpcy5fdGhyb3dJZkNsb3NlZCgpLCBvO1xuICB9LCB0LnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24obikge1xuICAgIGUucHJvdG90eXBlLm5leHQuY2FsbCh0aGlzLCB0aGlzLl92YWx1ZSA9IG4pO1xuICB9LCB0O1xufSkodGUpLCB1aSA9IHtcbiAgbm93OiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gRGF0ZS5ub3coKTtcbiAgfVxufSwgbGkgPSAoZnVuY3Rpb24oZSkge1xuICBuZSh0LCBlKTtcbiAgZnVuY3Rpb24gdChuLCByKSB7XG4gICAgcmV0dXJuIGUuY2FsbCh0aGlzKSB8fCB0aGlzO1xuICB9XG4gIHJldHVybiB0LnByb3RvdHlwZS5zY2hlZHVsZSA9IGZ1bmN0aW9uKG4sIHIpIHtcbiAgICByZXR1cm4gdGhpcztcbiAgfSwgdDtcbn0pKGtlKSwgJHQgPSB7XG4gIHNldEludGVydmFsOiBmdW5jdGlvbihlLCB0KSB7XG4gICAgZm9yICh2YXIgbiA9IFtdLCByID0gMjsgciA8IGFyZ3VtZW50cy5sZW5ndGg7IHIrKylcbiAgICAgIG5bciAtIDJdID0gYXJndW1lbnRzW3JdO1xuICAgIHJldHVybiBzZXRJbnRlcnZhbC5hcHBseSh2b2lkIDAsIGJlKFtlLCB0XSwgZGUobikpKTtcbiAgfSxcbiAgY2xlYXJJbnRlcnZhbDogZnVuY3Rpb24oZSkge1xuICAgIHJldHVybiBjbGVhckludGVydmFsKGUpO1xuICB9LFxuICBkZWxlZ2F0ZTogdm9pZCAwXG59LCBmaSA9IChmdW5jdGlvbihlKSB7XG4gIG5lKHQsIGUpO1xuICBmdW5jdGlvbiB0KG4sIHIpIHtcbiAgICB2YXIgaSA9IGUuY2FsbCh0aGlzLCBuLCByKSB8fCB0aGlzO1xuICAgIHJldHVybiBpLnNjaGVkdWxlciA9IG4sIGkud29yayA9IHIsIGkucGVuZGluZyA9ICExLCBpO1xuICB9XG4gIHJldHVybiB0LnByb3RvdHlwZS5zY2hlZHVsZSA9IGZ1bmN0aW9uKG4sIHIpIHtcbiAgICB2YXIgaTtcbiAgICBpZiAociA9PT0gdm9pZCAwICYmIChyID0gMCksIHRoaXMuY2xvc2VkKVxuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgdGhpcy5zdGF0ZSA9IG47XG4gICAgdmFyIG8gPSB0aGlzLmlkLCBzID0gdGhpcy5zY2hlZHVsZXI7XG4gICAgcmV0dXJuIG8gIT0gbnVsbCAmJiAodGhpcy5pZCA9IHRoaXMucmVjeWNsZUFzeW5jSWQocywgbywgcikpLCB0aGlzLnBlbmRpbmcgPSAhMCwgdGhpcy5kZWxheSA9IHIsIHRoaXMuaWQgPSAoaSA9IHRoaXMuaWQpICE9PSBudWxsICYmIGkgIT09IHZvaWQgMCA/IGkgOiB0aGlzLnJlcXVlc3RBc3luY0lkKHMsIHRoaXMuaWQsIHIpLCB0aGlzO1xuICB9LCB0LnByb3RvdHlwZS5yZXF1ZXN0QXN5bmNJZCA9IGZ1bmN0aW9uKG4sIHIsIGkpIHtcbiAgICByZXR1cm4gaSA9PT0gdm9pZCAwICYmIChpID0gMCksICR0LnNldEludGVydmFsKG4uZmx1c2guYmluZChuLCB0aGlzKSwgaSk7XG4gIH0sIHQucHJvdG90eXBlLnJlY3ljbGVBc3luY0lkID0gZnVuY3Rpb24obiwgciwgaSkge1xuICAgIGlmIChpID09PSB2b2lkIDAgJiYgKGkgPSAwKSwgaSAhPSBudWxsICYmIHRoaXMuZGVsYXkgPT09IGkgJiYgdGhpcy5wZW5kaW5nID09PSAhMSlcbiAgICAgIHJldHVybiByO1xuICAgIHIgIT0gbnVsbCAmJiAkdC5jbGVhckludGVydmFsKHIpO1xuICB9LCB0LnByb3RvdHlwZS5leGVjdXRlID0gZnVuY3Rpb24obiwgcikge1xuICAgIGlmICh0aGlzLmNsb3NlZClcbiAgICAgIHJldHVybiBuZXcgRXJyb3IoXCJleGVjdXRpbmcgYSBjYW5jZWxsZWQgYWN0aW9uXCIpO1xuICAgIHRoaXMucGVuZGluZyA9ICExO1xuICAgIHZhciBpID0gdGhpcy5fZXhlY3V0ZShuLCByKTtcbiAgICBpZiAoaSlcbiAgICAgIHJldHVybiBpO1xuICAgIHRoaXMucGVuZGluZyA9PT0gITEgJiYgdGhpcy5pZCAhPSBudWxsICYmICh0aGlzLmlkID0gdGhpcy5yZWN5Y2xlQXN5bmNJZCh0aGlzLnNjaGVkdWxlciwgdGhpcy5pZCwgbnVsbCkpO1xuICB9LCB0LnByb3RvdHlwZS5fZXhlY3V0ZSA9IGZ1bmN0aW9uKG4sIHIpIHtcbiAgICB2YXIgaSA9ICExLCBvO1xuICAgIHRyeSB7XG4gICAgICB0aGlzLndvcmsobik7XG4gICAgfSBjYXRjaCAocykge1xuICAgICAgaSA9ICEwLCBvID0gcyB8fCBuZXcgRXJyb3IoXCJTY2hlZHVsZWQgYWN0aW9uIHRocmV3IGZhbHN5IGVycm9yXCIpO1xuICAgIH1cbiAgICBpZiAoaSlcbiAgICAgIHJldHVybiB0aGlzLnVuc3Vic2NyaWJlKCksIG87XG4gIH0sIHQucHJvdG90eXBlLnVuc3Vic2NyaWJlID0gZnVuY3Rpb24oKSB7XG4gICAgaWYgKCF0aGlzLmNsb3NlZCkge1xuICAgICAgdmFyIG4gPSB0aGlzLCByID0gbi5pZCwgaSA9IG4uc2NoZWR1bGVyLCBvID0gaS5hY3Rpb25zO1xuICAgICAgdGhpcy53b3JrID0gdGhpcy5zdGF0ZSA9IHRoaXMuc2NoZWR1bGVyID0gbnVsbCwgdGhpcy5wZW5kaW5nID0gITEsIFVlKG8sIHRoaXMpLCByICE9IG51bGwgJiYgKHRoaXMuaWQgPSB0aGlzLnJlY3ljbGVBc3luY0lkKGksIHIsIG51bGwpKSwgdGhpcy5kZWxheSA9IG51bGwsIGUucHJvdG90eXBlLnVuc3Vic2NyaWJlLmNhbGwodGhpcyk7XG4gICAgfVxuICB9LCB0O1xufSkobGkpLCBOdCA9IChmdW5jdGlvbigpIHtcbiAgZnVuY3Rpb24gZSh0LCBuKSB7XG4gICAgbiA9PT0gdm9pZCAwICYmIChuID0gZS5ub3cpLCB0aGlzLnNjaGVkdWxlckFjdGlvbkN0b3IgPSB0LCB0aGlzLm5vdyA9IG47XG4gIH1cbiAgcmV0dXJuIGUucHJvdG90eXBlLnNjaGVkdWxlID0gZnVuY3Rpb24odCwgbiwgcikge1xuICAgIHJldHVybiBuID09PSB2b2lkIDAgJiYgKG4gPSAwKSwgbmV3IHRoaXMuc2NoZWR1bGVyQWN0aW9uQ3Rvcih0aGlzLCB0KS5zY2hlZHVsZShyLCBuKTtcbiAgfSwgZS5ub3cgPSB1aS5ub3csIGU7XG59KSgpLCBkaSA9IChmdW5jdGlvbihlKSB7XG4gIG5lKHQsIGUpO1xuICBmdW5jdGlvbiB0KG4sIHIpIHtcbiAgICByID09PSB2b2lkIDAgJiYgKHIgPSBOdC5ub3cpO1xuICAgIHZhciBpID0gZS5jYWxsKHRoaXMsIG4sIHIpIHx8IHRoaXM7XG4gICAgcmV0dXJuIGkuYWN0aW9ucyA9IFtdLCBpLl9hY3RpdmUgPSAhMSwgaTtcbiAgfVxuICByZXR1cm4gdC5wcm90b3R5cGUuZmx1c2ggPSBmdW5jdGlvbihuKSB7XG4gICAgdmFyIHIgPSB0aGlzLmFjdGlvbnM7XG4gICAgaWYgKHRoaXMuX2FjdGl2ZSkge1xuICAgICAgci5wdXNoKG4pO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB2YXIgaTtcbiAgICB0aGlzLl9hY3RpdmUgPSAhMDtcbiAgICBkb1xuICAgICAgaWYgKGkgPSBuLmV4ZWN1dGUobi5zdGF0ZSwgbi5kZWxheSkpXG4gICAgICAgIGJyZWFrO1xuICAgIHdoaWxlIChuID0gci5zaGlmdCgpKTtcbiAgICBpZiAodGhpcy5fYWN0aXZlID0gITEsIGkpIHtcbiAgICAgIGZvciAoOyBuID0gci5zaGlmdCgpOyApXG4gICAgICAgIG4udW5zdWJzY3JpYmUoKTtcbiAgICAgIHRocm93IGk7XG4gICAgfVxuICB9LCB0O1xufSkoTnQpLCBwaSA9IG5ldyBkaShmaSk7XG5mdW5jdGlvbiBoaShlKSB7XG4gIHJldHVybiBlICYmIFAoZS5zY2hlZHVsZSk7XG59XG5mdW5jdGlvbiB2aShlKSB7XG4gIHJldHVybiBlW2UubGVuZ3RoIC0gMV07XG59XG5mdW5jdGlvbiB5dChlKSB7XG4gIHJldHVybiBoaSh2aShlKSkgPyBlLnBvcCgpIDogdm9pZCAwO1xufVxudmFyIHd0ID0gKGZ1bmN0aW9uKGUpIHtcbiAgcmV0dXJuIGUgJiYgdHlwZW9mIGUubGVuZ3RoID09IFwibnVtYmVyXCIgJiYgdHlwZW9mIGUgIT0gXCJmdW5jdGlvblwiO1xufSk7XG5mdW5jdGlvbiBobihlKSB7XG4gIHJldHVybiBQKGUgPT0gbnVsbCA/IHZvaWQgMCA6IGUudGhlbik7XG59XG5mdW5jdGlvbiB2bihlKSB7XG4gIHJldHVybiBQKGVbYnRdKTtcbn1cbmZ1bmN0aW9uIG1uKGUpIHtcbiAgcmV0dXJuIFN5bWJvbC5hc3luY0l0ZXJhdG9yICYmIFAoZSA9PSBudWxsID8gdm9pZCAwIDogZVtTeW1ib2wuYXN5bmNJdGVyYXRvcl0pO1xufVxuZnVuY3Rpb24gZ24oZSkge1xuICByZXR1cm4gbmV3IFR5cGVFcnJvcihcIllvdSBwcm92aWRlZCBcIiArIChlICE9PSBudWxsICYmIHR5cGVvZiBlID09IFwib2JqZWN0XCIgPyBcImFuIGludmFsaWQgb2JqZWN0XCIgOiBcIidcIiArIGUgKyBcIidcIikgKyBcIiB3aGVyZSBhIHN0cmVhbSB3YXMgZXhwZWN0ZWQuIFlvdSBjYW4gcHJvdmlkZSBhbiBPYnNlcnZhYmxlLCBQcm9taXNlLCBSZWFkYWJsZVN0cmVhbSwgQXJyYXksIEFzeW5jSXRlcmFibGUsIG9yIEl0ZXJhYmxlLlwiKTtcbn1cbmZ1bmN0aW9uIG1pKCkge1xuICByZXR1cm4gdHlwZW9mIFN5bWJvbCAhPSBcImZ1bmN0aW9uXCIgfHwgIVN5bWJvbC5pdGVyYXRvciA/IFwiQEBpdGVyYXRvclwiIDogU3ltYm9sLml0ZXJhdG9yO1xufVxudmFyIGJuID0gbWkoKTtcbmZ1bmN0aW9uIHluKGUpIHtcbiAgcmV0dXJuIFAoZSA9PSBudWxsID8gdm9pZCAwIDogZVtibl0pO1xufVxuZnVuY3Rpb24gd24oZSkge1xuICByZXR1cm4gUXIodGhpcywgYXJndW1lbnRzLCBmdW5jdGlvbigpIHtcbiAgICB2YXIgbiwgciwgaSwgbztcbiAgICByZXR1cm4gdW4odGhpcywgZnVuY3Rpb24ocykge1xuICAgICAgc3dpdGNoIChzLmxhYmVsKSB7XG4gICAgICAgIGNhc2UgMDpcbiAgICAgICAgICBuID0gZS5nZXRSZWFkZXIoKSwgcy5sYWJlbCA9IDE7XG4gICAgICAgIGNhc2UgMTpcbiAgICAgICAgICBzLnRyeXMucHVzaChbMSwgLCA5LCAxMF0pLCBzLmxhYmVsID0gMjtcbiAgICAgICAgY2FzZSAyOlxuICAgICAgICAgIHJldHVybiBbNCwgdmUobi5yZWFkKCkpXTtcbiAgICAgICAgY2FzZSAzOlxuICAgICAgICAgIHJldHVybiByID0gcy5zZW50KCksIGkgPSByLnZhbHVlLCBvID0gci5kb25lLCBvID8gWzQsIHZlKHZvaWQgMCldIDogWzMsIDVdO1xuICAgICAgICBjYXNlIDQ6XG4gICAgICAgICAgcmV0dXJuIFsyLCBzLnNlbnQoKV07XG4gICAgICAgIGNhc2UgNTpcbiAgICAgICAgICByZXR1cm4gWzQsIHZlKGkpXTtcbiAgICAgICAgY2FzZSA2OlxuICAgICAgICAgIHJldHVybiBbNCwgcy5zZW50KCldO1xuICAgICAgICBjYXNlIDc6XG4gICAgICAgICAgcmV0dXJuIHMuc2VudCgpLCBbMywgMl07XG4gICAgICAgIGNhc2UgODpcbiAgICAgICAgICByZXR1cm4gWzMsIDEwXTtcbiAgICAgICAgY2FzZSA5OlxuICAgICAgICAgIHJldHVybiBuLnJlbGVhc2VMb2NrKCksIFs3XTtcbiAgICAgICAgY2FzZSAxMDpcbiAgICAgICAgICByZXR1cm4gWzJdO1xuICAgICAgfVxuICAgIH0pO1xuICB9KTtcbn1cbmZ1bmN0aW9uIHhuKGUpIHtcbiAgcmV0dXJuIFAoZSA9PSBudWxsID8gdm9pZCAwIDogZS5nZXRSZWFkZXIpO1xufVxuZnVuY3Rpb24geihlKSB7XG4gIGlmIChlIGluc3RhbmNlb2YgaylcbiAgICByZXR1cm4gZTtcbiAgaWYgKGUgIT0gbnVsbCkge1xuICAgIGlmICh2bihlKSlcbiAgICAgIHJldHVybiBnaShlKTtcbiAgICBpZiAod3QoZSkpXG4gICAgICByZXR1cm4gYmkoZSk7XG4gICAgaWYgKGhuKGUpKVxuICAgICAgcmV0dXJuIHlpKGUpO1xuICAgIGlmIChtbihlKSlcbiAgICAgIHJldHVybiBTbihlKTtcbiAgICBpZiAoeW4oZSkpXG4gICAgICByZXR1cm4gd2koZSk7XG4gICAgaWYgKHhuKGUpKVxuICAgICAgcmV0dXJuIHhpKGUpO1xuICB9XG4gIHRocm93IGduKGUpO1xufVxuZnVuY3Rpb24gZ2koZSkge1xuICByZXR1cm4gbmV3IGsoZnVuY3Rpb24odCkge1xuICAgIHZhciBuID0gZVtidF0oKTtcbiAgICBpZiAoUChuLnN1YnNjcmliZSkpXG4gICAgICByZXR1cm4gbi5zdWJzY3JpYmUodCk7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlByb3ZpZGVkIG9iamVjdCBkb2VzIG5vdCBjb3JyZWN0bHkgaW1wbGVtZW50IFN5bWJvbC5vYnNlcnZhYmxlXCIpO1xuICB9KTtcbn1cbmZ1bmN0aW9uIGJpKGUpIHtcbiAgcmV0dXJuIG5ldyBrKGZ1bmN0aW9uKHQpIHtcbiAgICBmb3IgKHZhciBuID0gMDsgbiA8IGUubGVuZ3RoICYmICF0LmNsb3NlZDsgbisrKVxuICAgICAgdC5uZXh0KGVbbl0pO1xuICAgIHQuY29tcGxldGUoKTtcbiAgfSk7XG59XG5mdW5jdGlvbiB5aShlKSB7XG4gIHJldHVybiBuZXcgayhmdW5jdGlvbih0KSB7XG4gICAgZS50aGVuKGZ1bmN0aW9uKG4pIHtcbiAgICAgIHQuY2xvc2VkIHx8ICh0Lm5leHQobiksIHQuY29tcGxldGUoKSk7XG4gICAgfSwgZnVuY3Rpb24obikge1xuICAgICAgcmV0dXJuIHQuZXJyb3Iobik7XG4gICAgfSkudGhlbihudWxsLCBkbik7XG4gIH0pO1xufVxuZnVuY3Rpb24gd2koZSkge1xuICByZXR1cm4gbmV3IGsoZnVuY3Rpb24odCkge1xuICAgIHZhciBuLCByO1xuICAgIHRyeSB7XG4gICAgICBmb3IgKHZhciBpID0gZ2UoZSksIG8gPSBpLm5leHQoKTsgIW8uZG9uZTsgbyA9IGkubmV4dCgpKSB7XG4gICAgICAgIHZhciBzID0gby52YWx1ZTtcbiAgICAgICAgaWYgKHQubmV4dChzKSwgdC5jbG9zZWQpXG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGEpIHtcbiAgICAgIG4gPSB7IGVycm9yOiBhIH07XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIHRyeSB7XG4gICAgICAgIG8gJiYgIW8uZG9uZSAmJiAociA9IGkucmV0dXJuKSAmJiByLmNhbGwoaSk7XG4gICAgICB9IGZpbmFsbHkge1xuICAgICAgICBpZiAobikgdGhyb3cgbi5lcnJvcjtcbiAgICAgIH1cbiAgICB9XG4gICAgdC5jb21wbGV0ZSgpO1xuICB9KTtcbn1cbmZ1bmN0aW9uIFNuKGUpIHtcbiAgcmV0dXJuIG5ldyBrKGZ1bmN0aW9uKHQpIHtcbiAgICBTaShlLCB0KS5jYXRjaChmdW5jdGlvbihuKSB7XG4gICAgICByZXR1cm4gdC5lcnJvcihuKTtcbiAgICB9KTtcbiAgfSk7XG59XG5mdW5jdGlvbiB4aShlKSB7XG4gIHJldHVybiBTbih3bihlKSk7XG59XG5mdW5jdGlvbiBTaShlLCB0KSB7XG4gIHZhciBuLCByLCBpLCBvO1xuICByZXR1cm4gR3IodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKCkge1xuICAgIHZhciBzLCBhO1xuICAgIHJldHVybiB1bih0aGlzLCBmdW5jdGlvbihjKSB7XG4gICAgICBzd2l0Y2ggKGMubGFiZWwpIHtcbiAgICAgICAgY2FzZSAwOlxuICAgICAgICAgIGMudHJ5cy5wdXNoKFswLCA1LCA2LCAxMV0pLCBuID0gSnIoZSksIGMubGFiZWwgPSAxO1xuICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgcmV0dXJuIFs0LCBuLm5leHQoKV07XG4gICAgICAgIGNhc2UgMjpcbiAgICAgICAgICBpZiAociA9IGMuc2VudCgpLCAhIXIuZG9uZSkgcmV0dXJuIFszLCA0XTtcbiAgICAgICAgICBpZiAocyA9IHIudmFsdWUsIHQubmV4dChzKSwgdC5jbG9zZWQpXG4gICAgICAgICAgICByZXR1cm4gWzJdO1xuICAgICAgICAgIGMubGFiZWwgPSAzO1xuICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgcmV0dXJuIFszLCAxXTtcbiAgICAgICAgY2FzZSA0OlxuICAgICAgICAgIHJldHVybiBbMywgMTFdO1xuICAgICAgICBjYXNlIDU6XG4gICAgICAgICAgcmV0dXJuIGEgPSBjLnNlbnQoKSwgaSA9IHsgZXJyb3I6IGEgfSwgWzMsIDExXTtcbiAgICAgICAgY2FzZSA2OlxuICAgICAgICAgIHJldHVybiBjLnRyeXMucHVzaChbNiwgLCA5LCAxMF0pLCByICYmICFyLmRvbmUgJiYgKG8gPSBuLnJldHVybikgPyBbNCwgby5jYWxsKG4pXSA6IFszLCA4XTtcbiAgICAgICAgY2FzZSA3OlxuICAgICAgICAgIGMuc2VudCgpLCBjLmxhYmVsID0gODtcbiAgICAgICAgY2FzZSA4OlxuICAgICAgICAgIHJldHVybiBbMywgMTBdO1xuICAgICAgICBjYXNlIDk6XG4gICAgICAgICAgaWYgKGkpIHRocm93IGkuZXJyb3I7XG4gICAgICAgICAgcmV0dXJuIFs3XTtcbiAgICAgICAgY2FzZSAxMDpcbiAgICAgICAgICByZXR1cm4gWzddO1xuICAgICAgICBjYXNlIDExOlxuICAgICAgICAgIHJldHVybiB0LmNvbXBsZXRlKCksIFsyXTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSk7XG59XG5mdW5jdGlvbiBvZShlLCB0LCBuLCByLCBpKSB7XG4gIHIgPT09IHZvaWQgMCAmJiAociA9IDApLCBpID09PSB2b2lkIDAgJiYgKGkgPSAhMSk7XG4gIHZhciBvID0gdC5zY2hlZHVsZShmdW5jdGlvbigpIHtcbiAgICBuKCksIGkgPyBlLmFkZCh0aGlzLnNjaGVkdWxlKG51bGwsIHIpKSA6IHRoaXMudW5zdWJzY3JpYmUoKTtcbiAgfSwgcik7XG4gIGlmIChlLmFkZChvKSwgIWkpXG4gICAgcmV0dXJuIG87XG59XG5mdW5jdGlvbiBUbihlLCB0KSB7XG4gIHJldHVybiB0ID09PSB2b2lkIDAgJiYgKHQgPSAwKSwgVyhmdW5jdGlvbihuLCByKSB7XG4gICAgbi5zdWJzY3JpYmUoRihyLCBmdW5jdGlvbihpKSB7XG4gICAgICByZXR1cm4gb2UociwgZSwgZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiByLm5leHQoaSk7XG4gICAgICB9LCB0KTtcbiAgICB9LCBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBvZShyLCBlLCBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHIuY29tcGxldGUoKTtcbiAgICAgIH0sIHQpO1xuICAgIH0sIGZ1bmN0aW9uKGkpIHtcbiAgICAgIHJldHVybiBvZShyLCBlLCBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHIuZXJyb3IoaSk7XG4gICAgICB9LCB0KTtcbiAgICB9KSk7XG4gIH0pO1xufVxuZnVuY3Rpb24gRW4oZSwgdCkge1xuICByZXR1cm4gdCA9PT0gdm9pZCAwICYmICh0ID0gMCksIFcoZnVuY3Rpb24obiwgcikge1xuICAgIHIuYWRkKGUuc2NoZWR1bGUoZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gbi5zdWJzY3JpYmUocik7XG4gICAgfSwgdCkpO1xuICB9KTtcbn1cbmZ1bmN0aW9uIFRpKGUsIHQpIHtcbiAgcmV0dXJuIHooZSkucGlwZShFbih0KSwgVG4odCkpO1xufVxuZnVuY3Rpb24gRWkoZSwgdCkge1xuICByZXR1cm4geihlKS5waXBlKEVuKHQpLCBUbih0KSk7XG59XG5mdW5jdGlvbiBDaShlLCB0KSB7XG4gIHJldHVybiBuZXcgayhmdW5jdGlvbihuKSB7XG4gICAgdmFyIHIgPSAwO1xuICAgIHJldHVybiB0LnNjaGVkdWxlKGZ1bmN0aW9uKCkge1xuICAgICAgciA9PT0gZS5sZW5ndGggPyBuLmNvbXBsZXRlKCkgOiAobi5uZXh0KGVbcisrXSksIG4uY2xvc2VkIHx8IHRoaXMuc2NoZWR1bGUoKSk7XG4gICAgfSk7XG4gIH0pO1xufVxuZnVuY3Rpb24gUGkoZSwgdCkge1xuICByZXR1cm4gbmV3IGsoZnVuY3Rpb24obikge1xuICAgIHZhciByO1xuICAgIHJldHVybiBvZShuLCB0LCBmdW5jdGlvbigpIHtcbiAgICAgIHIgPSBlW2JuXSgpLCBvZShuLCB0LCBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIGksIG8sIHM7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgaSA9IHIubmV4dCgpLCBvID0gaS52YWx1ZSwgcyA9IGkuZG9uZTtcbiAgICAgICAgfSBjYXRjaCAoYSkge1xuICAgICAgICAgIG4uZXJyb3IoYSk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHMgPyBuLmNvbXBsZXRlKCkgOiBuLm5leHQobyk7XG4gICAgICB9LCAwLCAhMCk7XG4gICAgfSksIGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIFAociA9PSBudWxsID8gdm9pZCAwIDogci5yZXR1cm4pICYmIHIucmV0dXJuKCk7XG4gICAgfTtcbiAgfSk7XG59XG5mdW5jdGlvbiBDbihlLCB0KSB7XG4gIGlmICghZSlcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJJdGVyYWJsZSBjYW5ub3QgYmUgbnVsbFwiKTtcbiAgcmV0dXJuIG5ldyBrKGZ1bmN0aW9uKG4pIHtcbiAgICBvZShuLCB0LCBmdW5jdGlvbigpIHtcbiAgICAgIHZhciByID0gZVtTeW1ib2wuYXN5bmNJdGVyYXRvcl0oKTtcbiAgICAgIG9lKG4sIHQsIGZ1bmN0aW9uKCkge1xuICAgICAgICByLm5leHQoKS50aGVuKGZ1bmN0aW9uKGkpIHtcbiAgICAgICAgICBpLmRvbmUgPyBuLmNvbXBsZXRlKCkgOiBuLm5leHQoaS52YWx1ZSk7XG4gICAgICAgIH0pO1xuICAgICAgfSwgMCwgITApO1xuICAgIH0pO1xuICB9KTtcbn1cbmZ1bmN0aW9uIE9pKGUsIHQpIHtcbiAgcmV0dXJuIENuKHduKGUpLCB0KTtcbn1cbmZ1bmN0aW9uIEFpKGUsIHQpIHtcbiAgaWYgKGUgIT0gbnVsbCkge1xuICAgIGlmICh2bihlKSlcbiAgICAgIHJldHVybiBUaShlLCB0KTtcbiAgICBpZiAod3QoZSkpXG4gICAgICByZXR1cm4gQ2koZSwgdCk7XG4gICAgaWYgKGhuKGUpKVxuICAgICAgcmV0dXJuIEVpKGUsIHQpO1xuICAgIGlmIChtbihlKSlcbiAgICAgIHJldHVybiBDbihlLCB0KTtcbiAgICBpZiAoeW4oZSkpXG4gICAgICByZXR1cm4gUGkoZSwgdCk7XG4gICAgaWYgKHhuKGUpKVxuICAgICAgcmV0dXJuIE9pKGUsIHQpO1xuICB9XG4gIHRocm93IGduKGUpO1xufVxuZnVuY3Rpb24gSmUoZSwgdCkge1xuICByZXR1cm4gdCA/IEFpKGUsIHQpIDogeihlKTtcbn1cbmZ1bmN0aW9uIEZ0KCkge1xuICBmb3IgKHZhciBlID0gW10sIHQgPSAwOyB0IDwgYXJndW1lbnRzLmxlbmd0aDsgdCsrKVxuICAgIGVbdF0gPSBhcmd1bWVudHNbdF07XG4gIHZhciBuID0geXQoZSk7XG4gIHJldHVybiBKZShlLCBuKTtcbn1cbmZ1bmN0aW9uIGtpKGUpIHtcbiAgcmV0dXJuIGUgaW5zdGFuY2VvZiBEYXRlICYmICFpc05hTihlKTtcbn1cbnZhciBfaSA9IG10KGZ1bmN0aW9uKGUpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKG4pIHtcbiAgICBuID09PSB2b2lkIDAgJiYgKG4gPSBudWxsKSwgZSh0aGlzKSwgdGhpcy5tZXNzYWdlID0gXCJUaW1lb3V0IGhhcyBvY2N1cnJlZFwiLCB0aGlzLm5hbWUgPSBcIlRpbWVvdXRFcnJvclwiLCB0aGlzLmluZm8gPSBuO1xuICB9O1xufSk7XG5mdW5jdGlvbiBMaShlLCB0KSB7XG4gIHZhciBuID0ga2koZSkgPyB7IGZpcnN0OiBlIH0gOiB0eXBlb2YgZSA9PSBcIm51bWJlclwiID8geyBlYWNoOiBlIH0gOiBlLCByID0gbi5maXJzdCwgaSA9IG4uZWFjaCwgbyA9IG4ud2l0aCwgcyA9IG8gPT09IHZvaWQgMCA/IElpIDogbywgYSA9IG4uc2NoZWR1bGVyLCBjID0gYSA9PT0gdm9pZCAwID8gcGkgOiBhLCB1ID0gbi5tZXRhLCBsID0gdSA9PT0gdm9pZCAwID8gbnVsbCA6IHU7XG4gIGlmIChyID09IG51bGwgJiYgaSA9PSBudWxsKVxuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJObyB0aW1lb3V0IHByb3ZpZGVkLlwiKTtcbiAgcmV0dXJuIFcoZnVuY3Rpb24oZiwgdikge1xuICAgIHZhciBkLCBtLCBwID0gbnVsbCwgZyA9IDAsIGggPSBmdW5jdGlvbih4KSB7XG4gICAgICBtID0gb2UodiwgYywgZnVuY3Rpb24oKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgZC51bnN1YnNjcmliZSgpLCB6KHMoe1xuICAgICAgICAgICAgbWV0YTogbCxcbiAgICAgICAgICAgIGxhc3RWYWx1ZTogcCxcbiAgICAgICAgICAgIHNlZW46IGdcbiAgICAgICAgICB9KSkuc3Vic2NyaWJlKHYpO1xuICAgICAgICB9IGNhdGNoIChFKSB7XG4gICAgICAgICAgdi5lcnJvcihFKTtcbiAgICAgICAgfVxuICAgICAgfSwgeCk7XG4gICAgfTtcbiAgICBkID0gZi5zdWJzY3JpYmUoRih2LCBmdW5jdGlvbih4KSB7XG4gICAgICBtID09IG51bGwgfHwgbS51bnN1YnNjcmliZSgpLCBnKyssIHYubmV4dChwID0geCksIGkgPiAwICYmIGgoaSk7XG4gICAgfSwgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKCkge1xuICAgICAgbSAhPSBudWxsICYmIG0uY2xvc2VkIHx8IG0gPT0gbnVsbCB8fCBtLnVuc3Vic2NyaWJlKCksIHAgPSBudWxsO1xuICAgIH0pKSwgIWcgJiYgaChyICE9IG51bGwgPyB0eXBlb2YgciA9PSBcIm51bWJlclwiID8gciA6ICtyIC0gYy5ub3coKSA6IGkpO1xuICB9KTtcbn1cbmZ1bmN0aW9uIElpKGUpIHtcbiAgdGhyb3cgbmV3IF9pKGUpO1xufVxuZnVuY3Rpb24gQShlLCB0KSB7XG4gIHJldHVybiBXKGZ1bmN0aW9uKG4sIHIpIHtcbiAgICB2YXIgaSA9IDA7XG4gICAgbi5zdWJzY3JpYmUoRihyLCBmdW5jdGlvbihvKSB7XG4gICAgICByLm5leHQoZS5jYWxsKHQsIG8sIGkrKykpO1xuICAgIH0pKTtcbiAgfSk7XG59XG52YXIgTWkgPSBBcnJheS5pc0FycmF5O1xuZnVuY3Rpb24gUmkoZSwgdCkge1xuICByZXR1cm4gTWkodCkgPyBlLmFwcGx5KHZvaWQgMCwgYmUoW10sIGRlKHQpKSkgOiBlKHQpO1xufVxuZnVuY3Rpb24gRGkoZSkge1xuICByZXR1cm4gQShmdW5jdGlvbih0KSB7XG4gICAgcmV0dXJuIFJpKGUsIHQpO1xuICB9KTtcbn1cbmZ1bmN0aW9uICRpKGUsIHQsIG4sIHIsIGksIG8sIHMsIGEpIHtcbiAgdmFyIGMgPSBbXSwgdSA9IDAsIGwgPSAwLCBmID0gITEsIHYgPSBmdW5jdGlvbigpIHtcbiAgICBmICYmICFjLmxlbmd0aCAmJiAhdSAmJiB0LmNvbXBsZXRlKCk7XG4gIH0sIGQgPSBmdW5jdGlvbihwKSB7XG4gICAgcmV0dXJuIHUgPCByID8gbShwKSA6IGMucHVzaChwKTtcbiAgfSwgbSA9IGZ1bmN0aW9uKHApIHtcbiAgICB1Kys7XG4gICAgdmFyIGcgPSAhMTtcbiAgICB6KG4ocCwgbCsrKSkuc3Vic2NyaWJlKEYodCwgZnVuY3Rpb24oaCkge1xuICAgICAgdC5uZXh0KGgpO1xuICAgIH0sIGZ1bmN0aW9uKCkge1xuICAgICAgZyA9ICEwO1xuICAgIH0sIHZvaWQgMCwgZnVuY3Rpb24oKSB7XG4gICAgICBpZiAoZylcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICB1LS07XG4gICAgICAgICAgZm9yICh2YXIgaCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyIHggPSBjLnNoaWZ0KCk7XG4gICAgICAgICAgICBzIHx8IG0oeCk7XG4gICAgICAgICAgfTsgYy5sZW5ndGggJiYgdSA8IHI7IClcbiAgICAgICAgICAgIGgoKTtcbiAgICAgICAgICB2KCk7XG4gICAgICAgIH0gY2F0Y2ggKHgpIHtcbiAgICAgICAgICB0LmVycm9yKHgpO1xuICAgICAgICB9XG4gICAgfSkpO1xuICB9O1xuICByZXR1cm4gZS5zdWJzY3JpYmUoRih0LCBkLCBmdW5jdGlvbigpIHtcbiAgICBmID0gITAsIHYoKTtcbiAgfSkpLCBmdW5jdGlvbigpIHtcbiAgfTtcbn1cbmZ1bmN0aW9uIHh0KGUsIHQsIG4pIHtcbiAgcmV0dXJuIG4gPT09IHZvaWQgMCAmJiAobiA9IDEgLyAwKSwgUCh0KSA/IHh0KGZ1bmN0aW9uKHIsIGkpIHtcbiAgICByZXR1cm4gQShmdW5jdGlvbihvLCBzKSB7XG4gICAgICByZXR1cm4gdChyLCBvLCBpLCBzKTtcbiAgICB9KSh6KGUociwgaSkpKTtcbiAgfSwgbikgOiAodHlwZW9mIHQgPT0gXCJudW1iZXJcIiAmJiAobiA9IHQpLCBXKGZ1bmN0aW9uKHIsIGkpIHtcbiAgICByZXR1cm4gJGkociwgaSwgZSwgbik7XG4gIH0pKTtcbn1cbmZ1bmN0aW9uIE5pKGUpIHtcbiAgcmV0dXJuIHh0KFFlLCBlKTtcbn1cbmZ1bmN0aW9uIEZpKCkge1xuICByZXR1cm4gTmkoMSk7XG59XG5mdW5jdGlvbiBqZSgpIHtcbiAgZm9yICh2YXIgZSA9IFtdLCB0ID0gMDsgdCA8IGFyZ3VtZW50cy5sZW5ndGg7IHQrKylcbiAgICBlW3RdID0gYXJndW1lbnRzW3RdO1xuICByZXR1cm4gRmkoKShKZShlLCB5dChlKSkpO1xufVxudmFyIFVpID0gW1wiYWRkTGlzdGVuZXJcIiwgXCJyZW1vdmVMaXN0ZW5lclwiXSwgV2kgPSBbXCJhZGRFdmVudExpc3RlbmVyXCIsIFwicmVtb3ZlRXZlbnRMaXN0ZW5lclwiXSwgamkgPSBbXCJvblwiLCBcIm9mZlwiXTtcbmZ1bmN0aW9uIHV0KGUsIHQsIG4sIHIpIHtcbiAgaWYgKFAobikgJiYgKHIgPSBuLCBuID0gdm9pZCAwKSwgcilcbiAgICByZXR1cm4gdXQoZSwgdCwgbikucGlwZShEaShyKSk7XG4gIHZhciBpID0gZGUoSGkoZSkgPyBXaS5tYXAoZnVuY3Rpb24oYSkge1xuICAgIHJldHVybiBmdW5jdGlvbihjKSB7XG4gICAgICByZXR1cm4gZVthXSh0LCBjLCBuKTtcbiAgICB9O1xuICB9KSA6IEJpKGUpID8gVWkubWFwKFV0KGUsIHQpKSA6IFZpKGUpID8gamkubWFwKFV0KGUsIHQpKSA6IFtdLCAyKSwgbyA9IGlbMF0sIHMgPSBpWzFdO1xuICBpZiAoIW8gJiYgd3QoZSkpXG4gICAgcmV0dXJuIHh0KGZ1bmN0aW9uKGEpIHtcbiAgICAgIHJldHVybiB1dChhLCB0LCBuKTtcbiAgICB9KSh6KGUpKTtcbiAgaWYgKCFvKVxuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJJbnZhbGlkIGV2ZW50IHRhcmdldFwiKTtcbiAgcmV0dXJuIG5ldyBrKGZ1bmN0aW9uKGEpIHtcbiAgICB2YXIgYyA9IGZ1bmN0aW9uKCkge1xuICAgICAgZm9yICh2YXIgdSA9IFtdLCBsID0gMDsgbCA8IGFyZ3VtZW50cy5sZW5ndGg7IGwrKylcbiAgICAgICAgdVtsXSA9IGFyZ3VtZW50c1tsXTtcbiAgICAgIHJldHVybiBhLm5leHQoMSA8IHUubGVuZ3RoID8gdSA6IHVbMF0pO1xuICAgIH07XG4gICAgcmV0dXJuIG8oYyksIGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIHMoYyk7XG4gICAgfTtcbiAgfSk7XG59XG5mdW5jdGlvbiBVdChlLCB0KSB7XG4gIHJldHVybiBmdW5jdGlvbihuKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKHIpIHtcbiAgICAgIHJldHVybiBlW25dKHQsIHIpO1xuICAgIH07XG4gIH07XG59XG5mdW5jdGlvbiBCaShlKSB7XG4gIHJldHVybiBQKGUuYWRkTGlzdGVuZXIpICYmIFAoZS5yZW1vdmVMaXN0ZW5lcik7XG59XG5mdW5jdGlvbiBWaShlKSB7XG4gIHJldHVybiBQKGUub24pICYmIFAoZS5vZmYpO1xufVxuZnVuY3Rpb24gSGkoZSkge1xuICByZXR1cm4gUChlLmFkZEV2ZW50TGlzdGVuZXIpICYmIFAoZS5yZW1vdmVFdmVudExpc3RlbmVyKTtcbn1cbmZ1bmN0aW9uIFhlKGUsIHQpIHtcbiAgcmV0dXJuIFcoZnVuY3Rpb24obiwgcikge1xuICAgIHZhciBpID0gMDtcbiAgICBuLnN1YnNjcmliZShGKHIsIGZ1bmN0aW9uKG8pIHtcbiAgICAgIHJldHVybiBlLmNhbGwodCwgbywgaSsrKSAmJiByLm5leHQobyk7XG4gICAgfSkpO1xuICB9KTtcbn1cbmZ1bmN0aW9uIHppKGUsIHQsIG4sIHIsIGkpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKG8sIHMpIHtcbiAgICB2YXIgYSA9IG4sIGMgPSB0LCB1ID0gMDtcbiAgICBvLnN1YnNjcmliZShGKHMsIGZ1bmN0aW9uKGwpIHtcbiAgICAgIHZhciBmID0gdSsrO1xuICAgICAgYyA9IGEgPyBlKGMsIGwsIGYpIDogKGEgPSAhMCwgbCksIHMubmV4dChjKTtcbiAgICB9LCBpKSk7XG4gIH07XG59XG5mdW5jdGlvbiBZaShlLCB0KSB7XG4gIHJldHVybiB0ID09PSB2b2lkIDAgJiYgKHQgPSBRZSksIGUgPSBlID8/IHFpLCBXKGZ1bmN0aW9uKG4sIHIpIHtcbiAgICB2YXIgaSwgbyA9ICEwO1xuICAgIG4uc3Vic2NyaWJlKEYociwgZnVuY3Rpb24ocykge1xuICAgICAgdmFyIGEgPSB0KHMpO1xuICAgICAgKG8gfHwgIWUoaSwgYSkpICYmIChvID0gITEsIGkgPSBhLCByLm5leHQocykpO1xuICAgIH0pKTtcbiAgfSk7XG59XG5mdW5jdGlvbiBxaShlLCB0KSB7XG4gIHJldHVybiBlID09PSB0O1xufVxuZnVuY3Rpb24gbHQoZSwgdCkge1xuICByZXR1cm4gVyh6aShlLCB0LCBhcmd1bWVudHMubGVuZ3RoID49IDIsICEwKSk7XG59XG5mdW5jdGlvbiBLaShlKSB7XG4gIGUgPT09IHZvaWQgMCAmJiAoZSA9IHt9KTtcbiAgdmFyIHQgPSBlLmNvbm5lY3RvciwgbiA9IHQgPT09IHZvaWQgMCA/IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBuZXcgdGUoKTtcbiAgfSA6IHQsIHIgPSBlLnJlc2V0T25FcnJvciwgaSA9IHIgPT09IHZvaWQgMCA/ICEwIDogciwgbyA9IGUucmVzZXRPbkNvbXBsZXRlLCBzID0gbyA9PT0gdm9pZCAwID8gITAgOiBvLCBhID0gZS5yZXNldE9uUmVmQ291bnRaZXJvLCBjID0gYSA9PT0gdm9pZCAwID8gITAgOiBhO1xuICByZXR1cm4gZnVuY3Rpb24odSkge1xuICAgIHZhciBsLCBmLCB2LCBkID0gMCwgbSA9ICExLCBwID0gITEsIGcgPSBmdW5jdGlvbigpIHtcbiAgICAgIGYgPT0gbnVsbCB8fCBmLnVuc3Vic2NyaWJlKCksIGYgPSB2b2lkIDA7XG4gICAgfSwgaCA9IGZ1bmN0aW9uKCkge1xuICAgICAgZygpLCBsID0gdiA9IHZvaWQgMCwgbSA9IHAgPSAhMTtcbiAgICB9LCB4ID0gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgRSA9IGw7XG4gICAgICBoKCksIEUgPT0gbnVsbCB8fCBFLnVuc3Vic2NyaWJlKCk7XG4gICAgfTtcbiAgICByZXR1cm4gVyhmdW5jdGlvbihFLCBPKSB7XG4gICAgICBkKyssICFwICYmICFtICYmIGcoKTtcbiAgICAgIHZhciBiID0gdiA9IHYgPz8gbigpO1xuICAgICAgTy5hZGQoZnVuY3Rpb24oKSB7XG4gICAgICAgIGQtLSwgZCA9PT0gMCAmJiAhcCAmJiAhbSAmJiAoZiA9IG50KHgsIGMpKTtcbiAgICAgIH0pLCBiLnN1YnNjcmliZShPKSwgIWwgJiYgZCA+IDAgJiYgKGwgPSBuZXcgUGUoe1xuICAgICAgICBuZXh0OiBmdW5jdGlvbihTKSB7XG4gICAgICAgICAgcmV0dXJuIGIubmV4dChTKTtcbiAgICAgICAgfSxcbiAgICAgICAgZXJyb3I6IGZ1bmN0aW9uKFMpIHtcbiAgICAgICAgICBwID0gITAsIGcoKSwgZiA9IG50KGgsIGksIFMpLCBiLmVycm9yKFMpO1xuICAgICAgICB9LFxuICAgICAgICBjb21wbGV0ZTogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgbSA9ICEwLCBnKCksIGYgPSBudChoLCBzKSwgYi5jb21wbGV0ZSgpO1xuICAgICAgICB9XG4gICAgICB9KSwgeihFKS5zdWJzY3JpYmUobCkpO1xuICAgIH0pKHUpO1xuICB9O1xufVxuZnVuY3Rpb24gbnQoZSwgdCkge1xuICBmb3IgKHZhciBuID0gW10sIHIgPSAyOyByIDwgYXJndW1lbnRzLmxlbmd0aDsgcisrKVxuICAgIG5bciAtIDJdID0gYXJndW1lbnRzW3JdO1xuICBpZiAodCA9PT0gITApIHtcbiAgICBlKCk7XG4gICAgcmV0dXJuO1xuICB9XG4gIGlmICh0ICE9PSAhMSkge1xuICAgIHZhciBpID0gbmV3IFBlKHtcbiAgICAgIG5leHQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICBpLnVuc3Vic2NyaWJlKCksIGUoKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4geih0LmFwcGx5KHZvaWQgMCwgYmUoW10sIGRlKG4pKSkpLnN1YnNjcmliZShpKTtcbiAgfVxufVxuZnVuY3Rpb24gR2koZSkge1xuICByZXR1cm4gVyhmdW5jdGlvbih0LCBuKSB7XG4gICAgdmFyIHIgPSAhMSwgaSA9IEYobiwgZnVuY3Rpb24oKSB7XG4gICAgICBpID09IG51bGwgfHwgaS51bnN1YnNjcmliZSgpLCByID0gITA7XG4gICAgfSwgV2UpO1xuICAgIHooZSkuc3Vic2NyaWJlKGkpLCB0LnN1YnNjcmliZShGKG4sIGZ1bmN0aW9uKG8pIHtcbiAgICAgIHJldHVybiByICYmIG4ubmV4dChvKTtcbiAgICB9KSk7XG4gIH0pO1xufVxuZnVuY3Rpb24gRCgpIHtcbiAgZm9yICh2YXIgZSA9IFtdLCB0ID0gMDsgdCA8IGFyZ3VtZW50cy5sZW5ndGg7IHQrKylcbiAgICBlW3RdID0gYXJndW1lbnRzW3RdO1xuICB2YXIgbiA9IHl0KGUpO1xuICByZXR1cm4gVyhmdW5jdGlvbihyLCBpKSB7XG4gICAgKG4gPyBqZShlLCByLCBuKSA6IGplKGUsIHIpKS5zdWJzY3JpYmUoaSk7XG4gIH0pO1xufVxuZnVuY3Rpb24gUG4oZSwgdCkge1xuICByZXR1cm4gVyhmdW5jdGlvbihuLCByKSB7XG4gICAgdmFyIGkgPSBudWxsLCBvID0gMCwgcyA9ICExLCBhID0gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gcyAmJiAhaSAmJiByLmNvbXBsZXRlKCk7XG4gICAgfTtcbiAgICBuLnN1YnNjcmliZShGKHIsIGZ1bmN0aW9uKGMpIHtcbiAgICAgIGkgPT0gbnVsbCB8fCBpLnVuc3Vic2NyaWJlKCk7XG4gICAgICB2YXIgdSA9IDAsIGwgPSBvKys7XG4gICAgICB6KGUoYywgbCkpLnN1YnNjcmliZShpID0gRihyLCBmdW5jdGlvbihmKSB7XG4gICAgICAgIHJldHVybiByLm5leHQodCA/IHQoYywgZiwgbCwgdSsrKSA6IGYpO1xuICAgICAgfSwgZnVuY3Rpb24oKSB7XG4gICAgICAgIGkgPSBudWxsLCBhKCk7XG4gICAgICB9KSk7XG4gICAgfSwgZnVuY3Rpb24oKSB7XG4gICAgICBzID0gITAsIGEoKTtcbiAgICB9KSk7XG4gIH0pO1xufVxuZnVuY3Rpb24gV3QoZSkge1xuICByZXR1cm4gVyhmdW5jdGlvbih0LCBuKSB7XG4gICAgeihlKS5zdWJzY3JpYmUoRihuLCBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBuLmNvbXBsZXRlKCk7XG4gICAgfSwgV2UpKSwgIW4uY2xvc2VkICYmIHQuc3Vic2NyaWJlKG4pO1xuICB9KTtcbn1cbmZ1bmN0aW9uIFFpKGUsIHQsIG4pIHtcbiAgdmFyIHIgPSBQKGUpIHx8IHQgfHwgbiA/IHsgbmV4dDogZSwgZXJyb3I6IHQsIGNvbXBsZXRlOiBuIH0gOiBlO1xuICByZXR1cm4gciA/IFcoZnVuY3Rpb24oaSwgbykge1xuICAgIHZhciBzO1xuICAgIChzID0gci5zdWJzY3JpYmUpID09PSBudWxsIHx8IHMgPT09IHZvaWQgMCB8fCBzLmNhbGwocik7XG4gICAgdmFyIGEgPSAhMDtcbiAgICBpLnN1YnNjcmliZShGKG8sIGZ1bmN0aW9uKGMpIHtcbiAgICAgIHZhciB1O1xuICAgICAgKHUgPSByLm5leHQpID09PSBudWxsIHx8IHUgPT09IHZvaWQgMCB8fCB1LmNhbGwociwgYyksIG8ubmV4dChjKTtcbiAgICB9LCBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBjO1xuICAgICAgYSA9ICExLCAoYyA9IHIuY29tcGxldGUpID09PSBudWxsIHx8IGMgPT09IHZvaWQgMCB8fCBjLmNhbGwociksIG8uY29tcGxldGUoKTtcbiAgICB9LCBmdW5jdGlvbihjKSB7XG4gICAgICB2YXIgdTtcbiAgICAgIGEgPSAhMSwgKHUgPSByLmVycm9yKSA9PT0gbnVsbCB8fCB1ID09PSB2b2lkIDAgfHwgdS5jYWxsKHIsIGMpLCBvLmVycm9yKGMpO1xuICAgIH0sIGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIGMsIHU7XG4gICAgICBhICYmICgoYyA9IHIudW5zdWJzY3JpYmUpID09PSBudWxsIHx8IGMgPT09IHZvaWQgMCB8fCBjLmNhbGwocikpLCAodSA9IHIuZmluYWxpemUpID09PSBudWxsIHx8IHUgPT09IHZvaWQgMCB8fCB1LmNhbGwocik7XG4gICAgfSkpO1xuICB9KSA6IFFlO1xufVxudmFyIEppID0gT2JqZWN0LmRlZmluZVByb3BlcnR5LCBYaSA9IE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzLCBaaSA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzLCBqdCA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMsIGVvID0gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eSwgdG8gPSBPYmplY3QucHJvdG90eXBlLnByb3BlcnR5SXNFbnVtZXJhYmxlLCBCdCA9IChlLCB0LCBuKSA9PiB0IGluIGUgPyBKaShlLCB0LCB7IGVudW1lcmFibGU6ICEwLCBjb25maWd1cmFibGU6ICEwLCB3cml0YWJsZTogITAsIHZhbHVlOiBuIH0pIDogZVt0XSA9IG4sIHEgPSAoZSwgdCkgPT4ge1xuICBmb3IgKHZhciBuIGluIHQgfHwgKHQgPSB7fSkpXG4gICAgZW8uY2FsbCh0LCBuKSAmJiBCdChlLCBuLCB0W25dKTtcbiAgaWYgKGp0KVxuICAgIGZvciAodmFyIG4gb2YganQodCkpXG4gICAgICB0by5jYWxsKHQsIG4pICYmIEJ0KGUsIG4sIHRbbl0pO1xuICByZXR1cm4gZTtcbn0sIGNlID0gKGUsIHQpID0+IFhpKGUsIFppKHQpKSwgSCA9IChlLCB0LCBuKSA9PiBuZXcgUHJvbWlzZSgociwgaSkgPT4ge1xuICB2YXIgbyA9IChjKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIGEobi5uZXh0KGMpKTtcbiAgICB9IGNhdGNoICh1KSB7XG4gICAgICBpKHUpO1xuICAgIH1cbiAgfSwgcyA9IChjKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIGEobi50aHJvdyhjKSk7XG4gICAgfSBjYXRjaCAodSkge1xuICAgICAgaSh1KTtcbiAgICB9XG4gIH0sIGEgPSAoYykgPT4gYy5kb25lID8gcihjLnZhbHVlKSA6IFByb21pc2UucmVzb2x2ZShjLnZhbHVlKS50aGVuKG8sIHMpO1xuICBhKChuID0gbi5hcHBseShlLCB0KSkubmV4dCgpKTtcbn0pLCBPbiA9IFwibGtcIjtcbmZ1bmN0aW9uIEIoZSkge1xuICByZXR1cm4gdHlwZW9mIGUgPiBcInVcIiA/ICExIDogbm8oZSkgfHwgcm8oZSk7XG59XG5mdW5jdGlvbiBubyhlKSB7XG4gIHZhciB0O1xuICByZXR1cm4gZSA/IGUuaGFzT3duUHJvcGVydHkoXCJwYXJ0aWNpcGFudFwiKSAmJiBlLmhhc093blByb3BlcnR5KFwic291cmNlXCIpICYmIGUuaGFzT3duUHJvcGVydHkoXCJ0cmFja1wiKSAmJiB0eXBlb2YgKCh0ID0gZS5wdWJsaWNhdGlvbikgPT0gbnVsbCA/IHZvaWQgMCA6IHQudHJhY2spIDwgXCJ1XCIgOiAhMTtcbn1cbmZ1bmN0aW9uIHJvKGUpIHtcbiAgcmV0dXJuIGUgPyBlLmhhc093blByb3BlcnR5KFwicGFydGljaXBhbnRcIikgJiYgZS5oYXNPd25Qcm9wZXJ0eShcInNvdXJjZVwiKSAmJiBlLmhhc093blByb3BlcnR5KFwicHVibGljYXRpb25cIikgJiYgdHlwZW9mIGUucHVibGljYXRpb24gPCBcInVcIiA6ICExO1xufVxuZnVuY3Rpb24gT2UoZSkge1xuICByZXR1cm4gZSA/IGUuaGFzT3duUHJvcGVydHkoXCJwYXJ0aWNpcGFudFwiKSAmJiBlLmhhc093blByb3BlcnR5KFwic291cmNlXCIpICYmIHR5cGVvZiBlLnB1YmxpY2F0aW9uID4gXCJ1XCIgOiAhMTtcbn1cbmZ1bmN0aW9uIE4oZSkge1xuICBpZiAodHlwZW9mIGUgPT0gXCJzdHJpbmdcIiB8fCB0eXBlb2YgZSA9PSBcIm51bWJlclwiKVxuICAgIHJldHVybiBgJHtlfWA7XG4gIGlmIChPZShlKSlcbiAgICByZXR1cm4gYCR7ZS5wYXJ0aWNpcGFudC5pZGVudGl0eX1fJHtlLnNvdXJjZX1fcGxhY2Vob2xkZXJgO1xuICBpZiAoQihlKSlcbiAgICByZXR1cm4gYCR7ZS5wYXJ0aWNpcGFudC5pZGVudGl0eX1fJHtlLnB1YmxpY2F0aW9uLnNvdXJjZX1fJHtlLnB1YmxpY2F0aW9uLnRyYWNrU2lkfWA7XG4gIHRocm93IG5ldyBFcnJvcihgQ2FuJ3QgZ2VuZXJhdGUgYSBpZCBmb3IgdGhlIGdpdmVuIHRyYWNrIHJlZmVyZW5jZTogJHtlfWApO1xufVxuZnVuY3Rpb24gdHMoZSwgdCkge1xuICByZXR1cm4gZSA9PT0gdm9pZCAwIHx8IHQgPT09IHZvaWQgMCA/ICExIDogQihlKSAmJiBCKHQpID8gZS5wdWJsaWNhdGlvbi50cmFja1NpZCA9PT0gdC5wdWJsaWNhdGlvbi50cmFja1NpZCA6IE4oZSkgPT09IE4odCk7XG59XG5mdW5jdGlvbiBucyhlLCB0KSB7XG4gIHJldHVybiB0eXBlb2YgdCA+IFwidVwiID8gITEgOiBCKGUpID8gdC5zb21lKFxuICAgIChuKSA9PiBuLnBhcnRpY2lwYW50LmlkZW50aXR5ID09PSBlLnBhcnRpY2lwYW50LmlkZW50aXR5ICYmIEIobikgJiYgbi5wdWJsaWNhdGlvbi50cmFja1NpZCA9PT0gZS5wdWJsaWNhdGlvbi50cmFja1NpZFxuICApIDogT2UoZSkgPyB0LnNvbWUoXG4gICAgKG4pID0+IG4ucGFydGljaXBhbnQuaWRlbnRpdHkgPT09IGUucGFydGljaXBhbnQuaWRlbnRpdHkgJiYgT2UobikgJiYgbi5zb3VyY2UgPT09IGUuc291cmNlXG4gICkgOiAhMTtcbn1cbmZ1bmN0aW9uIGlvKGUsIHQpIHtcbiAgcmV0dXJuIE9lKGUpICYmIEIodCkgJiYgdC5wYXJ0aWNpcGFudC5pZGVudGl0eSA9PT0gZS5wYXJ0aWNpcGFudC5pZGVudGl0eSAmJiB0LnNvdXJjZSA9PT0gZS5zb3VyY2U7XG59XG5mdW5jdGlvbiBycygpIHtcbiAgY29uc3QgZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJwXCIpO1xuICBlLnN0eWxlLndpZHRoID0gXCIxMDAlXCIsIGUuc3R5bGUuaGVpZ2h0ID0gXCIyMDBweFwiO1xuICBjb25zdCB0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgdC5zdHlsZS5wb3NpdGlvbiA9IFwiYWJzb2x1dGVcIiwgdC5zdHlsZS50b3AgPSBcIjBweFwiLCB0LnN0eWxlLmxlZnQgPSBcIjBweFwiLCB0LnN0eWxlLnZpc2liaWxpdHkgPSBcImhpZGRlblwiLCB0LnN0eWxlLndpZHRoID0gXCIyMDBweFwiLCB0LnN0eWxlLmhlaWdodCA9IFwiMTUwcHhcIiwgdC5zdHlsZS5vdmVyZmxvdyA9IFwiaGlkZGVuXCIsIHQuYXBwZW5kQ2hpbGQoZSksIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQodCk7XG4gIGNvbnN0IG4gPSBlLm9mZnNldFdpZHRoO1xuICB0LnN0eWxlLm92ZXJmbG93ID0gXCJzY3JvbGxcIjtcbiAgbGV0IHIgPSBlLm9mZnNldFdpZHRoO1xuICByZXR1cm4gbiA9PT0gciAmJiAociA9IHQuY2xpZW50V2lkdGgpLCBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKHQpLCBuIC0gcjtcbn1cbmZ1bmN0aW9uIGlzKCkge1xuICByZXR1cm4gdHlwZW9mIGRvY3VtZW50IDwgXCJ1XCI7XG59XG5mdW5jdGlvbiBvbyhlKSB7XG4gIGUgPSBxKHt9LCBlKTtcbiAgY29uc3QgdCA9IFwiKD86KD86W2Etel0rOik/Ly8pP1wiLCBuID0gXCIoPzpcXFxcUysoPzo6XFxcXFMqKT9AKT9cIiwgciA9IG5ldyBSZWdFeHAoXG4gICAgXCIoPzoyNVswLTVdfDJbMC00XVxcXFxkfDFcXFxcZFxcXFxkfFsxLTldXFxcXGR8XFxcXGQpKD86XFxcXC4oPzoyNVswLTVdfDJbMC00XVxcXFxkfDFcXFxcZFxcXFxkfFsxLTldXFxcXGR8XFxcXGQpKXszfVwiLFxuICAgIFwiZ1wiXG4gICkuc291cmNlLCB1ID0gYCg/OiR7dH18d3d3XFxcXC4pJHtufSg/OmxvY2FsaG9zdHwke3J9fCg/Oig/OlthLXpcXFxcdTAwYTEtXFxcXHVmZmZmMC05XVstX10qKSpbYS16XFxcXHUwMGExLVxcXFx1ZmZmZjAtOV0rKSg/OlxcXFwuKD86W2EtelxcXFx1MDBhMS1cXFxcdWZmZmYwLTldLSopKlthLXpcXFxcdTAwYTEtXFxcXHVmZmZmMC05XSspKig/OlxcXFwuKD86W2EtelxcXFx1MDBhMS1cXFxcdWZmZmZdezIsfSkpXFxcXC4/KSg/OjpcXFxcZHsyLDV9KT8oPzpbLz8jXVteXFxcXHNcIl0qKT9gO1xuICByZXR1cm4gZS5leGFjdCA/IG5ldyBSZWdFeHAoYCg/Ol4ke3V9JClgLCBcImlcIikgOiBuZXcgUmVnRXhwKHUsIFwiaWdcIik7XG59XG52YXIgVnQgPSBcIlteXFxcXC5cXFxcc0A6XSg/OlteXFxcXHNAOl0qW15cXFxcc0A6XFxcXC5dKT9AW15cXFxcLlxcXFxzQF0rKD86XFxcXC5bXlxcXFwuXFxcXHNAXSspKlwiO1xuZnVuY3Rpb24gc28oeyBleGFjdDogZSB9ID0ge30pIHtcbiAgcmV0dXJuIGUgPyBuZXcgUmVnRXhwKGBeJHtWdH0kYCkgOiBuZXcgUmVnRXhwKFZ0LCBcImdcIik7XG59XG5mdW5jdGlvbiBvcyhlLCB0LCBuKSB7XG4gIHJldHVybiBVcihlLCB0LCAoKSA9PiBIKHRoaXMsIG51bGwsIGZ1bmN0aW9uKiAoKSB7XG4gICAgY29uc3QgeyB4OiBpLCB5OiBvIH0gPSB5aWVsZCBWcihlLCB0LCB7XG4gICAgICBwbGFjZW1lbnQ6IFwidG9wXCIsXG4gICAgICBtaWRkbGV3YXJlOiBbV3IoNiksIEJyKCksIGpyKHsgcGFkZGluZzogNSB9KV1cbiAgICB9KTtcbiAgICBuID09IG51bGwgfHwgbihpLCBvKTtcbiAgfSkpO1xufVxuZnVuY3Rpb24gc3MoZSwgdCkge1xuICByZXR1cm4gIWUuY29udGFpbnModC50YXJnZXQpO1xufVxudmFyIGFzID0gKCkgPT4gKHtcbiAgZW1haWw6IHNvKCksXG4gIHVybDogb28oe30pXG59KTtcbmZ1bmN0aW9uIGNzKGUsIHQpIHtcbiAgY29uc3QgbiA9IE9iamVjdC5lbnRyaWVzKHQpLm1hcChcbiAgICAoW28sIHNdLCBhKSA9PiBBcnJheS5mcm9tKGUubWF0Y2hBbGwocykpLm1hcCgoeyBpbmRleDogYywgMDogdSB9KSA9PiAoe1xuICAgICAgdHlwZTogbyxcbiAgICAgIHdlaWdodDogYSxcbiAgICAgIGNvbnRlbnQ6IHUsXG4gICAgICBpbmRleDogYyA/PyAwXG4gICAgfSkpXG4gICkuZmxhdCgpLnNvcnQoKG8sIHMpID0+IHtcbiAgICBjb25zdCBhID0gby5pbmRleCAtIHMuaW5kZXg7XG4gICAgcmV0dXJuIGEgIT09IDAgPyBhIDogby53ZWlnaHQgLSBzLndlaWdodDtcbiAgfSkuZmlsdGVyKCh7IGluZGV4OiBvIH0sIHMsIGEpID0+IHtcbiAgICBpZiAocyA9PT0gMCkgcmV0dXJuICEwO1xuICAgIGNvbnN0IGMgPSBhW3MgLSAxXTtcbiAgICByZXR1cm4gYy5pbmRleCArIGMuY29udGVudC5sZW5ndGggPD0gbztcbiAgfSksIHIgPSBbXTtcbiAgbGV0IGkgPSAwO1xuICBmb3IgKGNvbnN0IHsgdHlwZTogbywgY29udGVudDogcywgaW5kZXg6IGEgfSBvZiBuKVxuICAgIGEgPiBpICYmIHIucHVzaChlLnN1YnN0cmluZyhpLCBhKSksIHIucHVzaCh7IHR5cGU6IG8sIGNvbnRlbnQ6IHMgfSksIGkgPSBhICsgcy5sZW5ndGg7XG4gIHJldHVybiBlLmxlbmd0aCA+IGkgJiYgci5wdXNoKGUuc3Vic3RyaW5nKGkpKSwgcjtcbn1cbnZhciBhbyA9IFtcbiAgeS5Db25uZWN0aW9uU3RhdGVDaGFuZ2VkLFxuICB5LlJvb21NZXRhZGF0YUNoYW5nZWQsXG4gIHkuQWN0aXZlU3BlYWtlcnNDaGFuZ2VkLFxuICB5LkNvbm5lY3Rpb25RdWFsaXR5Q2hhbmdlZCxcbiAgeS5QYXJ0aWNpcGFudENvbm5lY3RlZCxcbiAgeS5QYXJ0aWNpcGFudERpc2Nvbm5lY3RlZCxcbiAgeS5QYXJ0aWNpcGFudFBlcm1pc3Npb25zQ2hhbmdlZCxcbiAgeS5QYXJ0aWNpcGFudE1ldGFkYXRhQ2hhbmdlZCxcbiAgeS5QYXJ0aWNpcGFudE5hbWVDaGFuZ2VkLFxuICB5LlBhcnRpY2lwYW50QXR0cmlidXRlc0NoYW5nZWQsXG4gIHkuVHJhY2tNdXRlZCxcbiAgeS5UcmFja1VubXV0ZWQsXG4gIHkuVHJhY2tQdWJsaXNoZWQsXG4gIHkuVHJhY2tVbnB1Ymxpc2hlZCxcbiAgeS5UcmFja1N0cmVhbVN0YXRlQ2hhbmdlZCxcbiAgeS5UcmFja1N1YnNjcmlwdGlvbkZhaWxlZCxcbiAgeS5UcmFja1N1YnNjcmlwdGlvblBlcm1pc3Npb25DaGFuZ2VkLFxuICB5LlRyYWNrU3Vic2NyaXB0aW9uU3RhdHVzQ2hhbmdlZFxuXSwgQW4gPSBbXG4gIC4uLmFvLFxuICB5LkxvY2FsVHJhY2tQdWJsaXNoZWQsXG4gIHkuTG9jYWxUcmFja1VucHVibGlzaGVkXG5dLCBjbyA9IFtcbiAgdy5UcmFja1B1Ymxpc2hlZCxcbiAgdy5UcmFja1VucHVibGlzaGVkLFxuICB3LlRyYWNrTXV0ZWQsXG4gIHcuVHJhY2tVbm11dGVkLFxuICB3LlRyYWNrU3RyZWFtU3RhdGVDaGFuZ2VkLFxuICB3LlRyYWNrU3Vic2NyaWJlZCxcbiAgdy5UcmFja1Vuc3Vic2NyaWJlZCxcbiAgdy5UcmFja1N1YnNjcmlwdGlvblBlcm1pc3Npb25DaGFuZ2VkLFxuICB3LlRyYWNrU3Vic2NyaXB0aW9uRmFpbGVkLFxuICB3LkxvY2FsVHJhY2tQdWJsaXNoZWQsXG4gIHcuTG9jYWxUcmFja1VucHVibGlzaGVkXG5dLCB1byA9IFtcbiAgdy5Db25uZWN0aW9uUXVhbGl0eUNoYW5nZWQsXG4gIHcuSXNTcGVha2luZ0NoYW5nZWQsXG4gIHcuUGFydGljaXBhbnRNZXRhZGF0YUNoYW5nZWQsXG4gIHcuUGFydGljaXBhbnRQZXJtaXNzaW9uc0NoYW5nZWQsXG4gIHcuVHJhY2tNdXRlZCxcbiAgdy5UcmFja1VubXV0ZWQsXG4gIHcuVHJhY2tQdWJsaXNoZWQsXG4gIHcuVHJhY2tVbnB1Ymxpc2hlZCxcbiAgdy5UcmFja1N0cmVhbVN0YXRlQ2hhbmdlZCxcbiAgdy5UcmFja1N1YnNjcmlwdGlvbkZhaWxlZCxcbiAgdy5UcmFja1N1YnNjcmlwdGlvblBlcm1pc3Npb25DaGFuZ2VkLFxuICB3LlRyYWNrU3Vic2NyaXB0aW9uU3RhdHVzQ2hhbmdlZFxuXSwga24gPSBbXG4gIC4uLnVvLFxuICB3LkxvY2FsVHJhY2tQdWJsaXNoZWQsXG4gIHcuTG9jYWxUcmFja1VucHVibGlzaGVkXG5dLCBMID0gS3IuZ2V0TG9nZ2VyKFwibGstY29tcG9uZW50cy1qc1wiKTtcbkwuc2V0RGVmYXVsdExldmVsKFwiV0FSTlwiKTtcbmZ1bmN0aW9uIHVzKGUsIHQgPSB7fSkge1xuICB2YXIgbjtcbiAgTC5zZXRMZXZlbChlKSwgcW4oKG4gPSB0LmxpdmVLaXRDbGllbnRMb2dMZXZlbCkgIT0gbnVsbCA/IG4gOiBlKTtcbn1cbmZ1bmN0aW9uIGxzKGUsIHQgPSB7fSkge1xuICB2YXIgbjtcbiAgY29uc3QgciA9IEwubWV0aG9kRmFjdG9yeTtcbiAgTC5tZXRob2RGYWN0b3J5ID0gKGksIG8sIHMpID0+IHtcbiAgICBjb25zdCBhID0gcihpLCBvLCBzKSwgYyA9IFN0W2ldLCB1ID0gYyA+PSBvICYmIGMgPCBTdC5zaWxlbnQ7XG4gICAgcmV0dXJuIChsLCBmKSA9PiB7XG4gICAgICBmID8gYShsLCBmKSA6IGEobCksIHUgJiYgZShjLCBsLCBmKTtcbiAgICB9O1xuICB9LCBMLnNldExldmVsKEwuZ2V0TGV2ZWwoKSksIEtuKChuID0gdC5saXZlS2l0Q2xpZW50TG9nRXh0ZW5zaW9uKSAhPSBudWxsID8gbiA6IGUpO1xufVxudmFyIGZzID0gW1xuICB7XG4gICAgY29sdW1uczogMSxcbiAgICByb3dzOiAxXG4gIH0sXG4gIHtcbiAgICBjb2x1bW5zOiAxLFxuICAgIHJvd3M6IDIsXG4gICAgb3JpZW50YXRpb246IFwicG9ydHJhaXRcIlxuICB9LFxuICB7XG4gICAgY29sdW1uczogMixcbiAgICByb3dzOiAxLFxuICAgIG9yaWVudGF0aW9uOiBcImxhbmRzY2FwZVwiXG4gIH0sXG4gIHtcbiAgICBjb2x1bW5zOiAyLFxuICAgIHJvd3M6IDIsXG4gICAgbWluV2lkdGg6IDU2MFxuICB9LFxuICB7XG4gICAgY29sdW1uczogMyxcbiAgICByb3dzOiAzLFxuICAgIG1pbldpZHRoOiA3MDBcbiAgfSxcbiAge1xuICAgIGNvbHVtbnM6IDQsXG4gICAgcm93czogNCxcbiAgICBtaW5XaWR0aDogOTYwXG4gIH0sXG4gIHtcbiAgICBjb2x1bW5zOiA1LFxuICAgIHJvd3M6IDUsXG4gICAgbWluV2lkdGg6IDExMDBcbiAgfVxuXTtcbmZ1bmN0aW9uIGxvKGUsIHQsIG4sIHIpIHtcbiAgaWYgKGUubGVuZ3RoIDwgMSlcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJBdCBsZWFzdCBvbmUgZ3JpZCBsYXlvdXQgZGVmaW5pdGlvbiBtdXN0IGJlIHByb3ZpZGVkLlwiKTtcbiAgY29uc3QgaSA9IGZvKGUpO1xuICBpZiAobiA8PSAwIHx8IHIgPD0gMClcbiAgICByZXR1cm4gaVswXTtcbiAgbGV0IG8gPSAwO1xuICBjb25zdCBzID0gbiAvIHIgPiAxID8gXCJsYW5kc2NhcGVcIiA6IFwicG9ydHJhaXRcIjtcbiAgbGV0IGEgPSBpLmZpbmQoKGMsIHUsIGwpID0+IHtcbiAgICBvID0gdTtcbiAgICBjb25zdCBmID0gbC5maW5kSW5kZXgoKHYsIGQpID0+IHtcbiAgICAgIGNvbnN0IG0gPSAhdi5vcmllbnRhdGlvbiB8fCB2Lm9yaWVudGF0aW9uID09PSBzLCBwID0gZCA+IHUsIGcgPSB2Lm1heFRpbGVzID09PSBjLm1heFRpbGVzO1xuICAgICAgcmV0dXJuIHAgJiYgZyAmJiBtO1xuICAgIH0pICE9PSAtMTtcbiAgICByZXR1cm4gYy5tYXhUaWxlcyA+PSB0ICYmICFmO1xuICB9KTtcbiAgaWYgKGEgPT09IHZvaWQgMClcbiAgICBpZiAoYSA9IGlbaS5sZW5ndGggLSAxXSwgYSlcbiAgICAgIEwud2FybihcbiAgICAgICAgYE5vIGxheW91dCBmb3VuZCBmb3I6IHBhcnRpY2lwYW50Q291bnQ6ICR7dH0sIHdpZHRoL2hlaWdodDogJHtufS8ke3J9IGZhbGxiYWNrIHRvIGJpZ2dlc3QgYXZhaWxhYmxlIGxheW91dCAoJHthfSkuYFxuICAgICAgKTtcbiAgICBlbHNlXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJObyBsYXlvdXQgb3IgZmFsbGJhY2sgbGF5b3V0IGZvdW5kLlwiKTtcbiAgaWYgKChuIDwgYS5taW5XaWR0aCB8fCByIDwgYS5taW5IZWlnaHQpICYmIG8gPiAwKSB7XG4gICAgY29uc3QgYyA9IGlbbyAtIDFdO1xuICAgIGEgPSBsbyhcbiAgICAgIGkuc2xpY2UoMCwgbyksXG4gICAgICBjLm1heFRpbGVzLFxuICAgICAgbixcbiAgICAgIHJcbiAgICApO1xuICB9XG4gIHJldHVybiBhO1xufVxuZnVuY3Rpb24gZm8oZSkge1xuICByZXR1cm4gWy4uLmVdLm1hcCgodCkgPT4ge1xuICAgIHZhciBuLCByO1xuICAgIHJldHVybiB7XG4gICAgICBuYW1lOiBgJHt0LmNvbHVtbnN9eCR7dC5yb3dzfWAsXG4gICAgICBjb2x1bW5zOiB0LmNvbHVtbnMsXG4gICAgICByb3dzOiB0LnJvd3MsXG4gICAgICBtYXhUaWxlczogdC5jb2x1bW5zICogdC5yb3dzLFxuICAgICAgbWluV2lkdGg6IChuID0gdC5taW5XaWR0aCkgIT0gbnVsbCA/IG4gOiAwLFxuICAgICAgbWluSGVpZ2h0OiAociA9IHQubWluSGVpZ2h0KSAhPSBudWxsID8gciA6IDAsXG4gICAgICBvcmllbnRhdGlvbjogdC5vcmllbnRhdGlvblxuICAgIH07XG4gIH0pLnNvcnQoKHQsIG4pID0+IHQubWF4VGlsZXMgIT09IG4ubWF4VGlsZXMgPyB0Lm1heFRpbGVzIC0gbi5tYXhUaWxlcyA6IHQubWluV2lkdGggIT09IDAgfHwgbi5taW5XaWR0aCAhPT0gMCA/IHQubWluV2lkdGggLSBuLm1pbldpZHRoIDogdC5taW5IZWlnaHQgIT09IDAgfHwgbi5taW5IZWlnaHQgIT09IDAgPyB0Lm1pbkhlaWdodCAtIG4ubWluSGVpZ2h0IDogMCk7XG59XG5mdW5jdGlvbiBkcygpIHtcbiAgcmV0dXJuIHR5cGVvZiBuYXZpZ2F0b3IgPCBcInVcIiAmJiBuYXZpZ2F0b3IubWVkaWFEZXZpY2VzICYmICEhbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5nZXREaXNwbGF5TWVkaWE7XG59XG5mdW5jdGlvbiBwcyhlLCB0KSB7XG4gIHZhciBuO1xuICByZXR1cm4gY2UocSh7fSwgZSksIHtcbiAgICByZWNlaXZlZEF0TWVkaWFUaW1lc3RhbXA6IChuID0gdC5ydHBUaW1lc3RhbXApICE9IG51bGwgPyBuIDogMCxcbiAgICByZWNlaXZlZEF0OiB0LnRpbWVzdGFtcFxuICB9KTtcbn1cbmZ1bmN0aW9uIGhzKGUsIHQsIG4pIHtcbiAgcmV0dXJuIFsuLi5lLCAuLi50XS5yZWR1Y2VSaWdodCgociwgaSkgPT4gKHIuZmluZCgobykgPT4gby5pZCA9PT0gaS5pZCkgfHwgci51bnNoaWZ0KGkpLCByKSwgW10pLnNsaWNlKDAgLSBuKTtcbn1cbnZhciBwbyA9IC8qIEBfX1BVUkVfXyAqLyAoKGUpID0+IChlLkFnZW50U3RhdGUgPSBcImxrLmFnZW50LnN0YXRlXCIsIGUuUHVibGlzaE9uQmVoYWxmID0gXCJsay5wdWJsaXNoX29uX2JlaGFsZlwiLCBlLlRyYW5zY3JpcHRpb25GaW5hbCA9IFwibGsudHJhbnNjcmlwdGlvbl9maW5hbFwiLCBlLlRyYW5zY3JpcHRpb25TZWdtZW50SWQgPSBcImxrLnNlZ21lbnRfaWRcIiwgZS5UcmFuc2NyaWJlZFRyYWNrSWQgPSBcImxrLnRyYW5zY3JpYmVkX3RyYWNrX2lkXCIsIGUpKShwbyB8fCB7fSksIF9uID0gW10sIExuID0ge1xuICBzaG93Q2hhdDogITEsXG4gIHVucmVhZE1lc3NhZ2VzOiAwLFxuICBzaG93U2V0dGluZ3M6ICExXG59O1xuZnVuY3Rpb24gaG8oZSkge1xuICByZXR1cm4gdHlwZW9mIGUgPT0gXCJvYmplY3RcIjtcbn1cbmZ1bmN0aW9uIHZzKGUpIHtcbiAgcmV0dXJuIEFycmF5LmlzQXJyYXkoZSkgJiYgZS5maWx0ZXIoaG8pLmxlbmd0aCA+IDA7XG59XG5mdW5jdGlvbiBJbihlLCB0KSB7XG4gIHJldHVybiB0LmF1ZGlvTGV2ZWwgLSBlLmF1ZGlvTGV2ZWw7XG59XG5mdW5jdGlvbiBNbihlLCB0KSB7XG4gIHJldHVybiBlLmlzU3BlYWtpbmcgPT09IHQuaXNTcGVha2luZyA/IDAgOiBlLmlzU3BlYWtpbmcgPyAtMSA6IDE7XG59XG5mdW5jdGlvbiBSbihlLCB0KSB7XG4gIHZhciBuLCByLCBpLCBvO1xuICByZXR1cm4gZS5sYXN0U3Bva2VBdCAhPT0gdm9pZCAwIHx8IHQubGFzdFNwb2tlQXQgIT09IHZvaWQgMCA/ICgociA9IChuID0gdC5sYXN0U3Bva2VBdCkgPT0gbnVsbCA/IHZvaWQgMCA6IG4uZ2V0VGltZSgpKSAhPSBudWxsID8gciA6IDApIC0gKChvID0gKGkgPSBlLmxhc3RTcG9rZUF0KSA9PSBudWxsID8gdm9pZCAwIDogaS5nZXRUaW1lKCkpICE9IG51bGwgPyBvIDogMCkgOiAwO1xufVxuZnVuY3Rpb24gQmUoZSwgdCkge1xuICB2YXIgbiwgciwgaSwgbztcbiAgcmV0dXJuICgociA9IChuID0gZS5qb2luZWRBdCkgPT0gbnVsbCA/IHZvaWQgMCA6IG4uZ2V0VGltZSgpKSAhPSBudWxsID8gciA6IDApIC0gKChvID0gKGkgPSB0LmpvaW5lZEF0KSA9PSBudWxsID8gdm9pZCAwIDogaS5nZXRUaW1lKCkpICE9IG51bGwgPyBvIDogMCk7XG59XG5mdW5jdGlvbiB2byhlLCB0KSB7XG4gIHJldHVybiBCKGUpID8gQih0KSA/IDAgOiAtMSA6IEIodCkgPyAxIDogMDtcbn1cbmZ1bmN0aW9uIG1vKGUsIHQpIHtcbiAgY29uc3QgbiA9IGUucGFydGljaXBhbnQuaXNDYW1lcmFFbmFibGVkLCByID0gdC5wYXJ0aWNpcGFudC5pc0NhbWVyYUVuYWJsZWQ7XG4gIHJldHVybiBuICE9PSByID8gbiA/IC0xIDogMSA6IDA7XG59XG5mdW5jdGlvbiBtcyhlKSB7XG4gIGNvbnN0IHQgPSBbXSwgbiA9IFtdLCByID0gW10sIGkgPSBbXTtcbiAgZS5mb3JFYWNoKChhKSA9PiB7XG4gICAgYS5wYXJ0aWNpcGFudC5pc0xvY2FsICYmIGEuc291cmNlID09PSBSLlNvdXJjZS5DYW1lcmEgPyB0LnB1c2goYSkgOiBhLnNvdXJjZSA9PT0gUi5Tb3VyY2UuU2NyZWVuU2hhcmUgPyBuLnB1c2goYSkgOiBhLnNvdXJjZSA9PT0gUi5Tb3VyY2UuQ2FtZXJhID8gci5wdXNoKGEpIDogaS5wdXNoKGEpO1xuICB9KTtcbiAgY29uc3QgbyA9IGdvKG4pLCBzID0gYm8ocik7XG4gIHJldHVybiBbLi4udCwgLi4ubywgLi4ucywgLi4uaV07XG59XG5mdW5jdGlvbiBnbyhlKSB7XG4gIGNvbnN0IHQgPSBbXSwgbiA9IFtdO1xuICByZXR1cm4gZS5mb3JFYWNoKChpKSA9PiB7XG4gICAgaS5wYXJ0aWNpcGFudC5pc0xvY2FsID8gdC5wdXNoKGkpIDogbi5wdXNoKGkpO1xuICB9KSwgdC5zb3J0KChpLCBvKSA9PiBCZShpLnBhcnRpY2lwYW50LCBvLnBhcnRpY2lwYW50KSksIG4uc29ydCgoaSwgbykgPT4gQmUoaS5wYXJ0aWNpcGFudCwgby5wYXJ0aWNpcGFudCkpLCBbLi4ubiwgLi4udF07XG59XG5mdW5jdGlvbiBibyhlKSB7XG4gIGNvbnN0IHQgPSBbXSwgbiA9IFtdO1xuICByZXR1cm4gZS5mb3JFYWNoKChyKSA9PiB7XG4gICAgci5wYXJ0aWNpcGFudC5pc0xvY2FsID8gdC5wdXNoKHIpIDogbi5wdXNoKHIpO1xuICB9KSwgbi5zb3J0KChyLCBpKSA9PiByLnBhcnRpY2lwYW50LmlzU3BlYWtpbmcgJiYgaS5wYXJ0aWNpcGFudC5pc1NwZWFraW5nID8gSW4oci5wYXJ0aWNpcGFudCwgaS5wYXJ0aWNpcGFudCkgOiByLnBhcnRpY2lwYW50LmlzU3BlYWtpbmcgIT09IGkucGFydGljaXBhbnQuaXNTcGVha2luZyA/IE1uKHIucGFydGljaXBhbnQsIGkucGFydGljaXBhbnQpIDogci5wYXJ0aWNpcGFudC5sYXN0U3Bva2VBdCAhPT0gaS5wYXJ0aWNpcGFudC5sYXN0U3Bva2VBdCA/IFJuKHIucGFydGljaXBhbnQsIGkucGFydGljaXBhbnQpIDogQihyKSAhPT0gQihpKSA/IHZvKHIsIGkpIDogci5wYXJ0aWNpcGFudC5pc0NhbWVyYUVuYWJsZWQgIT09IGkucGFydGljaXBhbnQuaXNDYW1lcmFFbmFibGVkID8gbW8ociwgaSkgOiBCZShyLnBhcnRpY2lwYW50LCBpLnBhcnRpY2lwYW50KSksIFsuLi50LCAuLi5uXTtcbn1cbmZ1bmN0aW9uIGdzKGUpIHtcbiAgY29uc3QgdCA9IFsuLi5lXTtcbiAgdC5zb3J0KChyLCBpKSA9PiB7XG4gICAgaWYgKHIuaXNTcGVha2luZyAmJiBpLmlzU3BlYWtpbmcpXG4gICAgICByZXR1cm4gSW4ociwgaSk7XG4gICAgaWYgKHIuaXNTcGVha2luZyAhPT0gaS5pc1NwZWFraW5nKVxuICAgICAgcmV0dXJuIE1uKHIsIGkpO1xuICAgIGlmIChyLmxhc3RTcG9rZUF0ICE9PSBpLmxhc3RTcG9rZUF0KVxuICAgICAgcmV0dXJuIFJuKHIsIGkpO1xuICAgIGNvbnN0IG8gPSByLnZpZGVvVHJhY2tQdWJsaWNhdGlvbnMuc2l6ZSA+IDAsIHMgPSBpLnZpZGVvVHJhY2tQdWJsaWNhdGlvbnMuc2l6ZSA+IDA7XG4gICAgcmV0dXJuIG8gIT09IHMgPyBvID8gLTEgOiAxIDogQmUociwgaSk7XG4gIH0pO1xuICBjb25zdCBuID0gdC5maW5kKChyKSA9PiByLmlzTG9jYWwpO1xuICBpZiAobikge1xuICAgIGNvbnN0IHIgPSB0LmluZGV4T2Yobik7XG4gICAgciA+PSAwICYmICh0LnNwbGljZShyLCAxKSwgdC5sZW5ndGggPiAwID8gdC5zcGxpY2UoMCwgMCwgbikgOiB0LnB1c2gobikpO1xuICB9XG4gIHJldHVybiB0O1xufVxuZnVuY3Rpb24geW8oZSwgdCkge1xuICByZXR1cm4gZS5yZWR1Y2UoXG4gICAgKG4sIHIsIGkpID0+IGkgJSB0ID09PSAwID8gWy4uLm4sIFtyXV0gOiBbLi4ubi5zbGljZSgwLCAtMSksIFsuLi5uLnNsaWNlKC0xKVswXSwgcl1dLFxuICAgIFtdXG4gICk7XG59XG5mdW5jdGlvbiBIdChlLCB0KSB7XG4gIGNvbnN0IG4gPSBNYXRoLm1heChlLmxlbmd0aCwgdC5sZW5ndGgpO1xuICByZXR1cm4gbmV3IEFycmF5KG4pLmZpbGwoW10pLm1hcCgociwgaSkgPT4gW2VbaV0sIHRbaV1dKTtcbn1cbmZ1bmN0aW9uIFZlKGUsIHQsIG4pIHtcbiAgcmV0dXJuIGUuZmlsdGVyKChyKSA9PiAhdC5tYXAoKGkpID0+IG4oaSkpLmluY2x1ZGVzKG4ocikpKTtcbn1cbmZ1bmN0aW9uIGZ0KGUpIHtcbiAgcmV0dXJuIGUubWFwKCh0KSA9PiB0eXBlb2YgdCA9PSBcInN0cmluZ1wiIHx8IHR5cGVvZiB0ID09IFwibnVtYmVyXCIgPyBgJHt0fWAgOiBOKHQpKTtcbn1cbmZ1bmN0aW9uIHdvKGUsIHQpIHtcbiAgcmV0dXJuIHtcbiAgICBkcm9wcGVkOiBWZShlLCB0LCBOKSxcbiAgICBhZGRlZDogVmUodCwgZSwgTilcbiAgfTtcbn1cbmZ1bmN0aW9uIHhvKGUpIHtcbiAgcmV0dXJuIGUuYWRkZWQubGVuZ3RoICE9PSAwIHx8IGUuZHJvcHBlZC5sZW5ndGggIT09IDA7XG59XG5mdW5jdGlvbiBkdChlLCB0KSB7XG4gIGNvbnN0IG4gPSB0LmZpbmRJbmRleChcbiAgICAocikgPT4gTihyKSA9PT0gTihlKVxuICApO1xuICBpZiAobiA9PT0gLTEpXG4gICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgYEVsZW1lbnQgbm90IHBhcnQgb2YgdGhlIGFycmF5OiAke04oXG4gICAgICAgIGVcbiAgICAgICl9IG5vdCBpbiAke2Z0KHQpfWBcbiAgICApO1xuICByZXR1cm4gbjtcbn1cbmZ1bmN0aW9uIFNvKGUsIHQsIG4pIHtcbiAgY29uc3QgciA9IGR0KGUsIG4pLCBpID0gZHQodCwgbik7XG4gIHJldHVybiBuLnNwbGljZShyLCAxLCB0KSwgbi5zcGxpY2UoaSwgMSwgZSksIG47XG59XG5mdW5jdGlvbiBUbyhlLCB0KSB7XG4gIGNvbnN0IG4gPSBkdChlLCB0KTtcbiAgcmV0dXJuIHQuc3BsaWNlKG4sIDEpLCB0O1xufVxuZnVuY3Rpb24gRW8oZSwgdCkge1xuICByZXR1cm4gWy4uLnQsIGVdO1xufVxuZnVuY3Rpb24gcnQoZSwgdCkge1xuICByZXR1cm4geW8oZSwgdCk7XG59XG5mdW5jdGlvbiBicyhlLCB0LCBuKSB7XG4gIGxldCByID0gQ28oZSwgdCk7XG4gIGlmIChyLmxlbmd0aCA8IHQubGVuZ3RoKSB7XG4gICAgY29uc3QgcyA9IFZlKHQsIHIsIE4pO1xuICAgIHIgPSBbLi4uciwgLi4uc107XG4gIH1cbiAgY29uc3QgaSA9IHJ0KHIsIG4pLCBvID0gcnQodCwgbik7XG4gIGlmIChIdChpLCBvKS5mb3JFYWNoKChbcywgYV0sIGMpID0+IHtcbiAgICBpZiAocyAmJiBhKSB7XG4gICAgICBjb25zdCB1ID0gcnQociwgbilbY10sIGwgPSB3byh1LCBhKTtcbiAgICAgIHhvKGwpICYmIChMLmRlYnVnKFxuICAgICAgICBgRGV0ZWN0ZWQgdmlzdWFsIGNoYW5nZXMgb24gcGFnZTogJHtjfSwgY3VycmVudDogJHtmdChcbiAgICAgICAgICBzXG4gICAgICAgICl9LCBuZXh0OiAke2Z0KGEpfWAsXG4gICAgICAgIHsgY2hhbmdlczogbCB9XG4gICAgICApLCBsLmFkZGVkLmxlbmd0aCA9PT0gbC5kcm9wcGVkLmxlbmd0aCAmJiBIdChsLmFkZGVkLCBsLmRyb3BwZWQpLmZvckVhY2goKFtmLCB2XSkgPT4ge1xuICAgICAgICBpZiAoZiAmJiB2KVxuICAgICAgICAgIHIgPSBTbyhmLCB2LCByKTtcbiAgICAgICAgZWxzZVxuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICAgIGBGb3IgYSBzd2FwIGFjdGlvbiB3ZSBuZWVkIGEgYWRkaXRpb24gYW5kIGEgcmVtb3ZhbCBvbmUgaXMgbWlzc2luZzogJHtmfSwgJHt2fWBcbiAgICAgICAgICApO1xuICAgICAgfSksIGwuYWRkZWQubGVuZ3RoID09PSAwICYmIGwuZHJvcHBlZC5sZW5ndGggPiAwICYmIGwuZHJvcHBlZC5mb3JFYWNoKChmKSA9PiB7XG4gICAgICAgIHIgPSBUbyhmLCByKTtcbiAgICAgIH0pLCBsLmFkZGVkLmxlbmd0aCA+IDAgJiYgbC5kcm9wcGVkLmxlbmd0aCA9PT0gMCAmJiBsLmFkZGVkLmZvckVhY2goKGYpID0+IHtcbiAgICAgICAgciA9IEVvKGYsIHIpO1xuICAgICAgfSkpO1xuICAgIH1cbiAgfSksIHIubGVuZ3RoID4gdC5sZW5ndGgpIHtcbiAgICBjb25zdCBzID0gVmUociwgdCwgTik7XG4gICAgciA9IHIuZmlsdGVyKFxuICAgICAgKGEpID0+ICFzLm1hcChOKS5pbmNsdWRlcyhOKGEpKVxuICAgICk7XG4gIH1cbiAgcmV0dXJuIHI7XG59XG5mdW5jdGlvbiBDbyhlLCB0KSB7XG4gIHJldHVybiBlLm1hcCgobikgPT4ge1xuICAgIGNvbnN0IHIgPSB0LmZpbmQoXG4gICAgICAoaSkgPT4gKFxuICAgICAgICAvLyBJZiB0aGUgSURzIG1hdGNoIG9yIC4uXG4gICAgICAgIE4obikgPT09IE4oaSkgfHwgLy8gLi4uIGlmIHRoZSBjdXJyZW50IGl0ZW0gaXMgYSBwbGFjZWhvbGRlciBhbmQgdGhlIG5ldyBpdGVtIGlzIHRoZSB0cmFjayByZWZlcmVuY2UgY2FuIHJlcGxhY2UgaXQuXG4gICAgICAgIHR5cGVvZiBuICE9IFwibnVtYmVyXCIgJiYgT2UobikgJiYgQihpKSAmJiBpbyhuLCBpKVxuICAgICAgKVxuICAgICk7XG4gICAgcmV0dXJuIHIgPz8gbjtcbiAgfSk7XG59XG5mdW5jdGlvbiBVKGUpIHtcbiAgcmV0dXJuIGAke09ufS0ke2V9YDtcbn1cbmZ1bmN0aW9uIHlzKGUpIHtcbiAgY29uc3QgdCA9IHp0KGUpLCBuID0gRG4oZS5wYXJ0aWNpcGFudCkucGlwZShcbiAgICBBKCgpID0+IHp0KGUpKSxcbiAgICBEKHQpXG4gICk7XG4gIHJldHVybiB7IGNsYXNzTmFtZTogVShcbiAgICBlLnNvdXJjZSA9PT0gUi5Tb3VyY2UuQ2FtZXJhIHx8IGUuc291cmNlID09PSBSLlNvdXJjZS5TY3JlZW5TaGFyZSA/IFwicGFydGljaXBhbnQtbWVkaWEtdmlkZW9cIiA6IFwicGFydGljaXBhbnQtbWVkaWEtYXVkaW9cIlxuICApLCB0cmFja09ic2VydmVyOiBuIH07XG59XG5mdW5jdGlvbiB6dChlKSB7XG4gIGlmIChCKGUpKVxuICAgIHJldHVybiBlLnB1YmxpY2F0aW9uO1xuICB7XG4gICAgY29uc3QgeyBzb3VyY2U6IHQsIG5hbWU6IG4sIHBhcnRpY2lwYW50OiByIH0gPSBlO1xuICAgIGlmICh0ICYmIG4pXG4gICAgICByZXR1cm4gci5nZXRUcmFja1B1YmxpY2F0aW9ucygpLmZpbmQoKGkpID0+IGkuc291cmNlID09PSB0ICYmIGkudHJhY2tOYW1lID09PSBuKTtcbiAgICBpZiAobilcbiAgICAgIHJldHVybiByLmdldFRyYWNrUHVibGljYXRpb25CeU5hbWUobik7XG4gICAgaWYgKHQpXG4gICAgICByZXR1cm4gci5nZXRUcmFja1B1YmxpY2F0aW9uKHQpO1xuICAgIHRocm93IG5ldyBFcnJvcihcIkF0IGxlYXN0IG9uZSBvZiBzb3VyY2UgYW5kIG5hbWUgbmVlZHMgdG8gYmUgZGVmaW5lZFwiKTtcbiAgfVxufVxuZnVuY3Rpb24gcGUoZSwgLi4udCkge1xuICByZXR1cm4gbmV3IGsoKHIpID0+IHtcbiAgICBjb25zdCBpID0gKCkgPT4ge1xuICAgICAgci5uZXh0KGUpO1xuICAgIH07XG4gICAgcmV0dXJuIHQuZm9yRWFjaCgocykgPT4ge1xuICAgICAgZS5vbihzLCBpKTtcbiAgICB9KSwgKCkgPT4ge1xuICAgICAgdC5mb3JFYWNoKChzKSA9PiB7XG4gICAgICAgIGUub2ZmKHMsIGkpO1xuICAgICAgfSk7XG4gICAgfTtcbiAgfSkucGlwZShEKGUpKTtcbn1cbmZ1bmN0aW9uIHdlKGUsIHQpIHtcbiAgcmV0dXJuIG5ldyBrKChyKSA9PiB7XG4gICAgY29uc3QgaSA9ICguLi5zKSA9PiB7XG4gICAgICByLm5leHQocyk7XG4gICAgfTtcbiAgICByZXR1cm4gZS5vbih0LCBpKSwgKCkgPT4ge1xuICAgICAgZS5vZmYodCwgaSk7XG4gICAgfTtcbiAgfSk7XG59XG5mdW5jdGlvbiB3cyhlKSB7XG4gIHJldHVybiB3ZShlLCB5LkNvbm5lY3Rpb25TdGF0ZUNoYW5nZWQpLnBpcGUoXG4gICAgQSgoW3RdKSA9PiB0KSxcbiAgICBEKGUuc3RhdGUpXG4gICk7XG59XG5mdW5jdGlvbiB4cyhlKSB7XG4gIHJldHVybiBwZShcbiAgICBlLFxuICAgIHkuUm9vbU1ldGFkYXRhQ2hhbmdlZCxcbiAgICB5LkNvbm5lY3Rpb25TdGF0ZUNoYW5nZWRcbiAgKS5waXBlKFxuICAgIEEoKG4pID0+ICh7IG5hbWU6IG4ubmFtZSwgbWV0YWRhdGE6IG4ubWV0YWRhdGEgfSkpXG4gICk7XG59XG5mdW5jdGlvbiBTcyhlKSB7XG4gIHJldHVybiB3ZShlLCB5LkFjdGl2ZVNwZWFrZXJzQ2hhbmdlZCkucGlwZShcbiAgICBBKChbdF0pID0+IHQpXG4gICk7XG59XG5mdW5jdGlvbiBUcyhlLCB0LCBuID0gITApIHtcbiAgY29uc3QgciA9IG5ldyBrKChvKSA9PiB7XG4gICAgVHQuZ2V0TG9jYWxEZXZpY2VzKGUsIG4pLnRoZW4oKHMpID0+IHtcbiAgICAgIG8ubmV4dChzKSwgby5jb21wbGV0ZSgpO1xuICAgIH0pLmNhdGNoKChzKSA9PiB7XG4gICAgICB0ID09IG51bGwgfHwgdChzKSwgby5uZXh0KFtdKSwgby5jb21wbGV0ZSgpO1xuICAgIH0pO1xuICB9KSwgaSA9IG5ldyBrKChvKSA9PiB7XG4gICAgdmFyIHM7XG4gICAgY29uc3QgYSA9ICgpID0+IEgodGhpcywgbnVsbCwgZnVuY3Rpb24qICgpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IGMgPSB5aWVsZCBUdC5nZXRMb2NhbERldmljZXMoZSwgbik7XG4gICAgICAgIG8ubmV4dChjKTtcbiAgICAgIH0gY2F0Y2ggKGMpIHtcbiAgICAgICAgdCA9PSBudWxsIHx8IHQoYyk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgaWYgKHR5cGVvZiB3aW5kb3cgPCBcInVcIikge1xuICAgICAgaWYgKCF3aW5kb3cuaXNTZWN1cmVDb250ZXh0KVxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICAgXCJBY2Nlc3NpbmcgbWVkaWEgZGV2aWNlcyBpcyBhdmFpbGFibGUgb25seSBpbiBzZWN1cmUgY29udGV4dHMgKEhUVFBTIGFuZCBsb2NhbGhvc3QpLCBpbiBzb21lIG9yIGFsbCBzdXBwb3J0aW5nIGJyb3dzZXJzLiBTZWU6IGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9OYXZpZ2F0b3IvbWVkaWFEZXZpY2VzXCJcbiAgICAgICAgKTtcbiAgICAgIChzID0gbmF2aWdhdG9yID09IG51bGwgPyB2b2lkIDAgOiBuYXZpZ2F0b3IubWVkaWFEZXZpY2VzKSA9PSBudWxsIHx8IHMuYWRkRXZlbnRMaXN0ZW5lcihcImRldmljZWNoYW5nZVwiLCBhKTtcbiAgICB9XG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIHZhciBjO1xuICAgICAgKGMgPSBuYXZpZ2F0b3IgPT0gbnVsbCA/IHZvaWQgMCA6IG5hdmlnYXRvci5tZWRpYURldmljZXMpID09IG51bGwgfHwgYy5yZW1vdmVFdmVudExpc3RlbmVyKFwiZGV2aWNlY2hhbmdlXCIsIGEpO1xuICAgIH07XG4gIH0pO1xuICByZXR1cm4gamUociwgaSk7XG59XG5mdW5jdGlvbiBQbyhlKSB7XG4gIHJldHVybiB3ZShlLCB5LkRhdGFSZWNlaXZlZCk7XG59XG5mdW5jdGlvbiBPbyhlKSB7XG4gIHJldHVybiBwZShlLCB5LkF1ZGlvUGxheWJhY2tTdGF0dXNDaGFuZ2VkKS5waXBlKFxuICAgIEEoKG4pID0+ICh7IGNhblBsYXlBdWRpbzogbi5jYW5QbGF5YmFja0F1ZGlvIH0pKVxuICApO1xufVxuZnVuY3Rpb24gQW8oZSkge1xuICByZXR1cm4gcGUoZSwgeS5WaWRlb1BsYXliYWNrU3RhdHVzQ2hhbmdlZCkucGlwZShcbiAgICBBKChuKSA9PiAoeyBjYW5QbGF5VmlkZW86IG4uY2FuUGxheWJhY2tWaWRlbyB9KSlcbiAgKTtcbn1cbmZ1bmN0aW9uIGtvKGUsIHQpIHtcbiAgcmV0dXJuIHdlKGUsIHkuQWN0aXZlRGV2aWNlQ2hhbmdlZCkucGlwZShcbiAgICBYZSgoW25dKSA9PiBuID09PSB0KSxcbiAgICBBKChbbiwgcl0pID0+IChMLmRlYnVnKFwiYWN0aXZlRGV2aWNlT2JzZXJ2YWJsZSB8IFJvb21FdmVudC5BY3RpdmVEZXZpY2VDaGFuZ2VkXCIsIHsga2luZDogbiwgZGV2aWNlSWQ6IHIgfSksIHIpKVxuICApO1xufVxuZnVuY3Rpb24gRXMoZSwgdCkge1xuICByZXR1cm4gd2UoZSwgeS5QYXJ0aWNpcGFudEVuY3J5cHRpb25TdGF0dXNDaGFuZ2VkKS5waXBlKFxuICAgIFhlKFxuICAgICAgKFssIG5dKSA9PiAodCA9PSBudWxsID8gdm9pZCAwIDogdC5pZGVudGl0eSkgPT09IChuID09IG51bGwgPyB2b2lkIDAgOiBuLmlkZW50aXR5KSB8fCAhbiAmJiAodCA9PSBudWxsID8gdm9pZCAwIDogdC5pZGVudGl0eSkgPT09IGUubG9jYWxQYXJ0aWNpcGFudC5pZGVudGl0eVxuICAgICksXG4gICAgQSgoW25dKSA9PiBuKSxcbiAgICBEKFxuICAgICAgdCAhPSBudWxsICYmIHQuaXNMb2NhbCA/IHQuaXNFMkVFRW5hYmxlZCA6ICEhKHQgIT0gbnVsbCAmJiB0LmlzRW5jcnlwdGVkKVxuICAgIClcbiAgKTtcbn1cbmZ1bmN0aW9uIENzKGUpIHtcbiAgcmV0dXJuIHdlKGUsIHkuUmVjb3JkaW5nU3RhdHVzQ2hhbmdlZCkucGlwZShcbiAgICBBKChbdF0pID0+IHQpLFxuICAgIEQoZS5pc1JlY29yZGluZylcbiAgKTtcbn1cbmZ1bmN0aW9uIHhlKGUsIC4uLnQpIHtcbiAgcmV0dXJuIG5ldyBrKChyKSA9PiB7XG4gICAgY29uc3QgaSA9ICgpID0+IHtcbiAgICAgIHIubmV4dChlKTtcbiAgICB9O1xuICAgIHJldHVybiB0LmZvckVhY2goKHMpID0+IHtcbiAgICAgIGUub24ocywgaSk7XG4gICAgfSksICgpID0+IHtcbiAgICAgIHQuZm9yRWFjaCgocykgPT4ge1xuICAgICAgICBlLm9mZihzLCBpKTtcbiAgICAgIH0pO1xuICAgIH07XG4gIH0pLnBpcGUoRChlKSk7XG59XG5mdW5jdGlvbiBEbihlKSB7XG4gIHJldHVybiB4ZShcbiAgICBlLFxuICAgIHcuVHJhY2tNdXRlZCxcbiAgICB3LlRyYWNrVW5tdXRlZCxcbiAgICB3LlBhcnRpY2lwYW50UGVybWlzc2lvbnNDaGFuZ2VkLFxuICAgIC8vIFBhcnRpY2lwYW50RXZlbnQuSXNTcGVha2luZ0NoYW5nZWQsXG4gICAgdy5UcmFja1B1Ymxpc2hlZCxcbiAgICB3LlRyYWNrVW5wdWJsaXNoZWQsXG4gICAgdy5Mb2NhbFRyYWNrUHVibGlzaGVkLFxuICAgIHcuTG9jYWxUcmFja1VucHVibGlzaGVkLFxuICAgIHcuTWVkaWFEZXZpY2VzRXJyb3IsXG4gICAgdy5UcmFja1N1YnNjcmlwdGlvblN0YXR1c0NoYW5nZWRcbiAgICAvLyBQYXJ0aWNpcGFudEV2ZW50LkNvbm5lY3Rpb25RdWFsaXR5Q2hhbmdlZCxcbiAgKS5waXBlKFxuICAgIEEoKG4pID0+IHtcbiAgICAgIGNvbnN0IHsgaXNNaWNyb3Bob25lRW5hYmxlZDogciwgaXNDYW1lcmFFbmFibGVkOiBpLCBpc1NjcmVlblNoYXJlRW5hYmxlZDogbyB9ID0gbiwgcyA9IG4uZ2V0VHJhY2tQdWJsaWNhdGlvbihSLlNvdXJjZS5NaWNyb3Bob25lKSwgYSA9IG4uZ2V0VHJhY2tQdWJsaWNhdGlvbihSLlNvdXJjZS5DYW1lcmEpO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgaXNDYW1lcmFFbmFibGVkOiBpLFxuICAgICAgICBpc01pY3JvcGhvbmVFbmFibGVkOiByLFxuICAgICAgICBpc1NjcmVlblNoYXJlRW5hYmxlZDogbyxcbiAgICAgICAgY2FtZXJhVHJhY2s6IGEsXG4gICAgICAgIG1pY3JvcGhvbmVUcmFjazogcyxcbiAgICAgICAgcGFydGljaXBhbnQ6IG5cbiAgICAgIH07XG4gICAgfSlcbiAgKTtcbn1cbmZ1bmN0aW9uIF9vKGUpIHtcbiAgcmV0dXJuIGUgPyB4ZShcbiAgICBlLFxuICAgIHcuUGFydGljaXBhbnRNZXRhZGF0YUNoYW5nZWQsXG4gICAgdy5QYXJ0aWNpcGFudE5hbWVDaGFuZ2VkXG4gICkucGlwZShcbiAgICBBKCh7IG5hbWU6IG4sIGlkZW50aXR5OiByLCBtZXRhZGF0YTogaSB9KSA9PiAoe1xuICAgICAgbmFtZTogbixcbiAgICAgIGlkZW50aXR5OiByLFxuICAgICAgbWV0YWRhdGE6IGlcbiAgICB9KSksXG4gICAgRCh7XG4gICAgICBuYW1lOiBlLm5hbWUsXG4gICAgICBpZGVudGl0eTogZS5pZGVudGl0eSxcbiAgICAgIG1ldGFkYXRhOiBlLm1ldGFkYXRhXG4gICAgfSlcbiAgKSA6IHZvaWQgMDtcbn1cbmZ1bmN0aW9uIExvKGUpIHtcbiAgcmV0dXJuIFplKFxuICAgIGUsXG4gICAgdy5Db25uZWN0aW9uUXVhbGl0eUNoYW5nZWRcbiAgKS5waXBlKFxuICAgIEEoKFtuXSkgPT4gbiksXG4gICAgRChlLmNvbm5lY3Rpb25RdWFsaXR5KVxuICApO1xufVxuZnVuY3Rpb24gWmUoZSwgdCkge1xuICByZXR1cm4gbmV3IGsoKHIpID0+IHtcbiAgICBjb25zdCBpID0gKC4uLnMpID0+IHtcbiAgICAgIHIubmV4dChzKTtcbiAgICB9O1xuICAgIHJldHVybiBlLm9uKHQsIGkpLCAoKSA9PiB7XG4gICAgICBlLm9mZih0LCBpKTtcbiAgICB9O1xuICB9KTtcbn1cbmZ1bmN0aW9uIElvKGUpIHtcbiAgdmFyIHQsIG4sIHIsIGk7XG4gIHJldHVybiB4ZShcbiAgICBlLnBhcnRpY2lwYW50LFxuICAgIHcuVHJhY2tNdXRlZCxcbiAgICB3LlRyYWNrVW5tdXRlZCxcbiAgICB3LlRyYWNrU3Vic2NyaWJlZCxcbiAgICB3LlRyYWNrVW5zdWJzY3JpYmVkLFxuICAgIHcuTG9jYWxUcmFja1B1Ymxpc2hlZCxcbiAgICB3LkxvY2FsVHJhY2tVbnB1Ymxpc2hlZFxuICApLnBpcGUoXG4gICAgQSgobykgPT4ge1xuICAgICAgdmFyIHMsIGE7XG4gICAgICBjb25zdCBjID0gKHMgPSBlLnB1YmxpY2F0aW9uKSAhPSBudWxsID8gcyA6IG8uZ2V0VHJhY2tQdWJsaWNhdGlvbihlLnNvdXJjZSk7XG4gICAgICByZXR1cm4gKGEgPSBjID09IG51bGwgPyB2b2lkIDAgOiBjLmlzTXV0ZWQpICE9IG51bGwgPyBhIDogITA7XG4gICAgfSksXG4gICAgRChcbiAgICAgIChpID0gKHIgPSAodCA9IGUucHVibGljYXRpb24pID09IG51bGwgPyB2b2lkIDAgOiB0LmlzTXV0ZWQpICE9IG51bGwgPyByIDogKG4gPSBlLnBhcnRpY2lwYW50LmdldFRyYWNrUHVibGljYXRpb24oZS5zb3VyY2UpKSA9PSBudWxsID8gdm9pZCAwIDogbi5pc011dGVkKSAhPSBudWxsID8gaSA6ICEwXG4gICAgKVxuICApO1xufVxuZnVuY3Rpb24gUHMoZSkge1xuICByZXR1cm4gWmUoZSwgdy5Jc1NwZWFraW5nQ2hhbmdlZCkucGlwZShcbiAgICBBKChbdF0pID0+IHQpXG4gICk7XG59XG5mdW5jdGlvbiBPcyhlLCB0ID0ge30pIHtcbiAgdmFyIG47XG4gIGxldCByO1xuICBjb25zdCBpID0gbmV3IGsoKGMpID0+IChyID0gYywgKCkgPT4gYS51bnN1YnNjcmliZSgpKSkucGlwZShEKEFycmF5LmZyb20oZS5yZW1vdGVQYXJ0aWNpcGFudHMudmFsdWVzKCkpKSksIG8gPSAobiA9IHQuYWRkaXRpb25hbFJvb21FdmVudHMpICE9IG51bGwgPyBuIDogQW4sIHMgPSBBcnJheS5mcm9tKFxuICAgIC8qIEBfX1BVUkVfXyAqLyBuZXcgU2V0KFtcbiAgICAgIHkuUGFydGljaXBhbnRDb25uZWN0ZWQsXG4gICAgICB5LlBhcnRpY2lwYW50RGlzY29ubmVjdGVkLFxuICAgICAgeS5Db25uZWN0aW9uU3RhdGVDaGFuZ2VkLFxuICAgICAgLi4ub1xuICAgIF0pXG4gICksIGEgPSBwZShlLCAuLi5zKS5zdWJzY3JpYmUoXG4gICAgKGMpID0+IHIgPT0gbnVsbCA/IHZvaWQgMCA6IHIubmV4dChBcnJheS5mcm9tKGMucmVtb3RlUGFydGljaXBhbnRzLnZhbHVlcygpKSlcbiAgKTtcbiAgcmV0dXJuIGUucmVtb3RlUGFydGljaXBhbnRzLnNpemUgPiAwICYmIChyID09IG51bGwgfHwgci5uZXh0KEFycmF5LmZyb20oZS5yZW1vdGVQYXJ0aWNpcGFudHMudmFsdWVzKCkpKSksIGk7XG59XG5mdW5jdGlvbiBBcyhlLCB0LCBuID0ge30pIHtcbiAgdmFyIHI7XG4gIGNvbnN0IGkgPSAociA9IG4uYWRkaXRpb25hbEV2ZW50cykgIT0gbnVsbCA/IHIgOiBrbjtcbiAgcmV0dXJuIHBlKFxuICAgIGUsXG4gICAgeS5QYXJ0aWNpcGFudENvbm5lY3RlZCxcbiAgICB5LlBhcnRpY2lwYW50RGlzY29ubmVjdGVkLFxuICAgIHkuQ29ubmVjdGlvblN0YXRlQ2hhbmdlZFxuICApLnBpcGUoXG4gICAgUG4oKHMpID0+IHtcbiAgICAgIGNvbnN0IGEgPSBzLmdldFBhcnRpY2lwYW50QnlJZGVudGl0eSh0KTtcbiAgICAgIHJldHVybiBhID8geGUoYSwgLi4uaSkgOiBuZXcgaygoYykgPT4gYy5uZXh0KHZvaWQgMCkpO1xuICAgIH0pLFxuICAgIEQoZS5nZXRQYXJ0aWNpcGFudEJ5SWRlbnRpdHkodCkpXG4gICk7XG59XG5mdW5jdGlvbiBrcyhlKSB7XG4gIHJldHVybiBaZShcbiAgICBlLFxuICAgIHcuUGFydGljaXBhbnRQZXJtaXNzaW9uc0NoYW5nZWRcbiAgKS5waXBlKFxuICAgIEEoKCkgPT4gZS5wZXJtaXNzaW9ucyksXG4gICAgRChlLnBlcm1pc3Npb25zKVxuICApO1xufVxuZnVuY3Rpb24gX3MoZSwgeyBraW5kOiB0LCBpZGVudGl0eTogbiB9LCByID0ge30pIHtcbiAgdmFyIGk7XG4gIGNvbnN0IG8gPSAoaSA9IHIuYWRkaXRpb25hbEV2ZW50cykgIT0gbnVsbCA/IGkgOiBrbiwgcyA9IChjKSA9PiB7XG4gICAgbGV0IHUgPSAhMDtcbiAgICByZXR1cm4gdCAmJiAodSA9IHUgJiYgYy5raW5kID09PSB0KSwgbiAmJiAodSA9IHUgJiYgYy5pZGVudGl0eSA9PT0gbiksIHU7XG4gIH07XG4gIHJldHVybiBwZShcbiAgICBlLFxuICAgIHkuUGFydGljaXBhbnRDb25uZWN0ZWQsXG4gICAgeS5QYXJ0aWNpcGFudERpc2Nvbm5lY3RlZCxcbiAgICB5LkNvbm5lY3Rpb25TdGF0ZUNoYW5nZWRcbiAgKS5waXBlKFxuICAgIFBuKChjKSA9PiB7XG4gICAgICBjb25zdCB1ID0gQXJyYXkuZnJvbShjLnJlbW90ZVBhcnRpY2lwYW50cy52YWx1ZXMoKSkuZmluZChcbiAgICAgICAgKGwpID0+IHMobClcbiAgICAgICk7XG4gICAgICByZXR1cm4gdSA/IHhlKHUsIC4uLm8pIDogbmV3IGsoKGwpID0+IGwubmV4dCh2b2lkIDApKTtcbiAgICB9KSxcbiAgICBEKEFycmF5LmZyb20oZS5yZW1vdGVQYXJ0aWNpcGFudHMudmFsdWVzKCkpLmZpbmQoKGMpID0+IHMoYykpKVxuICApO1xufVxuZnVuY3Rpb24gTHMoZSkge1xuICByZXR1cm4gdHlwZW9mIGUgPiBcInVcIiA/IG5ldyBrKCkgOiBaZShlLCB3LkF0dHJpYnV0ZXNDaGFuZ2VkKS5waXBlKFxuICAgIEEoKFt0XSkgPT4gKHtcbiAgICAgIGNoYW5nZWQ6IHQsXG4gICAgICBhdHRyaWJ1dGVzOiBlLmF0dHJpYnV0ZXNcbiAgICB9KSksXG4gICAgRCh7IGNoYW5nZWQ6IGUuYXR0cmlidXRlcywgYXR0cmlidXRlczogZS5hdHRyaWJ1dGVzIH0pXG4gICk7XG59XG5mdW5jdGlvbiBJcyhlLCB0LCBuLCByLCBpKSB7XG4gIGNvbnN0IHsgbG9jYWxQYXJ0aWNpcGFudDogbyB9ID0gdCwgcyA9IChmLCB2KSA9PiB7XG4gICAgbGV0IGQgPSAhMTtcbiAgICBzd2l0Y2ggKGYpIHtcbiAgICAgIGNhc2UgUi5Tb3VyY2UuQ2FtZXJhOlxuICAgICAgICBkID0gdi5pc0NhbWVyYUVuYWJsZWQ7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBSLlNvdXJjZS5NaWNyb3Bob25lOlxuICAgICAgICBkID0gdi5pc01pY3JvcGhvbmVFbmFibGVkO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgUi5Tb3VyY2UuU2NyZWVuU2hhcmU6XG4gICAgICAgIGQgPSB2LmlzU2NyZWVuU2hhcmVFbmFibGVkO1xuICAgICAgICBicmVhaztcbiAgICB9XG4gICAgcmV0dXJuIGQ7XG4gIH0sIGEgPSBEbihvKS5waXBlKFxuICAgIEEoKGYpID0+IHMoZSwgZi5wYXJ0aWNpcGFudCkpLFxuICAgIEQocyhlLCBvKSlcbiAgKSwgYyA9IG5ldyB0ZSgpLCB1ID0gKGYsIHYpID0+IEgodGhpcywgbnVsbCwgZnVuY3Rpb24qICgpIHtcbiAgICB0cnkge1xuICAgICAgc3dpdGNoICh2ID8/ICh2ID0gbiksIGMubmV4dCghMCksIGUpIHtcbiAgICAgICAgY2FzZSBSLlNvdXJjZS5DYW1lcmE6XG4gICAgICAgICAgcmV0dXJuIHlpZWxkIG8uc2V0Q2FtZXJhRW5hYmxlZChcbiAgICAgICAgICAgIGYgPz8gIW8uaXNDYW1lcmFFbmFibGVkLFxuICAgICAgICAgICAgdixcbiAgICAgICAgICAgIHJcbiAgICAgICAgICApLCBvLmlzQ2FtZXJhRW5hYmxlZDtcbiAgICAgICAgY2FzZSBSLlNvdXJjZS5NaWNyb3Bob25lOlxuICAgICAgICAgIHJldHVybiB5aWVsZCBvLnNldE1pY3JvcGhvbmVFbmFibGVkKFxuICAgICAgICAgICAgZiA/PyAhby5pc01pY3JvcGhvbmVFbmFibGVkLFxuICAgICAgICAgICAgdixcbiAgICAgICAgICAgIHJcbiAgICAgICAgICApLCBvLmlzTWljcm9waG9uZUVuYWJsZWQ7XG4gICAgICAgIGNhc2UgUi5Tb3VyY2UuU2NyZWVuU2hhcmU6XG4gICAgICAgICAgcmV0dXJuIHlpZWxkIG8uc2V0U2NyZWVuU2hhcmVFbmFibGVkKFxuICAgICAgICAgICAgZiA/PyAhby5pc1NjcmVlblNoYXJlRW5hYmxlZCxcbiAgICAgICAgICAgIHYsXG4gICAgICAgICAgICByXG4gICAgICAgICAgKSwgby5pc1NjcmVlblNoYXJlRW5hYmxlZDtcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiVHJpZWQgdG8gdG9nZ2xlIHVuc3VwcG9ydGVkIHNvdXJjZVwiKTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChkKSB7XG4gICAgICBpZiAoaSAmJiBkIGluc3RhbmNlb2YgRXJyb3IpIHtcbiAgICAgICAgaSA9PSBudWxsIHx8IGkoZCk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH0gZWxzZVxuICAgICAgICB0aHJvdyBkO1xuICAgIH0gZmluYWxseSB7XG4gICAgICBjLm5leHQoITEpO1xuICAgIH1cbiAgfSk7XG4gIHJldHVybiB7XG4gICAgY2xhc3NOYW1lOiBVKFwiYnV0dG9uXCIpLFxuICAgIHRvZ2dsZTogdSxcbiAgICBlbmFibGVkT2JzZXJ2ZXI6IGEsXG4gICAgcGVuZGluZ09ic2VydmVyOiBjLmFzT2JzZXJ2YWJsZSgpXG4gIH07XG59XG5mdW5jdGlvbiBNcygpIHtcbiAgbGV0IGUgPSAhMTtcbiAgY29uc3QgdCA9IG5ldyB0ZSgpLCBuID0gbmV3IHRlKCksIHIgPSAobykgPT4gSCh0aGlzLCBudWxsLCBmdW5jdGlvbiogKCkge1xuICAgIG4ubmV4dCghMCksIGUgPSBvID8/ICFlLCB0Lm5leHQoZSksIG4ubmV4dCghMSk7XG4gIH0pO1xuICByZXR1cm4ge1xuICAgIGNsYXNzTmFtZTogVShcImJ1dHRvblwiKSxcbiAgICB0b2dnbGU6IHIsXG4gICAgZW5hYmxlZE9ic2VydmVyOiB0LmFzT2JzZXJ2YWJsZSgpLFxuICAgIHBlbmRpbmdPYnNlcnZlcjogbi5hc09ic2VydmFibGUoKVxuICB9O1xufVxuZnVuY3Rpb24gUnMoZSwgdCwgbikge1xuICBjb25zdCByID0gbmV3IHBuKHZvaWQgMCksIGkgPSBrbyh0LCBlKSwgbyA9IChhLCAuLi5jKSA9PiBIKHRoaXMsIFthLCAuLi5jXSwgZnVuY3Rpb24qICh1LCBsID0ge30pIHtcbiAgICB2YXIgZiwgdiwgZDtcbiAgICBpZiAodCkge1xuICAgICAgY29uc3QgbSA9IEduKCk7XG4gICAgICBpZiAoZSA9PT0gXCJhdWRpb291dHB1dFwiICYmICgobSA9PSBudWxsID8gdm9pZCAwIDogbS5uYW1lKSA9PT0gXCJTYWZhcmlcIiB8fCAobSA9PSBudWxsID8gdm9pZCAwIDogbS5vcykgPT09IFwiaU9TXCIpKSB7XG4gICAgICAgIEwud2FybihcIlN3aXRjaGluZyBhdWRpbyBvdXRwdXQgZGV2aWNlIGlzIG5vdCBzdXBwb3J0ZWQgb24gU2FmYXJpIGFuZCBpT1MuXCIpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBMLmRlYnVnKGBTd2l0Y2hpbmcgYWN0aXZlIGRldmljZSBvZiBraW5kIFwiJHtlfVwiIHdpdGggaWQgJHt1fS5gKSwgeWllbGQgdC5zd2l0Y2hBY3RpdmVEZXZpY2UoZSwgdSwgbC5leGFjdCk7XG4gICAgICBjb25zdCBwID0gKGYgPSB0LmdldEFjdGl2ZURldmljZShlKSkgIT0gbnVsbCA/IGYgOiB1O1xuICAgICAgcCAhPT0gdSAmJiB1ICE9PSBcImRlZmF1bHRcIiAmJiBMLmluZm8oXG4gICAgICAgIGBXZSB0cmllZCB0byBzZWxlY3QgdGhlIGRldmljZSB3aXRoIGlkICgke3V9KSwgYnV0IHRoZSBicm93c2VyIGRlY2lkZWQgdG8gc2VsZWN0IHRoZSBkZXZpY2Ugd2l0aCBpZCAoJHtwfSkgaW5zdGVhZC5gXG4gICAgICApO1xuICAgICAgbGV0IGc7XG4gICAgICBlID09PSBcImF1ZGlvaW5wdXRcIiA/IGcgPSAodiA9IHQubG9jYWxQYXJ0aWNpcGFudC5nZXRUcmFja1B1YmxpY2F0aW9uKFIuU291cmNlLk1pY3JvcGhvbmUpKSA9PSBudWxsID8gdm9pZCAwIDogdi50cmFjayA6IGUgPT09IFwidmlkZW9pbnB1dFwiICYmIChnID0gKGQgPSB0LmxvY2FsUGFydGljaXBhbnQuZ2V0VHJhY2tQdWJsaWNhdGlvbihSLlNvdXJjZS5DYW1lcmEpKSA9PSBudWxsID8gdm9pZCAwIDogZC50cmFjayk7XG4gICAgICBjb25zdCBoID0gdSA9PT0gXCJkZWZhdWx0XCIgJiYgIWcgfHwgdSA9PT0gXCJkZWZhdWx0XCIgJiYgKGcgPT0gbnVsbCA/IHZvaWQgMCA6IGcubWVkaWFTdHJlYW1UcmFjay5sYWJlbC5zdGFydHNXaXRoKFwiRGVmYXVsdFwiKSk7XG4gICAgICByLm5leHQoaCA/IHUgOiBwKTtcbiAgICB9XG4gIH0pO1xuICByZXR1cm4ge1xuICAgIGNsYXNzTmFtZTogVShcIm1lZGlhLWRldmljZS1zZWxlY3RcIiksXG4gICAgYWN0aXZlRGV2aWNlT2JzZXJ2YWJsZTogaSxcbiAgICBzZXRBY3RpdmVNZWRpYURldmljZTogb1xuICB9O1xufVxuZnVuY3Rpb24gRHMoZSkge1xuICBjb25zdCB0ID0gKHIpID0+IHtcbiAgICBlLmRpc2Nvbm5lY3Qocik7XG4gIH07XG4gIHJldHVybiB7IGNsYXNzTmFtZTogVShcImRpc2Nvbm5lY3QtYnV0dG9uXCIpLCBkaXNjb25uZWN0OiB0IH07XG59XG5mdW5jdGlvbiAkcyhlKSB7XG4gIGNvbnN0IHQgPSBVKFwiY29ubmVjdGlvbi1xdWFsaXR5XCIpLCBuID0gTG8oZSk7XG4gIHJldHVybiB7IGNsYXNzTmFtZTogdCwgY29ubmVjdGlvblF1YWxpdHlPYnNlcnZlcjogbiB9O1xufVxuZnVuY3Rpb24gTnMoZSkge1xuICBsZXQgdCA9IFwidHJhY2stbXV0ZWQtaW5kaWNhdG9yLWNhbWVyYVwiO1xuICBzd2l0Y2ggKGUuc291cmNlKSB7XG4gICAgY2FzZSBSLlNvdXJjZS5DYW1lcmE6XG4gICAgICB0ID0gXCJ0cmFjay1tdXRlZC1pbmRpY2F0b3ItY2FtZXJhXCI7XG4gICAgICBicmVhaztcbiAgICBjYXNlIFIuU291cmNlLk1pY3JvcGhvbmU6XG4gICAgICB0ID0gXCJ0cmFjay1tdXRlZC1pbmRpY2F0b3ItbWljcm9waG9uZVwiO1xuICAgICAgYnJlYWs7XG4gIH1cbiAgY29uc3QgbiA9IFUodCksIHIgPSBJbyhlKTtcbiAgcmV0dXJuIHsgY2xhc3NOYW1lOiBuLCBtZWRpYU11dGVkT2JzZXJ2ZXI6IHIgfTtcbn1cbmZ1bmN0aW9uIEZzKGUpIHtcbiAgcmV0dXJuIHsgY2xhc3NOYW1lOiBcImxrLXBhcnRpY2lwYW50LW5hbWVcIiwgaW5mb09ic2VydmVyOiBfbyhlKSB9O1xufVxuZnVuY3Rpb24gVXMoKSB7XG4gIHJldHVybiB7XG4gICAgY2xhc3NOYW1lOiBVKFwicGFydGljaXBhbnQtdGlsZVwiKVxuICB9O1xufVxudmFyIE1vID0ge1xuICBDSEFUOiBcImxrLmNoYXRcIixcbiAgVFJBTlNDUklQVElPTjogXCJsay50cmFuc2NyaXB0aW9uXCJcbn0sIFJvID0ge1xuICBDSEFUOiBcImxrLWNoYXQtdG9waWNcIlxufTtcbmZ1bmN0aW9uICRuKGUsIHQpIHtcbiAgcmV0dXJuIEgodGhpcywgYXJndW1lbnRzLCBmdW5jdGlvbiogKG4sIHIsIGkgPSB7fSkge1xuICAgIGNvbnN0IHsgcmVsaWFibGU6IG8sIGRlc3RpbmF0aW9uSWRlbnRpdGllczogcywgdG9waWM6IGEgfSA9IGk7XG4gICAgeWllbGQgbi5wdWJsaXNoRGF0YShyLCB7XG4gICAgICBkZXN0aW5hdGlvbklkZW50aXRpZXM6IHMsXG4gICAgICB0b3BpYzogYSxcbiAgICAgIHJlbGlhYmxlOiBvXG4gICAgfSk7XG4gIH0pO1xufVxuZnVuY3Rpb24gRG8oZSwgdCwgbikge1xuICBjb25zdCByID0gQXJyYXkuaXNBcnJheSh0KSA/IHQgOiBbdF0sIGkgPSBQbyhlKS5waXBlKFxuICAgIFhlKFxuICAgICAgKFssICwgLCBjXSkgPT4gdCA9PT0gdm9pZCAwIHx8IGMgIT09IHZvaWQgMCAmJiByLmluY2x1ZGVzKGMpXG4gICAgKSxcbiAgICBBKChbYywgdSwgLCBsXSkgPT4ge1xuICAgICAgY29uc3QgZiA9IHtcbiAgICAgICAgcGF5bG9hZDogYyxcbiAgICAgICAgdG9waWM6IGwsXG4gICAgICAgIGZyb206IHVcbiAgICAgIH07XG4gICAgICByZXR1cm4gbiA9PSBudWxsIHx8IG4oZiksIGY7XG4gICAgfSlcbiAgKTtcbiAgbGV0IG87XG4gIGNvbnN0IHMgPSBuZXcgaygoYykgPT4ge1xuICAgIG8gPSBjO1xuICB9KTtcbiAgcmV0dXJuIHsgbWVzc2FnZU9ic2VydmFibGU6IGksIGlzU2VuZGluZ09ic2VydmFibGU6IHMsIHNlbmQ6IChjLCAuLi51KSA9PiBIKHRoaXMsIFtjLCAuLi51XSwgZnVuY3Rpb24qIChsLCBmID0ge30pIHtcbiAgICBvLm5leHQoITApO1xuICAgIHRyeSB7XG4gICAgICB5aWVsZCAkbihlLmxvY2FsUGFydGljaXBhbnQsIGwsIHEoeyB0b3BpYzogclswXSB9LCBmKSk7XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIG8ubmV4dCghMSk7XG4gICAgfVxuICB9KSB9O1xufVxudmFyIEllID0gLyogQF9fUFVSRV9fICovIG5ldyBXZWFrTWFwKCk7XG5mdW5jdGlvbiAkbyhlKSB7XG4gIHJldHVybiBlLmlnbm9yZUxlZ2FjeSA9PSAhMDtcbn1cbnZhciBObyA9IChlKSA9PiBKU09OLnBhcnNlKG5ldyBUZXh0RGVjb2RlcigpLmRlY29kZShlKSksIEZvID0gKGUpID0+IG5ldyBUZXh0RW5jb2RlcigpLmVuY29kZShKU09OLnN0cmluZ2lmeShlKSk7XG5mdW5jdGlvbiBXcyhlLCB0KSB7XG4gIHZhciBuLCByLCBpLCBvLCBzLCBhO1xuICBjb25zdCBjID0gKCkgPT4ge1xuICAgIHZhciBiLCBTLCBDO1xuICAgIHJldHVybiAoKGIgPSBlLnNlcnZlckluZm8pID09IG51bGwgPyB2b2lkIDAgOiBiLmVkaXRpb24pID09PSAxIHx8ICEhKChTID0gZS5zZXJ2ZXJJbmZvKSAhPSBudWxsICYmIFMudmVyc2lvbikgJiYgUW4oKEMgPSBlLnNlcnZlckluZm8pID09IG51bGwgPyB2b2lkIDAgOiBDLnZlcnNpb24sIFwiMS44LjJcIikgPiAwO1xuICB9LCB1ID0gbmV3IHRlKCksIGwgPSAobiA9IHQgPT0gbnVsbCA/IHZvaWQgMCA6IHQuY2hhbm5lbFRvcGljKSAhPSBudWxsID8gbiA6IE1vLkNIQVQsIGYgPSAociA9IHQgPT0gbnVsbCA/IHZvaWQgMCA6IHQuY2hhbm5lbFRvcGljKSAhPSBudWxsID8gciA6IFJvLkNIQVQ7XG4gIGxldCB2ID0gITE7XG4gIEllLmhhcyhlKSB8fCAodiA9ICEwKTtcbiAgY29uc3QgZCA9IChpID0gSWUuZ2V0KGUpKSAhPSBudWxsID8gaSA6IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCksIG0gPSAobyA9IGQuZ2V0KGwpKSAhPSBudWxsID8gbyA6IG5ldyB0ZSgpO1xuICBkLnNldChsLCBtKSwgSWUuc2V0KGUsIGQpO1xuICBjb25zdCBwID0gKHMgPSB0ID09IG51bGwgPyB2b2lkIDAgOiB0Lm1lc3NhZ2VEZWNvZGVyKSAhPSBudWxsID8gcyA6IE5vO1xuICBpZiAodikge1xuICAgIGUucmVnaXN0ZXJUZXh0U3RyZWFtSGFuZGxlcihsLCAoUywgQykgPT4gSCh0aGlzLCBudWxsLCBmdW5jdGlvbiogKCkge1xuICAgICAgY29uc3QgeyBpZDogJCwgdGltZXN0YW1wOiBNIH0gPSBTLmluZm87XG4gICAgICBKZShTKS5waXBlKFxuICAgICAgICBsdCgoVCwgXykgPT4gVCArIF8pLFxuICAgICAgICBBKChUKSA9PiAoe1xuICAgICAgICAgIGlkOiAkLFxuICAgICAgICAgIHRpbWVzdGFtcDogTSxcbiAgICAgICAgICBtZXNzYWdlOiBULFxuICAgICAgICAgIGZyb206IGUuZ2V0UGFydGljaXBhbnRCeUlkZW50aXR5KEMuaWRlbnRpdHkpLFxuICAgICAgICAgIHR5cGU6IFwiY2hhdE1lc3NhZ2VcIlxuICAgICAgICAgIC8vIGVkaXRUaW1lc3RhbXA6IHR5cGUgPT09ICd1cGRhdGUnID8gdGltZXN0YW1wIDogdW5kZWZpbmVkLFxuICAgICAgICB9KSlcbiAgICAgICkuc3Vic2NyaWJlKHtcbiAgICAgICAgbmV4dDogKFQpID0+IG0ubmV4dChUKVxuICAgICAgfSk7XG4gICAgfSkpO1xuICAgIGNvbnN0IHsgbWVzc2FnZU9ic2VydmFibGU6IGIgfSA9IERvKGUsIFtmXSk7XG4gICAgYi5waXBlKFxuICAgICAgQSgoUykgPT4ge1xuICAgICAgICBjb25zdCBDID0gcChTLnBheWxvYWQpO1xuICAgICAgICByZXR1cm4gJG8oQykgPyB2b2lkIDAgOiBjZShxKHt9LCBDKSwge1xuICAgICAgICAgIHR5cGU6IFwiY2hhdE1lc3NhZ2VcIixcbiAgICAgICAgICBmcm9tOiBTLmZyb21cbiAgICAgICAgfSk7XG4gICAgICB9KSxcbiAgICAgIFhlKChTKSA9PiAhIVMpLFxuICAgICAgV3QodSlcbiAgICApLnN1YnNjcmliZShtKTtcbiAgfVxuICBjb25zdCBnID0gbS5waXBlKFxuICAgIGx0KChiLCBTKSA9PiB7XG4gICAgICBpZiAoXCJpZFwiIGluIFMgJiYgYi5maW5kKChDKSA9PiB7XG4gICAgICAgIHZhciAkLCBNO1xuICAgICAgICByZXR1cm4gKCgkID0gQy5mcm9tKSA9PSBudWxsID8gdm9pZCAwIDogJC5pZGVudGl0eSkgPT09ICgoTSA9IFMuZnJvbSkgPT0gbnVsbCA/IHZvaWQgMCA6IE0uaWRlbnRpdHkpICYmIEMuaWQgPT09IFMuaWQ7XG4gICAgICB9KSkge1xuICAgICAgICBjb25zdCBDID0gYi5maW5kSW5kZXgoKCQpID0+ICQuaWQgPT09IFMuaWQpO1xuICAgICAgICBpZiAoQyA+IC0xKSB7XG4gICAgICAgICAgY29uc3QgJCA9IGJbQ107XG4gICAgICAgICAgYltDXSA9IGNlKHEoe30sIFMpLCB7XG4gICAgICAgICAgICB0aW1lc3RhbXA6ICQudGltZXN0YW1wLFxuICAgICAgICAgICAgZWRpdFRpbWVzdGFtcDogUy50aW1lc3RhbXBcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gWy4uLmJdO1xuICAgICAgfVxuICAgICAgcmV0dXJuIFsuLi5iLCBTXTtcbiAgICB9LCBbXSksXG4gICAgV3QodSlcbiAgKSwgaCA9IG5ldyBwbighMSksIHggPSAoYSA9IHQgPT0gbnVsbCA/IHZvaWQgMCA6IHQubWVzc2FnZUVuY29kZXIpICE9IG51bGwgPyBhIDogRm8sIEUgPSAoYiwgUykgPT4gSCh0aGlzLCBudWxsLCBmdW5jdGlvbiogKCkge1xuICAgIHZhciBDO1xuICAgIFMgfHwgKFMgPSB7fSksIChDID0gUy50b3BpYykgIT0gbnVsbCB8fCAoUy50b3BpYyA9IGwpLCBoLm5leHQoITApO1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBNID0ge1xuICAgICAgICBpZDogKHlpZWxkIGUubG9jYWxQYXJ0aWNpcGFudC5zZW5kVGV4dChiLCBTKSkuaWQsXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKSxcbiAgICAgICAgbWVzc2FnZTogYlxuICAgICAgfSwgViA9IGNlKHEoe30sIE0pLCB7XG4gICAgICAgIGF0dGFjaGVkRmlsZXM6IFMuYXR0YWNobWVudHNcbiAgICAgIH0pLCBUID0gY2UocSh7fSwgViksIHtcbiAgICAgICAgdHlwZTogXCJjaGF0TWVzc2FnZVwiLFxuICAgICAgICBmcm9tOiBlLmxvY2FsUGFydGljaXBhbnQsXG4gICAgICAgIGF0dHJpYnV0ZXM6IFMuYXR0cmlidXRlc1xuICAgICAgfSk7XG4gICAgICBtLm5leHQoVCk7XG4gICAgICBjb25zdCBfID0geChjZShxKHt9LCBNKSwge1xuICAgICAgICBpZ25vcmVMZWdhY3k6IGMoKVxuICAgICAgfSkpO1xuICAgICAgdHJ5IHtcbiAgICAgICAgeWllbGQgJG4oZS5sb2NhbFBhcnRpY2lwYW50LCBfLCB7XG4gICAgICAgICAgcmVsaWFibGU6ICEwLFxuICAgICAgICAgIHRvcGljOiBmXG4gICAgICAgIH0pO1xuICAgICAgfSBjYXRjaCAoZWUpIHtcbiAgICAgICAgTC5pbmZvKFwiY291bGQgbm90IHNlbmQgbWVzc2FnZSBpbiBsZWdhY3kgY2hhdCBmb3JtYXRcIiwgZWUpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIFQ7XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIGgubmV4dCghMSk7XG4gICAgfVxuICB9KTtcbiAgZnVuY3Rpb24gTygpIHtcbiAgICB1Lm5leHQoKSwgdS5jb21wbGV0ZSgpLCBtLmNvbXBsZXRlKCksIEllLmRlbGV0ZShlKSwgZS51bnJlZ2lzdGVyVGV4dFN0cmVhbUhhbmRsZXIobCk7XG4gIH1cbiAgcmV0dXJuIGUub25jZSh5LkRpc2Nvbm5lY3RlZCwgTyksIHtcbiAgICBtZXNzYWdlT2JzZXJ2YWJsZTogZyxcbiAgICBpc1NlbmRpbmdPYnNlcnZhYmxlOiBoLFxuICAgIHNlbmQ6IEVcbiAgfTtcbn1cbmZ1bmN0aW9uIGpzKCkge1xuICBjb25zdCBlID0gKG4pID0+IEgodGhpcywgbnVsbCwgZnVuY3Rpb24qICgpIHtcbiAgICBMLmluZm8oXCJTdGFydCBBdWRpbyBmb3Igcm9vbTogXCIsIG4pLCB5aWVsZCBuLnN0YXJ0QXVkaW8oKTtcbiAgfSk7XG4gIHJldHVybiB7IGNsYXNzTmFtZTogVShcInN0YXJ0LWF1ZGlvLWJ1dHRvblwiKSwgcm9vbUF1ZGlvUGxheWJhY2tBbGxvd2VkT2JzZXJ2YWJsZTogT28sIGhhbmRsZVN0YXJ0QXVkaW9QbGF5YmFjazogZSB9O1xufVxuZnVuY3Rpb24gQnMoKSB7XG4gIGNvbnN0IGUgPSAobikgPT4gSCh0aGlzLCBudWxsLCBmdW5jdGlvbiogKCkge1xuICAgIEwuaW5mbyhcIlN0YXJ0IFZpZGVvIGZvciByb29tOiBcIiwgbiksIHlpZWxkIG4uc3RhcnRWaWRlbygpO1xuICB9KTtcbiAgcmV0dXJuIHsgY2xhc3NOYW1lOiBVKFwic3RhcnQtYXVkaW8tYnV0dG9uXCIpLCByb29tVmlkZW9QbGF5YmFja0FsbG93ZWRPYnNlcnZhYmxlOiBBbywgaGFuZGxlU3RhcnRWaWRlb1BsYXliYWNrOiBlIH07XG59XG5mdW5jdGlvbiBWcygpIHtcbiAgcmV0dXJuIHsgY2xhc3NOYW1lOiBbVShcImJ1dHRvblwiKSwgVShcImNoYXQtdG9nZ2xlXCIpXS5qb2luKFwiIFwiKSB9O1xufVxuZnVuY3Rpb24gSHMoKSB7XG4gIHJldHVybiB7IGNsYXNzTmFtZTogW1UoXCJidXR0b25cIiksIFUoXCJmb2N1cy10b2dnbGUtYnV0dG9uXCIpXS5qb2luKFwiIFwiKSB9O1xufVxuZnVuY3Rpb24genMoKSB7XG4gIHJldHVybiB7IGNsYXNzTmFtZTogXCJsay1jbGVhci1waW4tYnV0dG9uIGxrLWJ1dHRvblwiIH07XG59XG5mdW5jdGlvbiBZcygpIHtcbiAgcmV0dXJuIHsgY2xhc3NOYW1lOiBcImxrLXJvb20tY29udGFpbmVyXCIgfTtcbn1cbmZ1bmN0aW9uIFl0KGUsIHQsIG4gPSAhMCkge1xuICBjb25zdCBpID0gW2UubG9jYWxQYXJ0aWNpcGFudCwgLi4uQXJyYXkuZnJvbShlLnJlbW90ZVBhcnRpY2lwYW50cy52YWx1ZXMoKSldLCBvID0gW107XG4gIHJldHVybiBpLmZvckVhY2goKHMpID0+IHtcbiAgICB0LmZvckVhY2goKGEpID0+IHtcbiAgICAgIGNvbnN0IGMgPSBBcnJheS5mcm9tKFxuICAgICAgICBzLnRyYWNrUHVibGljYXRpb25zLnZhbHVlcygpXG4gICAgICApLmZpbHRlcihcbiAgICAgICAgKHUpID0+IHUuc291cmNlID09PSBhICYmIC8vIGVpdGhlciByZXR1cm4gYWxsIG9yIG9ubHkgdGhlIG9uZXMgdGhhdCBhcmUgc3Vic2NyaWJlZFxuICAgICAgICAoIW4gfHwgdS50cmFjaylcbiAgICAgICkubWFwKCh1KSA9PiAoe1xuICAgICAgICBwYXJ0aWNpcGFudDogcyxcbiAgICAgICAgcHVibGljYXRpb246IHUsXG4gICAgICAgIHNvdXJjZTogdS5zb3VyY2VcbiAgICAgIH0pKTtcbiAgICAgIG8ucHVzaCguLi5jKTtcbiAgICB9KTtcbiAgfSksIHsgdHJhY2tSZWZlcmVuY2VzOiBvLCBwYXJ0aWNpcGFudHM6IGkgfTtcbn1cbmZ1bmN0aW9uIHF0KGUsIHQsIG4gPSAhMSkge1xuICBjb25zdCB7IHNvdXJjZXM6IHIsIGtpbmQ6IGksIG5hbWU6IG8gfSA9IHQ7XG4gIHJldHVybiBBcnJheS5mcm9tKGUudHJhY2tQdWJsaWNhdGlvbnMudmFsdWVzKCkpLmZpbHRlcihcbiAgICAoYSkgPT4gKCFyIHx8IHIuaW5jbHVkZXMoYS5zb3VyY2UpKSAmJiAoIWkgfHwgYS5raW5kID09PSBpKSAmJiAoIW8gfHwgYS50cmFja05hbWUgPT09IG8pICYmIC8vIGVpdGhlciByZXR1cm4gYWxsIG9yIG9ubHkgdGhlIG9uZXMgdGhhdCBhcmUgc3Vic2NyaWJlZFxuICAgICghbiB8fCBhLnRyYWNrKVxuICApLm1hcCgoYSkgPT4gKHtcbiAgICBwYXJ0aWNpcGFudDogZSxcbiAgICBwdWJsaWNhdGlvbjogYSxcbiAgICBzb3VyY2U6IGEuc291cmNlXG4gIH0pKTtcbn1cbmZ1bmN0aW9uIHFzKGUsIHQsIG4pIHtcbiAgdmFyIHIsIGk7XG4gIGNvbnN0IG8gPSAociA9IG4uYWRkaXRpb25hbFJvb21FdmVudHMpICE9IG51bGwgPyByIDogQW4sIHMgPSAoaSA9IG4ub25seVN1YnNjcmliZWQpICE9IG51bGwgPyBpIDogITAsIGEgPSBBcnJheS5mcm9tKFxuICAgICgvKiBAX19QVVJFX18gKi8gbmV3IFNldChbXG4gICAgICB5LlBhcnRpY2lwYW50Q29ubmVjdGVkLFxuICAgICAgeS5QYXJ0aWNpcGFudERpc2Nvbm5lY3RlZCxcbiAgICAgIHkuQ29ubmVjdGlvblN0YXRlQ2hhbmdlZCxcbiAgICAgIHkuTG9jYWxUcmFja1B1Ymxpc2hlZCxcbiAgICAgIHkuTG9jYWxUcmFja1VucHVibGlzaGVkLFxuICAgICAgeS5UcmFja1B1Ymxpc2hlZCxcbiAgICAgIHkuVHJhY2tVbnB1Ymxpc2hlZCxcbiAgICAgIHkuVHJhY2tTdWJzY3JpcHRpb25TdGF0dXNDaGFuZ2VkLFxuICAgICAgLi4ub1xuICAgIF0pKS52YWx1ZXMoKVxuICApO1xuICByZXR1cm4gcGUoZSwgLi4uYSkucGlwZShcbiAgICBBKCh1KSA9PiB7XG4gICAgICBjb25zdCBsID0gWXQodSwgdCwgcyk7XG4gICAgICByZXR1cm4gTC5kZWJ1ZyhgVHJhY2tSZWZlcmVuY2VbXSB3YXMgdXBkYXRlZC4gKGxlbmd0aCAke2wudHJhY2tSZWZlcmVuY2VzLmxlbmd0aH0pYCwgbCksIGw7XG4gICAgfSksXG4gICAgRChZdChlLCB0LCBzKSlcbiAgKTtcbn1cbmZ1bmN0aW9uIEtzKGUsIHQpIHtcbiAgcmV0dXJuIHhlKGUsIC4uLmNvKS5waXBlKFxuICAgIEEoKHIpID0+IHtcbiAgICAgIGNvbnN0IGkgPSBxdChyLCB0KTtcbiAgICAgIHJldHVybiBMLmRlYnVnKGBUcmFja1JlZmVyZW5jZVtdIHdhcyB1cGRhdGVkLiAobGVuZ3RoICR7aS5sZW5ndGh9KWAsIGkpLCBpO1xuICAgIH0pLFxuICAgIEQocXQoZSwgdCkpXG4gICk7XG59XG5mdW5jdGlvbiBObihlLCB0KSB7XG4gIHJldHVybiBuZXcgaygocikgPT4ge1xuICAgIGNvbnN0IGkgPSAoLi4ucykgPT4ge1xuICAgICAgci5uZXh0KHMpO1xuICAgIH07XG4gICAgcmV0dXJuIGUub24odCwgaSksICgpID0+IHtcbiAgICAgIGUub2ZmKHQsIGkpO1xuICAgIH07XG4gIH0pO1xufVxuZnVuY3Rpb24gR3MoZSkge1xuICByZXR1cm4gTm4oZSwgR3QuVHJhbnNjcmlwdGlvblJlY2VpdmVkKTtcbn1cbmZ1bmN0aW9uIFFzKGUpIHtcbiAgcmV0dXJuIE5uKGUsIEd0LlRpbWVTeW5jVXBkYXRlKS5waXBlKFxuICAgIEEoKFt0XSkgPT4gdClcbiAgKTtcbn1cbmZ1bmN0aW9uIEpzKGUsIHQgPSAxZTMpIHtcbiAgaWYgKGUgPT09IG51bGwpIHJldHVybiBGdCghMSk7XG4gIGNvbnN0IG4gPSB1dChlLCBcIm1vdXNlbW92ZVwiLCB7IHBhc3NpdmU6ICEwIH0pLnBpcGUoQSgoKSA9PiAhMCkpLCByID0gbi5waXBlKFxuICAgIExpKHtcbiAgICAgIGVhY2g6IHQsXG4gICAgICB3aXRoOiAoKSA9PiBqZShGdCghMSksIHIucGlwZShHaShuKSkpXG4gICAgfSksXG4gICAgWWkoKVxuICApO1xuICByZXR1cm4gcjtcbn1cbmZ1bmN0aW9uIFVvKGUsIHQpIHtcbiAgaWYgKHR5cGVvZiBsb2NhbFN0b3JhZ2UgPiBcInVcIikge1xuICAgIEwuZXJyb3IoXCJMb2NhbCBzdG9yYWdlIGlzIG5vdCBhdmFpbGFibGUuXCIpO1xuICAgIHJldHVybjtcbiAgfVxuICB0cnkge1xuICAgIGlmICh0KSB7XG4gICAgICBjb25zdCBuID0gT2JqZWN0LmZyb21FbnRyaWVzKFxuICAgICAgICBPYmplY3QuZW50cmllcyh0KS5maWx0ZXIoKFssIHJdKSA9PiByICE9PSBcIlwiKVxuICAgICAgKTtcbiAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKGUsIEpTT04uc3RyaW5naWZ5KG4pKTtcbiAgICB9XG4gIH0gY2F0Y2ggKG4pIHtcbiAgICBMLmVycm9yKGBFcnJvciBzZXR0aW5nIGl0ZW0gdG8gbG9jYWwgc3RvcmFnZTogJHtufWApO1xuICB9XG59XG5mdW5jdGlvbiBXbyhlKSB7XG4gIGlmICh0eXBlb2YgbG9jYWxTdG9yYWdlID4gXCJ1XCIpIHtcbiAgICBMLmVycm9yKFwiTG9jYWwgc3RvcmFnZSBpcyBub3QgYXZhaWxhYmxlLlwiKTtcbiAgICByZXR1cm47XG4gIH1cbiAgdHJ5IHtcbiAgICBjb25zdCB0ID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oZSk7XG4gICAgaWYgKCF0KSB7XG4gICAgICBMLndhcm4oYEl0ZW0gd2l0aCBrZXkgJHtlfSBkb2VzIG5vdCBleGlzdCBpbiBsb2NhbCBzdG9yYWdlLmApO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICByZXR1cm4gSlNPTi5wYXJzZSh0KTtcbiAgfSBjYXRjaCAodCkge1xuICAgIEwuZXJyb3IoYEVycm9yIGdldHRpbmcgaXRlbSBmcm9tIGxvY2FsIHN0b3JhZ2U6ICR7dH1gKTtcbiAgICByZXR1cm47XG4gIH1cbn1cbmZ1bmN0aW9uIGpvKGUpIHtcbiAgcmV0dXJuIHtcbiAgICBsb2FkOiAoKSA9PiBXbyhlKSxcbiAgICBzYXZlOiAodCkgPT4gVW8oZSwgdClcbiAgfTtcbn1cbnZhciBCbyA9IGAke09ufS11c2VyLWNob2ljZXNgLCBFZSA9IHtcbiAgdmlkZW9FbmFibGVkOiAhMCxcbiAgYXVkaW9FbmFibGVkOiAhMCxcbiAgdmlkZW9EZXZpY2VJZDogXCJkZWZhdWx0XCIsXG4gIGF1ZGlvRGV2aWNlSWQ6IFwiZGVmYXVsdFwiLFxuICB1c2VybmFtZTogXCJcIlxufSwgeyBsb2FkOiBWbywgc2F2ZTogSG8gfSA9IGpvKEJvKTtcbmZ1bmN0aW9uIFhzKGUsIHQgPSAhMSkge1xuICB0ICE9PSAhMCAmJiBIbyhlKTtcbn1cbmZ1bmN0aW9uIFpzKGUsIHQgPSAhMSkge1xuICB2YXIgbiwgciwgaSwgbywgcztcbiAgY29uc3QgYSA9IHtcbiAgICB2aWRlb0VuYWJsZWQ6IChuID0gZSA9PSBudWxsID8gdm9pZCAwIDogZS52aWRlb0VuYWJsZWQpICE9IG51bGwgPyBuIDogRWUudmlkZW9FbmFibGVkLFxuICAgIGF1ZGlvRW5hYmxlZDogKHIgPSBlID09IG51bGwgPyB2b2lkIDAgOiBlLmF1ZGlvRW5hYmxlZCkgIT0gbnVsbCA/IHIgOiBFZS5hdWRpb0VuYWJsZWQsXG4gICAgdmlkZW9EZXZpY2VJZDogKGkgPSBlID09IG51bGwgPyB2b2lkIDAgOiBlLnZpZGVvRGV2aWNlSWQpICE9IG51bGwgPyBpIDogRWUudmlkZW9EZXZpY2VJZCxcbiAgICBhdWRpb0RldmljZUlkOiAobyA9IGUgPT0gbnVsbCA/IHZvaWQgMCA6IGUuYXVkaW9EZXZpY2VJZCkgIT0gbnVsbCA/IG8gOiBFZS5hdWRpb0RldmljZUlkLFxuICAgIHVzZXJuYW1lOiAocyA9IGUgPT0gbnVsbCA/IHZvaWQgMCA6IGUudXNlcm5hbWUpICE9IG51bGwgPyBzIDogRWUudXNlcm5hbWVcbiAgfTtcbiAgaWYgKHQpXG4gICAgcmV0dXJuIGE7XG4gIHtcbiAgICBjb25zdCBjID0gVm8oKTtcbiAgICByZXR1cm4gcShxKHt9LCBhKSwgYyA/PyB7fSk7XG4gIH1cbn1cbnZhciBpdCA9IG51bGwsIG90ID0gbnVsbCwgem8gPSAwO1xuZnVuY3Rpb24gS3QoKSB7XG4gIHJldHVybiBpdCB8fCAoaXQgPSAvKiBAX19QVVJFX18gKi8gbmV3IE1hcCgpKSwgaXQ7XG59XG5mdW5jdGlvbiBZbygpIHtcbiAgcmV0dXJuIG90IHx8IChvdCA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgV2Vha01hcCgpKSwgb3Q7XG59XG5mdW5jdGlvbiBxbyhlLCB0KSB7XG4gIGNvbnN0IG4gPSBZbygpO1xuICBsZXQgciA9IG4uZ2V0KGUpO1xuICByZXR1cm4gciB8fCAociA9IGByb29tXyR7em8rK31gLCBuLnNldChlLCByKSksIGAke3J9OiR7dH1gO1xufVxuZnVuY3Rpb24gZWEoZSwgdCkge1xuICBjb25zdCBuID0gcW8oZSwgdCksIHIgPSBLdCgpLCBpID0gci5nZXQobik7XG4gIGlmIChpKVxuICAgIHJldHVybiBpO1xuICBjb25zdCBvID0gbmV3IHRlKCk7XG4gIGxldCBzID0gW107XG4gIGNvbnN0IGEgPSBcImxrLnNlZ21lbnRfaWRcIiwgYyA9IG8ucGlwZShcbiAgICBRaSh7XG4gICAgICBzdWJzY3JpYmU6ICgpID0+IHtcbiAgICAgICAgZS5yZWdpc3RlclRleHRTdHJlYW1IYW5kbGVyKHQsICh1LCBsKSA9PiBIKHRoaXMsIG51bGwsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgdmFyIGY7XG4gICAgICAgICAgY29uc3QgdiA9IEplKHUpLnBpcGUoXG4gICAgICAgICAgICBsdCgobSwgcCkgPT4gbSArIHAsIFwiXCIpXG4gICAgICAgICAgKSwgZCA9ICEhKChmID0gdS5pbmZvLmF0dHJpYnV0ZXMpICE9IG51bGwgJiYgZlthXSk7XG4gICAgICAgICAgdi5zdWJzY3JpYmUoKG0pID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHAgPSBzLmZpbmRJbmRleChcbiAgICAgICAgICAgICAgKGcpID0+IHtcbiAgICAgICAgICAgICAgICB2YXIgaCwgeDtcbiAgICAgICAgICAgICAgICByZXR1cm4gZy5zdHJlYW1JbmZvLmlkID09PSB1LmluZm8uaWQgfHwgZCAmJiAoKGggPSBnLnN0cmVhbUluZm8uYXR0cmlidXRlcykgPT0gbnVsbCA/IHZvaWQgMCA6IGhbYV0pID09PSAoKHggPSB1LmluZm8uYXR0cmlidXRlcykgPT0gbnVsbCA/IHZvaWQgMCA6IHhbYV0pO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgcCAhPT0gLTEgPyAoc1twXSA9IGNlKHEoe30sIHNbcF0pLCB7XG4gICAgICAgICAgICAgIHRleHQ6IG1cbiAgICAgICAgICAgIH0pLCBvLm5leHQoWy4uLnNdKSkgOiAocy5wdXNoKHtcbiAgICAgICAgICAgICAgdGV4dDogbSxcbiAgICAgICAgICAgICAgcGFydGljaXBhbnRJbmZvOiBsLFxuICAgICAgICAgICAgICBzdHJlYW1JbmZvOiB1LmluZm9cbiAgICAgICAgICAgIH0pLCBvLm5leHQoWy4uLnNdKSk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0pKTtcbiAgICAgIH0sXG4gICAgICBmaW5hbGl6ZTogKCkgPT4ge1xuICAgICAgICBlLnVucmVnaXN0ZXJUZXh0U3RyZWFtSGFuZGxlcih0KTtcbiAgICAgIH1cbiAgICB9KSxcbiAgICBLaSgpXG4gICk7XG4gIHJldHVybiByLnNldChuLCBjKSwgZS5vbih5LkRpc2Nvbm5lY3RlZCwgKCkgPT4ge1xuICAgIEt0KCkuZGVsZXRlKG4pLCBzID0gW10sIG8ubmV4dChbXSk7XG4gIH0pLCBjO1xufVxuZnVuY3Rpb24gRm4oZSwgdCkge1xuICBpZiAodC5tc2cgPT09IFwic2hvd19jaGF0XCIpXG4gICAgcmV0dXJuIHsgLi4uZSwgc2hvd0NoYXQ6ICEwLCB1bnJlYWRNZXNzYWdlczogMCB9O1xuICBpZiAodC5tc2cgPT09IFwiaGlkZV9jaGF0XCIpXG4gICAgcmV0dXJuIHsgLi4uZSwgc2hvd0NoYXQ6ICExIH07XG4gIGlmICh0Lm1zZyA9PT0gXCJ0b2dnbGVfY2hhdFwiKSB7XG4gICAgY29uc3QgbiA9IHsgLi4uZSwgc2hvd0NoYXQ6ICFlLnNob3dDaGF0IH07XG4gICAgcmV0dXJuIG4uc2hvd0NoYXQgPT09ICEwICYmIChuLnVucmVhZE1lc3NhZ2VzID0gMCksIG47XG4gIH0gZWxzZSByZXR1cm4gdC5tc2cgPT09IFwidW5yZWFkX21zZ1wiID8geyAuLi5lLCB1bnJlYWRNZXNzYWdlczogdC5jb3VudCB9IDogdC5tc2cgPT09IFwidG9nZ2xlX3NldHRpbmdzXCIgPyB7IC4uLmUsIHNob3dTZXR0aW5nczogIWUuc2hvd1NldHRpbmdzIH0gOiB7IC4uLmUgfTtcbn1cbmZ1bmN0aW9uIFVuKGUsIHQpIHtcbiAgcmV0dXJuIHQubXNnID09PSBcInNldF9waW5cIiA/IFt0LnRyYWNrUmVmZXJlbmNlXSA6IHQubXNnID09PSBcImNsZWFyX3BpblwiID8gW10gOiB7IC4uLmUgfTtcbn1cbmNvbnN0IFduID0gSS5jcmVhdGVDb250ZXh0KHZvaWQgMCk7XG5mdW5jdGlvbiB0YSgpIHtcbiAgY29uc3QgZSA9IEkudXNlQ29udGV4dChXbik7XG4gIGlmICghZSlcbiAgICB0aHJvdyBFcnJvcihcIlRyaWVkIHRvIGFjY2VzcyBMYXlvdXRDb250ZXh0IGNvbnRleHQgb3V0c2lkZSBhIExheW91dENvbnRleHRQcm92aWRlciBwcm92aWRlci5cIik7XG4gIHJldHVybiBlO1xufVxuZnVuY3Rpb24gbmEoZSkge1xuICBjb25zdCB0ID0gS28oKTtcbiAgaWYgKGUgPz8gKGUgPSB0KSwgIWUpXG4gICAgdGhyb3cgRXJyb3IoXCJUcmllZCB0byBhY2Nlc3MgTGF5b3V0Q29udGV4dCBjb250ZXh0IG91dHNpZGUgYSBMYXlvdXRDb250ZXh0UHJvdmlkZXIgcHJvdmlkZXIuXCIpO1xuICByZXR1cm4gZTtcbn1cbmZ1bmN0aW9uIHJhKCkge1xuICBjb25zdCBbZSwgdF0gPSBJLnVzZVJlZHVjZXIoVW4sIF9uKSwgW24sIHJdID0gSS51c2VSZWR1Y2VyKEZuLCBMbik7XG4gIHJldHVybiB7XG4gICAgcGluOiB7IGRpc3BhdGNoOiB0LCBzdGF0ZTogZSB9LFxuICAgIHdpZGdldDogeyBkaXNwYXRjaDogciwgc3RhdGU6IG4gfVxuICB9O1xufVxuZnVuY3Rpb24gaWEoZSkge1xuICBjb25zdCBbdCwgbl0gPSBJLnVzZVJlZHVjZXIoVW4sIF9uKSwgW3IsIGldID0gSS51c2VSZWR1Y2VyKEZuLCBMbik7XG4gIHJldHVybiBlID8/IHtcbiAgICBwaW46IHsgZGlzcGF0Y2g6IG4sIHN0YXRlOiB0IH0sXG4gICAgd2lkZ2V0OiB7IGRpc3BhdGNoOiBpLCBzdGF0ZTogciB9XG4gIH07XG59XG5mdW5jdGlvbiBLbygpIHtcbiAgcmV0dXJuIEkudXNlQ29udGV4dChXbik7XG59XG5jb25zdCBqbiA9IEkuY3JlYXRlQ29udGV4dChcbiAgdm9pZCAwXG4pO1xuZnVuY3Rpb24gb2EoKSB7XG4gIGNvbnN0IGUgPSBJLnVzZUNvbnRleHQoam4pO1xuICBpZiAoIWUpXG4gICAgdGhyb3cgRXJyb3IoXCJ0cmllZCB0byBhY2Nlc3MgdHJhY2sgY29udGV4dCBvdXRzaWRlIG9mIHRyYWNrIGNvbnRleHQgcHJvdmlkZXJcIik7XG4gIHJldHVybiBlO1xufVxuZnVuY3Rpb24gQm4oKSB7XG4gIHJldHVybiBJLnVzZUNvbnRleHQoam4pO1xufVxuZnVuY3Rpb24gc2EoZSkge1xuICBjb25zdCB0ID0gQm4oKSwgbiA9IGUgPz8gdDtcbiAgaWYgKCFuKVxuICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgIFwiTm8gVHJhY2tSZWYsIG1ha2Ugc3VyZSB5b3UgYXJlIGluc2lkZSBhIFRyYWNrUmVmQ29udGV4dCBvciBwYXNzIHRoZSBUcmFja1JlZiBleHBsaWNpdGx5XCJcbiAgICApO1xuICByZXR1cm4gbjtcbn1cbmNvbnN0IFZuID0gSS5jcmVhdGVDb250ZXh0KHZvaWQgMCk7XG5mdW5jdGlvbiBhYSgpIHtcbiAgY29uc3QgZSA9IEkudXNlQ29udGV4dChWbik7XG4gIGlmICghZSlcbiAgICB0aHJvdyBFcnJvcihcInRyaWVkIHRvIGFjY2VzcyBwYXJ0aWNpcGFudCBjb250ZXh0IG91dHNpZGUgb2YgcGFydGljaXBhbnQgY29udGV4dCBwcm92aWRlclwiKTtcbiAgcmV0dXJuIGU7XG59XG5mdW5jdGlvbiBHbygpIHtcbiAgcmV0dXJuIEkudXNlQ29udGV4dChWbik7XG59XG5mdW5jdGlvbiBjYShlKSB7XG4gIGNvbnN0IHQgPSBHbygpLCBuID0gQm4oKSwgciA9IGUgPz8gdCA/PyAobiA9PSBudWxsID8gdm9pZCAwIDogbi5wYXJ0aWNpcGFudCk7XG4gIGlmICghcilcbiAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICBcIk5vIHBhcnRpY2lwYW50IHByb3ZpZGVkLCBtYWtlIHN1cmUgeW91IGFyZSBpbnNpZGUgYSBwYXJ0aWNpcGFudCBjb250ZXh0IG9yIHBhc3MgdGhlIHBhcnRpY2lwYW50IGV4cGxpY2l0bHlcIlxuICAgICk7XG4gIHJldHVybiByO1xufVxuY29uc3QgSG4gPSBJLmNyZWF0ZUNvbnRleHQodm9pZCAwKTtcbmZ1bmN0aW9uIHVhKCkge1xuICBjb25zdCBlID0gSS51c2VDb250ZXh0KEhuKTtcbiAgaWYgKCFlKVxuICAgIHRocm93IEVycm9yKFwidHJpZWQgdG8gYWNjZXNzIHJvb20gY29udGV4dCBvdXRzaWRlIG9mIGxpdmVraXQgcm9vbSBjb21wb25lbnRcIik7XG4gIHJldHVybiBlO1xufVxuZnVuY3Rpb24gUW8oKSB7XG4gIHJldHVybiBJLnVzZUNvbnRleHQoSG4pO1xufVxuZnVuY3Rpb24gbGEoZSkge1xuICBjb25zdCB0ID0gUW8oKSwgbiA9IGUgPz8gdDtcbiAgaWYgKCFuKVxuICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgIFwiTm8gcm9vbSBwcm92aWRlZCwgbWFrZSBzdXJlIHlvdSBhcmUgaW5zaWRlIGEgUm9vbSBjb250ZXh0IG9yIHBhc3MgdGhlIHJvb20gZXhwbGljaXRseVwiXG4gICAgKTtcbiAgcmV0dXJuIG47XG59XG5jb25zdCB6biA9IEkuY3JlYXRlQ29udGV4dCh2b2lkIDApO1xuZnVuY3Rpb24gZmEoKSB7XG4gIGNvbnN0IGUgPSBJLnVzZUNvbnRleHQoem4pO1xuICBpZiAoIWUpXG4gICAgdGhyb3cgRXJyb3IoXCJ0cmllZCB0byBhY2Nlc3Mgc2Vzc2lvbiBjb250ZXh0IG91dHNpZGUgb2YgU2Vzc2lvblByb3ZpZGVyIGNvbXBvbmVudFwiKTtcbiAgcmV0dXJuIGU7XG59XG5mdW5jdGlvbiBKbygpIHtcbiAgcmV0dXJuIEkudXNlQ29udGV4dCh6bik7XG59XG5mdW5jdGlvbiBkYShlKSB7XG4gIGNvbnN0IHQgPSBKbygpLCBuID0gZSA/PyB0O1xuICBpZiAoIW4pXG4gICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgXCJObyBzZXNzaW9uIHByb3ZpZGVkLCBtYWtlIHN1cmUgeW91IGFyZSBpbnNpZGUgYSBTZXNzaW9uIGNvbnRleHQgb3IgcGFzcyB0aGUgc2Vzc2lvbiBleHBsaWNpdGx5XCJcbiAgICApO1xuICByZXR1cm4gbjtcbn1cbmNvbnN0IFhvID0gSS5jcmVhdGVDb250ZXh0KHZvaWQgMCk7XG5mdW5jdGlvbiBwYShlKSB7XG4gIGNvbnN0IHQgPSBJLnVzZUNvbnRleHQoWG8pO1xuICBpZiAoZSA9PT0gITApIHtcbiAgICBpZiAodClcbiAgICAgIHJldHVybiB0O1xuICAgIHRocm93IEVycm9yKFwidHJpZWQgdG8gYWNjZXNzIGZlYXR1cmUgY29udGV4dCwgYnV0IG5vbmUgaXMgcHJlc2VudFwiKTtcbiAgfVxuICByZXR1cm4gdDtcbn1cbmV4cG9ydCB7XG4gIFhzIGFzICQsXG4gIGJzIGFzIEEsXG4gIEdvIGFzIEIsXG4gIF9vIGFzIEMsXG4gIFVzIGFzIEQsXG4gIE9zIGFzIEUsXG4gIG5hIGFzIEYsXG4gIGZzIGFzIEcsXG4gIEFzIGFzIEgsXG4gIF9zIGFzIEksXG4gIHhzIGFzIEosXG4gIFNzIGFzIEssXG4gIFhvIGFzIEwsXG4gIGdzIGFzIE0sXG4gIGpzIGFzIE4sXG4gIEJzIGFzIE8sXG4gIFZzIGFzIFAsXG4gIE5zIGFzIFEsXG4gIEhuIGFzIFIsXG4gIElzIGFzIFMsXG4gIE1zIGFzIFQsXG4gIGhvIGFzIFUsXG4gIHFzIGFzIFYsXG4gIHZzIGFzIFcsXG4gIHp0IGFzIFgsXG4gIHlzIGFzIFksXG4gIFdzIGFzIFosXG4gIFpzIGFzIF8sXG4gIHRhIGFzIGEsXG4gIEVzIGFzIGEwLFxuICBCIGFzIGExLFxuICBLcyBhcyBhMixcbiAgUXMgYXMgYTMsXG4gIEdzIGFzIGE0LFxuICBocyBhcyBhNSxcbiAgcHMgYXMgYTYsXG4gIExzIGFzIGE3LFxuICBwbyBhcyBhOCxcbiAgQ3MgYXMgYTksXG4gIGFhIGFzIGFBLFxuICBmYSBhcyBhQixcbiAgb2EgYXMgYUMsXG4gIGVhIGFzIGFhLFxuICBNbyBhcyBhYixcbiAgSm8gYXMgYWMsXG4gIGRhIGFzIGFkLFxuICBCbiBhcyBhZSxcbiAgV24gYXMgYWYsXG4gIEZzIGFzIGFnLFxuICBlcyBhcyBhaCxcbiAgSHIgYXMgYWksXG4gIFZuIGFzIGFqLFxuICBqbiBhcyBhayxcbiAgcGEgYXMgYWwsXG4gIEpzIGFzIGFtLFxuICBycyBhcyBhbixcbiAgaWEgYXMgYW8sXG4gIGNzIGFzIGFwLFxuICBhcyBhcyBhcSxcbiAgem4gYXMgYXIsXG4gIG9zIGFzIGFzLFxuICBzcyBhcyBhdCxcbiAgZHMgYXMgYXUsXG4gIHJhIGFzIGF2LFxuICB0cyBhcyBhdyxcbiAgaXMgYXMgYXgsXG4gIHVzIGFzIGF5LFxuICBscyBhcyBheixcbiAgenMgYXMgYixcbiAgY2EgYXMgYyxcbiAgJHMgYXMgZCxcbiAgd3MgYXMgZSxcbiAgdWEgYXMgZixcbiAgRG8gYXMgZyxcbiAgRHMgYXMgaCxcbiAgc2EgYXMgaSxcbiAgS28gYXMgaixcbiAgSHMgYXMgayxcbiAgTCBhcyBsLFxuICBucyBhcyBtLFxuICBsbyBhcyBuLFxuICBJbyBhcyBvLFxuICBOIGFzIHAsXG4gIFBzIGFzIHEsXG4gIE9vIGFzIHIsXG4gIFlzIGFzIHMsXG4gIERuIGFzIHQsXG4gIGxhIGFzIHUsXG4gIGtzIGFzIHYsXG4gIFFvIGFzIHcsXG4gIFRzIGFzIHgsXG4gIFJzIGFzIHksXG4gIG1zIGFzIHpcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jb250ZXh0cy1Dc08xUVozci5tanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@livekit/components-react/dist/contexts-CsO1QZ3r.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@livekit/components-react/dist/hooks-yU-srrIO.mjs":
/*!************************************************************************!*\
  !*** ./node_modules/@livekit/components-react/dist/hooks-yU-srrIO.mjs ***!
  \************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   $: () => (/* binding */ an),\n/* harmony export */   A: () => (/* binding */ In),\n/* harmony export */   B: () => (/* binding */ Vn),\n/* harmony export */   C: () => (/* binding */ Oe),\n/* harmony export */   D: () => (/* binding */ wn),\n/* harmony export */   E: () => (/* binding */ An),\n/* harmony export */   F: () => (/* binding */ Bt),\n/* harmony export */   G: () => (/* binding */ Se),\n/* harmony export */   H: () => (/* binding */ jt),\n/* harmony export */   I: () => (/* binding */ xn),\n/* harmony export */   J: () => (/* binding */ Un),\n/* harmony export */   K: () => (/* binding */ Wt),\n/* harmony export */   L: () => (/* binding */ qn),\n/* harmony export */   M: () => (/* binding */ pe),\n/* harmony export */   N: () => (/* binding */ jn),\n/* harmony export */   O: () => (/* binding */ Gt),\n/* harmony export */   P: () => (/* binding */ $n),\n/* harmony export */   Q: () => (/* binding */ Xn),\n/* harmony export */   R: () => (/* binding */ dn),\n/* harmony export */   S: () => (/* binding */ Ie),\n/* harmony export */   T: () => (/* binding */ ts),\n/* harmony export */   U: () => (/* binding */ ss),\n/* harmony export */   V: () => (/* binding */ re),\n/* harmony export */   W: () => (/* binding */ rn),\n/* harmony export */   X: () => (/* binding */ os),\n/* harmony export */   Y: () => (/* binding */ on),\n/* harmony export */   Z: () => (/* binding */ rs),\n/* harmony export */   _: () => (/* binding */ as),\n/* harmony export */   a: () => (/* binding */ te),\n/* harmony export */   a0: () => (/* binding */ cn),\n/* harmony export */   a1: () => (/* binding */ cs),\n/* harmony export */   a2: () => (/* binding */ pn),\n/* harmony export */   a3: () => (/* binding */ is),\n/* harmony export */   a4: () => (/* binding */ us),\n/* harmony export */   a5: () => (/* binding */ vn),\n/* harmony export */   a6: () => (/* binding */ ls),\n/* harmony export */   b: () => (/* binding */ Jn),\n/* harmony export */   c: () => (/* binding */ Rn),\n/* harmony export */   d: () => (/* binding */ Dn),\n/* harmony export */   e: () => (/* binding */ Nn),\n/* harmony export */   f: () => (/* binding */ zn),\n/* harmony export */   g: () => (/* binding */ Wn),\n/* harmony export */   h: () => (/* binding */ Kn),\n/* harmony export */   i: () => (/* binding */ Ln),\n/* harmony export */   j: () => (/* binding */ D),\n/* harmony export */   k: () => (/* binding */ Qn),\n/* harmony export */   l: () => (/* binding */ Hn),\n/* harmony export */   m: () => (/* binding */ es),\n/* harmony export */   n: () => (/* binding */ On),\n/* harmony export */   o: () => (/* binding */ Fn),\n/* harmony export */   p: () => (/* binding */ Gn),\n/* harmony export */   q: () => (/* binding */ qt),\n/* harmony export */   r: () => (/* binding */ zt),\n/* harmony export */   s: () => (/* binding */ ns),\n/* harmony export */   t: () => (/* binding */ Yn),\n/* harmony export */   u: () => (/* binding */ Pn),\n/* harmony export */   v: () => (/* binding */ Bn),\n/* harmony export */   w: () => (/* binding */ Kt),\n/* harmony export */   x: () => (/* binding */ Zn),\n/* harmony export */   y: () => (/* binding */ _n),\n/* harmony export */   z: () => (/* binding */ kn)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var _contexts_CsO1QZ3r_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./contexts-CsO1QZ3r.mjs */ \"(ssr)/./node_modules/@livekit/components-react/dist/contexts-CsO1QZ3r.mjs\");\n/* harmony import */ var _room_Bb6uLxS5_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./room-Bb6uLxS5.mjs */ \"(ssr)/./node_modules/@livekit/components-react/dist/room-Bb6uLxS5.mjs\");\n/* harmony import */ var livekit_client__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! livekit-client */ \"(ssr)/./node_modules/livekit-client/dist/livekit-client.esm.mjs\");\n\n\n\n\n\nconst xt = (e) => {\n  const n = react__WEBPACK_IMPORTED_MODULE_0__.useRef(e);\n  return react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    n.current = e;\n  }), n;\n};\nfunction Ut(e, n) {\n  const t = Vt(), r = xt(n);\n  return react__WEBPACK_IMPORTED_MODULE_0__.useLayoutEffect(() => {\n    let o = !1;\n    const c = e.current;\n    if (!c) return;\n    function a(i, u) {\n      o || r.current(i, u);\n    }\n    return t == null || t.subscribe(c, a), () => {\n      o = !0, t == null || t.unsubscribe(c, a);\n    };\n  }, [e.current, t, r]), t == null ? void 0 : t.observer;\n}\nfunction Ht() {\n  let e = !1, n = [];\n  const t = /* @__PURE__ */ new Map();\n  if (typeof window > \"u\")\n    return;\n  const r = new ResizeObserver((o, c) => {\n    n = n.concat(o), e || window.requestAnimationFrame(() => {\n      const a = /* @__PURE__ */ new Set();\n      for (let i = 0; i < n.length; i++) {\n        if (a.has(n[i].target)) continue;\n        a.add(n[i].target);\n        const u = t.get(n[i].target);\n        u == null || u.forEach((p) => p(n[i], c));\n      }\n      n = [], e = !1;\n    }), e = !0;\n  });\n  return {\n    observer: r,\n    subscribe(o, c) {\n      r.observe(o);\n      const a = t.get(o) ?? [];\n      a.push(c), t.set(o, a);\n    },\n    unsubscribe(o, c) {\n      const a = t.get(o) ?? [];\n      if (a.length === 1) {\n        r.unobserve(o), t.delete(o);\n        return;\n      }\n      const i = a.indexOf(c);\n      i !== -1 && a.splice(i, 1), t.set(o, a);\n    }\n  };\n}\nlet ce;\nconst Vt = () => ce || (ce = Ht()), qt = (e) => {\n  const [n, t] = react__WEBPACK_IMPORTED_MODULE_0__.useState({ width: 0, height: 0 });\n  react__WEBPACK_IMPORTED_MODULE_0__.useLayoutEffect(() => {\n    if (e.current) {\n      const { width: o, height: c } = e.current.getBoundingClientRect();\n      t({ width: o, height: c });\n    }\n  }, [e.current]);\n  const r = react__WEBPACK_IMPORTED_MODULE_0__.useCallback(\n    (o) => t(o.contentRect),\n    []\n  );\n  return Ut(e, r), n;\n};\nfunction D(e, n, t = !0) {\n  const [r, o] = react__WEBPACK_IMPORTED_MODULE_0__.useState(n);\n  return react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    if (t && o(n), typeof window > \"u\" || !e) return;\n    const c = e.subscribe(o);\n    return () => c.unsubscribe();\n  }, [e, t]), r;\n}\nfunction kn(e) {\n  const n = (c) => typeof window < \"u\" ? window.matchMedia(c).matches : !1, [t, r] = react__WEBPACK_IMPORTED_MODULE_0__.useState(n(e));\n  function o() {\n    r(n(e));\n  }\n  return react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    const c = window.matchMedia(e);\n    return o(), c.addListener ? c.addListener(o) : c.addEventListener(\"change\", o), () => {\n      c.removeListener ? c.removeListener(o) : c.removeEventListener(\"change\", o);\n    };\n  }, [e]), t;\n}\nfunction wn(e) {\n  const n = (0,_contexts_CsO1QZ3r_mjs__WEBPACK_IMPORTED_MODULE_2__.u)(e), t = react__WEBPACK_IMPORTED_MODULE_0__.useCallback(async () => {\n    await n.startAudio();\n  }, [n]), r = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(\n    () => (0,_contexts_CsO1QZ3r_mjs__WEBPACK_IMPORTED_MODULE_2__.r)(n),\n    [n]\n  ), { canPlayAudio: o } = D(r, {\n    canPlayAudio: n.canPlaybackAudio\n  });\n  return { canPlayAudio: o, startAudio: t };\n}\nfunction Pn(e) {\n  const { state: n, dispatch: t } = (0,_contexts_CsO1QZ3r_mjs__WEBPACK_IMPORTED_MODULE_2__.a)().pin;\n  return { buttonProps: react__WEBPACK_IMPORTED_MODULE_0__.useMemo(() => {\n    const { className: o } = (0,_contexts_CsO1QZ3r_mjs__WEBPACK_IMPORTED_MODULE_2__.b)();\n    return (0,_room_Bb6uLxS5_mjs__WEBPACK_IMPORTED_MODULE_3__.m)(e, {\n      className: o,\n      disabled: !(n != null && n.length),\n      onClick: () => {\n        t && t({ msg: \"clear_pin\" });\n      }\n    });\n  }, [e, t, n]) };\n}\nfunction Ln(e = {}) {\n  const n = (0,_contexts_CsO1QZ3r_mjs__WEBPACK_IMPORTED_MODULE_2__.c)(e.participant), { className: t, connectionQualityObserver: r } = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(\n    () => (0,_contexts_CsO1QZ3r_mjs__WEBPACK_IMPORTED_MODULE_2__.d)(n),\n    [n]\n  ), o = D(r, n.connectionQuality);\n  return { className: t, quality: o };\n}\nfunction te(e) {\n  const n = (0,_contexts_CsO1QZ3r_mjs__WEBPACK_IMPORTED_MODULE_2__.u)(e), t = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(() => (0,_contexts_CsO1QZ3r_mjs__WEBPACK_IMPORTED_MODULE_2__.e)(n), [n]);\n  return D(t, n.state);\n}\nfunction An(e, n) {\n  const t = typeof e == \"function\" ? e : n, r = typeof e == \"string\" ? e : void 0, o = (0,_contexts_CsO1QZ3r_mjs__WEBPACK_IMPORTED_MODULE_2__.f)(), { send: c, messageObservable: a, isSendingObservable: i } = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(\n    () => (0,_contexts_CsO1QZ3r_mjs__WEBPACK_IMPORTED_MODULE_2__.g)(o, r, t),\n    [o, r, t]\n  ), u = D(a, void 0), p = D(i, !1);\n  return {\n    message: u,\n    send: c,\n    isSending: p\n  };\n}\nfunction Rn(e) {\n  const n = (0,_contexts_CsO1QZ3r_mjs__WEBPACK_IMPORTED_MODULE_2__.f)(), t = te(n);\n  return { buttonProps: react__WEBPACK_IMPORTED_MODULE_0__.useMemo(() => {\n    const { className: o, disconnect: c } = (0,_contexts_CsO1QZ3r_mjs__WEBPACK_IMPORTED_MODULE_2__.h)(n);\n    return (0,_room_Bb6uLxS5_mjs__WEBPACK_IMPORTED_MODULE_3__.m)(e, {\n      className: o,\n      onClick: () => c(e.stopTracks ?? !0),\n      disabled: t === livekit_client__WEBPACK_IMPORTED_MODULE_1__.ConnectionState.Disconnected\n    });\n  }, [n, e, t]) };\n}\nfunction Bt(e) {\n  if (e.publication instanceof livekit_client__WEBPACK_IMPORTED_MODULE_1__.LocalTrackPublication) {\n    const n = e.publication.track;\n    if (n) {\n      const { facingMode: t } = (0,livekit_client__WEBPACK_IMPORTED_MODULE_1__.facingModeFromLocalTrack)(n);\n      return t;\n    }\n  }\n  return \"undefined\";\n}\nfunction Dn({ trackRef: e, props: n }) {\n  const t = (0,_contexts_CsO1QZ3r_mjs__WEBPACK_IMPORTED_MODULE_2__.i)(e), r = (0,_contexts_CsO1QZ3r_mjs__WEBPACK_IMPORTED_MODULE_2__.j)(), { className: o } = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(() => (0,_contexts_CsO1QZ3r_mjs__WEBPACK_IMPORTED_MODULE_2__.k)(), []), c = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(() => (0,_contexts_CsO1QZ3r_mjs__WEBPACK_IMPORTED_MODULE_2__.m)(t, r == null ? void 0 : r.pin.state), [t, r == null ? void 0 : r.pin.state]);\n  return { mergedProps: react__WEBPACK_IMPORTED_MODULE_0__.useMemo(\n    () => (0,_room_Bb6uLxS5_mjs__WEBPACK_IMPORTED_MODULE_3__.m)(n, {\n      className: o,\n      onClick: (i) => {\n        var u, p, h, d, l;\n        (u = n.onClick) == null || u.call(n, i), c ? (h = r == null ? void 0 : (p = r.pin).dispatch) == null || h.call(p, {\n          msg: \"clear_pin\"\n        }) : (l = r == null ? void 0 : (d = r.pin).dispatch) == null || l.call(d, {\n          msg: \"set_pin\",\n          trackReference: t\n        });\n      }\n    }),\n    [n, o, t, c, r == null ? void 0 : r.pin]\n  ), inFocus: c };\n}\nfunction On(e, n, t = {}) {\n  const r = t.gridLayouts ?? _contexts_CsO1QZ3r_mjs__WEBPACK_IMPORTED_MODULE_2__.G, { width: o, height: c } = qt(e), a = (0,_contexts_CsO1QZ3r_mjs__WEBPACK_IMPORTED_MODULE_2__.n)(r, n, o, c);\n  return react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    e.current && a && (e.current.style.setProperty(\"--lk-col-count\", a == null ? void 0 : a.columns.toString()), e.current.style.setProperty(\"--lk-row-count\", a == null ? void 0 : a.rows.toString()));\n  }, [e, a]), {\n    layout: a,\n    containerWidth: o,\n    containerHeight: c\n  };\n}\nfunction Se(e, n = {}) {\n  var i, u;\n  const t = typeof e == \"string\" ? n.participant : e.participant, r = (0,_contexts_CsO1QZ3r_mjs__WEBPACK_IMPORTED_MODULE_2__.c)(t), o = typeof e == \"string\" ? { participant: r, source: e } : e, [c, a] = react__WEBPACK_IMPORTED_MODULE_0__.useState(\n    !!((i = o.publication) != null && i.isMuted || (u = r.getTrackPublication(o.source)) != null && u.isMuted)\n  );\n  return react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    const p = (0,_contexts_CsO1QZ3r_mjs__WEBPACK_IMPORTED_MODULE_2__.o)(o).subscribe(a);\n    return () => p.unsubscribe();\n  }, [(0,_contexts_CsO1QZ3r_mjs__WEBPACK_IMPORTED_MODULE_2__.p)(o)]), c;\n}\nfunction jt(e) {\n  const n = (0,_contexts_CsO1QZ3r_mjs__WEBPACK_IMPORTED_MODULE_2__.c)(e), t = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(() => (0,_contexts_CsO1QZ3r_mjs__WEBPACK_IMPORTED_MODULE_2__.q)(n), [n]);\n  return D(t, n.isSpeaking);\n}\nfunction Oe(e = {}) {\n  const n = (0,_contexts_CsO1QZ3r_mjs__WEBPACK_IMPORTED_MODULE_2__.u)(e.room), [t, r] = react__WEBPACK_IMPORTED_MODULE_0__.useState(n.localParticipant), [o, c] = react__WEBPACK_IMPORTED_MODULE_0__.useState(\n    t.isMicrophoneEnabled\n  ), [a, i] = react__WEBPACK_IMPORTED_MODULE_0__.useState(t.isCameraEnabled), [u, p] = react__WEBPACK_IMPORTED_MODULE_0__.useState(\n    t.isScreenShareEnabled\n  ), [h, d] = react__WEBPACK_IMPORTED_MODULE_0__.useState(\n    t.lastMicrophoneError\n  ), [l, v] = react__WEBPACK_IMPORTED_MODULE_0__.useState(t.lastCameraError), [C, k] = react__WEBPACK_IMPORTED_MODULE_0__.useState(\n    void 0\n  ), [A, w] = react__WEBPACK_IMPORTED_MODULE_0__.useState(void 0), O = (R) => {\n    i(R.isCameraEnabled), c(R.isMicrophoneEnabled), p(R.isScreenShareEnabled), w(R.cameraTrack), k(R.microphoneTrack), d(R.participant.lastMicrophoneError), v(R.participant.lastCameraError), r(R.participant);\n  };\n  return react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    const R = (0,_contexts_CsO1QZ3r_mjs__WEBPACK_IMPORTED_MODULE_2__.t)(n.localParticipant).subscribe(O);\n    return () => R.unsubscribe();\n  }, [n]), {\n    isMicrophoneEnabled: o,\n    isScreenShareEnabled: u,\n    isCameraEnabled: a,\n    microphoneTrack: C,\n    cameraTrack: A,\n    lastMicrophoneError: h,\n    lastCameraError: l,\n    localParticipant: t\n  };\n}\nfunction In() {\n  const e = (0,_contexts_CsO1QZ3r_mjs__WEBPACK_IMPORTED_MODULE_2__.f)(), n = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(\n    () => (0,_contexts_CsO1QZ3r_mjs__WEBPACK_IMPORTED_MODULE_2__.v)(e.localParticipant),\n    [e]\n  );\n  return D(n, e.localParticipant.permissions);\n}\nfunction Nn({\n  kind: e,\n  room: n,\n  track: t,\n  requestPermissions: r,\n  onError: o\n}) {\n  const c = (0,_contexts_CsO1QZ3r_mjs__WEBPACK_IMPORTED_MODULE_2__.w)(), a = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(() => n ?? c ?? new livekit_client__WEBPACK_IMPORTED_MODULE_1__.Room(), [n, c]), i = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(\n    () => (0,_contexts_CsO1QZ3r_mjs__WEBPACK_IMPORTED_MODULE_2__.x)(e, o, r),\n    [e, r, o]\n  ), u = D(i, []), [p, h] = react__WEBPACK_IMPORTED_MODULE_0__.useState(\n    (a == null ? void 0 : a.getActiveDevice(e)) ?? \"default\"\n  ), { className: d, activeDeviceObservable: l, setActiveMediaDevice: v } = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(\n    () => (0,_contexts_CsO1QZ3r_mjs__WEBPACK_IMPORTED_MODULE_2__.y)(e, a),\n    [e, a, t]\n  );\n  return react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    const C = l.subscribe((k) => {\n      k && (_contexts_CsO1QZ3r_mjs__WEBPACK_IMPORTED_MODULE_2__.l.info(\"setCurrentDeviceId\", k), h(k));\n    });\n    return () => {\n      C == null || C.unsubscribe();\n    };\n  }, [l]), { devices: u, className: d, activeDeviceId: p, setActiveMediaDevice: v };\n}\nfunction _n({\n  kind: e,\n  onError: n\n}) {\n  const t = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(\n    () => (0,_contexts_CsO1QZ3r_mjs__WEBPACK_IMPORTED_MODULE_2__.x)(e, n),\n    [e, n]\n  );\n  return D(t, []);\n}\nfunction zt(e, n, t = {}) {\n  const r = react__WEBPACK_IMPORTED_MODULE_0__.useRef([]), o = react__WEBPACK_IMPORTED_MODULE_0__.useRef(-1), c = n !== o.current, a = typeof t.customSortFunction == \"function\" ? t.customSortFunction(e) : (0,_contexts_CsO1QZ3r_mjs__WEBPACK_IMPORTED_MODULE_2__.z)(e);\n  let i = [...a];\n  if (c === !1)\n    try {\n      i = (0,_contexts_CsO1QZ3r_mjs__WEBPACK_IMPORTED_MODULE_2__.A)(r.current, a, n);\n    } catch (u) {\n      _contexts_CsO1QZ3r_mjs__WEBPACK_IMPORTED_MODULE_2__.l.error(\"Error while running updatePages(): \", u);\n    }\n  return c ? r.current = a : r.current = i, o.current = n, i;\n}\nfunction Fn(e, n) {\n  const [t, r] = react__WEBPACK_IMPORTED_MODULE_0__.useState(1), o = Math.max(Math.ceil(n.length / e), 1);\n  t > o && r(o);\n  const c = t * e, a = c - e, i = (d) => {\n    r((l) => d === \"next\" ? l === o ? l : l + 1 : l === 1 ? l : l - 1);\n  }, u = (d) => {\n    d > o ? r(o) : d < 1 ? r(1) : r(d);\n  }, h = zt(n, e).slice(a, c);\n  return {\n    totalPageCount: o,\n    nextPage: () => i(\"next\"),\n    prevPage: () => i(\"previous\"),\n    setPage: u,\n    firstItemIndex: a,\n    lastItemIndex: c,\n    tracks: h,\n    currentPage: t\n  };\n}\nfunction xn(e = {}) {\n  let n = (0,_contexts_CsO1QZ3r_mjs__WEBPACK_IMPORTED_MODULE_2__.B)();\n  e.participant && (n = e.participant);\n  const t = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(() => (0,_contexts_CsO1QZ3r_mjs__WEBPACK_IMPORTED_MODULE_2__.C)(n), [n]), { identity: r, name: o, metadata: c } = D(t, {\n    name: n == null ? void 0 : n.name,\n    identity: n == null ? void 0 : n.identity,\n    metadata: n == null ? void 0 : n.metadata\n  });\n  return { identity: r, name: o, metadata: c };\n}\nfunction Un(e = {}) {\n  const n = (0,_contexts_CsO1QZ3r_mjs__WEBPACK_IMPORTED_MODULE_2__.c)(e.participant), t = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(() => (0,_contexts_CsO1QZ3r_mjs__WEBPACK_IMPORTED_MODULE_2__.v)(n), [n]);\n  return D(t, n.permissions);\n}\nfunction Hn({\n  trackRef: e,\n  onParticipantClick: n,\n  disableSpeakingIndicator: t,\n  htmlProps: r\n}) {\n  const o = (0,_contexts_CsO1QZ3r_mjs__WEBPACK_IMPORTED_MODULE_2__.i)(e), c = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(() => {\n    const { className: l } = (0,_contexts_CsO1QZ3r_mjs__WEBPACK_IMPORTED_MODULE_2__.D)();\n    return (0,_room_Bb6uLxS5_mjs__WEBPACK_IMPORTED_MODULE_3__.m)(r, {\n      className: l,\n      onClick: (v) => {\n        var C;\n        if ((C = r.onClick) == null || C.call(r, v), typeof n == \"function\") {\n          const k = o.publication ?? o.participant.getTrackPublication(o.source);\n          n({ participant: o.participant, track: k });\n        }\n      }\n    });\n  }, [\n    r,\n    n,\n    o.publication,\n    o.source,\n    o.participant\n  ]), a = o.participant.getTrackPublication(livekit_client__WEBPACK_IMPORTED_MODULE_1__.Track.Source.Microphone), i = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(() => ({\n    participant: o.participant,\n    source: livekit_client__WEBPACK_IMPORTED_MODULE_1__.Track.Source.Microphone,\n    publication: a\n  }), [a, o.participant]), u = Se(o), p = Se(i), h = jt(o.participant), d = Bt(o);\n  return {\n    elementProps: {\n      \"data-lk-audio-muted\": p,\n      \"data-lk-video-muted\": u,\n      \"data-lk-speaking\": t === !0 ? !1 : h,\n      \"data-lk-local-participant\": o.participant.isLocal,\n      \"data-lk-source\": o.source,\n      \"data-lk-facing-mode\": d,\n      ...c\n    }\n  };\n}\nfunction pe(e = {}) {\n  const n = (0,_contexts_CsO1QZ3r_mjs__WEBPACK_IMPORTED_MODULE_2__.u)(e.room), [t, r] = react__WEBPACK_IMPORTED_MODULE_0__.useState([]);\n  return react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    const o = (0,_contexts_CsO1QZ3r_mjs__WEBPACK_IMPORTED_MODULE_2__.E)(n, {\n      additionalRoomEvents: e.updateOnlyOn\n    }).subscribe(r);\n    return () => o.unsubscribe();\n  }, [n, JSON.stringify(e.updateOnlyOn)]), t;\n}\nfunction Wt(e = {}) {\n  const n = pe(e), { localParticipant: t } = Oe(e);\n  return react__WEBPACK_IMPORTED_MODULE_0__.useMemo(\n    () => [t, ...n],\n    [t, n]\n  );\n}\nfunction Vn(e) {\n  return e = (0,_contexts_CsO1QZ3r_mjs__WEBPACK_IMPORTED_MODULE_2__.F)(e), react__WEBPACK_IMPORTED_MODULE_0__.useMemo(() => (e == null ? void 0 : e.pin.state) !== void 0 && e.pin.state.length >= 1 ? e.pin.state : [], [e.pin.state]);\n}\nfunction qn(e, n = {}) {\n  const t = (0,_contexts_CsO1QZ3r_mjs__WEBPACK_IMPORTED_MODULE_2__.f)(), [r] = react__WEBPACK_IMPORTED_MODULE_0__.useState(n.updateOnlyOn), o = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(() => typeof e == \"string\" ? (0,_contexts_CsO1QZ3r_mjs__WEBPACK_IMPORTED_MODULE_2__.H)(t, e, {\n    additionalEvents: r\n  }) : (0,_contexts_CsO1QZ3r_mjs__WEBPACK_IMPORTED_MODULE_2__.I)(t, e, {\n    additionalEvents: r\n  }), [t, JSON.stringify(e), r]), [c, a] = react__WEBPACK_IMPORTED_MODULE_0__.useState({\n    p: void 0\n  });\n  return react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    const i = o.subscribe((u) => a({ p: u }));\n    return () => i.unsubscribe();\n  }, [o]), c.p;\n}\nfunction Bn(e = {}) {\n  const n = (0,_contexts_CsO1QZ3r_mjs__WEBPACK_IMPORTED_MODULE_2__.u)(e.room), t = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(() => (0,_contexts_CsO1QZ3r_mjs__WEBPACK_IMPORTED_MODULE_2__.J)(n), [n]), { name: r, metadata: o } = D(t, {\n    name: n.name,\n    metadata: n.metadata\n  });\n  return { name: r, metadata: o };\n}\nfunction Gt(e) {\n  const n = (0,_contexts_CsO1QZ3r_mjs__WEBPACK_IMPORTED_MODULE_2__.u)(e == null ? void 0 : e.room), t = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(() => (0,_contexts_CsO1QZ3r_mjs__WEBPACK_IMPORTED_MODULE_2__.K)(n), [n]);\n  return D(t, n.activeSpeakers);\n}\nfunction jn(e) {\n  const [n, t] = react__WEBPACK_IMPORTED_MODULE_0__.useState(\n    (0,_contexts_CsO1QZ3r_mjs__WEBPACK_IMPORTED_MODULE_2__.M)(e)\n  ), r = Gt();\n  return react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    t((0,_contexts_CsO1QZ3r_mjs__WEBPACK_IMPORTED_MODULE_2__.M)(e));\n  }, [r, e]), n;\n}\nfunction zn({ room: e, props: n }) {\n  const t = (0,_contexts_CsO1QZ3r_mjs__WEBPACK_IMPORTED_MODULE_2__.u)(e), { className: r, roomAudioPlaybackAllowedObservable: o, handleStartAudioPlayback: c } = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(\n    () => (0,_contexts_CsO1QZ3r_mjs__WEBPACK_IMPORTED_MODULE_2__.N)(),\n    []\n  ), a = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(\n    () => o(t),\n    [t, o]\n  ), { canPlayAudio: i } = D(a, {\n    canPlayAudio: t.canPlaybackAudio\n  });\n  return { mergedProps: react__WEBPACK_IMPORTED_MODULE_0__.useMemo(\n    () => (0,_room_Bb6uLxS5_mjs__WEBPACK_IMPORTED_MODULE_3__.m)(n, {\n      className: r,\n      onClick: () => {\n        c(t);\n      },\n      style: { display: i ? \"none\" : \"block\" }\n    }),\n    [n, r, i, c, t]\n  ), canPlayAudio: i };\n}\nfunction Wn({ room: e, props: n }) {\n  const t = (0,_contexts_CsO1QZ3r_mjs__WEBPACK_IMPORTED_MODULE_2__.u)(e), { className: r, roomVideoPlaybackAllowedObservable: o, handleStartVideoPlayback: c } = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(\n    () => (0,_contexts_CsO1QZ3r_mjs__WEBPACK_IMPORTED_MODULE_2__.O)(),\n    []\n  ), a = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(\n    () => o(t),\n    [t, o]\n  ), { canPlayVideo: i } = D(a, {\n    canPlayVideo: t.canPlaybackVideo\n  });\n  return { mergedProps: react__WEBPACK_IMPORTED_MODULE_0__.useMemo(\n    () => (0,_room_Bb6uLxS5_mjs__WEBPACK_IMPORTED_MODULE_3__.m)(n, {\n      className: r,\n      onClick: () => {\n        c(t);\n      },\n      style: { display: i ? \"none\" : \"block\" }\n    }),\n    [n, r, i, c, t]\n  ), canPlayVideo: i };\n}\nfunction Gn(e, n = {}) {\n  const t = react__WEBPACK_IMPORTED_MODULE_0__.useRef(null), r = react__WEBPACK_IMPORTED_MODULE_0__.useRef(null), o = n.minSwipeDistance ?? 50, c = (u) => {\n    r.current = null, t.current = u.targetTouches[0].clientX;\n  }, a = (u) => {\n    r.current = u.targetTouches[0].clientX;\n  }, i = react__WEBPACK_IMPORTED_MODULE_0__.useCallback(() => {\n    if (!t.current || !r.current)\n      return;\n    const u = t.current - r.current, p = u > o, h = u < -o;\n    p && n.onLeftSwipe && n.onLeftSwipe(), h && n.onRightSwipe && n.onRightSwipe();\n  }, [o, n]);\n  react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    const u = e.current;\n    return u && (u.addEventListener(\"touchstart\", c, { passive: !0 }), u.addEventListener(\"touchmove\", a, { passive: !0 }), u.addEventListener(\"touchend\", i, { passive: !0 })), () => {\n      u && (u.removeEventListener(\"touchstart\", c), u.removeEventListener(\"touchmove\", a), u.removeEventListener(\"touchend\", i));\n    };\n  }, [e, i]);\n}\nfunction Jn({ props: e }) {\n  const { dispatch: n, state: t } = (0,_contexts_CsO1QZ3r_mjs__WEBPACK_IMPORTED_MODULE_2__.a)().widget, { className: r } = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(() => (0,_contexts_CsO1QZ3r_mjs__WEBPACK_IMPORTED_MODULE_2__.P)(), []);\n  return { mergedProps: react__WEBPACK_IMPORTED_MODULE_0__.useMemo(() => (0,_room_Bb6uLxS5_mjs__WEBPACK_IMPORTED_MODULE_3__.m)(e, {\n    className: r,\n    onClick: () => {\n      n && n({ msg: \"toggle_chat\" });\n    },\n    \"aria-pressed\": t != null && t.showChat ? \"true\" : \"false\",\n    \"data-lk-unread-msgs\": t ? t.unreadMessages < 10 ? t.unreadMessages.toFixed(0) : \"9+\" : \"0\"\n  }), [e, r, n, t]) };\n}\nfunction $n(e, n, t = {}) {\n  const [r, o] = react__WEBPACK_IMPORTED_MODULE_0__.useState(void 0);\n  return react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    var a;\n    if (e === void 0)\n      throw Error(\"token endpoint needs to be defined\");\n    if (((a = t.userInfo) == null ? void 0 : a.identity) === void 0)\n      return;\n    (async () => {\n      _contexts_CsO1QZ3r_mjs__WEBPACK_IMPORTED_MODULE_2__.l.debug(\"fetching token\");\n      const i = new URLSearchParams({ ...t.userInfo, roomName: n }), u = await fetch(`${e}?${i.toString()}`);\n      if (!u.ok) {\n        _contexts_CsO1QZ3r_mjs__WEBPACK_IMPORTED_MODULE_2__.l.error(\n          `Could not fetch token. Server responded with status ${u.status}: ${u.statusText}`\n        );\n        return;\n      }\n      const { accessToken: p } = await u.json();\n      o(p);\n    })();\n  }, [e, n, JSON.stringify(t)]), r;\n}\nfunction Qn(e) {\n  var c, a;\n  const n = (0,_contexts_CsO1QZ3r_mjs__WEBPACK_IMPORTED_MODULE_2__.i)(e), { className: t, mediaMutedObserver: r } = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(\n    () => (0,_contexts_CsO1QZ3r_mjs__WEBPACK_IMPORTED_MODULE_2__.Q)(n),\n    [(0,_contexts_CsO1QZ3r_mjs__WEBPACK_IMPORTED_MODULE_2__.p)(n)]\n  );\n  return { isMuted: D(\n    r,\n    !!((c = n.publication) != null && c.isMuted || (a = n.participant.getTrackPublication(n.source)) != null && a.isMuted)\n  ), className: t };\n}\nfunction Kn({\n  source: e,\n  onChange: n,\n  initialState: t,\n  captureOptions: r,\n  publishOptions: o,\n  onDeviceError: c,\n  room: a,\n  ...i\n}) {\n  var m;\n  const u = (0,_contexts_CsO1QZ3r_mjs__WEBPACK_IMPORTED_MODULE_2__.w)(), p = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(() => a ?? u, [a, u]), h = (m = p == null ? void 0 : p.localParticipant) == null ? void 0 : m.getTrackPublication(e), d = react__WEBPACK_IMPORTED_MODULE_0__.useRef(!1), { toggle: l, className: v, pendingObserver: C, enabledObserver: k } = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(\n    () => p ? (0,_contexts_CsO1QZ3r_mjs__WEBPACK_IMPORTED_MODULE_2__.S)(e, p, r, o, c) : (0,_contexts_CsO1QZ3r_mjs__WEBPACK_IMPORTED_MODULE_2__.T)(),\n    [p, e, JSON.stringify(r), o]\n  ), A = D(C, !1), w = D(k, t ?? !!(h != null && h.isEnabled));\n  react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    n == null || n(w, d.current), d.current = !1;\n  }, [w, n]), react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    t !== void 0 && (_contexts_CsO1QZ3r_mjs__WEBPACK_IMPORTED_MODULE_2__.l.debug(\"forcing initial toggle state\", e, t), l(t));\n  }, []);\n  const O = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(() => (0,_room_Bb6uLxS5_mjs__WEBPACK_IMPORTED_MODULE_3__.m)(i, { className: v }), [i, v]), R = react__WEBPACK_IMPORTED_MODULE_0__.useCallback(\n    (f) => {\n      var b;\n      d.current = !0, l().catch(() => d.current = !1), (b = i.onClick) == null || b.call(i, f);\n    },\n    [i, l]\n  );\n  return {\n    toggle: l,\n    enabled: w,\n    pending: A,\n    track: h,\n    buttonProps: {\n      ...O,\n      \"aria-pressed\": w,\n      \"data-lk-source\": e,\n      \"data-lk-enabled\": w,\n      disabled: A,\n      onClick: R\n    }\n  };\n}\nfunction Yn(e = [\n  livekit_client__WEBPACK_IMPORTED_MODULE_1__.Track.Source.Camera,\n  livekit_client__WEBPACK_IMPORTED_MODULE_1__.Track.Source.Microphone,\n  livekit_client__WEBPACK_IMPORTED_MODULE_1__.Track.Source.ScreenShare,\n  livekit_client__WEBPACK_IMPORTED_MODULE_1__.Track.Source.ScreenShareAudio,\n  livekit_client__WEBPACK_IMPORTED_MODULE_1__.Track.Source.Unknown\n], n = {}) {\n  const t = (0,_contexts_CsO1QZ3r_mjs__WEBPACK_IMPORTED_MODULE_2__.u)(n.room), [r, o] = react__WEBPACK_IMPORTED_MODULE_0__.useState([]), [c, a] = react__WEBPACK_IMPORTED_MODULE_0__.useState([]), i = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(() => e.map((p) => (0,_contexts_CsO1QZ3r_mjs__WEBPACK_IMPORTED_MODULE_2__.U)(p) ? p.source : p), [JSON.stringify(e)]);\n  return react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    const p = (0,_contexts_CsO1QZ3r_mjs__WEBPACK_IMPORTED_MODULE_2__.V)(t, i, {\n      additionalRoomEvents: n.updateOnlyOn,\n      onlySubscribed: n.onlySubscribed\n    }).subscribe(({ trackReferences: h, participants: d }) => {\n      _contexts_CsO1QZ3r_mjs__WEBPACK_IMPORTED_MODULE_2__.l.debug(\"setting track bundles\", h, d), o(h), a(d);\n    });\n    return () => p.unsubscribe();\n  }, [\n    t,\n    JSON.stringify(n.onlySubscribed),\n    JSON.stringify(n.updateOnlyOn),\n    JSON.stringify(e)\n  ]), react__WEBPACK_IMPORTED_MODULE_0__.useMemo(() => {\n    if ((0,_contexts_CsO1QZ3r_mjs__WEBPACK_IMPORTED_MODULE_2__.W)(e)) {\n      const p = $t(e, c), h = Array.from(r);\n      return c.forEach((d) => {\n        p.has(d.identity) && (p.get(d.identity) ?? []).forEach((v) => {\n          if (r.find(\n            ({ participant: k, publication: A }) => d.identity === k.identity && A.source === v\n          ))\n            return;\n          _contexts_CsO1QZ3r_mjs__WEBPACK_IMPORTED_MODULE_2__.l.debug(\n            `Add ${v} placeholder for participant ${d.identity}.`\n          );\n          const C = {\n            participant: d,\n            source: v\n          };\n          h.push(C);\n        });\n      }), h;\n    } else\n      return r;\n  }, [r, c, e]);\n}\nfunction Jt(e, n) {\n  const t = new Set(e);\n  for (const r of n)\n    t.delete(r);\n  return t;\n}\nfunction $t(e, n) {\n  const t = /* @__PURE__ */ new Map();\n  if ((0,_contexts_CsO1QZ3r_mjs__WEBPACK_IMPORTED_MODULE_2__.W)(e)) {\n    const r = e.filter((o) => o.withPlaceholder).map((o) => o.source);\n    n.forEach((o) => {\n      const c = o.getTrackPublications().map((i) => {\n        var u;\n        return (u = i.track) == null ? void 0 : u.source;\n      }).filter((i) => i !== void 0), a = Array.from(\n        Jt(new Set(r), new Set(c))\n      );\n      a.length > 0 && t.set(o.identity, a);\n    });\n  }\n  return t;\n}\nfunction Qt(e) {\n  const [n, t] = react__WEBPACK_IMPORTED_MODULE_0__.useState((0,_contexts_CsO1QZ3r_mjs__WEBPACK_IMPORTED_MODULE_2__.X)(e)), { trackObserver: r } = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(() => (0,_contexts_CsO1QZ3r_mjs__WEBPACK_IMPORTED_MODULE_2__.Y)(e), [e.participant.sid ?? e.participant.identity, e.source]);\n  return react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    const o = r.subscribe((c) => {\n      t(c);\n    });\n    return () => o == null ? void 0 : o.unsubscribe();\n  }, [r]), {\n    participant: e.participant,\n    source: e.source ?? livekit_client__WEBPACK_IMPORTED_MODULE_1__.Track.Source.Unknown,\n    publication: n\n  };\n}\nfunction Xn(e, n) {\n  const t = (0,_contexts_CsO1QZ3r_mjs__WEBPACK_IMPORTED_MODULE_2__.c)(n);\n  return Qt({ name: e, participant: t });\n}\nfunction Kt(e) {\n  const n = (0,_contexts_CsO1QZ3r_mjs__WEBPACK_IMPORTED_MODULE_2__.u)(e == null ? void 0 : e.room), t = te(n), r = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(\n    () => t === livekit_client__WEBPACK_IMPORTED_MODULE_1__.ConnectionState.Disconnected,\n    [t]\n  ), o = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(\n    () => (0,_contexts_CsO1QZ3r_mjs__WEBPACK_IMPORTED_MODULE_2__.Z)(n, e),\n    [n, e, r]\n  ), c = D(o.isSendingObservable, !1), a = D(o.messageObservable, []);\n  return { send: o.send, chatMessages: a, isSending: c };\n}\nfunction Zn(e = {}) {\n  const [n, t] = react__WEBPACK_IMPORTED_MODULE_0__.useState(\n    (0,_contexts_CsO1QZ3r_mjs__WEBPACK_IMPORTED_MODULE_2__._)(e.defaults, e.preventLoad ?? !1)\n  ), r = react__WEBPACK_IMPORTED_MODULE_0__.useCallback((u) => {\n    t((p) => ({ ...p, audioEnabled: u }));\n  }, []), o = react__WEBPACK_IMPORTED_MODULE_0__.useCallback((u) => {\n    t((p) => ({ ...p, videoEnabled: u }));\n  }, []), c = react__WEBPACK_IMPORTED_MODULE_0__.useCallback((u) => {\n    t((p) => ({ ...p, audioDeviceId: u }));\n  }, []), a = react__WEBPACK_IMPORTED_MODULE_0__.useCallback((u) => {\n    t((p) => ({ ...p, videoDeviceId: u }));\n  }, []), i = react__WEBPACK_IMPORTED_MODULE_0__.useCallback((u) => {\n    t((p) => ({ ...p, username: u }));\n  }, []);\n  return react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    (0,_contexts_CsO1QZ3r_mjs__WEBPACK_IMPORTED_MODULE_2__.$)(n, e.preventSave ?? !1);\n  }, [n, e.preventSave]), {\n    userChoices: n,\n    saveAudioInputEnabled: r,\n    saveVideoInputEnabled: o,\n    saveAudioInputDeviceId: c,\n    saveVideoInputDeviceId: a,\n    saveUsername: i\n  };\n}\nfunction es(e, n = {}) {\n  const t = (0,_contexts_CsO1QZ3r_mjs__WEBPACK_IMPORTED_MODULE_2__.c)(e), r = (0,_contexts_CsO1QZ3r_mjs__WEBPACK_IMPORTED_MODULE_2__.u)(n.room), o = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(() => (0,_contexts_CsO1QZ3r_mjs__WEBPACK_IMPORTED_MODULE_2__.a0)(r, t), [r, t]);\n  return D(\n    o,\n    t.isLocal ? t.isE2EEEnabled : !!(t != null && t.isEncrypted)\n  );\n}\nfunction ts(e, n = { fftSize: 32, smoothingTimeConstant: 0 }) {\n  const t = (0,_contexts_CsO1QZ3r_mjs__WEBPACK_IMPORTED_MODULE_2__.a1)(e) ? e.publication.track : e, [r, o] = react__WEBPACK_IMPORTED_MODULE_0__.useState(0);\n  return react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    if (!t || !t.mediaStream)\n      return;\n    const { cleanup: c, analyser: a } = (0,livekit_client__WEBPACK_IMPORTED_MODULE_1__.createAudioAnalyser)(t, n), i = a.frequencyBinCount, u = new Uint8Array(i), h = setInterval(() => {\n      a.getByteFrequencyData(u);\n      let d = 0;\n      for (let l = 0; l < u.length; l++) {\n        const v = u[l];\n        d += v * v;\n      }\n      o(Math.sqrt(d / u.length) / 255);\n    }, 1e3 / 30);\n    return () => {\n      c(), clearInterval(h);\n    };\n  }, [t, t == null ? void 0 : t.mediaStream, JSON.stringify(n)]), r;\n}\nconst Yt = (e) => {\n  const n = (t) => {\n    let c = 1 - Math.max(-100, Math.min(-10, t)) * -1 / 100;\n    return c = Math.sqrt(c), c;\n  };\n  return e.map((t) => t === -1 / 0 ? 0 : n(t));\n}, Xt = {\n  bands: 5,\n  loPass: 100,\n  hiPass: 600,\n  updateInterval: 32,\n  analyserOptions: { fftSize: 2048 }\n};\nfunction ns(e, n = {}) {\n  var a;\n  const t = e instanceof livekit_client__WEBPACK_IMPORTED_MODULE_1__.Track ? e : (a = e == null ? void 0 : e.publication) == null ? void 0 : a.track, r = { ...Xt, ...n }, [o, c] = react__WEBPACK_IMPORTED_MODULE_0__.useState(\n    new Array(r.bands).fill(0)\n  );\n  return react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    if (!t || !(t != null && t.mediaStream)) {\n      c((v) => v.slice().fill(0));\n      return;\n    }\n    const { analyser: i, cleanup: u } = (0,livekit_client__WEBPACK_IMPORTED_MODULE_1__.createAudioAnalyser)(t, r.analyserOptions), p = i.frequencyBinCount, h = new Float32Array(p), l = setInterval(() => {\n      i.getFloatFrequencyData(h);\n      let v = new Float32Array(h.length);\n      for (let w = 0; w < h.length; w++)\n        v[w] = h[w];\n      v = v.slice(n.loPass, n.hiPass);\n      const C = Yt(v), k = Math.ceil(C.length / r.bands), A = [];\n      for (let w = 0; w < r.bands; w++) {\n        const O = C.slice(w * k, (w + 1) * k).reduce((R, m) => R += m, 0);\n        A.push(O / k);\n      }\n      c(A);\n    }, r.updateInterval);\n    return () => {\n      u(), clearInterval(l);\n    };\n  }, [t, t == null ? void 0 : t.mediaStream, JSON.stringify(n)]), o;\n}\nconst Zt = {\n  barCount: 120,\n  volMultiplier: 5,\n  updateInterval: 20\n};\nfunction ss(e, n = {}) {\n  var h;\n  const t = e instanceof livekit_client__WEBPACK_IMPORTED_MODULE_1__.Track ? e : (h = e == null ? void 0 : e.publication) == null ? void 0 : h.track, r = { ...Zt, ...n }, o = react__WEBPACK_IMPORTED_MODULE_0__.useRef(new Float32Array()), c = react__WEBPACK_IMPORTED_MODULE_0__.useRef(performance.now()), a = react__WEBPACK_IMPORTED_MODULE_0__.useRef(0), [i, u] = react__WEBPACK_IMPORTED_MODULE_0__.useState([]), p = react__WEBPACK_IMPORTED_MODULE_0__.useCallback((d) => {\n    u(\n      Array.from(\n        tn(d, r.barCount).map((l) => Math.sqrt(l) * r.volMultiplier)\n        // wave.slice(0, opts.barCount).map((v) => sigmoid(v * opts.volMultiplier, 0.08, 0.2)),\n      )\n    );\n  }, []);\n  return react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    if (!t || !(t != null && t.mediaStream))\n      return;\n    const { analyser: d, cleanup: l } = (0,livekit_client__WEBPACK_IMPORTED_MODULE_1__.createAudioAnalyser)(t, {\n      fftSize: ye(r.barCount)\n    }), v = ye(r.barCount), C = new Float32Array(v), k = () => {\n      if (A = requestAnimationFrame(k), d.getFloatTimeDomainData(C), o.current.map((w, O) => w + C[O]), a.current += 1, performance.now() - c.current >= r.updateInterval) {\n        const w = C.map((O) => O / a.current);\n        p(w), c.current = performance.now(), a.current = 0;\n      }\n    };\n    let A = requestAnimationFrame(k);\n    return () => {\n      l(), cancelAnimationFrame(A);\n    };\n  }, [t, t == null ? void 0 : t.mediaStream, JSON.stringify(n), p]), {\n    bars: i\n  };\n}\nfunction ye(e) {\n  return e < 32 ? 32 : en(e);\n}\nfunction en(e) {\n  let n = 2;\n  for (; e >>= 1; )\n    n <<= 1;\n  return n;\n}\nfunction tn(e, n) {\n  const t = Math.floor(e.length / n), r = new Float32Array(n);\n  for (let o = 0; o < n; o++) {\n    const c = t * o;\n    let a = 0;\n    for (let i = 0; i < t; i++)\n      a = a + Math.abs(e[c + i]);\n    r[o] = a / t;\n  }\n  return r;\n}\nfunction re(e, n = {}) {\n  let t, r;\n  typeof n == \"string\" ? t = n : (t = n == null ? void 0 : n.participantIdentity, r = n == null ? void 0 : n.room);\n  const o = (0,_contexts_CsO1QZ3r_mjs__WEBPACK_IMPORTED_MODULE_2__.B)(), c = Wt({ room: r, updateOnlyOn: [] }), a = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(() => t ? c.find((p) => p.identity === t) : o, [t, c, o]), i = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(() => {\n    if (a)\n      return (0,_contexts_CsO1QZ3r_mjs__WEBPACK_IMPORTED_MODULE_2__.a2)(a, { sources: e });\n  }, [a, JSON.stringify(e)]);\n  return D(i, []);\n}\nfunction nn(e) {\n  var t, r, o;\n  const n = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(\n    () => {\n      var c;\n      return (c = e == null ? void 0 : e.publication) != null && c.track ? (0,_contexts_CsO1QZ3r_mjs__WEBPACK_IMPORTED_MODULE_2__.a3)(e == null ? void 0 : e.publication.track) : void 0;\n    },\n    [(t = e == null ? void 0 : e.publication) == null ? void 0 : t.track]\n  );\n  return D(n, {\n    timestamp: Date.now(),\n    rtpTimestamp: (o = (r = e == null ? void 0 : e.publication) == null ? void 0 : r.track) == null ? void 0 : o.rtpTimestamp\n  });\n}\nconst sn = {\n  bufferSize: 100\n  // maxAge: 2_000,\n};\nfunction rn(e, n) {\n  const t = { ...sn, ...n }, [r, o] = react__WEBPACK_IMPORTED_MODULE_0__.useState([]), c = nn(e), a = (i) => {\n    var u;\n    (u = t.onTranscription) == null || u.call(t, i), o(\n      (p) => (0,_contexts_CsO1QZ3r_mjs__WEBPACK_IMPORTED_MODULE_2__.a5)(\n        p,\n        // when first receiving a segment, add the current media timestamp to it\n        i.map((h) => (0,_contexts_CsO1QZ3r_mjs__WEBPACK_IMPORTED_MODULE_2__.a6)(h, c)),\n        t.bufferSize\n      )\n    );\n  };\n  return react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    if (!(e != null && e.publication))\n      return;\n    const i = (0,_contexts_CsO1QZ3r_mjs__WEBPACK_IMPORTED_MODULE_2__.a4)(e.publication).subscribe((u) => {\n      a(...u);\n    });\n    return () => {\n      i.unsubscribe();\n    };\n  }, [e && (0,_contexts_CsO1QZ3r_mjs__WEBPACK_IMPORTED_MODULE_2__.p)(e), a]), { segments: r };\n}\nfunction on(e = {}) {\n  const n = (0,_contexts_CsO1QZ3r_mjs__WEBPACK_IMPORTED_MODULE_2__.B)(), t = e.participant ?? n, r = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(\n    // weird typescript constraint\n    () => t ? (0,_contexts_CsO1QZ3r_mjs__WEBPACK_IMPORTED_MODULE_2__.a7)(t) : (0,_contexts_CsO1QZ3r_mjs__WEBPACK_IMPORTED_MODULE_2__.a7)(t),\n    [t]\n  );\n  return D(r, {\n    attributes: t == null ? void 0 : t.attributes\n  });\n}\nfunction rs(e, n = {}) {\n  const t = (0,_contexts_CsO1QZ3r_mjs__WEBPACK_IMPORTED_MODULE_2__.c)(n.participant), [r, o] = react__WEBPACK_IMPORTED_MODULE_0__.useState(t.attributes[e]);\n  return react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    if (!t)\n      return;\n    const c = (0,_contexts_CsO1QZ3r_mjs__WEBPACK_IMPORTED_MODULE_2__.a7)(t).subscribe((a) => {\n      a.changed[e] !== void 0 && o(a.attributes[e]);\n    });\n    return () => {\n      c.unsubscribe();\n    };\n  }, [t, e]), r;\n}\nconst Ce = _contexts_CsO1QZ3r_mjs__WEBPACK_IMPORTED_MODULE_2__.a8.AgentState;\nfunction os() {\n  const e = pe(), n = e.find(\n    (d) => d.kind === livekit_client__WEBPACK_IMPORTED_MODULE_1__.ParticipantKind.AGENT && !(_contexts_CsO1QZ3r_mjs__WEBPACK_IMPORTED_MODULE_2__.a8.PublishOnBehalf in d.attributes)\n  ), t = e.find(\n    (d) => d.kind === livekit_client__WEBPACK_IMPORTED_MODULE_1__.ParticipantKind.AGENT && d.attributes[_contexts_CsO1QZ3r_mjs__WEBPACK_IMPORTED_MODULE_2__.a8.PublishOnBehalf] === (n == null ? void 0 : n.identity)\n  ), r = re(\n    [livekit_client__WEBPACK_IMPORTED_MODULE_1__.Track.Source.Microphone, livekit_client__WEBPACK_IMPORTED_MODULE_1__.Track.Source.Camera],\n    n == null ? void 0 : n.identity\n  ), o = re(\n    [livekit_client__WEBPACK_IMPORTED_MODULE_1__.Track.Source.Microphone, livekit_client__WEBPACK_IMPORTED_MODULE_1__.Track.Source.Camera],\n    t == null ? void 0 : t.identity\n  ), c = r.find((d) => d.source === livekit_client__WEBPACK_IMPORTED_MODULE_1__.Track.Source.Microphone) ?? o.find((d) => d.source === livekit_client__WEBPACK_IMPORTED_MODULE_1__.Track.Source.Microphone), a = r.find((d) => d.source === livekit_client__WEBPACK_IMPORTED_MODULE_1__.Track.Source.Camera) ?? o.find((d) => d.source === livekit_client__WEBPACK_IMPORTED_MODULE_1__.Track.Source.Camera), { segments: i } = rn(c), u = te(), { attributes: p } = on({ participant: n }), h = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(() => u === livekit_client__WEBPACK_IMPORTED_MODULE_1__.ConnectionState.Disconnected ? \"disconnected\" : u === livekit_client__WEBPACK_IMPORTED_MODULE_1__.ConnectionState.Connecting || !n || !(p != null && p[Ce]) ? \"connecting\" : p[Ce], [p, n, u]);\n  return {\n    agent: n,\n    state: h,\n    audioTrack: c,\n    videoTrack: a,\n    agentTranscriptions: i,\n    agentAttributes: p\n  };\n}\nfunction as(e) {\n  const n = (0,_contexts_CsO1QZ3r_mjs__WEBPACK_IMPORTED_MODULE_2__.u)(e), t = te(n), r = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(() => (0,_contexts_CsO1QZ3r_mjs__WEBPACK_IMPORTED_MODULE_2__.a9)(n), [n, t]);\n  return D(r, n.isRecording);\n}\nfunction an(e, n) {\n  const t = (0,_contexts_CsO1QZ3r_mjs__WEBPACK_IMPORTED_MODULE_2__.u)(n == null ? void 0 : n.room), o = te(t) === livekit_client__WEBPACK_IMPORTED_MODULE_1__.ConnectionState.Disconnected, c = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(() => (0,_contexts_CsO1QZ3r_mjs__WEBPACK_IMPORTED_MODULE_2__.aa)(t, e), [t, e]);\n  return { textStreams: D(o ? void 0 : c, []) };\n}\nfunction cn(e) {\n  const { participantIdentities: n, trackSids: t } = e ?? {}, { textStreams: r } = an(_contexts_CsO1QZ3r_mjs__WEBPACK_IMPORTED_MODULE_2__.ab.TRANSCRIPTION, { room: e == null ? void 0 : e.room });\n  return react__WEBPACK_IMPORTED_MODULE_0__.useMemo(\n    () => r.filter(\n      (c) => n ? n.includes(c.participantInfo.identity) : !0\n    ).filter(\n      (c) => {\n        var a;\n        return t ? t.includes(\n          ((a = c.streamInfo.attributes) == null ? void 0 : a[_contexts_CsO1QZ3r_mjs__WEBPACK_IMPORTED_MODULE_2__.a8.TranscribedTrackId]) ?? \"\"\n        ) : !0;\n      }\n    ),\n    [r, n, t]\n  );\n}\nconst Me = 2, Te = 400, Ee = 3, ke = 1e3;\nfunction cs(e) {\n  const n = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)([]), t = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(() => new livekit_client__WEBPACK_IMPORTED_MODULE_1__.Mutex(), []), r = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(async () => t.lock().then(async (h) => {\n    for (; ; ) {\n      const d = n.current.pop();\n      if (!d) {\n        h();\n        break;\n      }\n      switch (d.type) {\n        case \"connect\":\n          await d.room.connect(...d.args).then(d.resolve).catch(d.reject);\n          break;\n        case \"disconnect\":\n          await d.room.disconnect(...d.args).then(d.resolve).catch(d.reject);\n          break;\n      }\n    }\n  }), []), o = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)([]), c = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((h) => {\n    let d = 0;\n    o.current = o.current.filter((l) => {\n      const v = h.getTime() - l.getTime() < ke;\n      return v && (d += 1), v;\n    }), d > Ee && _contexts_CsO1QZ3r_mjs__WEBPACK_IMPORTED_MODULE_2__.l.warn(\n      `useSequentialRoomConnectDisconnect: room changed reference rapidly (over ${Ee}x in ${ke}ms). This is not recommended.`\n    );\n  }, []);\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    n.current = [];\n    const h = /* @__PURE__ */ new Date();\n    o.current.push(h), c(h);\n  }, [e, c]);\n  const a = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)([]), i = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((h) => {\n    let d = 0;\n    a.current = a.current.filter((l) => {\n      const v = h.getTime() - l.getTime() < Te;\n      return v && (d += 1), v;\n    }), d > Me && _contexts_CsO1QZ3r_mjs__WEBPACK_IMPORTED_MODULE_2__.l.warn(\n      `useSequentialRoomConnectDisconnect: room connect / disconnect occurring in rapid sequence (over ${Me}x in ${Te}ms). This is not recommended and may be the sign of a bug like a useEffect dependency changing every render.`\n    );\n  }, []), u = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(\n    async (...h) => new Promise((d, l) => {\n      if (!e)\n        throw new Error(\"Called connect(), but room was unset\");\n      const v = /* @__PURE__ */ new Date();\n      i(v), n.current.push({ type: \"connect\", room: e, args: h, resolve: d, reject: l }), a.current.push(v), r();\n    }),\n    [e, i, r]\n  ), p = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(\n    async (...h) => new Promise((d, l) => {\n      if (!e)\n        throw new Error(\"Called discconnect(), but room was unset\");\n      const v = /* @__PURE__ */ new Date();\n      i(v), n.current.push({ type: \"disconnect\", room: e, args: h, resolve: d, reject: l }), a.current.push(v), r();\n    }),\n    [e, i, r]\n  );\n  return {\n    connect: e ? u : null,\n    disconnect: e ? p : null\n  };\n}\nvar ne = { exports: {} }, we;\nfunction un() {\n  if (we) return ne.exports;\n  we = 1;\n  var e = typeof Reflect == \"object\" ? Reflect : null, n = e && typeof e.apply == \"function\" ? e.apply : function(f, b, g) {\n    return Function.prototype.apply.call(f, b, g);\n  }, t;\n  e && typeof e.ownKeys == \"function\" ? t = e.ownKeys : Object.getOwnPropertySymbols ? t = function(f) {\n    return Object.getOwnPropertyNames(f).concat(Object.getOwnPropertySymbols(f));\n  } : t = function(f) {\n    return Object.getOwnPropertyNames(f);\n  };\n  function r(m) {\n    console && console.warn && console.warn(m);\n  }\n  var o = Number.isNaN || function(f) {\n    return f !== f;\n  };\n  function c() {\n    c.init.call(this);\n  }\n  ne.exports = c, ne.exports.once = w, c.EventEmitter = c, c.prototype._events = void 0, c.prototype._eventsCount = 0, c.prototype._maxListeners = void 0;\n  var a = 10;\n  function i(m) {\n    if (typeof m != \"function\")\n      throw new TypeError('The \"listener\" argument must be of type Function. Received type ' + typeof m);\n  }\n  Object.defineProperty(c, \"defaultMaxListeners\", {\n    enumerable: !0,\n    get: function() {\n      return a;\n    },\n    set: function(m) {\n      if (typeof m != \"number\" || m < 0 || o(m))\n        throw new RangeError('The value of \"defaultMaxListeners\" is out of range. It must be a non-negative number. Received ' + m + \".\");\n      a = m;\n    }\n  }), c.init = function() {\n    (this._events === void 0 || this._events === Object.getPrototypeOf(this)._events) && (this._events = /* @__PURE__ */ Object.create(null), this._eventsCount = 0), this._maxListeners = this._maxListeners || void 0;\n  }, c.prototype.setMaxListeners = function(f) {\n    if (typeof f != \"number\" || f < 0 || o(f))\n      throw new RangeError('The value of \"n\" is out of range. It must be a non-negative number. Received ' + f + \".\");\n    return this._maxListeners = f, this;\n  };\n  function u(m) {\n    return m._maxListeners === void 0 ? c.defaultMaxListeners : m._maxListeners;\n  }\n  c.prototype.getMaxListeners = function() {\n    return u(this);\n  }, c.prototype.emit = function(f) {\n    for (var b = [], g = 1; g < arguments.length; g++) b.push(arguments[g]);\n    var y = f === \"error\", T = this._events;\n    if (T !== void 0)\n      y = y && T.error === void 0;\n    else if (!y)\n      return !1;\n    if (y) {\n      var M;\n      if (b.length > 0 && (M = b[0]), M instanceof Error)\n        throw M;\n      var P = new Error(\"Unhandled error.\" + (M ? \" (\" + M.message + \")\" : \"\"));\n      throw P.context = M, P;\n    }\n    var F = T[f];\n    if (F === void 0)\n      return !1;\n    if (typeof F == \"function\")\n      n(F, this, b);\n    else\n      for (var q = F.length, J = C(F, q), g = 0; g < q; ++g)\n        n(J[g], this, b);\n    return !0;\n  };\n  function p(m, f, b, g) {\n    var y, T, M;\n    if (i(b), T = m._events, T === void 0 ? (T = m._events = /* @__PURE__ */ Object.create(null), m._eventsCount = 0) : (T.newListener !== void 0 && (m.emit(\n      \"newListener\",\n      f,\n      b.listener ? b.listener : b\n    ), T = m._events), M = T[f]), M === void 0)\n      M = T[f] = b, ++m._eventsCount;\n    else if (typeof M == \"function\" ? M = T[f] = g ? [b, M] : [M, b] : g ? M.unshift(b) : M.push(b), y = u(m), y > 0 && M.length > y && !M.warned) {\n      M.warned = !0;\n      var P = new Error(\"Possible EventEmitter memory leak detected. \" + M.length + \" \" + String(f) + \" listeners added. Use emitter.setMaxListeners() to increase limit\");\n      P.name = \"MaxListenersExceededWarning\", P.emitter = m, P.type = f, P.count = M.length, r(P);\n    }\n    return m;\n  }\n  c.prototype.addListener = function(f, b) {\n    return p(this, f, b, !1);\n  }, c.prototype.on = c.prototype.addListener, c.prototype.prependListener = function(f, b) {\n    return p(this, f, b, !0);\n  };\n  function h() {\n    if (!this.fired)\n      return this.target.removeListener(this.type, this.wrapFn), this.fired = !0, arguments.length === 0 ? this.listener.call(this.target) : this.listener.apply(this.target, arguments);\n  }\n  function d(m, f, b) {\n    var g = { fired: !1, wrapFn: void 0, target: m, type: f, listener: b }, y = h.bind(g);\n    return y.listener = b, g.wrapFn = y, y;\n  }\n  c.prototype.once = function(f, b) {\n    return i(b), this.on(f, d(this, f, b)), this;\n  }, c.prototype.prependOnceListener = function(f, b) {\n    return i(b), this.prependListener(f, d(this, f, b)), this;\n  }, c.prototype.removeListener = function(f, b) {\n    var g, y, T, M, P;\n    if (i(b), y = this._events, y === void 0)\n      return this;\n    if (g = y[f], g === void 0)\n      return this;\n    if (g === b || g.listener === b)\n      --this._eventsCount === 0 ? this._events = /* @__PURE__ */ Object.create(null) : (delete y[f], y.removeListener && this.emit(\"removeListener\", f, g.listener || b));\n    else if (typeof g != \"function\") {\n      for (T = -1, M = g.length - 1; M >= 0; M--)\n        if (g[M] === b || g[M].listener === b) {\n          P = g[M].listener, T = M;\n          break;\n        }\n      if (T < 0)\n        return this;\n      T === 0 ? g.shift() : k(g, T), g.length === 1 && (y[f] = g[0]), y.removeListener !== void 0 && this.emit(\"removeListener\", f, P || b);\n    }\n    return this;\n  }, c.prototype.off = c.prototype.removeListener, c.prototype.removeAllListeners = function(f) {\n    var b, g, y;\n    if (g = this._events, g === void 0)\n      return this;\n    if (g.removeListener === void 0)\n      return arguments.length === 0 ? (this._events = /* @__PURE__ */ Object.create(null), this._eventsCount = 0) : g[f] !== void 0 && (--this._eventsCount === 0 ? this._events = /* @__PURE__ */ Object.create(null) : delete g[f]), this;\n    if (arguments.length === 0) {\n      var T = Object.keys(g), M;\n      for (y = 0; y < T.length; ++y)\n        M = T[y], M !== \"removeListener\" && this.removeAllListeners(M);\n      return this.removeAllListeners(\"removeListener\"), this._events = /* @__PURE__ */ Object.create(null), this._eventsCount = 0, this;\n    }\n    if (b = g[f], typeof b == \"function\")\n      this.removeListener(f, b);\n    else if (b !== void 0)\n      for (y = b.length - 1; y >= 0; y--)\n        this.removeListener(f, b[y]);\n    return this;\n  };\n  function l(m, f, b) {\n    var g = m._events;\n    if (g === void 0)\n      return [];\n    var y = g[f];\n    return y === void 0 ? [] : typeof y == \"function\" ? b ? [y.listener || y] : [y] : b ? A(y) : C(y, y.length);\n  }\n  c.prototype.listeners = function(f) {\n    return l(this, f, !0);\n  }, c.prototype.rawListeners = function(f) {\n    return l(this, f, !1);\n  }, c.listenerCount = function(m, f) {\n    return typeof m.listenerCount == \"function\" ? m.listenerCount(f) : v.call(m, f);\n  }, c.prototype.listenerCount = v;\n  function v(m) {\n    var f = this._events;\n    if (f !== void 0) {\n      var b = f[m];\n      if (typeof b == \"function\")\n        return 1;\n      if (b !== void 0)\n        return b.length;\n    }\n    return 0;\n  }\n  c.prototype.eventNames = function() {\n    return this._eventsCount > 0 ? t(this._events) : [];\n  };\n  function C(m, f) {\n    for (var b = new Array(f), g = 0; g < f; ++g)\n      b[g] = m[g];\n    return b;\n  }\n  function k(m, f) {\n    for (; f + 1 < m.length; f++)\n      m[f] = m[f + 1];\n    m.pop();\n  }\n  function A(m) {\n    for (var f = new Array(m.length), b = 0; b < f.length; ++b)\n      f[b] = m[b].listener || m[b];\n    return f;\n  }\n  function w(m, f) {\n    return new Promise(function(b, g) {\n      function y(M) {\n        m.removeListener(f, T), g(M);\n      }\n      function T() {\n        typeof m.removeListener == \"function\" && m.removeListener(\"error\", y), b([].slice.call(arguments));\n      }\n      R(m, f, T, { once: !0 }), f !== \"error\" && O(m, y, { once: !0 });\n    });\n  }\n  function O(m, f, b) {\n    typeof m.on == \"function\" && R(m, \"error\", f, b);\n  }\n  function R(m, f, b, g) {\n    if (typeof m.on == \"function\")\n      g.once ? m.once(f, b) : m.on(f, b);\n    else if (typeof m.addEventListener == \"function\")\n      m.addEventListener(f, function y(T) {\n        g.once && m.removeEventListener(f, y), b(T);\n      });\n    else\n      throw new TypeError('The \"emitter\" argument must be of type EventEmitter. Received type ' + typeof m);\n  }\n  return ne.exports;\n}\nvar he = un();\nconst ln = 2e4;\nvar dn = /* @__PURE__ */ ((e) => (e.CameraChanged = \"cameraChanged\", e.MicrophoneChanged = \"microphoneChanged\", e.StateChanged = \"stateChanged\", e))(dn || {});\nconst x = (e) => ({\n  isConnected: e === \"listening\" || e === \"thinking\" || e === \"speaking\",\n  canListen: e === \"pre-connect-buffering\" || e === \"listening\" || e === \"thinking\" || e === \"speaking\",\n  isFinished: e === \"disconnected\" || e === \"failed\",\n  isPending: e === \"connecting\" || e === \"initializing\" || e === \"idle\"\n}), fn = () => {\n  const [e, n] = react__WEBPACK_IMPORTED_MODULE_0__.useState(\n    null\n  ), [t, r] = react__WEBPACK_IMPORTED_MODULE_0__.useState(\n    null\n  ), o = react__WEBPACK_IMPORTED_MODULE_0__.useRef(\"connecting\"), c = react__WEBPACK_IMPORTED_MODULE_0__.useRef(!1), a = (i) => setTimeout(() => {\n    if (!c.current) {\n      n(\"Agent did not join the room.\");\n      return;\n    }\n    const { isConnected: u } = x(o.current);\n    if (!u) {\n      n(\"Agent joined the room but did not complete initializing.\");\n      return;\n    }\n  }, i ?? ln);\n  return {\n    agentTimeoutFailureReason: e,\n    startAgentTimeout: react__WEBPACK_IMPORTED_MODULE_0__.useCallback(\n      (i) => {\n        t && clearTimeout(t), n(null), r(a(i)), o.current = \"connecting\", c.current = !1;\n      },\n      [t]\n    ),\n    clearAgentTimeout: react__WEBPACK_IMPORTED_MODULE_0__.useCallback(() => {\n      t && clearTimeout(t), n(null), r(null), o.current = \"connecting\", c.current = !1;\n    }, [t]),\n    clearAgentTimeoutFailureReason: react__WEBPACK_IMPORTED_MODULE_0__.useCallback(() => {\n      n(null);\n    }, []),\n    updateAgentTimeoutState: react__WEBPACK_IMPORTED_MODULE_0__.useCallback((i) => {\n      o.current = i;\n    }, []),\n    updateAgentTimeoutParticipantExists: react__WEBPACK_IMPORTED_MODULE_0__.useCallback((i) => {\n      c.current = i;\n    }, [])\n  };\n};\nfunction mn(e, n) {\n  const t = react__WEBPACK_IMPORTED_MODULE_0__.useRef(n);\n  react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    t.current = n;\n  }, [n]);\n  const r = react__WEBPACK_IMPORTED_MODULE_0__.useCallback(\n    async (a) => {\n      const { isConnected: i } = x(t.current);\n      if (!i)\n        return new Promise((u, p) => {\n          const h = (v) => {\n            const { isConnected: C } = x(v);\n            C && (l(), u());\n          }, d = () => {\n            l(), p(new Error(\"useAgent(/* ... */).waitUntilConnected - signal aborted\"));\n          }, l = () => {\n            e.off(\"stateChanged\", h), a == null || a.removeEventListener(\"abort\", d);\n          };\n          e.on(\"stateChanged\", h), a == null || a.addEventListener(\"abort\", d);\n        });\n    },\n    [e]\n  ), o = react__WEBPACK_IMPORTED_MODULE_0__.useCallback(\n    async (a) => {\n      const { canListen: i } = x(t.current);\n      if (!i)\n        return new Promise((u, p) => {\n          const h = (v) => {\n            const { canListen: C } = x(v);\n            C && (l(), u());\n          }, d = () => {\n            l(), p(new Error(\"useAgent(/* ... */).waitUntilCouldBeListening - signal aborted\"));\n          }, l = () => {\n            e.off(\"stateChanged\", h), a == null || a.removeEventListener(\"abort\", d);\n          };\n          e.on(\"stateChanged\", h), a == null || a.addEventListener(\"abort\", d);\n        });\n    },\n    [e]\n  ), c = react__WEBPACK_IMPORTED_MODULE_0__.useCallback(\n    async (a) => {\n      const { isFinished: i } = x(t.current);\n      if (!i)\n        return new Promise((u, p) => {\n          const h = (v) => {\n            const { isFinished: C } = x(v);\n            C && (l(), u());\n          }, d = () => {\n            l(), p(new Error(\"useAgent(/* ... */).waitUntilFinished - signal aborted\"));\n          }, l = () => {\n            e.off(\"stateChanged\", h), a == null || a.removeEventListener(\"abort\", d);\n          };\n          e.on(\"stateChanged\", h), a == null || a.addEventListener(\"abort\", d);\n        });\n    },\n    [e]\n  );\n  return { waitUntilConnected: r, waitUntilCouldBeListening: o, waitUntilFinished: c };\n}\nfunction Ie(e) {\n  const n = (0,_contexts_CsO1QZ3r_mjs__WEBPACK_IMPORTED_MODULE_2__.ac)();\n  if (e = e ?? n, !e)\n    throw new Error(\n      \"No session provided, make sure you are inside a Session context or pass the session explicitly\"\n    );\n  const {\n    room: t,\n    internal: {\n      agentConnectTimeoutMilliseconds: r,\n      agentTimeoutFailureReason: o,\n      startAgentTimeout: c,\n      clearAgentTimeout: a,\n      clearAgentTimeoutFailureReason: i,\n      updateAgentTimeoutState: u,\n      updateAgentTimeoutParticipantExists: p\n    }\n  } = e, h = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(() => new he.EventEmitter(), []), d = pe({ room: t }), l = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(() => d.find(\n    (S) => S.kind === livekit_client__WEBPACK_IMPORTED_MODULE_1__.ParticipantKind.AGENT && !(_contexts_CsO1QZ3r_mjs__WEBPACK_IMPORTED_MODULE_2__.a8.PublishOnBehalf in S.attributes)\n  ) ?? null, [d]), v = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(() => l ? d.find(\n    (S) => S.kind === livekit_client__WEBPACK_IMPORTED_MODULE_1__.ParticipantKind.AGENT && S.attributes[_contexts_CsO1QZ3r_mjs__WEBPACK_IMPORTED_MODULE_2__.a8.PublishOnBehalf] === l.identity\n  ) ?? null : null, [l, d]), [C, k] = react__WEBPACK_IMPORTED_MODULE_0__.useState({});\n  react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    if (!l)\n      return;\n    const S = (_) => {\n      k(_);\n    };\n    return l.on(livekit_client__WEBPACK_IMPORTED_MODULE_1__.ParticipantEvent.AttributesChanged, S), () => {\n      l.off(livekit_client__WEBPACK_IMPORTED_MODULE_1__.ParticipantEvent.AttributesChanged, S);\n    };\n  }, [l, h]);\n  const A = re([livekit_client__WEBPACK_IMPORTED_MODULE_1__.Track.Source.Camera, livekit_client__WEBPACK_IMPORTED_MODULE_1__.Track.Source.Microphone], {\n    room: t,\n    participantIdentity: l == null ? void 0 : l.identity\n  }), w = re([livekit_client__WEBPACK_IMPORTED_MODULE_1__.Track.Source.Camera, livekit_client__WEBPACK_IMPORTED_MODULE_1__.Track.Source.Microphone], {\n    room: t,\n    participantIdentity: v == null ? void 0 : v.identity\n  }), O = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(\n    () => A.find((S) => S.source === livekit_client__WEBPACK_IMPORTED_MODULE_1__.Track.Source.Camera) ?? w.find((S) => S.source === livekit_client__WEBPACK_IMPORTED_MODULE_1__.Track.Source.Camera),\n    [A, w]\n  );\n  react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    h.emit(\"cameraChanged\", O);\n  }, [h, O]);\n  const R = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(\n    () => A.find((S) => S.source === livekit_client__WEBPACK_IMPORTED_MODULE_1__.Track.Source.Microphone) ?? w.find((S) => S.source === livekit_client__WEBPACK_IMPORTED_MODULE_1__.Track.Source.Microphone),\n    [A, w]\n  );\n  react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    h.emit(\"microphoneChanged\", R);\n  }, [h, R]);\n  const [m, f] = react__WEBPACK_IMPORTED_MODULE_0__.useState(t.state);\n  react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    const S = (_) => {\n      f(_);\n    };\n    return t.on(livekit_client__WEBPACK_IMPORTED_MODULE_1__.RoomEvent.ConnectionStateChanged, S), () => {\n      t.off(livekit_client__WEBPACK_IMPORTED_MODULE_1__.RoomEvent.ConnectionStateChanged, S);\n    };\n  }, [t]), react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    l && i();\n  }, [l]);\n  const [b, g] = react__WEBPACK_IMPORTED_MODULE_0__.useState(null);\n  react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    if (!l)\n      return;\n    const S = (_) => {\n      _.identity === (l == null ? void 0 : l.identity) && g(\"Agent left the room unexpectedly.\");\n    };\n    return t.on(livekit_client__WEBPACK_IMPORTED_MODULE_1__.RoomEvent.ParticipantDisconnected, S), () => {\n      t.off(livekit_client__WEBPACK_IMPORTED_MODULE_1__.RoomEvent.ParticipantDisconnected, S);\n    };\n  }, [l, t]), react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    m === livekit_client__WEBPACK_IMPORTED_MODULE_1__.ConnectionState.Disconnected && g(null);\n  }, [m]);\n  const [y, T] = react__WEBPACK_IMPORTED_MODULE_0__.useState(\n    () => t.localParticipant.getTrackPublication(livekit_client__WEBPACK_IMPORTED_MODULE_1__.Track.Source.Microphone) ?? null\n  );\n  react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    const S = () => {\n      T(t.localParticipant.getTrackPublication(livekit_client__WEBPACK_IMPORTED_MODULE_1__.Track.Source.Microphone) ?? null);\n    }, _ = () => {\n      T(null);\n    };\n    return t.localParticipant.on(\n      livekit_client__WEBPACK_IMPORTED_MODULE_1__.ParticipantEvent.LocalTrackPublished,\n      S\n    ), t.localParticipant.on(\n      livekit_client__WEBPACK_IMPORTED_MODULE_1__.ParticipantEvent.LocalTrackUnpublished,\n      _\n    ), () => {\n      t.localParticipant.off(\n        livekit_client__WEBPACK_IMPORTED_MODULE_1__.ParticipantEvent.LocalTrackPublished,\n        S\n      ), t.localParticipant.off(\n        livekit_client__WEBPACK_IMPORTED_MODULE_1__.ParticipantEvent.LocalTrackUnpublished,\n        _\n      );\n    };\n  }, [t.localParticipant]);\n  const M = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(() => {\n    const S = [];\n    return o && S.push(o), b && S.push(b), S;\n  }, [o, b]), P = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(() => {\n    if (M.length > 0)\n      return \"failed\";\n    let S = \"disconnected\";\n    return m !== livekit_client__WEBPACK_IMPORTED_MODULE_1__.ConnectionState.Disconnected && (S = \"connecting\"), y && (S = \"pre-connect-buffering\"), l && C[_contexts_CsO1QZ3r_mjs__WEBPACK_IMPORTED_MODULE_2__.a8.AgentState] && (S = C[_contexts_CsO1QZ3r_mjs__WEBPACK_IMPORTED_MODULE_2__.a8.AgentState]), S;\n  }, [\n    M,\n    m,\n    y,\n    l,\n    C\n  ]);\n  react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    h.emit(\"stateChanged\", P), u(P);\n  }, [h, P]), react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    p(l !== null);\n  }, [l]);\n  const F = e.connectionState === \"disconnected\";\n  react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    if (!F)\n      return c(r), () => {\n        a();\n      };\n  }, [F, r]);\n  const q = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(() => {\n    const S = {\n      attributes: C,\n      internal: {\n        agentParticipant: l,\n        workerParticipant: v,\n        emitter: h\n      }\n    };\n    switch (P) {\n      case \"disconnected\":\n        return {\n          ...S,\n          state: P,\n          ...x(P),\n          failureReasons: null,\n          // Clear inner values if no longer connected\n          cameraTrack: void 0,\n          microphoneTrack: void 0\n        };\n      case \"connecting\":\n        return {\n          ...S,\n          state: P,\n          ...x(P),\n          failureReasons: null,\n          // Clear inner values if no longer connected\n          cameraTrack: void 0,\n          microphoneTrack: void 0\n        };\n      case \"initializing\":\n      case \"idle\":\n        return {\n          ...S,\n          state: P,\n          ...x(P),\n          failureReasons: null,\n          cameraTrack: O,\n          microphoneTrack: R\n        };\n      case \"pre-connect-buffering\":\n        return {\n          ...S,\n          state: P,\n          ...x(P),\n          failureReasons: null,\n          cameraTrack: O,\n          microphoneTrack: R\n        };\n      case \"listening\":\n      case \"thinking\":\n      case \"speaking\":\n        return {\n          ...S,\n          state: P,\n          ...x(P),\n          failureReasons: null,\n          cameraTrack: O,\n          microphoneTrack: R\n        };\n      case \"failed\":\n        return {\n          ...S,\n          state: \"failed\",\n          ...x(\"failed\"),\n          failureReasons: M,\n          // Clear inner values if no longer connected\n          cameraTrack: void 0,\n          microphoneTrack: void 0\n        };\n    }\n  }, [C, h, l, P, O, R]), { waitUntilConnected: J, waitUntilCouldBeListening: K, waitUntilFinished: L } = mn(h, P), N = react__WEBPACK_IMPORTED_MODULE_0__.useCallback(\n    (S) => new Promise((_, Y) => {\n      const B = (z) => {\n        z && ($(), _(z));\n      }, j = () => {\n        $(), Y(new Error(\"useAgent(/* ... */).waitUntilCamera - signal aborted\"));\n      }, $ = () => {\n        h.off(\"cameraChanged\", B), S == null || S.removeEventListener(\"abort\", j);\n      };\n      h.on(\"cameraChanged\", B), S == null || S.addEventListener(\"abort\", j);\n    }),\n    [h]\n  ), Z = react__WEBPACK_IMPORTED_MODULE_0__.useCallback(\n    (S) => new Promise((_, Y) => {\n      const B = (z) => {\n        z && ($(), _(z));\n      }, j = () => {\n        $(), Y(new Error(\"useAgent(/* ... */).waitUntilMicrophone - signal aborted\"));\n      }, $ = () => {\n        h.off(\"microphoneChanged\", B), S == null || S.removeEventListener(\"abort\", j);\n      };\n      h.on(\"microphoneChanged\", B), S == null || S.addEventListener(\"abort\", j);\n    }),\n    [h]\n  );\n  return react__WEBPACK_IMPORTED_MODULE_0__.useMemo(() => ({\n    ...q,\n    waitUntilConnected: J,\n    waitUntilCouldBeListening: K,\n    waitUntilFinished: L,\n    waitUntilCamera: N,\n    waitUntilMicrophone: Z\n  }), [\n    q,\n    J,\n    K,\n    L,\n    N,\n    Z\n  ]);\n}\nvar pn = /* @__PURE__ */ ((e) => (e.ConnectionStateChanged = \"connectionStateChanged\", e.MediaDevicesError = \"mediaDevicesError\", e.EncryptionError = \"encryptionError\", e))(pn || {});\nfunction hn(e, n) {\n  const t = /* @__PURE__ */ new Set([...Object.keys(e), ...Object.keys(n)]);\n  for (const r of t)\n    switch (r) {\n      case \"roomName\":\n      case \"participantName\":\n      case \"participantIdentity\":\n      case \"participantMetadata\":\n      case \"participantAttributes\":\n      case \"agentName\":\n      case \"agentMetadata\":\n        if (e[r] !== n[r])\n          return !1;\n        break;\n      default:\n        const o = r;\n        throw new Error(`Options key ${o} not being checked for equality!`);\n    }\n  return !0;\n}\nfunction bn(e, n) {\n  const t = react__WEBPACK_IMPORTED_MODULE_0__.useRef(n);\n  return react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    t.current = n;\n  }, [n]), react__WEBPACK_IMPORTED_MODULE_0__.useCallback(\n    async (o, c) => {\n      if (t.current !== o)\n        return new Promise((a, i) => {\n          const u = (d) => {\n            d === o && (h(), a());\n          }, p = () => {\n            h(), i(\n              new Error(\n                `useSession(/* ... */).waitUntilConnectionState(${o}, /* signal */) - signal aborted`\n              )\n            );\n          }, h = () => {\n            e.off(\"connectionStateChanged\", u), c == null || c.removeEventListener(\"abort\", p);\n          };\n          e.on(\"connectionStateChanged\", u), c == null || c.addEventListener(\"abort\", p);\n        });\n    },\n    [e]\n  );\n}\nfunction gn(e, n) {\n  const t = e instanceof livekit_client__WEBPACK_IMPORTED_MODULE_1__.TokenSourceConfigurable, r = react__WEBPACK_IMPORTED_MODULE_0__.useRef(\n    t ? n : null\n  );\n  return react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    if (!t) {\n      r.current = null;\n      return;\n    }\n    r.current !== null && hn(r.current, n) || (r.current = n);\n  }, [t, n]), react__WEBPACK_IMPORTED_MODULE_0__.useCallback(async () => {\n    if (t) {\n      if (!r.current)\n        throw new Error(\n          \"AgentSession - memoized token fetch options are not set, but the passed tokenSource was an instance of TokenSourceConfigurable. If you are seeing this please make a new GitHub issue!\"\n        );\n      return e.fetch(r.current);\n    } else\n      return e.fetch();\n  }, [t, e]);\n}\nfunction is(e, n = {}) {\n  const { room: t, agentConnectTimeoutMilliseconds: r, ...o } = n, c = (0,_contexts_CsO1QZ3r_mjs__WEBPACK_IMPORTED_MODULE_2__.w)(), a = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(\n    () => c ?? t ?? new livekit_client__WEBPACK_IMPORTED_MODULE_1__.Room(),\n    [c, t]\n  ), i = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(\n    () => new he.EventEmitter(),\n    []\n  ), u = react__WEBPACK_IMPORTED_MODULE_0__.useCallback(\n    (L) => ({\n      isConnected: L === livekit_client__WEBPACK_IMPORTED_MODULE_1__.ConnectionState.Connected || L === livekit_client__WEBPACK_IMPORTED_MODULE_1__.ConnectionState.Reconnecting || L === livekit_client__WEBPACK_IMPORTED_MODULE_1__.ConnectionState.SignalReconnecting\n    }),\n    []\n  ), [p, h] = react__WEBPACK_IMPORTED_MODULE_0__.useState(a.state);\n  react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    const L = (N) => {\n      h(N);\n    };\n    return a.on(livekit_client__WEBPACK_IMPORTED_MODULE_1__.RoomEvent.ConnectionStateChanged, L), () => {\n      a.off(livekit_client__WEBPACK_IMPORTED_MODULE_1__.RoomEvent.ConnectionStateChanged, L);\n    };\n  }, [a]), react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    const L = async (N) => {\n      i.emit(\"mediaDevicesError\", N);\n    };\n    return a.on(livekit_client__WEBPACK_IMPORTED_MODULE_1__.RoomEvent.MediaDevicesError, L), () => {\n      a.off(livekit_client__WEBPACK_IMPORTED_MODULE_1__.RoomEvent.MediaDevicesError, L);\n    };\n  }, [a, i]), react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    const L = async (N) => {\n      i.emit(\"encryptionError\", N);\n    };\n    return a.on(livekit_client__WEBPACK_IMPORTED_MODULE_1__.RoomEvent.EncryptionError, L), () => {\n      a.off(livekit_client__WEBPACK_IMPORTED_MODULE_1__.RoomEvent.EncryptionError, L);\n    };\n  }, [a, i]);\n  const { localParticipant: d } = Oe({ room: a }), l = d.getTrackPublication(livekit_client__WEBPACK_IMPORTED_MODULE_1__.Track.Source.Camera), v = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(() => !l || l.isMuted ? null : {\n    source: livekit_client__WEBPACK_IMPORTED_MODULE_1__.Track.Source.Camera,\n    participant: d,\n    publication: l\n  }, [d, l, l == null ? void 0 : l.isMuted]), C = d.getTrackPublication(livekit_client__WEBPACK_IMPORTED_MODULE_1__.Track.Source.Microphone), k = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(() => !C || C.isMuted ? null : {\n    source: livekit_client__WEBPACK_IMPORTED_MODULE_1__.Track.Source.Microphone,\n    participant: d,\n    publication: C\n  }, [d, C, C == null ? void 0 : C.isMuted]), {\n    agentTimeoutFailureReason: A,\n    startAgentTimeout: w,\n    clearAgentTimeout: O,\n    clearAgentTimeoutFailureReason: R,\n    updateAgentTimeoutState: m,\n    updateAgentTimeoutParticipantExists: f\n  } = fn(), b = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(\n    () => ({\n      emitter: i,\n      tokenSource: e,\n      agentConnectTimeoutMilliseconds: r,\n      agentTimeoutFailureReason: A,\n      startAgentTimeout: w,\n      clearAgentTimeout: O,\n      clearAgentTimeoutFailureReason: R,\n      updateAgentTimeoutState: m,\n      updateAgentTimeoutParticipantExists: f\n    }),\n    [\n      i,\n      r,\n      e,\n      A,\n      w,\n      O,\n      R,\n      m,\n      f\n    ]\n  ), g = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(() => {\n    const L = {\n      room: a,\n      internal: b\n    };\n    switch (p) {\n      case livekit_client__WEBPACK_IMPORTED_MODULE_1__.ConnectionState.Connecting:\n        return {\n          ...L,\n          connectionState: livekit_client__WEBPACK_IMPORTED_MODULE_1__.ConnectionState.Connecting,\n          ...u(livekit_client__WEBPACK_IMPORTED_MODULE_1__.ConnectionState.Connecting),\n          local: {\n            cameraTrack: null,\n            microphoneTrack: null\n          }\n        };\n      case livekit_client__WEBPACK_IMPORTED_MODULE_1__.ConnectionState.Connected:\n      case livekit_client__WEBPACK_IMPORTED_MODULE_1__.ConnectionState.Reconnecting:\n      case livekit_client__WEBPACK_IMPORTED_MODULE_1__.ConnectionState.SignalReconnecting:\n        return {\n          ...L,\n          connectionState: p,\n          ...u(p),\n          local: {\n            cameraTrack: v,\n            microphoneTrack: k\n          }\n        };\n      case livekit_client__WEBPACK_IMPORTED_MODULE_1__.ConnectionState.Disconnected:\n        return {\n          ...L,\n          connectionState: livekit_client__WEBPACK_IMPORTED_MODULE_1__.ConnectionState.Disconnected,\n          ...u(livekit_client__WEBPACK_IMPORTED_MODULE_1__.ConnectionState.Disconnected),\n          local: {\n            cameraTrack: null,\n            microphoneTrack: null\n          }\n        };\n    }\n  }, [\n    b,\n    a,\n    p,\n    v,\n    k,\n    u\n  ]);\n  react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    i.emit(\"connectionStateChanged\", g.connectionState);\n  }, [i, g.connectionState]);\n  const y = bn(\n    i,\n    g.connectionState\n  ), T = react__WEBPACK_IMPORTED_MODULE_0__.useCallback(\n    async (L) => y(\n      livekit_client__WEBPACK_IMPORTED_MODULE_1__.ConnectionState.Connected,\n      L\n    ),\n    [y]\n  ), M = react__WEBPACK_IMPORTED_MODULE_0__.useCallback(\n    async (L) => y(livekit_client__WEBPACK_IMPORTED_MODULE_1__.ConnectionState.Disconnected, L),\n    [y]\n  ), P = Ie(\n    react__WEBPACK_IMPORTED_MODULE_0__.useMemo(\n      () => ({\n        connectionState: g.connectionState,\n        room: a,\n        internal: b\n      }),\n      [g, a, b]\n    )\n  ), F = gn(e, o), q = react__WEBPACK_IMPORTED_MODULE_0__.useCallback(\n    async (L = {}) => {\n      var B, j;\n      const {\n        signal: N,\n        tracks: Z = { microphone: { enabled: !0, publishOptions: { preConnectBuffer: !0 } } },\n        roomConnectOptions: S\n      } = L;\n      await M(N);\n      const _ = () => {\n        a.disconnect();\n      };\n      N == null || N.addEventListener(\"abort\", _);\n      let Y = !1;\n      await Promise.all([\n        F().then(({ serverUrl: $, participantToken: z }) => {\n          var be, ge;\n          return Y = (((ge = (be = (0,livekit_client__WEBPACK_IMPORTED_MODULE_1__.decodeTokenPayload)(z).roomConfig) == null ? void 0 : be.agents) == null ? void 0 : ge.length) ?? 0) > 0, a.connect($, z, S);\n        }),\n        // Start microphone (with preconnect buffer) by default\n        (B = Z.microphone) != null && B.enabled ? a.localParticipant.setMicrophoneEnabled(\n          !0,\n          void 0,\n          ((j = Z.microphone) == null ? void 0 : j.publishOptions) ?? {}\n        ) : Promise.resolve()\n      ]), await T(N), Y && await P.waitUntilConnected(N), N == null || N.removeEventListener(\"abort\", _);\n    },\n    [a, M, F, T, P.waitUntilConnected]\n  ), J = react__WEBPACK_IMPORTED_MODULE_0__.useCallback(async () => {\n    await a.disconnect();\n  }, [a]), K = react__WEBPACK_IMPORTED_MODULE_0__.useCallback(async () => {\n    const L = await F();\n    await a.prepareConnection(L.serverUrl, L.participantToken);\n  }, [F, a]);\n  return react__WEBPACK_IMPORTED_MODULE_0__.useEffect(\n    () => {\n      K().catch((L) => {\n        console.warn(\"WARNING: Room.prepareConnection failed:\", L);\n      });\n    },\n    [\n      /* note: no prepareConnection here, this effect should only ever run once! */\n    ]\n  ), react__WEBPACK_IMPORTED_MODULE_0__.useMemo(\n    () => ({\n      ...g,\n      waitUntilConnected: T,\n      waitUntilDisconnected: M,\n      prepareConnection: K,\n      start: q,\n      end: J\n    }),\n    [g, T, M, K, q, J]\n  );\n}\nfunction us(e, n, t, r) {\n  const o = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(() => () => {\n  }, []), c = react__WEBPACK_IMPORTED_MODULE_0__.useCallback(t ?? o, r ?? []), a = r ? c : t, i = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(() => e ? \"internal\" in e ? e.internal.emitter : e : null, [e]);\n  react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    if (!(!i || !a))\n      return i.on(n, a), () => {\n        i.off(n, a);\n      };\n  }, [i, n, a]);\n}\nvar vn = /* @__PURE__ */ ((e) => (e.MessageReceived = \"messageReceived\", e))(vn || {});\nfunction ls(e) {\n  const { room: n } = (0,_contexts_CsO1QZ3r_mjs__WEBPACK_IMPORTED_MODULE_2__.ad)(e), t = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(\n    () => new he.EventEmitter(),\n    []\n  ), r = Ie(e), o = cn({ room: n }), c = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(() => ({ room: n }), [n]), a = Kt(c), i = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(() => o.map((l) => {\n    var v, C, k;\n    switch (l.participantInfo.identity) {\n      case n.localParticipant.identity:\n        return {\n          type: \"userTranscript\",\n          message: l.text,\n          id: l.streamInfo.id,\n          timestamp: l.streamInfo.timestamp,\n          from: n.localParticipant\n        };\n      case ((v = r.internal.agentParticipant) == null ? void 0 : v.identity):\n      case ((C = r.internal.workerParticipant) == null ? void 0 : C.identity):\n        return {\n          type: \"agentTranscript\",\n          message: l.text,\n          id: l.streamInfo.id,\n          timestamp: l.streamInfo.timestamp,\n          from: ((k = r.internal.agentParticipant) == null ? void 0 : k.identity) === l.participantInfo.identity ? r.internal.agentParticipant : r.internal.workerParticipant\n        };\n      default:\n        return {\n          type: \"agentTranscript\",\n          message: l.text,\n          id: l.streamInfo.id,\n          timestamp: l.streamInfo.timestamp,\n          from: Array.from(n.remoteParticipants.values()).find(\n            (A) => A.identity === l.participantInfo.identity\n          )\n        };\n    }\n  }), [o, n]), u = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(() => [...i, ...a.chatMessages], [i, a.chatMessages]), p = react__WEBPACK_IMPORTED_MODULE_0__.useRef(/* @__PURE__ */ new Map()), h = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(() => {\n    const l = /* @__PURE__ */ new Date();\n    for (const v of u)\n      p.current.has(v.id) || p.current.set(v.id, l);\n    return u.sort((v, C) => {\n      const k = p.current.get(v.id), A = p.current.get(C.id);\n      return typeof k > \"u\" || typeof A > \"u\" ? 0 : k.getTime() - A.getTime();\n    });\n  }, [u]), d = react__WEBPACK_IMPORTED_MODULE_0__.useRef(/* @__PURE__ */ new Set());\n  return react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    for (const l of h)\n      d.current.has(l.id) || (d.current.add(l.id), t.emit(\"messageReceived\", l));\n  }, [h]), react__WEBPACK_IMPORTED_MODULE_0__.useMemo(\n    () => ({\n      messages: h,\n      send: a.send,\n      isSending: a.isSending,\n      internal: { emitter: t }\n    }),\n    [h, a.send, a.isSending]\n  );\n}\n\n//# sourceMappingURL=hooks-yU-srrIO.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxpdmVraXQvY29tcG9uZW50cy1yZWFjdC9kaXN0L2hvb2tzLXlVLXNycklPLm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUEyQjtBQUM2RDtBQUNvaUI7QUFDL2tCO0FBQzZQO0FBQzFTO0FBQ0EsWUFBWSx5Q0FBUTtBQUNwQixTQUFTLDRDQUFXO0FBQ3BCO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLFNBQVMsa0RBQWlCO0FBQzFCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQkFBc0IsY0FBYztBQUNwQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQiwyQ0FBVSxHQUFHLHFCQUFxQjtBQUNuRCxFQUFFLGtEQUFpQjtBQUNuQjtBQUNBLGNBQWMsc0JBQXNCO0FBQ3BDLFVBQVUscUJBQXFCO0FBQy9CO0FBQ0EsR0FBRztBQUNILFlBQVksOENBQWE7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLDJDQUFVO0FBQzNCLFNBQVMsNENBQVc7QUFDcEI7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQSxxRkFBcUYsMkNBQVU7QUFDL0Y7QUFDQTtBQUNBO0FBQ0EsU0FBUyw0Q0FBVztBQUNwQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0EsWUFBWSx5REFBQyxTQUFT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Q0FBaUMsMENBQVM7QUFDMUk7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLEdBQUcsWUFBWSx5Q0FBUTtBQUN2QixTQUFTLDRDQUFXO0FBQ3BCO0FBQ0E7QUFDQSxHQUFHLFFBQVEsMENBQVM7QUFDcEI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0I7QUFDbEIsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQStERTtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbGl2ZWtpdC1hZ2VuY3ktZnJvbnRlbmQvLi9ub2RlX21vZHVsZXMvQGxpdmVraXQvY29tcG9uZW50cy1yZWFjdC9kaXN0L2hvb2tzLXlVLXNycklPLm1qcz8xM2EwIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAqIGFzIHMgZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgeyB1c2VSZWYgYXMgYWUsIHVzZU1lbW8gYXMgTmUsIHVzZUNhbGxiYWNrIGFzIGVlLCB1c2VFZmZlY3QgYXMgX2UgfSBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCB7IHUgYXMgVSwgciBhcyBGZSwgYSBhcyBQZSwgYiBhcyB4ZSwgYyBhcyBRLCBkIGFzIFVlLCBlIGFzIEhlLCBmIGFzIG9lLCBnIGFzIFZlLCBoIGFzIHFlLCBpIGFzIHVlLCBqIGFzIEJlLCBrIGFzIGplLCBtIGFzIHplLCBHIGFzIFdlLCBuIGFzIEdlLCBvIGFzIEplLCBwIGFzIGxlLCBxIGFzICRlLCB0IGFzIFFlLCB2IGFzIExlLCB3IGFzIGRlLCB4IGFzIEFlLCB5IGFzIEtlLCBsIGFzIFYsIHogYXMgWWUsIEEgYXMgWGUsIEIgYXMgZmUsIEMgYXMgWmUsIEQgYXMgZXQsIEUgYXMgdHQsIEYgYXMgbnQsIEggYXMgc3QsIEkgYXMgcnQsIEogYXMgb3QsIEsgYXMgYXQsIE0gYXMgdmUsIE4gYXMgY3QsIE8gYXMgaXQsIFAgYXMgdXQsIFEgYXMgbHQsIFMgYXMgZHQsIFQgYXMgZnQsIFUgYXMgbXQsIFYgYXMgcHQsIFcgYXMgUmUsIFggYXMgaHQsIFkgYXMgYnQsIFogYXMgZ3QsIF8gYXMgdnQsICQgYXMgU3QsIGEwIGFzIHl0LCBhMSBhcyBDdCwgYTIgYXMgTXQsIGEzIGFzIFR0LCBhNCBhcyBFdCwgYTUgYXMga3QsIGE2IGFzIHd0LCBhNyBhcyBpZSwgYTggYXMgVywgYTkgYXMgUHQsIGFhIGFzIEx0LCBhYiBhcyBBdCwgYWMgYXMgUnQsIGFkIGFzIER0IH0gZnJvbSBcIi4vY29udGV4dHMtQ3NPMVFaM3IubWpzXCI7XG5pbXBvcnQgeyBtIGFzIEcgfSBmcm9tIFwiLi9yb29tLUJiNnVMeFM1Lm1qc1wiO1xuaW1wb3J0IHsgQ29ubmVjdGlvblN0YXRlIGFzIEksIExvY2FsVHJhY2tQdWJsaWNhdGlvbiBhcyBPdCwgZmFjaW5nTW9kZUZyb21Mb2NhbFRyYWNrIGFzIEl0LCBSb29tIGFzIERlLCBUcmFjayBhcyBFLCBjcmVhdGVBdWRpb0FuYWx5c2VyIGFzIG1lLCBQYXJ0aWNpcGFudEtpbmQgYXMgc2UsIE11dGV4IGFzIE50LCBQYXJ0aWNpcGFudEV2ZW50IGFzIFgsIFJvb21FdmVudCBhcyBILCBkZWNvZGVUb2tlblBheWxvYWQgYXMgX3QsIFRva2VuU291cmNlQ29uZmlndXJhYmxlIGFzIEZ0IH0gZnJvbSBcImxpdmVraXQtY2xpZW50XCI7XG5jb25zdCB4dCA9IChlKSA9PiB7XG4gIGNvbnN0IG4gPSBzLnVzZVJlZihlKTtcbiAgcmV0dXJuIHMudXNlRWZmZWN0KCgpID0+IHtcbiAgICBuLmN1cnJlbnQgPSBlO1xuICB9KSwgbjtcbn07XG5mdW5jdGlvbiBVdChlLCBuKSB7XG4gIGNvbnN0IHQgPSBWdCgpLCByID0geHQobik7XG4gIHJldHVybiBzLnVzZUxheW91dEVmZmVjdCgoKSA9PiB7XG4gICAgbGV0IG8gPSAhMTtcbiAgICBjb25zdCBjID0gZS5jdXJyZW50O1xuICAgIGlmICghYykgcmV0dXJuO1xuICAgIGZ1bmN0aW9uIGEoaSwgdSkge1xuICAgICAgbyB8fCByLmN1cnJlbnQoaSwgdSk7XG4gICAgfVxuICAgIHJldHVybiB0ID09IG51bGwgfHwgdC5zdWJzY3JpYmUoYywgYSksICgpID0+IHtcbiAgICAgIG8gPSAhMCwgdCA9PSBudWxsIHx8IHQudW5zdWJzY3JpYmUoYywgYSk7XG4gICAgfTtcbiAgfSwgW2UuY3VycmVudCwgdCwgcl0pLCB0ID09IG51bGwgPyB2b2lkIDAgOiB0Lm9ic2VydmVyO1xufVxuZnVuY3Rpb24gSHQoKSB7XG4gIGxldCBlID0gITEsIG4gPSBbXTtcbiAgY29uc3QgdCA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCk7XG4gIGlmICh0eXBlb2Ygd2luZG93ID4gXCJ1XCIpXG4gICAgcmV0dXJuO1xuICBjb25zdCByID0gbmV3IFJlc2l6ZU9ic2VydmVyKChvLCBjKSA9PiB7XG4gICAgbiA9IG4uY29uY2F0KG8pLCBlIHx8IHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xuICAgICAgY29uc3QgYSA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgU2V0KCk7XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG4ubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgaWYgKGEuaGFzKG5baV0udGFyZ2V0KSkgY29udGludWU7XG4gICAgICAgIGEuYWRkKG5baV0udGFyZ2V0KTtcbiAgICAgICAgY29uc3QgdSA9IHQuZ2V0KG5baV0udGFyZ2V0KTtcbiAgICAgICAgdSA9PSBudWxsIHx8IHUuZm9yRWFjaCgocCkgPT4gcChuW2ldLCBjKSk7XG4gICAgICB9XG4gICAgICBuID0gW10sIGUgPSAhMTtcbiAgICB9KSwgZSA9ICEwO1xuICB9KTtcbiAgcmV0dXJuIHtcbiAgICBvYnNlcnZlcjogcixcbiAgICBzdWJzY3JpYmUobywgYykge1xuICAgICAgci5vYnNlcnZlKG8pO1xuICAgICAgY29uc3QgYSA9IHQuZ2V0KG8pID8/IFtdO1xuICAgICAgYS5wdXNoKGMpLCB0LnNldChvLCBhKTtcbiAgICB9LFxuICAgIHVuc3Vic2NyaWJlKG8sIGMpIHtcbiAgICAgIGNvbnN0IGEgPSB0LmdldChvKSA/PyBbXTtcbiAgICAgIGlmIChhLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICByLnVub2JzZXJ2ZShvKSwgdC5kZWxldGUobyk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGNvbnN0IGkgPSBhLmluZGV4T2YoYyk7XG4gICAgICBpICE9PSAtMSAmJiBhLnNwbGljZShpLCAxKSwgdC5zZXQobywgYSk7XG4gICAgfVxuICB9O1xufVxubGV0IGNlO1xuY29uc3QgVnQgPSAoKSA9PiBjZSB8fCAoY2UgPSBIdCgpKSwgcXQgPSAoZSkgPT4ge1xuICBjb25zdCBbbiwgdF0gPSBzLnVzZVN0YXRlKHsgd2lkdGg6IDAsIGhlaWdodDogMCB9KTtcbiAgcy51c2VMYXlvdXRFZmZlY3QoKCkgPT4ge1xuICAgIGlmIChlLmN1cnJlbnQpIHtcbiAgICAgIGNvbnN0IHsgd2lkdGg6IG8sIGhlaWdodDogYyB9ID0gZS5jdXJyZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgdCh7IHdpZHRoOiBvLCBoZWlnaHQ6IGMgfSk7XG4gICAgfVxuICB9LCBbZS5jdXJyZW50XSk7XG4gIGNvbnN0IHIgPSBzLnVzZUNhbGxiYWNrKFxuICAgIChvKSA9PiB0KG8uY29udGVudFJlY3QpLFxuICAgIFtdXG4gICk7XG4gIHJldHVybiBVdChlLCByKSwgbjtcbn07XG5mdW5jdGlvbiBEKGUsIG4sIHQgPSAhMCkge1xuICBjb25zdCBbciwgb10gPSBzLnVzZVN0YXRlKG4pO1xuICByZXR1cm4gcy51c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmICh0ICYmIG8obiksIHR5cGVvZiB3aW5kb3cgPiBcInVcIiB8fCAhZSkgcmV0dXJuO1xuICAgIGNvbnN0IGMgPSBlLnN1YnNjcmliZShvKTtcbiAgICByZXR1cm4gKCkgPT4gYy51bnN1YnNjcmliZSgpO1xuICB9LCBbZSwgdF0pLCByO1xufVxuZnVuY3Rpb24ga24oZSkge1xuICBjb25zdCBuID0gKGMpID0+IHR5cGVvZiB3aW5kb3cgPCBcInVcIiA/IHdpbmRvdy5tYXRjaE1lZGlhKGMpLm1hdGNoZXMgOiAhMSwgW3QsIHJdID0gcy51c2VTdGF0ZShuKGUpKTtcbiAgZnVuY3Rpb24gbygpIHtcbiAgICByKG4oZSkpO1xuICB9XG4gIHJldHVybiBzLnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgY29uc3QgYyA9IHdpbmRvdy5tYXRjaE1lZGlhKGUpO1xuICAgIHJldHVybiBvKCksIGMuYWRkTGlzdGVuZXIgPyBjLmFkZExpc3RlbmVyKG8pIDogYy5hZGRFdmVudExpc3RlbmVyKFwiY2hhbmdlXCIsIG8pLCAoKSA9PiB7XG4gICAgICBjLnJlbW92ZUxpc3RlbmVyID8gYy5yZW1vdmVMaXN0ZW5lcihvKSA6IGMucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImNoYW5nZVwiLCBvKTtcbiAgICB9O1xuICB9LCBbZV0pLCB0O1xufVxuZnVuY3Rpb24gd24oZSkge1xuICBjb25zdCBuID0gVShlKSwgdCA9IHMudXNlQ2FsbGJhY2soYXN5bmMgKCkgPT4ge1xuICAgIGF3YWl0IG4uc3RhcnRBdWRpbygpO1xuICB9LCBbbl0pLCByID0gcy51c2VNZW1vKFxuICAgICgpID0+IEZlKG4pLFxuICAgIFtuXVxuICApLCB7IGNhblBsYXlBdWRpbzogbyB9ID0gRChyLCB7XG4gICAgY2FuUGxheUF1ZGlvOiBuLmNhblBsYXliYWNrQXVkaW9cbiAgfSk7XG4gIHJldHVybiB7IGNhblBsYXlBdWRpbzogbywgc3RhcnRBdWRpbzogdCB9O1xufVxuZnVuY3Rpb24gUG4oZSkge1xuICBjb25zdCB7IHN0YXRlOiBuLCBkaXNwYXRjaDogdCB9ID0gUGUoKS5waW47XG4gIHJldHVybiB7IGJ1dHRvblByb3BzOiBzLnVzZU1lbW8oKCkgPT4ge1xuICAgIGNvbnN0IHsgY2xhc3NOYW1lOiBvIH0gPSB4ZSgpO1xuICAgIHJldHVybiBHKGUsIHtcbiAgICAgIGNsYXNzTmFtZTogbyxcbiAgICAgIGRpc2FibGVkOiAhKG4gIT0gbnVsbCAmJiBuLmxlbmd0aCksXG4gICAgICBvbkNsaWNrOiAoKSA9PiB7XG4gICAgICAgIHQgJiYgdCh7IG1zZzogXCJjbGVhcl9waW5cIiB9KTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSwgW2UsIHQsIG5dKSB9O1xufVxuZnVuY3Rpb24gTG4oZSA9IHt9KSB7XG4gIGNvbnN0IG4gPSBRKGUucGFydGljaXBhbnQpLCB7IGNsYXNzTmFtZTogdCwgY29ubmVjdGlvblF1YWxpdHlPYnNlcnZlcjogciB9ID0gcy51c2VNZW1vKFxuICAgICgpID0+IFVlKG4pLFxuICAgIFtuXVxuICApLCBvID0gRChyLCBuLmNvbm5lY3Rpb25RdWFsaXR5KTtcbiAgcmV0dXJuIHsgY2xhc3NOYW1lOiB0LCBxdWFsaXR5OiBvIH07XG59XG5mdW5jdGlvbiB0ZShlKSB7XG4gIGNvbnN0IG4gPSBVKGUpLCB0ID0gcy51c2VNZW1vKCgpID0+IEhlKG4pLCBbbl0pO1xuICByZXR1cm4gRCh0LCBuLnN0YXRlKTtcbn1cbmZ1bmN0aW9uIEFuKGUsIG4pIHtcbiAgY29uc3QgdCA9IHR5cGVvZiBlID09IFwiZnVuY3Rpb25cIiA/IGUgOiBuLCByID0gdHlwZW9mIGUgPT0gXCJzdHJpbmdcIiA/IGUgOiB2b2lkIDAsIG8gPSBvZSgpLCB7IHNlbmQ6IGMsIG1lc3NhZ2VPYnNlcnZhYmxlOiBhLCBpc1NlbmRpbmdPYnNlcnZhYmxlOiBpIH0gPSBzLnVzZU1lbW8oXG4gICAgKCkgPT4gVmUobywgciwgdCksXG4gICAgW28sIHIsIHRdXG4gICksIHUgPSBEKGEsIHZvaWQgMCksIHAgPSBEKGksICExKTtcbiAgcmV0dXJuIHtcbiAgICBtZXNzYWdlOiB1LFxuICAgIHNlbmQ6IGMsXG4gICAgaXNTZW5kaW5nOiBwXG4gIH07XG59XG5mdW5jdGlvbiBSbihlKSB7XG4gIGNvbnN0IG4gPSBvZSgpLCB0ID0gdGUobik7XG4gIHJldHVybiB7IGJ1dHRvblByb3BzOiBzLnVzZU1lbW8oKCkgPT4ge1xuICAgIGNvbnN0IHsgY2xhc3NOYW1lOiBvLCBkaXNjb25uZWN0OiBjIH0gPSBxZShuKTtcbiAgICByZXR1cm4gRyhlLCB7XG4gICAgICBjbGFzc05hbWU6IG8sXG4gICAgICBvbkNsaWNrOiAoKSA9PiBjKGUuc3RvcFRyYWNrcyA/PyAhMCksXG4gICAgICBkaXNhYmxlZDogdCA9PT0gSS5EaXNjb25uZWN0ZWRcbiAgICB9KTtcbiAgfSwgW24sIGUsIHRdKSB9O1xufVxuZnVuY3Rpb24gQnQoZSkge1xuICBpZiAoZS5wdWJsaWNhdGlvbiBpbnN0YW5jZW9mIE90KSB7XG4gICAgY29uc3QgbiA9IGUucHVibGljYXRpb24udHJhY2s7XG4gICAgaWYgKG4pIHtcbiAgICAgIGNvbnN0IHsgZmFjaW5nTW9kZTogdCB9ID0gSXQobik7XG4gICAgICByZXR1cm4gdDtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIFwidW5kZWZpbmVkXCI7XG59XG5mdW5jdGlvbiBEbih7IHRyYWNrUmVmOiBlLCBwcm9wczogbiB9KSB7XG4gIGNvbnN0IHQgPSB1ZShlKSwgciA9IEJlKCksIHsgY2xhc3NOYW1lOiBvIH0gPSBzLnVzZU1lbW8oKCkgPT4gamUoKSwgW10pLCBjID0gcy51c2VNZW1vKCgpID0+IHplKHQsIHIgPT0gbnVsbCA/IHZvaWQgMCA6IHIucGluLnN0YXRlKSwgW3QsIHIgPT0gbnVsbCA/IHZvaWQgMCA6IHIucGluLnN0YXRlXSk7XG4gIHJldHVybiB7IG1lcmdlZFByb3BzOiBzLnVzZU1lbW8oXG4gICAgKCkgPT4gRyhuLCB7XG4gICAgICBjbGFzc05hbWU6IG8sXG4gICAgICBvbkNsaWNrOiAoaSkgPT4ge1xuICAgICAgICB2YXIgdSwgcCwgaCwgZCwgbDtcbiAgICAgICAgKHUgPSBuLm9uQ2xpY2spID09IG51bGwgfHwgdS5jYWxsKG4sIGkpLCBjID8gKGggPSByID09IG51bGwgPyB2b2lkIDAgOiAocCA9IHIucGluKS5kaXNwYXRjaCkgPT0gbnVsbCB8fCBoLmNhbGwocCwge1xuICAgICAgICAgIG1zZzogXCJjbGVhcl9waW5cIlxuICAgICAgICB9KSA6IChsID0gciA9PSBudWxsID8gdm9pZCAwIDogKGQgPSByLnBpbikuZGlzcGF0Y2gpID09IG51bGwgfHwgbC5jYWxsKGQsIHtcbiAgICAgICAgICBtc2c6IFwic2V0X3BpblwiLFxuICAgICAgICAgIHRyYWNrUmVmZXJlbmNlOiB0XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0pLFxuICAgIFtuLCBvLCB0LCBjLCByID09IG51bGwgPyB2b2lkIDAgOiByLnBpbl1cbiAgKSwgaW5Gb2N1czogYyB9O1xufVxuZnVuY3Rpb24gT24oZSwgbiwgdCA9IHt9KSB7XG4gIGNvbnN0IHIgPSB0LmdyaWRMYXlvdXRzID8/IFdlLCB7IHdpZHRoOiBvLCBoZWlnaHQ6IGMgfSA9IHF0KGUpLCBhID0gR2UociwgbiwgbywgYyk7XG4gIHJldHVybiBzLnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgZS5jdXJyZW50ICYmIGEgJiYgKGUuY3VycmVudC5zdHlsZS5zZXRQcm9wZXJ0eShcIi0tbGstY29sLWNvdW50XCIsIGEgPT0gbnVsbCA/IHZvaWQgMCA6IGEuY29sdW1ucy50b1N0cmluZygpKSwgZS5jdXJyZW50LnN0eWxlLnNldFByb3BlcnR5KFwiLS1say1yb3ctY291bnRcIiwgYSA9PSBudWxsID8gdm9pZCAwIDogYS5yb3dzLnRvU3RyaW5nKCkpKTtcbiAgfSwgW2UsIGFdKSwge1xuICAgIGxheW91dDogYSxcbiAgICBjb250YWluZXJXaWR0aDogbyxcbiAgICBjb250YWluZXJIZWlnaHQ6IGNcbiAgfTtcbn1cbmZ1bmN0aW9uIFNlKGUsIG4gPSB7fSkge1xuICB2YXIgaSwgdTtcbiAgY29uc3QgdCA9IHR5cGVvZiBlID09IFwic3RyaW5nXCIgPyBuLnBhcnRpY2lwYW50IDogZS5wYXJ0aWNpcGFudCwgciA9IFEodCksIG8gPSB0eXBlb2YgZSA9PSBcInN0cmluZ1wiID8geyBwYXJ0aWNpcGFudDogciwgc291cmNlOiBlIH0gOiBlLCBbYywgYV0gPSBzLnVzZVN0YXRlKFxuICAgICEhKChpID0gby5wdWJsaWNhdGlvbikgIT0gbnVsbCAmJiBpLmlzTXV0ZWQgfHwgKHUgPSByLmdldFRyYWNrUHVibGljYXRpb24oby5zb3VyY2UpKSAhPSBudWxsICYmIHUuaXNNdXRlZClcbiAgKTtcbiAgcmV0dXJuIHMudXNlRWZmZWN0KCgpID0+IHtcbiAgICBjb25zdCBwID0gSmUobykuc3Vic2NyaWJlKGEpO1xuICAgIHJldHVybiAoKSA9PiBwLnVuc3Vic2NyaWJlKCk7XG4gIH0sIFtsZShvKV0pLCBjO1xufVxuZnVuY3Rpb24ganQoZSkge1xuICBjb25zdCBuID0gUShlKSwgdCA9IHMudXNlTWVtbygoKSA9PiAkZShuKSwgW25dKTtcbiAgcmV0dXJuIEQodCwgbi5pc1NwZWFraW5nKTtcbn1cbmZ1bmN0aW9uIE9lKGUgPSB7fSkge1xuICBjb25zdCBuID0gVShlLnJvb20pLCBbdCwgcl0gPSBzLnVzZVN0YXRlKG4ubG9jYWxQYXJ0aWNpcGFudCksIFtvLCBjXSA9IHMudXNlU3RhdGUoXG4gICAgdC5pc01pY3JvcGhvbmVFbmFibGVkXG4gICksIFthLCBpXSA9IHMudXNlU3RhdGUodC5pc0NhbWVyYUVuYWJsZWQpLCBbdSwgcF0gPSBzLnVzZVN0YXRlKFxuICAgIHQuaXNTY3JlZW5TaGFyZUVuYWJsZWRcbiAgKSwgW2gsIGRdID0gcy51c2VTdGF0ZShcbiAgICB0Lmxhc3RNaWNyb3Bob25lRXJyb3JcbiAgKSwgW2wsIHZdID0gcy51c2VTdGF0ZSh0Lmxhc3RDYW1lcmFFcnJvciksIFtDLCBrXSA9IHMudXNlU3RhdGUoXG4gICAgdm9pZCAwXG4gICksIFtBLCB3XSA9IHMudXNlU3RhdGUodm9pZCAwKSwgTyA9IChSKSA9PiB7XG4gICAgaShSLmlzQ2FtZXJhRW5hYmxlZCksIGMoUi5pc01pY3JvcGhvbmVFbmFibGVkKSwgcChSLmlzU2NyZWVuU2hhcmVFbmFibGVkKSwgdyhSLmNhbWVyYVRyYWNrKSwgayhSLm1pY3JvcGhvbmVUcmFjayksIGQoUi5wYXJ0aWNpcGFudC5sYXN0TWljcm9waG9uZUVycm9yKSwgdihSLnBhcnRpY2lwYW50Lmxhc3RDYW1lcmFFcnJvciksIHIoUi5wYXJ0aWNpcGFudCk7XG4gIH07XG4gIHJldHVybiBzLnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgY29uc3QgUiA9IFFlKG4ubG9jYWxQYXJ0aWNpcGFudCkuc3Vic2NyaWJlKE8pO1xuICAgIHJldHVybiAoKSA9PiBSLnVuc3Vic2NyaWJlKCk7XG4gIH0sIFtuXSksIHtcbiAgICBpc01pY3JvcGhvbmVFbmFibGVkOiBvLFxuICAgIGlzU2NyZWVuU2hhcmVFbmFibGVkOiB1LFxuICAgIGlzQ2FtZXJhRW5hYmxlZDogYSxcbiAgICBtaWNyb3Bob25lVHJhY2s6IEMsXG4gICAgY2FtZXJhVHJhY2s6IEEsXG4gICAgbGFzdE1pY3JvcGhvbmVFcnJvcjogaCxcbiAgICBsYXN0Q2FtZXJhRXJyb3I6IGwsXG4gICAgbG9jYWxQYXJ0aWNpcGFudDogdFxuICB9O1xufVxuZnVuY3Rpb24gSW4oKSB7XG4gIGNvbnN0IGUgPSBvZSgpLCBuID0gcy51c2VNZW1vKFxuICAgICgpID0+IExlKGUubG9jYWxQYXJ0aWNpcGFudCksXG4gICAgW2VdXG4gICk7XG4gIHJldHVybiBEKG4sIGUubG9jYWxQYXJ0aWNpcGFudC5wZXJtaXNzaW9ucyk7XG59XG5mdW5jdGlvbiBObih7XG4gIGtpbmQ6IGUsXG4gIHJvb206IG4sXG4gIHRyYWNrOiB0LFxuICByZXF1ZXN0UGVybWlzc2lvbnM6IHIsXG4gIG9uRXJyb3I6IG9cbn0pIHtcbiAgY29uc3QgYyA9IGRlKCksIGEgPSBzLnVzZU1lbW8oKCkgPT4gbiA/PyBjID8/IG5ldyBEZSgpLCBbbiwgY10pLCBpID0gcy51c2VNZW1vKFxuICAgICgpID0+IEFlKGUsIG8sIHIpLFxuICAgIFtlLCByLCBvXVxuICApLCB1ID0gRChpLCBbXSksIFtwLCBoXSA9IHMudXNlU3RhdGUoXG4gICAgKGEgPT0gbnVsbCA/IHZvaWQgMCA6IGEuZ2V0QWN0aXZlRGV2aWNlKGUpKSA/PyBcImRlZmF1bHRcIlxuICApLCB7IGNsYXNzTmFtZTogZCwgYWN0aXZlRGV2aWNlT2JzZXJ2YWJsZTogbCwgc2V0QWN0aXZlTWVkaWFEZXZpY2U6IHYgfSA9IHMudXNlTWVtbyhcbiAgICAoKSA9PiBLZShlLCBhKSxcbiAgICBbZSwgYSwgdF1cbiAgKTtcbiAgcmV0dXJuIHMudXNlRWZmZWN0KCgpID0+IHtcbiAgICBjb25zdCBDID0gbC5zdWJzY3JpYmUoKGspID0+IHtcbiAgICAgIGsgJiYgKFYuaW5mbyhcInNldEN1cnJlbnREZXZpY2VJZFwiLCBrKSwgaChrKSk7XG4gICAgfSk7XG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIEMgPT0gbnVsbCB8fCBDLnVuc3Vic2NyaWJlKCk7XG4gICAgfTtcbiAgfSwgW2xdKSwgeyBkZXZpY2VzOiB1LCBjbGFzc05hbWU6IGQsIGFjdGl2ZURldmljZUlkOiBwLCBzZXRBY3RpdmVNZWRpYURldmljZTogdiB9O1xufVxuZnVuY3Rpb24gX24oe1xuICBraW5kOiBlLFxuICBvbkVycm9yOiBuXG59KSB7XG4gIGNvbnN0IHQgPSBzLnVzZU1lbW8oXG4gICAgKCkgPT4gQWUoZSwgbiksXG4gICAgW2UsIG5dXG4gICk7XG4gIHJldHVybiBEKHQsIFtdKTtcbn1cbmZ1bmN0aW9uIHp0KGUsIG4sIHQgPSB7fSkge1xuICBjb25zdCByID0gcy51c2VSZWYoW10pLCBvID0gcy51c2VSZWYoLTEpLCBjID0gbiAhPT0gby5jdXJyZW50LCBhID0gdHlwZW9mIHQuY3VzdG9tU29ydEZ1bmN0aW9uID09IFwiZnVuY3Rpb25cIiA/IHQuY3VzdG9tU29ydEZ1bmN0aW9uKGUpIDogWWUoZSk7XG4gIGxldCBpID0gWy4uLmFdO1xuICBpZiAoYyA9PT0gITEpXG4gICAgdHJ5IHtcbiAgICAgIGkgPSBYZShyLmN1cnJlbnQsIGEsIG4pO1xuICAgIH0gY2F0Y2ggKHUpIHtcbiAgICAgIFYuZXJyb3IoXCJFcnJvciB3aGlsZSBydW5uaW5nIHVwZGF0ZVBhZ2VzKCk6IFwiLCB1KTtcbiAgICB9XG4gIHJldHVybiBjID8gci5jdXJyZW50ID0gYSA6IHIuY3VycmVudCA9IGksIG8uY3VycmVudCA9IG4sIGk7XG59XG5mdW5jdGlvbiBGbihlLCBuKSB7XG4gIGNvbnN0IFt0LCByXSA9IHMudXNlU3RhdGUoMSksIG8gPSBNYXRoLm1heChNYXRoLmNlaWwobi5sZW5ndGggLyBlKSwgMSk7XG4gIHQgPiBvICYmIHIobyk7XG4gIGNvbnN0IGMgPSB0ICogZSwgYSA9IGMgLSBlLCBpID0gKGQpID0+IHtcbiAgICByKChsKSA9PiBkID09PSBcIm5leHRcIiA/IGwgPT09IG8gPyBsIDogbCArIDEgOiBsID09PSAxID8gbCA6IGwgLSAxKTtcbiAgfSwgdSA9IChkKSA9PiB7XG4gICAgZCA+IG8gPyByKG8pIDogZCA8IDEgPyByKDEpIDogcihkKTtcbiAgfSwgaCA9IHp0KG4sIGUpLnNsaWNlKGEsIGMpO1xuICByZXR1cm4ge1xuICAgIHRvdGFsUGFnZUNvdW50OiBvLFxuICAgIG5leHRQYWdlOiAoKSA9PiBpKFwibmV4dFwiKSxcbiAgICBwcmV2UGFnZTogKCkgPT4gaShcInByZXZpb3VzXCIpLFxuICAgIHNldFBhZ2U6IHUsXG4gICAgZmlyc3RJdGVtSW5kZXg6IGEsXG4gICAgbGFzdEl0ZW1JbmRleDogYyxcbiAgICB0cmFja3M6IGgsXG4gICAgY3VycmVudFBhZ2U6IHRcbiAgfTtcbn1cbmZ1bmN0aW9uIHhuKGUgPSB7fSkge1xuICBsZXQgbiA9IGZlKCk7XG4gIGUucGFydGljaXBhbnQgJiYgKG4gPSBlLnBhcnRpY2lwYW50KTtcbiAgY29uc3QgdCA9IHMudXNlTWVtbygoKSA9PiBaZShuKSwgW25dKSwgeyBpZGVudGl0eTogciwgbmFtZTogbywgbWV0YWRhdGE6IGMgfSA9IEQodCwge1xuICAgIG5hbWU6IG4gPT0gbnVsbCA/IHZvaWQgMCA6IG4ubmFtZSxcbiAgICBpZGVudGl0eTogbiA9PSBudWxsID8gdm9pZCAwIDogbi5pZGVudGl0eSxcbiAgICBtZXRhZGF0YTogbiA9PSBudWxsID8gdm9pZCAwIDogbi5tZXRhZGF0YVxuICB9KTtcbiAgcmV0dXJuIHsgaWRlbnRpdHk6IHIsIG5hbWU6IG8sIG1ldGFkYXRhOiBjIH07XG59XG5mdW5jdGlvbiBVbihlID0ge30pIHtcbiAgY29uc3QgbiA9IFEoZS5wYXJ0aWNpcGFudCksIHQgPSBzLnVzZU1lbW8oKCkgPT4gTGUobiksIFtuXSk7XG4gIHJldHVybiBEKHQsIG4ucGVybWlzc2lvbnMpO1xufVxuZnVuY3Rpb24gSG4oe1xuICB0cmFja1JlZjogZSxcbiAgb25QYXJ0aWNpcGFudENsaWNrOiBuLFxuICBkaXNhYmxlU3BlYWtpbmdJbmRpY2F0b3I6IHQsXG4gIGh0bWxQcm9wczogclxufSkge1xuICBjb25zdCBvID0gdWUoZSksIGMgPSBzLnVzZU1lbW8oKCkgPT4ge1xuICAgIGNvbnN0IHsgY2xhc3NOYW1lOiBsIH0gPSBldCgpO1xuICAgIHJldHVybiBHKHIsIHtcbiAgICAgIGNsYXNzTmFtZTogbCxcbiAgICAgIG9uQ2xpY2s6ICh2KSA9PiB7XG4gICAgICAgIHZhciBDO1xuICAgICAgICBpZiAoKEMgPSByLm9uQ2xpY2spID09IG51bGwgfHwgQy5jYWxsKHIsIHYpLCB0eXBlb2YgbiA9PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICBjb25zdCBrID0gby5wdWJsaWNhdGlvbiA/PyBvLnBhcnRpY2lwYW50LmdldFRyYWNrUHVibGljYXRpb24oby5zb3VyY2UpO1xuICAgICAgICAgIG4oeyBwYXJ0aWNpcGFudDogby5wYXJ0aWNpcGFudCwgdHJhY2s6IGsgfSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcbiAgfSwgW1xuICAgIHIsXG4gICAgbixcbiAgICBvLnB1YmxpY2F0aW9uLFxuICAgIG8uc291cmNlLFxuICAgIG8ucGFydGljaXBhbnRcbiAgXSksIGEgPSBvLnBhcnRpY2lwYW50LmdldFRyYWNrUHVibGljYXRpb24oRS5Tb3VyY2UuTWljcm9waG9uZSksIGkgPSBzLnVzZU1lbW8oKCkgPT4gKHtcbiAgICBwYXJ0aWNpcGFudDogby5wYXJ0aWNpcGFudCxcbiAgICBzb3VyY2U6IEUuU291cmNlLk1pY3JvcGhvbmUsXG4gICAgcHVibGljYXRpb246IGFcbiAgfSksIFthLCBvLnBhcnRpY2lwYW50XSksIHUgPSBTZShvKSwgcCA9IFNlKGkpLCBoID0ganQoby5wYXJ0aWNpcGFudCksIGQgPSBCdChvKTtcbiAgcmV0dXJuIHtcbiAgICBlbGVtZW50UHJvcHM6IHtcbiAgICAgIFwiZGF0YS1say1hdWRpby1tdXRlZFwiOiBwLFxuICAgICAgXCJkYXRhLWxrLXZpZGVvLW11dGVkXCI6IHUsXG4gICAgICBcImRhdGEtbGstc3BlYWtpbmdcIjogdCA9PT0gITAgPyAhMSA6IGgsXG4gICAgICBcImRhdGEtbGstbG9jYWwtcGFydGljaXBhbnRcIjogby5wYXJ0aWNpcGFudC5pc0xvY2FsLFxuICAgICAgXCJkYXRhLWxrLXNvdXJjZVwiOiBvLnNvdXJjZSxcbiAgICAgIFwiZGF0YS1say1mYWNpbmctbW9kZVwiOiBkLFxuICAgICAgLi4uY1xuICAgIH1cbiAgfTtcbn1cbmZ1bmN0aW9uIHBlKGUgPSB7fSkge1xuICBjb25zdCBuID0gVShlLnJvb20pLCBbdCwgcl0gPSBzLnVzZVN0YXRlKFtdKTtcbiAgcmV0dXJuIHMudXNlRWZmZWN0KCgpID0+IHtcbiAgICBjb25zdCBvID0gdHQobiwge1xuICAgICAgYWRkaXRpb25hbFJvb21FdmVudHM6IGUudXBkYXRlT25seU9uXG4gICAgfSkuc3Vic2NyaWJlKHIpO1xuICAgIHJldHVybiAoKSA9PiBvLnVuc3Vic2NyaWJlKCk7XG4gIH0sIFtuLCBKU09OLnN0cmluZ2lmeShlLnVwZGF0ZU9ubHlPbildKSwgdDtcbn1cbmZ1bmN0aW9uIFd0KGUgPSB7fSkge1xuICBjb25zdCBuID0gcGUoZSksIHsgbG9jYWxQYXJ0aWNpcGFudDogdCB9ID0gT2UoZSk7XG4gIHJldHVybiBzLnVzZU1lbW8oXG4gICAgKCkgPT4gW3QsIC4uLm5dLFxuICAgIFt0LCBuXVxuICApO1xufVxuZnVuY3Rpb24gVm4oZSkge1xuICByZXR1cm4gZSA9IG50KGUpLCBzLnVzZU1lbW8oKCkgPT4gKGUgPT0gbnVsbCA/IHZvaWQgMCA6IGUucGluLnN0YXRlKSAhPT0gdm9pZCAwICYmIGUucGluLnN0YXRlLmxlbmd0aCA+PSAxID8gZS5waW4uc3RhdGUgOiBbXSwgW2UucGluLnN0YXRlXSk7XG59XG5mdW5jdGlvbiBxbihlLCBuID0ge30pIHtcbiAgY29uc3QgdCA9IG9lKCksIFtyXSA9IHMudXNlU3RhdGUobi51cGRhdGVPbmx5T24pLCBvID0gcy51c2VNZW1vKCgpID0+IHR5cGVvZiBlID09IFwic3RyaW5nXCIgPyBzdCh0LCBlLCB7XG4gICAgYWRkaXRpb25hbEV2ZW50czogclxuICB9KSA6IHJ0KHQsIGUsIHtcbiAgICBhZGRpdGlvbmFsRXZlbnRzOiByXG4gIH0pLCBbdCwgSlNPTi5zdHJpbmdpZnkoZSksIHJdKSwgW2MsIGFdID0gcy51c2VTdGF0ZSh7XG4gICAgcDogdm9pZCAwXG4gIH0pO1xuICByZXR1cm4gcy51c2VFZmZlY3QoKCkgPT4ge1xuICAgIGNvbnN0IGkgPSBvLnN1YnNjcmliZSgodSkgPT4gYSh7IHA6IHUgfSkpO1xuICAgIHJldHVybiAoKSA9PiBpLnVuc3Vic2NyaWJlKCk7XG4gIH0sIFtvXSksIGMucDtcbn1cbmZ1bmN0aW9uIEJuKGUgPSB7fSkge1xuICBjb25zdCBuID0gVShlLnJvb20pLCB0ID0gcy51c2VNZW1vKCgpID0+IG90KG4pLCBbbl0pLCB7IG5hbWU6IHIsIG1ldGFkYXRhOiBvIH0gPSBEKHQsIHtcbiAgICBuYW1lOiBuLm5hbWUsXG4gICAgbWV0YWRhdGE6IG4ubWV0YWRhdGFcbiAgfSk7XG4gIHJldHVybiB7IG5hbWU6IHIsIG1ldGFkYXRhOiBvIH07XG59XG5mdW5jdGlvbiBHdChlKSB7XG4gIGNvbnN0IG4gPSBVKGUgPT0gbnVsbCA/IHZvaWQgMCA6IGUucm9vbSksIHQgPSBzLnVzZU1lbW8oKCkgPT4gYXQobiksIFtuXSk7XG4gIHJldHVybiBEKHQsIG4uYWN0aXZlU3BlYWtlcnMpO1xufVxuZnVuY3Rpb24gam4oZSkge1xuICBjb25zdCBbbiwgdF0gPSBzLnVzZVN0YXRlKFxuICAgIHZlKGUpXG4gICksIHIgPSBHdCgpO1xuICByZXR1cm4gcy51c2VFZmZlY3QoKCkgPT4ge1xuICAgIHQodmUoZSkpO1xuICB9LCBbciwgZV0pLCBuO1xufVxuZnVuY3Rpb24gem4oeyByb29tOiBlLCBwcm9wczogbiB9KSB7XG4gIGNvbnN0IHQgPSBVKGUpLCB7IGNsYXNzTmFtZTogciwgcm9vbUF1ZGlvUGxheWJhY2tBbGxvd2VkT2JzZXJ2YWJsZTogbywgaGFuZGxlU3RhcnRBdWRpb1BsYXliYWNrOiBjIH0gPSBzLnVzZU1lbW8oXG4gICAgKCkgPT4gY3QoKSxcbiAgICBbXVxuICApLCBhID0gcy51c2VNZW1vKFxuICAgICgpID0+IG8odCksXG4gICAgW3QsIG9dXG4gICksIHsgY2FuUGxheUF1ZGlvOiBpIH0gPSBEKGEsIHtcbiAgICBjYW5QbGF5QXVkaW86IHQuY2FuUGxheWJhY2tBdWRpb1xuICB9KTtcbiAgcmV0dXJuIHsgbWVyZ2VkUHJvcHM6IHMudXNlTWVtbyhcbiAgICAoKSA9PiBHKG4sIHtcbiAgICAgIGNsYXNzTmFtZTogcixcbiAgICAgIG9uQ2xpY2s6ICgpID0+IHtcbiAgICAgICAgYyh0KTtcbiAgICAgIH0sXG4gICAgICBzdHlsZTogeyBkaXNwbGF5OiBpID8gXCJub25lXCIgOiBcImJsb2NrXCIgfVxuICAgIH0pLFxuICAgIFtuLCByLCBpLCBjLCB0XVxuICApLCBjYW5QbGF5QXVkaW86IGkgfTtcbn1cbmZ1bmN0aW9uIFduKHsgcm9vbTogZSwgcHJvcHM6IG4gfSkge1xuICBjb25zdCB0ID0gVShlKSwgeyBjbGFzc05hbWU6IHIsIHJvb21WaWRlb1BsYXliYWNrQWxsb3dlZE9ic2VydmFibGU6IG8sIGhhbmRsZVN0YXJ0VmlkZW9QbGF5YmFjazogYyB9ID0gcy51c2VNZW1vKFxuICAgICgpID0+IGl0KCksXG4gICAgW11cbiAgKSwgYSA9IHMudXNlTWVtbyhcbiAgICAoKSA9PiBvKHQpLFxuICAgIFt0LCBvXVxuICApLCB7IGNhblBsYXlWaWRlbzogaSB9ID0gRChhLCB7XG4gICAgY2FuUGxheVZpZGVvOiB0LmNhblBsYXliYWNrVmlkZW9cbiAgfSk7XG4gIHJldHVybiB7IG1lcmdlZFByb3BzOiBzLnVzZU1lbW8oXG4gICAgKCkgPT4gRyhuLCB7XG4gICAgICBjbGFzc05hbWU6IHIsXG4gICAgICBvbkNsaWNrOiAoKSA9PiB7XG4gICAgICAgIGModCk7XG4gICAgICB9LFxuICAgICAgc3R5bGU6IHsgZGlzcGxheTogaSA/IFwibm9uZVwiIDogXCJibG9ja1wiIH1cbiAgICB9KSxcbiAgICBbbiwgciwgaSwgYywgdF1cbiAgKSwgY2FuUGxheVZpZGVvOiBpIH07XG59XG5mdW5jdGlvbiBHbihlLCBuID0ge30pIHtcbiAgY29uc3QgdCA9IHMudXNlUmVmKG51bGwpLCByID0gcy51c2VSZWYobnVsbCksIG8gPSBuLm1pblN3aXBlRGlzdGFuY2UgPz8gNTAsIGMgPSAodSkgPT4ge1xuICAgIHIuY3VycmVudCA9IG51bGwsIHQuY3VycmVudCA9IHUudGFyZ2V0VG91Y2hlc1swXS5jbGllbnRYO1xuICB9LCBhID0gKHUpID0+IHtcbiAgICByLmN1cnJlbnQgPSB1LnRhcmdldFRvdWNoZXNbMF0uY2xpZW50WDtcbiAgfSwgaSA9IHMudXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIGlmICghdC5jdXJyZW50IHx8ICFyLmN1cnJlbnQpXG4gICAgICByZXR1cm47XG4gICAgY29uc3QgdSA9IHQuY3VycmVudCAtIHIuY3VycmVudCwgcCA9IHUgPiBvLCBoID0gdSA8IC1vO1xuICAgIHAgJiYgbi5vbkxlZnRTd2lwZSAmJiBuLm9uTGVmdFN3aXBlKCksIGggJiYgbi5vblJpZ2h0U3dpcGUgJiYgbi5vblJpZ2h0U3dpcGUoKTtcbiAgfSwgW28sIG5dKTtcbiAgcy51c2VFZmZlY3QoKCkgPT4ge1xuICAgIGNvbnN0IHUgPSBlLmN1cnJlbnQ7XG4gICAgcmV0dXJuIHUgJiYgKHUuYWRkRXZlbnRMaXN0ZW5lcihcInRvdWNoc3RhcnRcIiwgYywgeyBwYXNzaXZlOiAhMCB9KSwgdS5hZGRFdmVudExpc3RlbmVyKFwidG91Y2htb3ZlXCIsIGEsIHsgcGFzc2l2ZTogITAgfSksIHUuYWRkRXZlbnRMaXN0ZW5lcihcInRvdWNoZW5kXCIsIGksIHsgcGFzc2l2ZTogITAgfSkpLCAoKSA9PiB7XG4gICAgICB1ICYmICh1LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJ0b3VjaHN0YXJ0XCIsIGMpLCB1LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJ0b3VjaG1vdmVcIiwgYSksIHUucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInRvdWNoZW5kXCIsIGkpKTtcbiAgICB9O1xuICB9LCBbZSwgaV0pO1xufVxuZnVuY3Rpb24gSm4oeyBwcm9wczogZSB9KSB7XG4gIGNvbnN0IHsgZGlzcGF0Y2g6IG4sIHN0YXRlOiB0IH0gPSBQZSgpLndpZGdldCwgeyBjbGFzc05hbWU6IHIgfSA9IHMudXNlTWVtbygoKSA9PiB1dCgpLCBbXSk7XG4gIHJldHVybiB7IG1lcmdlZFByb3BzOiBzLnVzZU1lbW8oKCkgPT4gRyhlLCB7XG4gICAgY2xhc3NOYW1lOiByLFxuICAgIG9uQ2xpY2s6ICgpID0+IHtcbiAgICAgIG4gJiYgbih7IG1zZzogXCJ0b2dnbGVfY2hhdFwiIH0pO1xuICAgIH0sXG4gICAgXCJhcmlhLXByZXNzZWRcIjogdCAhPSBudWxsICYmIHQuc2hvd0NoYXQgPyBcInRydWVcIiA6IFwiZmFsc2VcIixcbiAgICBcImRhdGEtbGstdW5yZWFkLW1zZ3NcIjogdCA/IHQudW5yZWFkTWVzc2FnZXMgPCAxMCA/IHQudW5yZWFkTWVzc2FnZXMudG9GaXhlZCgwKSA6IFwiOStcIiA6IFwiMFwiXG4gIH0pLCBbZSwgciwgbiwgdF0pIH07XG59XG5mdW5jdGlvbiAkbihlLCBuLCB0ID0ge30pIHtcbiAgY29uc3QgW3IsIG9dID0gcy51c2VTdGF0ZSh2b2lkIDApO1xuICByZXR1cm4gcy51c2VFZmZlY3QoKCkgPT4ge1xuICAgIHZhciBhO1xuICAgIGlmIChlID09PSB2b2lkIDApXG4gICAgICB0aHJvdyBFcnJvcihcInRva2VuIGVuZHBvaW50IG5lZWRzIHRvIGJlIGRlZmluZWRcIik7XG4gICAgaWYgKCgoYSA9IHQudXNlckluZm8pID09IG51bGwgPyB2b2lkIDAgOiBhLmlkZW50aXR5KSA9PT0gdm9pZCAwKVxuICAgICAgcmV0dXJuO1xuICAgIChhc3luYyAoKSA9PiB7XG4gICAgICBWLmRlYnVnKFwiZmV0Y2hpbmcgdG9rZW5cIik7XG4gICAgICBjb25zdCBpID0gbmV3IFVSTFNlYXJjaFBhcmFtcyh7IC4uLnQudXNlckluZm8sIHJvb21OYW1lOiBuIH0pLCB1ID0gYXdhaXQgZmV0Y2goYCR7ZX0/JHtpLnRvU3RyaW5nKCl9YCk7XG4gICAgICBpZiAoIXUub2spIHtcbiAgICAgICAgVi5lcnJvcihcbiAgICAgICAgICBgQ291bGQgbm90IGZldGNoIHRva2VuLiBTZXJ2ZXIgcmVzcG9uZGVkIHdpdGggc3RhdHVzICR7dS5zdGF0dXN9OiAke3Uuc3RhdHVzVGV4dH1gXG4gICAgICAgICk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHsgYWNjZXNzVG9rZW46IHAgfSA9IGF3YWl0IHUuanNvbigpO1xuICAgICAgbyhwKTtcbiAgICB9KSgpO1xuICB9LCBbZSwgbiwgSlNPTi5zdHJpbmdpZnkodCldKSwgcjtcbn1cbmZ1bmN0aW9uIFFuKGUpIHtcbiAgdmFyIGMsIGE7XG4gIGNvbnN0IG4gPSB1ZShlKSwgeyBjbGFzc05hbWU6IHQsIG1lZGlhTXV0ZWRPYnNlcnZlcjogciB9ID0gcy51c2VNZW1vKFxuICAgICgpID0+IGx0KG4pLFxuICAgIFtsZShuKV1cbiAgKTtcbiAgcmV0dXJuIHsgaXNNdXRlZDogRChcbiAgICByLFxuICAgICEhKChjID0gbi5wdWJsaWNhdGlvbikgIT0gbnVsbCAmJiBjLmlzTXV0ZWQgfHwgKGEgPSBuLnBhcnRpY2lwYW50LmdldFRyYWNrUHVibGljYXRpb24obi5zb3VyY2UpKSAhPSBudWxsICYmIGEuaXNNdXRlZClcbiAgKSwgY2xhc3NOYW1lOiB0IH07XG59XG5mdW5jdGlvbiBLbih7XG4gIHNvdXJjZTogZSxcbiAgb25DaGFuZ2U6IG4sXG4gIGluaXRpYWxTdGF0ZTogdCxcbiAgY2FwdHVyZU9wdGlvbnM6IHIsXG4gIHB1Ymxpc2hPcHRpb25zOiBvLFxuICBvbkRldmljZUVycm9yOiBjLFxuICByb29tOiBhLFxuICAuLi5pXG59KSB7XG4gIHZhciBtO1xuICBjb25zdCB1ID0gZGUoKSwgcCA9IHMudXNlTWVtbygoKSA9PiBhID8/IHUsIFthLCB1XSksIGggPSAobSA9IHAgPT0gbnVsbCA/IHZvaWQgMCA6IHAubG9jYWxQYXJ0aWNpcGFudCkgPT0gbnVsbCA/IHZvaWQgMCA6IG0uZ2V0VHJhY2tQdWJsaWNhdGlvbihlKSwgZCA9IHMudXNlUmVmKCExKSwgeyB0b2dnbGU6IGwsIGNsYXNzTmFtZTogdiwgcGVuZGluZ09ic2VydmVyOiBDLCBlbmFibGVkT2JzZXJ2ZXI6IGsgfSA9IHMudXNlTWVtbyhcbiAgICAoKSA9PiBwID8gZHQoZSwgcCwgciwgbywgYykgOiBmdCgpLFxuICAgIFtwLCBlLCBKU09OLnN0cmluZ2lmeShyKSwgb11cbiAgKSwgQSA9IEQoQywgITEpLCB3ID0gRChrLCB0ID8/ICEhKGggIT0gbnVsbCAmJiBoLmlzRW5hYmxlZCkpO1xuICBzLnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgbiA9PSBudWxsIHx8IG4odywgZC5jdXJyZW50KSwgZC5jdXJyZW50ID0gITE7XG4gIH0sIFt3LCBuXSksIHMudXNlRWZmZWN0KCgpID0+IHtcbiAgICB0ICE9PSB2b2lkIDAgJiYgKFYuZGVidWcoXCJmb3JjaW5nIGluaXRpYWwgdG9nZ2xlIHN0YXRlXCIsIGUsIHQpLCBsKHQpKTtcbiAgfSwgW10pO1xuICBjb25zdCBPID0gcy51c2VNZW1vKCgpID0+IEcoaSwgeyBjbGFzc05hbWU6IHYgfSksIFtpLCB2XSksIFIgPSBzLnVzZUNhbGxiYWNrKFxuICAgIChmKSA9PiB7XG4gICAgICB2YXIgYjtcbiAgICAgIGQuY3VycmVudCA9ICEwLCBsKCkuY2F0Y2goKCkgPT4gZC5jdXJyZW50ID0gITEpLCAoYiA9IGkub25DbGljaykgPT0gbnVsbCB8fCBiLmNhbGwoaSwgZik7XG4gICAgfSxcbiAgICBbaSwgbF1cbiAgKTtcbiAgcmV0dXJuIHtcbiAgICB0b2dnbGU6IGwsXG4gICAgZW5hYmxlZDogdyxcbiAgICBwZW5kaW5nOiBBLFxuICAgIHRyYWNrOiBoLFxuICAgIGJ1dHRvblByb3BzOiB7XG4gICAgICAuLi5PLFxuICAgICAgXCJhcmlhLXByZXNzZWRcIjogdyxcbiAgICAgIFwiZGF0YS1say1zb3VyY2VcIjogZSxcbiAgICAgIFwiZGF0YS1say1lbmFibGVkXCI6IHcsXG4gICAgICBkaXNhYmxlZDogQSxcbiAgICAgIG9uQ2xpY2s6IFJcbiAgICB9XG4gIH07XG59XG5mdW5jdGlvbiBZbihlID0gW1xuICBFLlNvdXJjZS5DYW1lcmEsXG4gIEUuU291cmNlLk1pY3JvcGhvbmUsXG4gIEUuU291cmNlLlNjcmVlblNoYXJlLFxuICBFLlNvdXJjZS5TY3JlZW5TaGFyZUF1ZGlvLFxuICBFLlNvdXJjZS5Vbmtub3duXG5dLCBuID0ge30pIHtcbiAgY29uc3QgdCA9IFUobi5yb29tKSwgW3IsIG9dID0gcy51c2VTdGF0ZShbXSksIFtjLCBhXSA9IHMudXNlU3RhdGUoW10pLCBpID0gcy51c2VNZW1vKCgpID0+IGUubWFwKChwKSA9PiBtdChwKSA/IHAuc291cmNlIDogcCksIFtKU09OLnN0cmluZ2lmeShlKV0pO1xuICByZXR1cm4gcy51c2VFZmZlY3QoKCkgPT4ge1xuICAgIGNvbnN0IHAgPSBwdCh0LCBpLCB7XG4gICAgICBhZGRpdGlvbmFsUm9vbUV2ZW50czogbi51cGRhdGVPbmx5T24sXG4gICAgICBvbmx5U3Vic2NyaWJlZDogbi5vbmx5U3Vic2NyaWJlZFxuICAgIH0pLnN1YnNjcmliZSgoeyB0cmFja1JlZmVyZW5jZXM6IGgsIHBhcnRpY2lwYW50czogZCB9KSA9PiB7XG4gICAgICBWLmRlYnVnKFwic2V0dGluZyB0cmFjayBidW5kbGVzXCIsIGgsIGQpLCBvKGgpLCBhKGQpO1xuICAgIH0pO1xuICAgIHJldHVybiAoKSA9PiBwLnVuc3Vic2NyaWJlKCk7XG4gIH0sIFtcbiAgICB0LFxuICAgIEpTT04uc3RyaW5naWZ5KG4ub25seVN1YnNjcmliZWQpLFxuICAgIEpTT04uc3RyaW5naWZ5KG4udXBkYXRlT25seU9uKSxcbiAgICBKU09OLnN0cmluZ2lmeShlKVxuICBdKSwgcy51c2VNZW1vKCgpID0+IHtcbiAgICBpZiAoUmUoZSkpIHtcbiAgICAgIGNvbnN0IHAgPSAkdChlLCBjKSwgaCA9IEFycmF5LmZyb20ocik7XG4gICAgICByZXR1cm4gYy5mb3JFYWNoKChkKSA9PiB7XG4gICAgICAgIHAuaGFzKGQuaWRlbnRpdHkpICYmIChwLmdldChkLmlkZW50aXR5KSA/PyBbXSkuZm9yRWFjaCgodikgPT4ge1xuICAgICAgICAgIGlmIChyLmZpbmQoXG4gICAgICAgICAgICAoeyBwYXJ0aWNpcGFudDogaywgcHVibGljYXRpb246IEEgfSkgPT4gZC5pZGVudGl0eSA9PT0gay5pZGVudGl0eSAmJiBBLnNvdXJjZSA9PT0gdlxuICAgICAgICAgICkpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgVi5kZWJ1ZyhcbiAgICAgICAgICAgIGBBZGQgJHt2fSBwbGFjZWhvbGRlciBmb3IgcGFydGljaXBhbnQgJHtkLmlkZW50aXR5fS5gXG4gICAgICAgICAgKTtcbiAgICAgICAgICBjb25zdCBDID0ge1xuICAgICAgICAgICAgcGFydGljaXBhbnQ6IGQsXG4gICAgICAgICAgICBzb3VyY2U6IHZcbiAgICAgICAgICB9O1xuICAgICAgICAgIGgucHVzaChDKTtcbiAgICAgICAgfSk7XG4gICAgICB9KSwgaDtcbiAgICB9IGVsc2VcbiAgICAgIHJldHVybiByO1xuICB9LCBbciwgYywgZV0pO1xufVxuZnVuY3Rpb24gSnQoZSwgbikge1xuICBjb25zdCB0ID0gbmV3IFNldChlKTtcbiAgZm9yIChjb25zdCByIG9mIG4pXG4gICAgdC5kZWxldGUocik7XG4gIHJldHVybiB0O1xufVxuZnVuY3Rpb24gJHQoZSwgbikge1xuICBjb25zdCB0ID0gLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKTtcbiAgaWYgKFJlKGUpKSB7XG4gICAgY29uc3QgciA9IGUuZmlsdGVyKChvKSA9PiBvLndpdGhQbGFjZWhvbGRlcikubWFwKChvKSA9PiBvLnNvdXJjZSk7XG4gICAgbi5mb3JFYWNoKChvKSA9PiB7XG4gICAgICBjb25zdCBjID0gby5nZXRUcmFja1B1YmxpY2F0aW9ucygpLm1hcCgoaSkgPT4ge1xuICAgICAgICB2YXIgdTtcbiAgICAgICAgcmV0dXJuICh1ID0gaS50cmFjaykgPT0gbnVsbCA/IHZvaWQgMCA6IHUuc291cmNlO1xuICAgICAgfSkuZmlsdGVyKChpKSA9PiBpICE9PSB2b2lkIDApLCBhID0gQXJyYXkuZnJvbShcbiAgICAgICAgSnQobmV3IFNldChyKSwgbmV3IFNldChjKSlcbiAgICAgICk7XG4gICAgICBhLmxlbmd0aCA+IDAgJiYgdC5zZXQoby5pZGVudGl0eSwgYSk7XG4gICAgfSk7XG4gIH1cbiAgcmV0dXJuIHQ7XG59XG5mdW5jdGlvbiBRdChlKSB7XG4gIGNvbnN0IFtuLCB0XSA9IHMudXNlU3RhdGUoaHQoZSkpLCB7IHRyYWNrT2JzZXJ2ZXI6IHIgfSA9IHMudXNlTWVtbygoKSA9PiBidChlKSwgW2UucGFydGljaXBhbnQuc2lkID8/IGUucGFydGljaXBhbnQuaWRlbnRpdHksIGUuc291cmNlXSk7XG4gIHJldHVybiBzLnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgY29uc3QgbyA9IHIuc3Vic2NyaWJlKChjKSA9PiB7XG4gICAgICB0KGMpO1xuICAgIH0pO1xuICAgIHJldHVybiAoKSA9PiBvID09IG51bGwgPyB2b2lkIDAgOiBvLnVuc3Vic2NyaWJlKCk7XG4gIH0sIFtyXSksIHtcbiAgICBwYXJ0aWNpcGFudDogZS5wYXJ0aWNpcGFudCxcbiAgICBzb3VyY2U6IGUuc291cmNlID8/IEUuU291cmNlLlVua25vd24sXG4gICAgcHVibGljYXRpb246IG5cbiAgfTtcbn1cbmZ1bmN0aW9uIFhuKGUsIG4pIHtcbiAgY29uc3QgdCA9IFEobik7XG4gIHJldHVybiBRdCh7IG5hbWU6IGUsIHBhcnRpY2lwYW50OiB0IH0pO1xufVxuZnVuY3Rpb24gS3QoZSkge1xuICBjb25zdCBuID0gVShlID09IG51bGwgPyB2b2lkIDAgOiBlLnJvb20pLCB0ID0gdGUobiksIHIgPSBzLnVzZU1lbW8oXG4gICAgKCkgPT4gdCA9PT0gSS5EaXNjb25uZWN0ZWQsXG4gICAgW3RdXG4gICksIG8gPSBzLnVzZU1lbW8oXG4gICAgKCkgPT4gZ3QobiwgZSksXG4gICAgW24sIGUsIHJdXG4gICksIGMgPSBEKG8uaXNTZW5kaW5nT2JzZXJ2YWJsZSwgITEpLCBhID0gRChvLm1lc3NhZ2VPYnNlcnZhYmxlLCBbXSk7XG4gIHJldHVybiB7IHNlbmQ6IG8uc2VuZCwgY2hhdE1lc3NhZ2VzOiBhLCBpc1NlbmRpbmc6IGMgfTtcbn1cbmZ1bmN0aW9uIFpuKGUgPSB7fSkge1xuICBjb25zdCBbbiwgdF0gPSBzLnVzZVN0YXRlKFxuICAgIHZ0KGUuZGVmYXVsdHMsIGUucHJldmVudExvYWQgPz8gITEpXG4gICksIHIgPSBzLnVzZUNhbGxiYWNrKCh1KSA9PiB7XG4gICAgdCgocCkgPT4gKHsgLi4ucCwgYXVkaW9FbmFibGVkOiB1IH0pKTtcbiAgfSwgW10pLCBvID0gcy51c2VDYWxsYmFjaygodSkgPT4ge1xuICAgIHQoKHApID0+ICh7IC4uLnAsIHZpZGVvRW5hYmxlZDogdSB9KSk7XG4gIH0sIFtdKSwgYyA9IHMudXNlQ2FsbGJhY2soKHUpID0+IHtcbiAgICB0KChwKSA9PiAoeyAuLi5wLCBhdWRpb0RldmljZUlkOiB1IH0pKTtcbiAgfSwgW10pLCBhID0gcy51c2VDYWxsYmFjaygodSkgPT4ge1xuICAgIHQoKHApID0+ICh7IC4uLnAsIHZpZGVvRGV2aWNlSWQ6IHUgfSkpO1xuICB9LCBbXSksIGkgPSBzLnVzZUNhbGxiYWNrKCh1KSA9PiB7XG4gICAgdCgocCkgPT4gKHsgLi4ucCwgdXNlcm5hbWU6IHUgfSkpO1xuICB9LCBbXSk7XG4gIHJldHVybiBzLnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgU3QobiwgZS5wcmV2ZW50U2F2ZSA/PyAhMSk7XG4gIH0sIFtuLCBlLnByZXZlbnRTYXZlXSksIHtcbiAgICB1c2VyQ2hvaWNlczogbixcbiAgICBzYXZlQXVkaW9JbnB1dEVuYWJsZWQ6IHIsXG4gICAgc2F2ZVZpZGVvSW5wdXRFbmFibGVkOiBvLFxuICAgIHNhdmVBdWRpb0lucHV0RGV2aWNlSWQ6IGMsXG4gICAgc2F2ZVZpZGVvSW5wdXREZXZpY2VJZDogYSxcbiAgICBzYXZlVXNlcm5hbWU6IGlcbiAgfTtcbn1cbmZ1bmN0aW9uIGVzKGUsIG4gPSB7fSkge1xuICBjb25zdCB0ID0gUShlKSwgciA9IFUobi5yb29tKSwgbyA9IHMudXNlTWVtbygoKSA9PiB5dChyLCB0KSwgW3IsIHRdKTtcbiAgcmV0dXJuIEQoXG4gICAgbyxcbiAgICB0LmlzTG9jYWwgPyB0LmlzRTJFRUVuYWJsZWQgOiAhISh0ICE9IG51bGwgJiYgdC5pc0VuY3J5cHRlZClcbiAgKTtcbn1cbmZ1bmN0aW9uIHRzKGUsIG4gPSB7IGZmdFNpemU6IDMyLCBzbW9vdGhpbmdUaW1lQ29uc3RhbnQ6IDAgfSkge1xuICBjb25zdCB0ID0gQ3QoZSkgPyBlLnB1YmxpY2F0aW9uLnRyYWNrIDogZSwgW3IsIG9dID0gcy51c2VTdGF0ZSgwKTtcbiAgcmV0dXJuIHMudXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoIXQgfHwgIXQubWVkaWFTdHJlYW0pXG4gICAgICByZXR1cm47XG4gICAgY29uc3QgeyBjbGVhbnVwOiBjLCBhbmFseXNlcjogYSB9ID0gbWUodCwgbiksIGkgPSBhLmZyZXF1ZW5jeUJpbkNvdW50LCB1ID0gbmV3IFVpbnQ4QXJyYXkoaSksIGggPSBzZXRJbnRlcnZhbCgoKSA9PiB7XG4gICAgICBhLmdldEJ5dGVGcmVxdWVuY3lEYXRhKHUpO1xuICAgICAgbGV0IGQgPSAwO1xuICAgICAgZm9yIChsZXQgbCA9IDA7IGwgPCB1Lmxlbmd0aDsgbCsrKSB7XG4gICAgICAgIGNvbnN0IHYgPSB1W2xdO1xuICAgICAgICBkICs9IHYgKiB2O1xuICAgICAgfVxuICAgICAgbyhNYXRoLnNxcnQoZCAvIHUubGVuZ3RoKSAvIDI1NSk7XG4gICAgfSwgMWUzIC8gMzApO1xuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBjKCksIGNsZWFySW50ZXJ2YWwoaCk7XG4gICAgfTtcbiAgfSwgW3QsIHQgPT0gbnVsbCA/IHZvaWQgMCA6IHQubWVkaWFTdHJlYW0sIEpTT04uc3RyaW5naWZ5KG4pXSksIHI7XG59XG5jb25zdCBZdCA9IChlKSA9PiB7XG4gIGNvbnN0IG4gPSAodCkgPT4ge1xuICAgIGxldCBjID0gMSAtIE1hdGgubWF4KC0xMDAsIE1hdGgubWluKC0xMCwgdCkpICogLTEgLyAxMDA7XG4gICAgcmV0dXJuIGMgPSBNYXRoLnNxcnQoYyksIGM7XG4gIH07XG4gIHJldHVybiBlLm1hcCgodCkgPT4gdCA9PT0gLTEgLyAwID8gMCA6IG4odCkpO1xufSwgWHQgPSB7XG4gIGJhbmRzOiA1LFxuICBsb1Bhc3M6IDEwMCxcbiAgaGlQYXNzOiA2MDAsXG4gIHVwZGF0ZUludGVydmFsOiAzMixcbiAgYW5hbHlzZXJPcHRpb25zOiB7IGZmdFNpemU6IDIwNDggfVxufTtcbmZ1bmN0aW9uIG5zKGUsIG4gPSB7fSkge1xuICB2YXIgYTtcbiAgY29uc3QgdCA9IGUgaW5zdGFuY2VvZiBFID8gZSA6IChhID0gZSA9PSBudWxsID8gdm9pZCAwIDogZS5wdWJsaWNhdGlvbikgPT0gbnVsbCA/IHZvaWQgMCA6IGEudHJhY2ssIHIgPSB7IC4uLlh0LCAuLi5uIH0sIFtvLCBjXSA9IHMudXNlU3RhdGUoXG4gICAgbmV3IEFycmF5KHIuYmFuZHMpLmZpbGwoMClcbiAgKTtcbiAgcmV0dXJuIHMudXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoIXQgfHwgISh0ICE9IG51bGwgJiYgdC5tZWRpYVN0cmVhbSkpIHtcbiAgICAgIGMoKHYpID0+IHYuc2xpY2UoKS5maWxsKDApKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgeyBhbmFseXNlcjogaSwgY2xlYW51cDogdSB9ID0gbWUodCwgci5hbmFseXNlck9wdGlvbnMpLCBwID0gaS5mcmVxdWVuY3lCaW5Db3VudCwgaCA9IG5ldyBGbG9hdDMyQXJyYXkocCksIGwgPSBzZXRJbnRlcnZhbCgoKSA9PiB7XG4gICAgICBpLmdldEZsb2F0RnJlcXVlbmN5RGF0YShoKTtcbiAgICAgIGxldCB2ID0gbmV3IEZsb2F0MzJBcnJheShoLmxlbmd0aCk7XG4gICAgICBmb3IgKGxldCB3ID0gMDsgdyA8IGgubGVuZ3RoOyB3KyspXG4gICAgICAgIHZbd10gPSBoW3ddO1xuICAgICAgdiA9IHYuc2xpY2Uobi5sb1Bhc3MsIG4uaGlQYXNzKTtcbiAgICAgIGNvbnN0IEMgPSBZdCh2KSwgayA9IE1hdGguY2VpbChDLmxlbmd0aCAvIHIuYmFuZHMpLCBBID0gW107XG4gICAgICBmb3IgKGxldCB3ID0gMDsgdyA8IHIuYmFuZHM7IHcrKykge1xuICAgICAgICBjb25zdCBPID0gQy5zbGljZSh3ICogaywgKHcgKyAxKSAqIGspLnJlZHVjZSgoUiwgbSkgPT4gUiArPSBtLCAwKTtcbiAgICAgICAgQS5wdXNoKE8gLyBrKTtcbiAgICAgIH1cbiAgICAgIGMoQSk7XG4gICAgfSwgci51cGRhdGVJbnRlcnZhbCk7XG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIHUoKSwgY2xlYXJJbnRlcnZhbChsKTtcbiAgICB9O1xuICB9LCBbdCwgdCA9PSBudWxsID8gdm9pZCAwIDogdC5tZWRpYVN0cmVhbSwgSlNPTi5zdHJpbmdpZnkobildKSwgbztcbn1cbmNvbnN0IFp0ID0ge1xuICBiYXJDb3VudDogMTIwLFxuICB2b2xNdWx0aXBsaWVyOiA1LFxuICB1cGRhdGVJbnRlcnZhbDogMjBcbn07XG5mdW5jdGlvbiBzcyhlLCBuID0ge30pIHtcbiAgdmFyIGg7XG4gIGNvbnN0IHQgPSBlIGluc3RhbmNlb2YgRSA/IGUgOiAoaCA9IGUgPT0gbnVsbCA/IHZvaWQgMCA6IGUucHVibGljYXRpb24pID09IG51bGwgPyB2b2lkIDAgOiBoLnRyYWNrLCByID0geyAuLi5adCwgLi4ubiB9LCBvID0gcy51c2VSZWYobmV3IEZsb2F0MzJBcnJheSgpKSwgYyA9IHMudXNlUmVmKHBlcmZvcm1hbmNlLm5vdygpKSwgYSA9IHMudXNlUmVmKDApLCBbaSwgdV0gPSBzLnVzZVN0YXRlKFtdKSwgcCA9IHMudXNlQ2FsbGJhY2soKGQpID0+IHtcbiAgICB1KFxuICAgICAgQXJyYXkuZnJvbShcbiAgICAgICAgdG4oZCwgci5iYXJDb3VudCkubWFwKChsKSA9PiBNYXRoLnNxcnQobCkgKiByLnZvbE11bHRpcGxpZXIpXG4gICAgICAgIC8vIHdhdmUuc2xpY2UoMCwgb3B0cy5iYXJDb3VudCkubWFwKCh2KSA9PiBzaWdtb2lkKHYgKiBvcHRzLnZvbE11bHRpcGxpZXIsIDAuMDgsIDAuMikpLFxuICAgICAgKVxuICAgICk7XG4gIH0sIFtdKTtcbiAgcmV0dXJuIHMudXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoIXQgfHwgISh0ICE9IG51bGwgJiYgdC5tZWRpYVN0cmVhbSkpXG4gICAgICByZXR1cm47XG4gICAgY29uc3QgeyBhbmFseXNlcjogZCwgY2xlYW51cDogbCB9ID0gbWUodCwge1xuICAgICAgZmZ0U2l6ZTogeWUoci5iYXJDb3VudClcbiAgICB9KSwgdiA9IHllKHIuYmFyQ291bnQpLCBDID0gbmV3IEZsb2F0MzJBcnJheSh2KSwgayA9ICgpID0+IHtcbiAgICAgIGlmIChBID0gcmVxdWVzdEFuaW1hdGlvbkZyYW1lKGspLCBkLmdldEZsb2F0VGltZURvbWFpbkRhdGEoQyksIG8uY3VycmVudC5tYXAoKHcsIE8pID0+IHcgKyBDW09dKSwgYS5jdXJyZW50ICs9IDEsIHBlcmZvcm1hbmNlLm5vdygpIC0gYy5jdXJyZW50ID49IHIudXBkYXRlSW50ZXJ2YWwpIHtcbiAgICAgICAgY29uc3QgdyA9IEMubWFwKChPKSA9PiBPIC8gYS5jdXJyZW50KTtcbiAgICAgICAgcCh3KSwgYy5jdXJyZW50ID0gcGVyZm9ybWFuY2Uubm93KCksIGEuY3VycmVudCA9IDA7XG4gICAgICB9XG4gICAgfTtcbiAgICBsZXQgQSA9IHJlcXVlc3RBbmltYXRpb25GcmFtZShrKTtcbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgbCgpLCBjYW5jZWxBbmltYXRpb25GcmFtZShBKTtcbiAgICB9O1xuICB9LCBbdCwgdCA9PSBudWxsID8gdm9pZCAwIDogdC5tZWRpYVN0cmVhbSwgSlNPTi5zdHJpbmdpZnkobiksIHBdKSwge1xuICAgIGJhcnM6IGlcbiAgfTtcbn1cbmZ1bmN0aW9uIHllKGUpIHtcbiAgcmV0dXJuIGUgPCAzMiA/IDMyIDogZW4oZSk7XG59XG5mdW5jdGlvbiBlbihlKSB7XG4gIGxldCBuID0gMjtcbiAgZm9yICg7IGUgPj49IDE7IClcbiAgICBuIDw8PSAxO1xuICByZXR1cm4gbjtcbn1cbmZ1bmN0aW9uIHRuKGUsIG4pIHtcbiAgY29uc3QgdCA9IE1hdGguZmxvb3IoZS5sZW5ndGggLyBuKSwgciA9IG5ldyBGbG9hdDMyQXJyYXkobik7XG4gIGZvciAobGV0IG8gPSAwOyBvIDwgbjsgbysrKSB7XG4gICAgY29uc3QgYyA9IHQgKiBvO1xuICAgIGxldCBhID0gMDtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHQ7IGkrKylcbiAgICAgIGEgPSBhICsgTWF0aC5hYnMoZVtjICsgaV0pO1xuICAgIHJbb10gPSBhIC8gdDtcbiAgfVxuICByZXR1cm4gcjtcbn1cbmZ1bmN0aW9uIHJlKGUsIG4gPSB7fSkge1xuICBsZXQgdCwgcjtcbiAgdHlwZW9mIG4gPT0gXCJzdHJpbmdcIiA/IHQgPSBuIDogKHQgPSBuID09IG51bGwgPyB2b2lkIDAgOiBuLnBhcnRpY2lwYW50SWRlbnRpdHksIHIgPSBuID09IG51bGwgPyB2b2lkIDAgOiBuLnJvb20pO1xuICBjb25zdCBvID0gZmUoKSwgYyA9IFd0KHsgcm9vbTogciwgdXBkYXRlT25seU9uOiBbXSB9KSwgYSA9IHMudXNlTWVtbygoKSA9PiB0ID8gYy5maW5kKChwKSA9PiBwLmlkZW50aXR5ID09PSB0KSA6IG8sIFt0LCBjLCBvXSksIGkgPSBzLnVzZU1lbW8oKCkgPT4ge1xuICAgIGlmIChhKVxuICAgICAgcmV0dXJuIE10KGEsIHsgc291cmNlczogZSB9KTtcbiAgfSwgW2EsIEpTT04uc3RyaW5naWZ5KGUpXSk7XG4gIHJldHVybiBEKGksIFtdKTtcbn1cbmZ1bmN0aW9uIG5uKGUpIHtcbiAgdmFyIHQsIHIsIG87XG4gIGNvbnN0IG4gPSBzLnVzZU1lbW8oXG4gICAgKCkgPT4ge1xuICAgICAgdmFyIGM7XG4gICAgICByZXR1cm4gKGMgPSBlID09IG51bGwgPyB2b2lkIDAgOiBlLnB1YmxpY2F0aW9uKSAhPSBudWxsICYmIGMudHJhY2sgPyBUdChlID09IG51bGwgPyB2b2lkIDAgOiBlLnB1YmxpY2F0aW9uLnRyYWNrKSA6IHZvaWQgMDtcbiAgICB9LFxuICAgIFsodCA9IGUgPT0gbnVsbCA/IHZvaWQgMCA6IGUucHVibGljYXRpb24pID09IG51bGwgPyB2b2lkIDAgOiB0LnRyYWNrXVxuICApO1xuICByZXR1cm4gRChuLCB7XG4gICAgdGltZXN0YW1wOiBEYXRlLm5vdygpLFxuICAgIHJ0cFRpbWVzdGFtcDogKG8gPSAociA9IGUgPT0gbnVsbCA/IHZvaWQgMCA6IGUucHVibGljYXRpb24pID09IG51bGwgPyB2b2lkIDAgOiByLnRyYWNrKSA9PSBudWxsID8gdm9pZCAwIDogby5ydHBUaW1lc3RhbXBcbiAgfSk7XG59XG5jb25zdCBzbiA9IHtcbiAgYnVmZmVyU2l6ZTogMTAwXG4gIC8vIG1heEFnZTogMl8wMDAsXG59O1xuZnVuY3Rpb24gcm4oZSwgbikge1xuICBjb25zdCB0ID0geyAuLi5zbiwgLi4ubiB9LCBbciwgb10gPSBzLnVzZVN0YXRlKFtdKSwgYyA9IG5uKGUpLCBhID0gKGkpID0+IHtcbiAgICB2YXIgdTtcbiAgICAodSA9IHQub25UcmFuc2NyaXB0aW9uKSA9PSBudWxsIHx8IHUuY2FsbCh0LCBpKSwgbyhcbiAgICAgIChwKSA9PiBrdChcbiAgICAgICAgcCxcbiAgICAgICAgLy8gd2hlbiBmaXJzdCByZWNlaXZpbmcgYSBzZWdtZW50LCBhZGQgdGhlIGN1cnJlbnQgbWVkaWEgdGltZXN0YW1wIHRvIGl0XG4gICAgICAgIGkubWFwKChoKSA9PiB3dChoLCBjKSksXG4gICAgICAgIHQuYnVmZmVyU2l6ZVxuICAgICAgKVxuICAgICk7XG4gIH07XG4gIHJldHVybiBzLnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKCEoZSAhPSBudWxsICYmIGUucHVibGljYXRpb24pKVxuICAgICAgcmV0dXJuO1xuICAgIGNvbnN0IGkgPSBFdChlLnB1YmxpY2F0aW9uKS5zdWJzY3JpYmUoKHUpID0+IHtcbiAgICAgIGEoLi4udSk7XG4gICAgfSk7XG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIGkudW5zdWJzY3JpYmUoKTtcbiAgICB9O1xuICB9LCBbZSAmJiBsZShlKSwgYV0pLCB7IHNlZ21lbnRzOiByIH07XG59XG5mdW5jdGlvbiBvbihlID0ge30pIHtcbiAgY29uc3QgbiA9IGZlKCksIHQgPSBlLnBhcnRpY2lwYW50ID8/IG4sIHIgPSBzLnVzZU1lbW8oXG4gICAgLy8gd2VpcmQgdHlwZXNjcmlwdCBjb25zdHJhaW50XG4gICAgKCkgPT4gdCA/IGllKHQpIDogaWUodCksXG4gICAgW3RdXG4gICk7XG4gIHJldHVybiBEKHIsIHtcbiAgICBhdHRyaWJ1dGVzOiB0ID09IG51bGwgPyB2b2lkIDAgOiB0LmF0dHJpYnV0ZXNcbiAgfSk7XG59XG5mdW5jdGlvbiBycyhlLCBuID0ge30pIHtcbiAgY29uc3QgdCA9IFEobi5wYXJ0aWNpcGFudCksIFtyLCBvXSA9IHMudXNlU3RhdGUodC5hdHRyaWJ1dGVzW2VdKTtcbiAgcmV0dXJuIHMudXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoIXQpXG4gICAgICByZXR1cm47XG4gICAgY29uc3QgYyA9IGllKHQpLnN1YnNjcmliZSgoYSkgPT4ge1xuICAgICAgYS5jaGFuZ2VkW2VdICE9PSB2b2lkIDAgJiYgbyhhLmF0dHJpYnV0ZXNbZV0pO1xuICAgIH0pO1xuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBjLnVuc3Vic2NyaWJlKCk7XG4gICAgfTtcbiAgfSwgW3QsIGVdKSwgcjtcbn1cbmNvbnN0IENlID0gVy5BZ2VudFN0YXRlO1xuZnVuY3Rpb24gb3MoKSB7XG4gIGNvbnN0IGUgPSBwZSgpLCBuID0gZS5maW5kKFxuICAgIChkKSA9PiBkLmtpbmQgPT09IHNlLkFHRU5UICYmICEoVy5QdWJsaXNoT25CZWhhbGYgaW4gZC5hdHRyaWJ1dGVzKVxuICApLCB0ID0gZS5maW5kKFxuICAgIChkKSA9PiBkLmtpbmQgPT09IHNlLkFHRU5UICYmIGQuYXR0cmlidXRlc1tXLlB1Ymxpc2hPbkJlaGFsZl0gPT09IChuID09IG51bGwgPyB2b2lkIDAgOiBuLmlkZW50aXR5KVxuICApLCByID0gcmUoXG4gICAgW0UuU291cmNlLk1pY3JvcGhvbmUsIEUuU291cmNlLkNhbWVyYV0sXG4gICAgbiA9PSBudWxsID8gdm9pZCAwIDogbi5pZGVudGl0eVxuICApLCBvID0gcmUoXG4gICAgW0UuU291cmNlLk1pY3JvcGhvbmUsIEUuU291cmNlLkNhbWVyYV0sXG4gICAgdCA9PSBudWxsID8gdm9pZCAwIDogdC5pZGVudGl0eVxuICApLCBjID0gci5maW5kKChkKSA9PiBkLnNvdXJjZSA9PT0gRS5Tb3VyY2UuTWljcm9waG9uZSkgPz8gby5maW5kKChkKSA9PiBkLnNvdXJjZSA9PT0gRS5Tb3VyY2UuTWljcm9waG9uZSksIGEgPSByLmZpbmQoKGQpID0+IGQuc291cmNlID09PSBFLlNvdXJjZS5DYW1lcmEpID8/IG8uZmluZCgoZCkgPT4gZC5zb3VyY2UgPT09IEUuU291cmNlLkNhbWVyYSksIHsgc2VnbWVudHM6IGkgfSA9IHJuKGMpLCB1ID0gdGUoKSwgeyBhdHRyaWJ1dGVzOiBwIH0gPSBvbih7IHBhcnRpY2lwYW50OiBuIH0pLCBoID0gcy51c2VNZW1vKCgpID0+IHUgPT09IEkuRGlzY29ubmVjdGVkID8gXCJkaXNjb25uZWN0ZWRcIiA6IHUgPT09IEkuQ29ubmVjdGluZyB8fCAhbiB8fCAhKHAgIT0gbnVsbCAmJiBwW0NlXSkgPyBcImNvbm5lY3RpbmdcIiA6IHBbQ2VdLCBbcCwgbiwgdV0pO1xuICByZXR1cm4ge1xuICAgIGFnZW50OiBuLFxuICAgIHN0YXRlOiBoLFxuICAgIGF1ZGlvVHJhY2s6IGMsXG4gICAgdmlkZW9UcmFjazogYSxcbiAgICBhZ2VudFRyYW5zY3JpcHRpb25zOiBpLFxuICAgIGFnZW50QXR0cmlidXRlczogcFxuICB9O1xufVxuZnVuY3Rpb24gYXMoZSkge1xuICBjb25zdCBuID0gVShlKSwgdCA9IHRlKG4pLCByID0gcy51c2VNZW1vKCgpID0+IFB0KG4pLCBbbiwgdF0pO1xuICByZXR1cm4gRChyLCBuLmlzUmVjb3JkaW5nKTtcbn1cbmZ1bmN0aW9uIGFuKGUsIG4pIHtcbiAgY29uc3QgdCA9IFUobiA9PSBudWxsID8gdm9pZCAwIDogbi5yb29tKSwgbyA9IHRlKHQpID09PSBJLkRpc2Nvbm5lY3RlZCwgYyA9IHMudXNlTWVtbygoKSA9PiBMdCh0LCBlKSwgW3QsIGVdKTtcbiAgcmV0dXJuIHsgdGV4dFN0cmVhbXM6IEQobyA/IHZvaWQgMCA6IGMsIFtdKSB9O1xufVxuZnVuY3Rpb24gY24oZSkge1xuICBjb25zdCB7IHBhcnRpY2lwYW50SWRlbnRpdGllczogbiwgdHJhY2tTaWRzOiB0IH0gPSBlID8/IHt9LCB7IHRleHRTdHJlYW1zOiByIH0gPSBhbihBdC5UUkFOU0NSSVBUSU9OLCB7IHJvb206IGUgPT0gbnVsbCA/IHZvaWQgMCA6IGUucm9vbSB9KTtcbiAgcmV0dXJuIHMudXNlTWVtbyhcbiAgICAoKSA9PiByLmZpbHRlcihcbiAgICAgIChjKSA9PiBuID8gbi5pbmNsdWRlcyhjLnBhcnRpY2lwYW50SW5mby5pZGVudGl0eSkgOiAhMFxuICAgICkuZmlsdGVyKFxuICAgICAgKGMpID0+IHtcbiAgICAgICAgdmFyIGE7XG4gICAgICAgIHJldHVybiB0ID8gdC5pbmNsdWRlcyhcbiAgICAgICAgICAoKGEgPSBjLnN0cmVhbUluZm8uYXR0cmlidXRlcykgPT0gbnVsbCA/IHZvaWQgMCA6IGFbVy5UcmFuc2NyaWJlZFRyYWNrSWRdKSA/PyBcIlwiXG4gICAgICAgICkgOiAhMDtcbiAgICAgIH1cbiAgICApLFxuICAgIFtyLCBuLCB0XVxuICApO1xufVxuY29uc3QgTWUgPSAyLCBUZSA9IDQwMCwgRWUgPSAzLCBrZSA9IDFlMztcbmZ1bmN0aW9uIGNzKGUpIHtcbiAgY29uc3QgbiA9IGFlKFtdKSwgdCA9IE5lKCgpID0+IG5ldyBOdCgpLCBbXSksIHIgPSBlZShhc3luYyAoKSA9PiB0LmxvY2soKS50aGVuKGFzeW5jIChoKSA9PiB7XG4gICAgZm9yICg7IDsgKSB7XG4gICAgICBjb25zdCBkID0gbi5jdXJyZW50LnBvcCgpO1xuICAgICAgaWYgKCFkKSB7XG4gICAgICAgIGgoKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICBzd2l0Y2ggKGQudHlwZSkge1xuICAgICAgICBjYXNlIFwiY29ubmVjdFwiOlxuICAgICAgICAgIGF3YWl0IGQucm9vbS5jb25uZWN0KC4uLmQuYXJncykudGhlbihkLnJlc29sdmUpLmNhdGNoKGQucmVqZWN0KTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBcImRpc2Nvbm5lY3RcIjpcbiAgICAgICAgICBhd2FpdCBkLnJvb20uZGlzY29ubmVjdCguLi5kLmFyZ3MpLnRoZW4oZC5yZXNvbHZlKS5jYXRjaChkLnJlamVjdCk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuICB9KSwgW10pLCBvID0gYWUoW10pLCBjID0gZWUoKGgpID0+IHtcbiAgICBsZXQgZCA9IDA7XG4gICAgby5jdXJyZW50ID0gby5jdXJyZW50LmZpbHRlcigobCkgPT4ge1xuICAgICAgY29uc3QgdiA9IGguZ2V0VGltZSgpIC0gbC5nZXRUaW1lKCkgPCBrZTtcbiAgICAgIHJldHVybiB2ICYmIChkICs9IDEpLCB2O1xuICAgIH0pLCBkID4gRWUgJiYgVi53YXJuKFxuICAgICAgYHVzZVNlcXVlbnRpYWxSb29tQ29ubmVjdERpc2Nvbm5lY3Q6IHJvb20gY2hhbmdlZCByZWZlcmVuY2UgcmFwaWRseSAob3ZlciAke0VlfXggaW4gJHtrZX1tcykuIFRoaXMgaXMgbm90IHJlY29tbWVuZGVkLmBcbiAgICApO1xuICB9LCBbXSk7XG4gIF9lKCgpID0+IHtcbiAgICBuLmN1cnJlbnQgPSBbXTtcbiAgICBjb25zdCBoID0gLyogQF9fUFVSRV9fICovIG5ldyBEYXRlKCk7XG4gICAgby5jdXJyZW50LnB1c2goaCksIGMoaCk7XG4gIH0sIFtlLCBjXSk7XG4gIGNvbnN0IGEgPSBhZShbXSksIGkgPSBlZSgoaCkgPT4ge1xuICAgIGxldCBkID0gMDtcbiAgICBhLmN1cnJlbnQgPSBhLmN1cnJlbnQuZmlsdGVyKChsKSA9PiB7XG4gICAgICBjb25zdCB2ID0gaC5nZXRUaW1lKCkgLSBsLmdldFRpbWUoKSA8IFRlO1xuICAgICAgcmV0dXJuIHYgJiYgKGQgKz0gMSksIHY7XG4gICAgfSksIGQgPiBNZSAmJiBWLndhcm4oXG4gICAgICBgdXNlU2VxdWVudGlhbFJvb21Db25uZWN0RGlzY29ubmVjdDogcm9vbSBjb25uZWN0IC8gZGlzY29ubmVjdCBvY2N1cnJpbmcgaW4gcmFwaWQgc2VxdWVuY2UgKG92ZXIgJHtNZX14IGluICR7VGV9bXMpLiBUaGlzIGlzIG5vdCByZWNvbW1lbmRlZCBhbmQgbWF5IGJlIHRoZSBzaWduIG9mIGEgYnVnIGxpa2UgYSB1c2VFZmZlY3QgZGVwZW5kZW5jeSBjaGFuZ2luZyBldmVyeSByZW5kZXIuYFxuICAgICk7XG4gIH0sIFtdKSwgdSA9IGVlKFxuICAgIGFzeW5jICguLi5oKSA9PiBuZXcgUHJvbWlzZSgoZCwgbCkgPT4ge1xuICAgICAgaWYgKCFlKVxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJDYWxsZWQgY29ubmVjdCgpLCBidXQgcm9vbSB3YXMgdW5zZXRcIik7XG4gICAgICBjb25zdCB2ID0gLyogQF9fUFVSRV9fICovIG5ldyBEYXRlKCk7XG4gICAgICBpKHYpLCBuLmN1cnJlbnQucHVzaCh7IHR5cGU6IFwiY29ubmVjdFwiLCByb29tOiBlLCBhcmdzOiBoLCByZXNvbHZlOiBkLCByZWplY3Q6IGwgfSksIGEuY3VycmVudC5wdXNoKHYpLCByKCk7XG4gICAgfSksXG4gICAgW2UsIGksIHJdXG4gICksIHAgPSBlZShcbiAgICBhc3luYyAoLi4uaCkgPT4gbmV3IFByb21pc2UoKGQsIGwpID0+IHtcbiAgICAgIGlmICghZSlcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQ2FsbGVkIGRpc2Njb25uZWN0KCksIGJ1dCByb29tIHdhcyB1bnNldFwiKTtcbiAgICAgIGNvbnN0IHYgPSAvKiBAX19QVVJFX18gKi8gbmV3IERhdGUoKTtcbiAgICAgIGkodiksIG4uY3VycmVudC5wdXNoKHsgdHlwZTogXCJkaXNjb25uZWN0XCIsIHJvb206IGUsIGFyZ3M6IGgsIHJlc29sdmU6IGQsIHJlamVjdDogbCB9KSwgYS5jdXJyZW50LnB1c2godiksIHIoKTtcbiAgICB9KSxcbiAgICBbZSwgaSwgcl1cbiAgKTtcbiAgcmV0dXJuIHtcbiAgICBjb25uZWN0OiBlID8gdSA6IG51bGwsXG4gICAgZGlzY29ubmVjdDogZSA/IHAgOiBudWxsXG4gIH07XG59XG52YXIgbmUgPSB7IGV4cG9ydHM6IHt9IH0sIHdlO1xuZnVuY3Rpb24gdW4oKSB7XG4gIGlmICh3ZSkgcmV0dXJuIG5lLmV4cG9ydHM7XG4gIHdlID0gMTtcbiAgdmFyIGUgPSB0eXBlb2YgUmVmbGVjdCA9PSBcIm9iamVjdFwiID8gUmVmbGVjdCA6IG51bGwsIG4gPSBlICYmIHR5cGVvZiBlLmFwcGx5ID09IFwiZnVuY3Rpb25cIiA/IGUuYXBwbHkgOiBmdW5jdGlvbihmLCBiLCBnKSB7XG4gICAgcmV0dXJuIEZ1bmN0aW9uLnByb3RvdHlwZS5hcHBseS5jYWxsKGYsIGIsIGcpO1xuICB9LCB0O1xuICBlICYmIHR5cGVvZiBlLm93bktleXMgPT0gXCJmdW5jdGlvblwiID8gdCA9IGUub3duS2V5cyA6IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMgPyB0ID0gZnVuY3Rpb24oZikge1xuICAgIHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhmKS5jb25jYXQoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhmKSk7XG4gIH0gOiB0ID0gZnVuY3Rpb24oZikge1xuICAgIHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhmKTtcbiAgfTtcbiAgZnVuY3Rpb24gcihtKSB7XG4gICAgY29uc29sZSAmJiBjb25zb2xlLndhcm4gJiYgY29uc29sZS53YXJuKG0pO1xuICB9XG4gIHZhciBvID0gTnVtYmVyLmlzTmFOIHx8IGZ1bmN0aW9uKGYpIHtcbiAgICByZXR1cm4gZiAhPT0gZjtcbiAgfTtcbiAgZnVuY3Rpb24gYygpIHtcbiAgICBjLmluaXQuY2FsbCh0aGlzKTtcbiAgfVxuICBuZS5leHBvcnRzID0gYywgbmUuZXhwb3J0cy5vbmNlID0gdywgYy5FdmVudEVtaXR0ZXIgPSBjLCBjLnByb3RvdHlwZS5fZXZlbnRzID0gdm9pZCAwLCBjLnByb3RvdHlwZS5fZXZlbnRzQ291bnQgPSAwLCBjLnByb3RvdHlwZS5fbWF4TGlzdGVuZXJzID0gdm9pZCAwO1xuICB2YXIgYSA9IDEwO1xuICBmdW5jdGlvbiBpKG0pIHtcbiAgICBpZiAodHlwZW9mIG0gIT0gXCJmdW5jdGlvblwiKVxuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignVGhlIFwibGlzdGVuZXJcIiBhcmd1bWVudCBtdXN0IGJlIG9mIHR5cGUgRnVuY3Rpb24uIFJlY2VpdmVkIHR5cGUgJyArIHR5cGVvZiBtKTtcbiAgfVxuICBPYmplY3QuZGVmaW5lUHJvcGVydHkoYywgXCJkZWZhdWx0TWF4TGlzdGVuZXJzXCIsIHtcbiAgICBlbnVtZXJhYmxlOiAhMCxcbiAgICBnZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIGE7XG4gICAgfSxcbiAgICBzZXQ6IGZ1bmN0aW9uKG0pIHtcbiAgICAgIGlmICh0eXBlb2YgbSAhPSBcIm51bWJlclwiIHx8IG0gPCAwIHx8IG8obSkpXG4gICAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCdUaGUgdmFsdWUgb2YgXCJkZWZhdWx0TWF4TGlzdGVuZXJzXCIgaXMgb3V0IG9mIHJhbmdlLiBJdCBtdXN0IGJlIGEgbm9uLW5lZ2F0aXZlIG51bWJlci4gUmVjZWl2ZWQgJyArIG0gKyBcIi5cIik7XG4gICAgICBhID0gbTtcbiAgICB9XG4gIH0pLCBjLmluaXQgPSBmdW5jdGlvbigpIHtcbiAgICAodGhpcy5fZXZlbnRzID09PSB2b2lkIDAgfHwgdGhpcy5fZXZlbnRzID09PSBPYmplY3QuZ2V0UHJvdG90eXBlT2YodGhpcykuX2V2ZW50cykgJiYgKHRoaXMuX2V2ZW50cyA9IC8qIEBfX1BVUkVfXyAqLyBPYmplY3QuY3JlYXRlKG51bGwpLCB0aGlzLl9ldmVudHNDb3VudCA9IDApLCB0aGlzLl9tYXhMaXN0ZW5lcnMgPSB0aGlzLl9tYXhMaXN0ZW5lcnMgfHwgdm9pZCAwO1xuICB9LCBjLnByb3RvdHlwZS5zZXRNYXhMaXN0ZW5lcnMgPSBmdW5jdGlvbihmKSB7XG4gICAgaWYgKHR5cGVvZiBmICE9IFwibnVtYmVyXCIgfHwgZiA8IDAgfHwgbyhmKSlcbiAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCdUaGUgdmFsdWUgb2YgXCJuXCIgaXMgb3V0IG9mIHJhbmdlLiBJdCBtdXN0IGJlIGEgbm9uLW5lZ2F0aXZlIG51bWJlci4gUmVjZWl2ZWQgJyArIGYgKyBcIi5cIik7XG4gICAgcmV0dXJuIHRoaXMuX21heExpc3RlbmVycyA9IGYsIHRoaXM7XG4gIH07XG4gIGZ1bmN0aW9uIHUobSkge1xuICAgIHJldHVybiBtLl9tYXhMaXN0ZW5lcnMgPT09IHZvaWQgMCA/IGMuZGVmYXVsdE1heExpc3RlbmVycyA6IG0uX21heExpc3RlbmVycztcbiAgfVxuICBjLnByb3RvdHlwZS5nZXRNYXhMaXN0ZW5lcnMgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdSh0aGlzKTtcbiAgfSwgYy5wcm90b3R5cGUuZW1pdCA9IGZ1bmN0aW9uKGYpIHtcbiAgICBmb3IgKHZhciBiID0gW10sIGcgPSAxOyBnIDwgYXJndW1lbnRzLmxlbmd0aDsgZysrKSBiLnB1c2goYXJndW1lbnRzW2ddKTtcbiAgICB2YXIgeSA9IGYgPT09IFwiZXJyb3JcIiwgVCA9IHRoaXMuX2V2ZW50cztcbiAgICBpZiAoVCAhPT0gdm9pZCAwKVxuICAgICAgeSA9IHkgJiYgVC5lcnJvciA9PT0gdm9pZCAwO1xuICAgIGVsc2UgaWYgKCF5KVxuICAgICAgcmV0dXJuICExO1xuICAgIGlmICh5KSB7XG4gICAgICB2YXIgTTtcbiAgICAgIGlmIChiLmxlbmd0aCA+IDAgJiYgKE0gPSBiWzBdKSwgTSBpbnN0YW5jZW9mIEVycm9yKVxuICAgICAgICB0aHJvdyBNO1xuICAgICAgdmFyIFAgPSBuZXcgRXJyb3IoXCJVbmhhbmRsZWQgZXJyb3IuXCIgKyAoTSA/IFwiIChcIiArIE0ubWVzc2FnZSArIFwiKVwiIDogXCJcIikpO1xuICAgICAgdGhyb3cgUC5jb250ZXh0ID0gTSwgUDtcbiAgICB9XG4gICAgdmFyIEYgPSBUW2ZdO1xuICAgIGlmIChGID09PSB2b2lkIDApXG4gICAgICByZXR1cm4gITE7XG4gICAgaWYgKHR5cGVvZiBGID09IFwiZnVuY3Rpb25cIilcbiAgICAgIG4oRiwgdGhpcywgYik7XG4gICAgZWxzZVxuICAgICAgZm9yICh2YXIgcSA9IEYubGVuZ3RoLCBKID0gQyhGLCBxKSwgZyA9IDA7IGcgPCBxOyArK2cpXG4gICAgICAgIG4oSltnXSwgdGhpcywgYik7XG4gICAgcmV0dXJuICEwO1xuICB9O1xuICBmdW5jdGlvbiBwKG0sIGYsIGIsIGcpIHtcbiAgICB2YXIgeSwgVCwgTTtcbiAgICBpZiAoaShiKSwgVCA9IG0uX2V2ZW50cywgVCA9PT0gdm9pZCAwID8gKFQgPSBtLl9ldmVudHMgPSAvKiBAX19QVVJFX18gKi8gT2JqZWN0LmNyZWF0ZShudWxsKSwgbS5fZXZlbnRzQ291bnQgPSAwKSA6IChULm5ld0xpc3RlbmVyICE9PSB2b2lkIDAgJiYgKG0uZW1pdChcbiAgICAgIFwibmV3TGlzdGVuZXJcIixcbiAgICAgIGYsXG4gICAgICBiLmxpc3RlbmVyID8gYi5saXN0ZW5lciA6IGJcbiAgICApLCBUID0gbS5fZXZlbnRzKSwgTSA9IFRbZl0pLCBNID09PSB2b2lkIDApXG4gICAgICBNID0gVFtmXSA9IGIsICsrbS5fZXZlbnRzQ291bnQ7XG4gICAgZWxzZSBpZiAodHlwZW9mIE0gPT0gXCJmdW5jdGlvblwiID8gTSA9IFRbZl0gPSBnID8gW2IsIE1dIDogW00sIGJdIDogZyA/IE0udW5zaGlmdChiKSA6IE0ucHVzaChiKSwgeSA9IHUobSksIHkgPiAwICYmIE0ubGVuZ3RoID4geSAmJiAhTS53YXJuZWQpIHtcbiAgICAgIE0ud2FybmVkID0gITA7XG4gICAgICB2YXIgUCA9IG5ldyBFcnJvcihcIlBvc3NpYmxlIEV2ZW50RW1pdHRlciBtZW1vcnkgbGVhayBkZXRlY3RlZC4gXCIgKyBNLmxlbmd0aCArIFwiIFwiICsgU3RyaW5nKGYpICsgXCIgbGlzdGVuZXJzIGFkZGVkLiBVc2UgZW1pdHRlci5zZXRNYXhMaXN0ZW5lcnMoKSB0byBpbmNyZWFzZSBsaW1pdFwiKTtcbiAgICAgIFAubmFtZSA9IFwiTWF4TGlzdGVuZXJzRXhjZWVkZWRXYXJuaW5nXCIsIFAuZW1pdHRlciA9IG0sIFAudHlwZSA9IGYsIFAuY291bnQgPSBNLmxlbmd0aCwgcihQKTtcbiAgICB9XG4gICAgcmV0dXJuIG07XG4gIH1cbiAgYy5wcm90b3R5cGUuYWRkTGlzdGVuZXIgPSBmdW5jdGlvbihmLCBiKSB7XG4gICAgcmV0dXJuIHAodGhpcywgZiwgYiwgITEpO1xuICB9LCBjLnByb3RvdHlwZS5vbiA9IGMucHJvdG90eXBlLmFkZExpc3RlbmVyLCBjLnByb3RvdHlwZS5wcmVwZW5kTGlzdGVuZXIgPSBmdW5jdGlvbihmLCBiKSB7XG4gICAgcmV0dXJuIHAodGhpcywgZiwgYiwgITApO1xuICB9O1xuICBmdW5jdGlvbiBoKCkge1xuICAgIGlmICghdGhpcy5maXJlZClcbiAgICAgIHJldHVybiB0aGlzLnRhcmdldC5yZW1vdmVMaXN0ZW5lcih0aGlzLnR5cGUsIHRoaXMud3JhcEZuKSwgdGhpcy5maXJlZCA9ICEwLCBhcmd1bWVudHMubGVuZ3RoID09PSAwID8gdGhpcy5saXN0ZW5lci5jYWxsKHRoaXMudGFyZ2V0KSA6IHRoaXMubGlzdGVuZXIuYXBwbHkodGhpcy50YXJnZXQsIGFyZ3VtZW50cyk7XG4gIH1cbiAgZnVuY3Rpb24gZChtLCBmLCBiKSB7XG4gICAgdmFyIGcgPSB7IGZpcmVkOiAhMSwgd3JhcEZuOiB2b2lkIDAsIHRhcmdldDogbSwgdHlwZTogZiwgbGlzdGVuZXI6IGIgfSwgeSA9IGguYmluZChnKTtcbiAgICByZXR1cm4geS5saXN0ZW5lciA9IGIsIGcud3JhcEZuID0geSwgeTtcbiAgfVxuICBjLnByb3RvdHlwZS5vbmNlID0gZnVuY3Rpb24oZiwgYikge1xuICAgIHJldHVybiBpKGIpLCB0aGlzLm9uKGYsIGQodGhpcywgZiwgYikpLCB0aGlzO1xuICB9LCBjLnByb3RvdHlwZS5wcmVwZW5kT25jZUxpc3RlbmVyID0gZnVuY3Rpb24oZiwgYikge1xuICAgIHJldHVybiBpKGIpLCB0aGlzLnByZXBlbmRMaXN0ZW5lcihmLCBkKHRoaXMsIGYsIGIpKSwgdGhpcztcbiAgfSwgYy5wcm90b3R5cGUucmVtb3ZlTGlzdGVuZXIgPSBmdW5jdGlvbihmLCBiKSB7XG4gICAgdmFyIGcsIHksIFQsIE0sIFA7XG4gICAgaWYgKGkoYiksIHkgPSB0aGlzLl9ldmVudHMsIHkgPT09IHZvaWQgMClcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIGlmIChnID0geVtmXSwgZyA9PT0gdm9pZCAwKVxuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgaWYgKGcgPT09IGIgfHwgZy5saXN0ZW5lciA9PT0gYilcbiAgICAgIC0tdGhpcy5fZXZlbnRzQ291bnQgPT09IDAgPyB0aGlzLl9ldmVudHMgPSAvKiBAX19QVVJFX18gKi8gT2JqZWN0LmNyZWF0ZShudWxsKSA6IChkZWxldGUgeVtmXSwgeS5yZW1vdmVMaXN0ZW5lciAmJiB0aGlzLmVtaXQoXCJyZW1vdmVMaXN0ZW5lclwiLCBmLCBnLmxpc3RlbmVyIHx8IGIpKTtcbiAgICBlbHNlIGlmICh0eXBlb2YgZyAhPSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgIGZvciAoVCA9IC0xLCBNID0gZy5sZW5ndGggLSAxOyBNID49IDA7IE0tLSlcbiAgICAgICAgaWYgKGdbTV0gPT09IGIgfHwgZ1tNXS5saXN0ZW5lciA9PT0gYikge1xuICAgICAgICAgIFAgPSBnW01dLmxpc3RlbmVyLCBUID0gTTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgaWYgKFQgPCAwKVxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgIFQgPT09IDAgPyBnLnNoaWZ0KCkgOiBrKGcsIFQpLCBnLmxlbmd0aCA9PT0gMSAmJiAoeVtmXSA9IGdbMF0pLCB5LnJlbW92ZUxpc3RlbmVyICE9PSB2b2lkIDAgJiYgdGhpcy5lbWl0KFwicmVtb3ZlTGlzdGVuZXJcIiwgZiwgUCB8fCBiKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXM7XG4gIH0sIGMucHJvdG90eXBlLm9mZiA9IGMucHJvdG90eXBlLnJlbW92ZUxpc3RlbmVyLCBjLnByb3RvdHlwZS5yZW1vdmVBbGxMaXN0ZW5lcnMgPSBmdW5jdGlvbihmKSB7XG4gICAgdmFyIGIsIGcsIHk7XG4gICAgaWYgKGcgPSB0aGlzLl9ldmVudHMsIGcgPT09IHZvaWQgMClcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIGlmIChnLnJlbW92ZUxpc3RlbmVyID09PSB2b2lkIDApXG4gICAgICByZXR1cm4gYXJndW1lbnRzLmxlbmd0aCA9PT0gMCA/ICh0aGlzLl9ldmVudHMgPSAvKiBAX19QVVJFX18gKi8gT2JqZWN0LmNyZWF0ZShudWxsKSwgdGhpcy5fZXZlbnRzQ291bnQgPSAwKSA6IGdbZl0gIT09IHZvaWQgMCAmJiAoLS10aGlzLl9ldmVudHNDb3VudCA9PT0gMCA/IHRoaXMuX2V2ZW50cyA9IC8qIEBfX1BVUkVfXyAqLyBPYmplY3QuY3JlYXRlKG51bGwpIDogZGVsZXRlIGdbZl0pLCB0aGlzO1xuICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAwKSB7XG4gICAgICB2YXIgVCA9IE9iamVjdC5rZXlzKGcpLCBNO1xuICAgICAgZm9yICh5ID0gMDsgeSA8IFQubGVuZ3RoOyArK3kpXG4gICAgICAgIE0gPSBUW3ldLCBNICE9PSBcInJlbW92ZUxpc3RlbmVyXCIgJiYgdGhpcy5yZW1vdmVBbGxMaXN0ZW5lcnMoTSk7XG4gICAgICByZXR1cm4gdGhpcy5yZW1vdmVBbGxMaXN0ZW5lcnMoXCJyZW1vdmVMaXN0ZW5lclwiKSwgdGhpcy5fZXZlbnRzID0gLyogQF9fUFVSRV9fICovIE9iamVjdC5jcmVhdGUobnVsbCksIHRoaXMuX2V2ZW50c0NvdW50ID0gMCwgdGhpcztcbiAgICB9XG4gICAgaWYgKGIgPSBnW2ZdLCB0eXBlb2YgYiA9PSBcImZ1bmN0aW9uXCIpXG4gICAgICB0aGlzLnJlbW92ZUxpc3RlbmVyKGYsIGIpO1xuICAgIGVsc2UgaWYgKGIgIT09IHZvaWQgMClcbiAgICAgIGZvciAoeSA9IGIubGVuZ3RoIC0gMTsgeSA+PSAwOyB5LS0pXG4gICAgICAgIHRoaXMucmVtb3ZlTGlzdGVuZXIoZiwgYlt5XSk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG4gIGZ1bmN0aW9uIGwobSwgZiwgYikge1xuICAgIHZhciBnID0gbS5fZXZlbnRzO1xuICAgIGlmIChnID09PSB2b2lkIDApXG4gICAgICByZXR1cm4gW107XG4gICAgdmFyIHkgPSBnW2ZdO1xuICAgIHJldHVybiB5ID09PSB2b2lkIDAgPyBbXSA6IHR5cGVvZiB5ID09IFwiZnVuY3Rpb25cIiA/IGIgPyBbeS5saXN0ZW5lciB8fCB5XSA6IFt5XSA6IGIgPyBBKHkpIDogQyh5LCB5Lmxlbmd0aCk7XG4gIH1cbiAgYy5wcm90b3R5cGUubGlzdGVuZXJzID0gZnVuY3Rpb24oZikge1xuICAgIHJldHVybiBsKHRoaXMsIGYsICEwKTtcbiAgfSwgYy5wcm90b3R5cGUucmF3TGlzdGVuZXJzID0gZnVuY3Rpb24oZikge1xuICAgIHJldHVybiBsKHRoaXMsIGYsICExKTtcbiAgfSwgYy5saXN0ZW5lckNvdW50ID0gZnVuY3Rpb24obSwgZikge1xuICAgIHJldHVybiB0eXBlb2YgbS5saXN0ZW5lckNvdW50ID09IFwiZnVuY3Rpb25cIiA/IG0ubGlzdGVuZXJDb3VudChmKSA6IHYuY2FsbChtLCBmKTtcbiAgfSwgYy5wcm90b3R5cGUubGlzdGVuZXJDb3VudCA9IHY7XG4gIGZ1bmN0aW9uIHYobSkge1xuICAgIHZhciBmID0gdGhpcy5fZXZlbnRzO1xuICAgIGlmIChmICE9PSB2b2lkIDApIHtcbiAgICAgIHZhciBiID0gZlttXTtcbiAgICAgIGlmICh0eXBlb2YgYiA9PSBcImZ1bmN0aW9uXCIpXG4gICAgICAgIHJldHVybiAxO1xuICAgICAgaWYgKGIgIT09IHZvaWQgMClcbiAgICAgICAgcmV0dXJuIGIubGVuZ3RoO1xuICAgIH1cbiAgICByZXR1cm4gMDtcbiAgfVxuICBjLnByb3RvdHlwZS5ldmVudE5hbWVzID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMuX2V2ZW50c0NvdW50ID4gMCA/IHQodGhpcy5fZXZlbnRzKSA6IFtdO1xuICB9O1xuICBmdW5jdGlvbiBDKG0sIGYpIHtcbiAgICBmb3IgKHZhciBiID0gbmV3IEFycmF5KGYpLCBnID0gMDsgZyA8IGY7ICsrZylcbiAgICAgIGJbZ10gPSBtW2ddO1xuICAgIHJldHVybiBiO1xuICB9XG4gIGZ1bmN0aW9uIGsobSwgZikge1xuICAgIGZvciAoOyBmICsgMSA8IG0ubGVuZ3RoOyBmKyspXG4gICAgICBtW2ZdID0gbVtmICsgMV07XG4gICAgbS5wb3AoKTtcbiAgfVxuICBmdW5jdGlvbiBBKG0pIHtcbiAgICBmb3IgKHZhciBmID0gbmV3IEFycmF5KG0ubGVuZ3RoKSwgYiA9IDA7IGIgPCBmLmxlbmd0aDsgKytiKVxuICAgICAgZltiXSA9IG1bYl0ubGlzdGVuZXIgfHwgbVtiXTtcbiAgICByZXR1cm4gZjtcbiAgfVxuICBmdW5jdGlvbiB3KG0sIGYpIHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24oYiwgZykge1xuICAgICAgZnVuY3Rpb24geShNKSB7XG4gICAgICAgIG0ucmVtb3ZlTGlzdGVuZXIoZiwgVCksIGcoTSk7XG4gICAgICB9XG4gICAgICBmdW5jdGlvbiBUKCkge1xuICAgICAgICB0eXBlb2YgbS5yZW1vdmVMaXN0ZW5lciA9PSBcImZ1bmN0aW9uXCIgJiYgbS5yZW1vdmVMaXN0ZW5lcihcImVycm9yXCIsIHkpLCBiKFtdLnNsaWNlLmNhbGwoYXJndW1lbnRzKSk7XG4gICAgICB9XG4gICAgICBSKG0sIGYsIFQsIHsgb25jZTogITAgfSksIGYgIT09IFwiZXJyb3JcIiAmJiBPKG0sIHksIHsgb25jZTogITAgfSk7XG4gICAgfSk7XG4gIH1cbiAgZnVuY3Rpb24gTyhtLCBmLCBiKSB7XG4gICAgdHlwZW9mIG0ub24gPT0gXCJmdW5jdGlvblwiICYmIFIobSwgXCJlcnJvclwiLCBmLCBiKTtcbiAgfVxuICBmdW5jdGlvbiBSKG0sIGYsIGIsIGcpIHtcbiAgICBpZiAodHlwZW9mIG0ub24gPT0gXCJmdW5jdGlvblwiKVxuICAgICAgZy5vbmNlID8gbS5vbmNlKGYsIGIpIDogbS5vbihmLCBiKTtcbiAgICBlbHNlIGlmICh0eXBlb2YgbS5hZGRFdmVudExpc3RlbmVyID09IFwiZnVuY3Rpb25cIilcbiAgICAgIG0uYWRkRXZlbnRMaXN0ZW5lcihmLCBmdW5jdGlvbiB5KFQpIHtcbiAgICAgICAgZy5vbmNlICYmIG0ucmVtb3ZlRXZlbnRMaXN0ZW5lcihmLCB5KSwgYihUKTtcbiAgICAgIH0pO1xuICAgIGVsc2VcbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1RoZSBcImVtaXR0ZXJcIiBhcmd1bWVudCBtdXN0IGJlIG9mIHR5cGUgRXZlbnRFbWl0dGVyLiBSZWNlaXZlZCB0eXBlICcgKyB0eXBlb2YgbSk7XG4gIH1cbiAgcmV0dXJuIG5lLmV4cG9ydHM7XG59XG52YXIgaGUgPSB1bigpO1xuY29uc3QgbG4gPSAyZTQ7XG52YXIgZG4gPSAvKiBAX19QVVJFX18gKi8gKChlKSA9PiAoZS5DYW1lcmFDaGFuZ2VkID0gXCJjYW1lcmFDaGFuZ2VkXCIsIGUuTWljcm9waG9uZUNoYW5nZWQgPSBcIm1pY3JvcGhvbmVDaGFuZ2VkXCIsIGUuU3RhdGVDaGFuZ2VkID0gXCJzdGF0ZUNoYW5nZWRcIiwgZSkpKGRuIHx8IHt9KTtcbmNvbnN0IHggPSAoZSkgPT4gKHtcbiAgaXNDb25uZWN0ZWQ6IGUgPT09IFwibGlzdGVuaW5nXCIgfHwgZSA9PT0gXCJ0aGlua2luZ1wiIHx8IGUgPT09IFwic3BlYWtpbmdcIixcbiAgY2FuTGlzdGVuOiBlID09PSBcInByZS1jb25uZWN0LWJ1ZmZlcmluZ1wiIHx8IGUgPT09IFwibGlzdGVuaW5nXCIgfHwgZSA9PT0gXCJ0aGlua2luZ1wiIHx8IGUgPT09IFwic3BlYWtpbmdcIixcbiAgaXNGaW5pc2hlZDogZSA9PT0gXCJkaXNjb25uZWN0ZWRcIiB8fCBlID09PSBcImZhaWxlZFwiLFxuICBpc1BlbmRpbmc6IGUgPT09IFwiY29ubmVjdGluZ1wiIHx8IGUgPT09IFwiaW5pdGlhbGl6aW5nXCIgfHwgZSA9PT0gXCJpZGxlXCJcbn0pLCBmbiA9ICgpID0+IHtcbiAgY29uc3QgW2UsIG5dID0gcy51c2VTdGF0ZShcbiAgICBudWxsXG4gICksIFt0LCByXSA9IHMudXNlU3RhdGUoXG4gICAgbnVsbFxuICApLCBvID0gcy51c2VSZWYoXCJjb25uZWN0aW5nXCIpLCBjID0gcy51c2VSZWYoITEpLCBhID0gKGkpID0+IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgIGlmICghYy5jdXJyZW50KSB7XG4gICAgICBuKFwiQWdlbnQgZGlkIG5vdCBqb2luIHRoZSByb29tLlwiKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgeyBpc0Nvbm5lY3RlZDogdSB9ID0geChvLmN1cnJlbnQpO1xuICAgIGlmICghdSkge1xuICAgICAgbihcIkFnZW50IGpvaW5lZCB0aGUgcm9vbSBidXQgZGlkIG5vdCBjb21wbGV0ZSBpbml0aWFsaXppbmcuXCIpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgfSwgaSA/PyBsbik7XG4gIHJldHVybiB7XG4gICAgYWdlbnRUaW1lb3V0RmFpbHVyZVJlYXNvbjogZSxcbiAgICBzdGFydEFnZW50VGltZW91dDogcy51c2VDYWxsYmFjayhcbiAgICAgIChpKSA9PiB7XG4gICAgICAgIHQgJiYgY2xlYXJUaW1lb3V0KHQpLCBuKG51bGwpLCByKGEoaSkpLCBvLmN1cnJlbnQgPSBcImNvbm5lY3RpbmdcIiwgYy5jdXJyZW50ID0gITE7XG4gICAgICB9LFxuICAgICAgW3RdXG4gICAgKSxcbiAgICBjbGVhckFnZW50VGltZW91dDogcy51c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgICB0ICYmIGNsZWFyVGltZW91dCh0KSwgbihudWxsKSwgcihudWxsKSwgby5jdXJyZW50ID0gXCJjb25uZWN0aW5nXCIsIGMuY3VycmVudCA9ICExO1xuICAgIH0sIFt0XSksXG4gICAgY2xlYXJBZ2VudFRpbWVvdXRGYWlsdXJlUmVhc29uOiBzLnVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICAgIG4obnVsbCk7XG4gICAgfSwgW10pLFxuICAgIHVwZGF0ZUFnZW50VGltZW91dFN0YXRlOiBzLnVzZUNhbGxiYWNrKChpKSA9PiB7XG4gICAgICBvLmN1cnJlbnQgPSBpO1xuICAgIH0sIFtdKSxcbiAgICB1cGRhdGVBZ2VudFRpbWVvdXRQYXJ0aWNpcGFudEV4aXN0czogcy51c2VDYWxsYmFjaygoaSkgPT4ge1xuICAgICAgYy5jdXJyZW50ID0gaTtcbiAgICB9LCBbXSlcbiAgfTtcbn07XG5mdW5jdGlvbiBtbihlLCBuKSB7XG4gIGNvbnN0IHQgPSBzLnVzZVJlZihuKTtcbiAgcy51c2VFZmZlY3QoKCkgPT4ge1xuICAgIHQuY3VycmVudCA9IG47XG4gIH0sIFtuXSk7XG4gIGNvbnN0IHIgPSBzLnVzZUNhbGxiYWNrKFxuICAgIGFzeW5jIChhKSA9PiB7XG4gICAgICBjb25zdCB7IGlzQ29ubmVjdGVkOiBpIH0gPSB4KHQuY3VycmVudCk7XG4gICAgICBpZiAoIWkpXG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgodSwgcCkgPT4ge1xuICAgICAgICAgIGNvbnN0IGggPSAodikgPT4ge1xuICAgICAgICAgICAgY29uc3QgeyBpc0Nvbm5lY3RlZDogQyB9ID0geCh2KTtcbiAgICAgICAgICAgIEMgJiYgKGwoKSwgdSgpKTtcbiAgICAgICAgICB9LCBkID0gKCkgPT4ge1xuICAgICAgICAgICAgbCgpLCBwKG5ldyBFcnJvcihcInVzZUFnZW50KC8qIC4uLiAqLykud2FpdFVudGlsQ29ubmVjdGVkIC0gc2lnbmFsIGFib3J0ZWRcIikpO1xuICAgICAgICAgIH0sIGwgPSAoKSA9PiB7XG4gICAgICAgICAgICBlLm9mZihcInN0YXRlQ2hhbmdlZFwiLCBoKSwgYSA9PSBudWxsIHx8IGEucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImFib3J0XCIsIGQpO1xuICAgICAgICAgIH07XG4gICAgICAgICAgZS5vbihcInN0YXRlQ2hhbmdlZFwiLCBoKSwgYSA9PSBudWxsIHx8IGEuYWRkRXZlbnRMaXN0ZW5lcihcImFib3J0XCIsIGQpO1xuICAgICAgICB9KTtcbiAgICB9LFxuICAgIFtlXVxuICApLCBvID0gcy51c2VDYWxsYmFjayhcbiAgICBhc3luYyAoYSkgPT4ge1xuICAgICAgY29uc3QgeyBjYW5MaXN0ZW46IGkgfSA9IHgodC5jdXJyZW50KTtcbiAgICAgIGlmICghaSlcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKCh1LCBwKSA9PiB7XG4gICAgICAgICAgY29uc3QgaCA9ICh2KSA9PiB7XG4gICAgICAgICAgICBjb25zdCB7IGNhbkxpc3RlbjogQyB9ID0geCh2KTtcbiAgICAgICAgICAgIEMgJiYgKGwoKSwgdSgpKTtcbiAgICAgICAgICB9LCBkID0gKCkgPT4ge1xuICAgICAgICAgICAgbCgpLCBwKG5ldyBFcnJvcihcInVzZUFnZW50KC8qIC4uLiAqLykud2FpdFVudGlsQ291bGRCZUxpc3RlbmluZyAtIHNpZ25hbCBhYm9ydGVkXCIpKTtcbiAgICAgICAgICB9LCBsID0gKCkgPT4ge1xuICAgICAgICAgICAgZS5vZmYoXCJzdGF0ZUNoYW5nZWRcIiwgaCksIGEgPT0gbnVsbCB8fCBhLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJhYm9ydFwiLCBkKTtcbiAgICAgICAgICB9O1xuICAgICAgICAgIGUub24oXCJzdGF0ZUNoYW5nZWRcIiwgaCksIGEgPT0gbnVsbCB8fCBhLmFkZEV2ZW50TGlzdGVuZXIoXCJhYm9ydFwiLCBkKTtcbiAgICAgICAgfSk7XG4gICAgfSxcbiAgICBbZV1cbiAgKSwgYyA9IHMudXNlQ2FsbGJhY2soXG4gICAgYXN5bmMgKGEpID0+IHtcbiAgICAgIGNvbnN0IHsgaXNGaW5pc2hlZDogaSB9ID0geCh0LmN1cnJlbnQpO1xuICAgICAgaWYgKCFpKVxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHUsIHApID0+IHtcbiAgICAgICAgICBjb25zdCBoID0gKHYpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHsgaXNGaW5pc2hlZDogQyB9ID0geCh2KTtcbiAgICAgICAgICAgIEMgJiYgKGwoKSwgdSgpKTtcbiAgICAgICAgICB9LCBkID0gKCkgPT4ge1xuICAgICAgICAgICAgbCgpLCBwKG5ldyBFcnJvcihcInVzZUFnZW50KC8qIC4uLiAqLykud2FpdFVudGlsRmluaXNoZWQgLSBzaWduYWwgYWJvcnRlZFwiKSk7XG4gICAgICAgICAgfSwgbCA9ICgpID0+IHtcbiAgICAgICAgICAgIGUub2ZmKFwic3RhdGVDaGFuZ2VkXCIsIGgpLCBhID09IG51bGwgfHwgYS5yZW1vdmVFdmVudExpc3RlbmVyKFwiYWJvcnRcIiwgZCk7XG4gICAgICAgICAgfTtcbiAgICAgICAgICBlLm9uKFwic3RhdGVDaGFuZ2VkXCIsIGgpLCBhID09IG51bGwgfHwgYS5hZGRFdmVudExpc3RlbmVyKFwiYWJvcnRcIiwgZCk7XG4gICAgICAgIH0pO1xuICAgIH0sXG4gICAgW2VdXG4gICk7XG4gIHJldHVybiB7IHdhaXRVbnRpbENvbm5lY3RlZDogciwgd2FpdFVudGlsQ291bGRCZUxpc3RlbmluZzogbywgd2FpdFVudGlsRmluaXNoZWQ6IGMgfTtcbn1cbmZ1bmN0aW9uIEllKGUpIHtcbiAgY29uc3QgbiA9IFJ0KCk7XG4gIGlmIChlID0gZSA/PyBuLCAhZSlcbiAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICBcIk5vIHNlc3Npb24gcHJvdmlkZWQsIG1ha2Ugc3VyZSB5b3UgYXJlIGluc2lkZSBhIFNlc3Npb24gY29udGV4dCBvciBwYXNzIHRoZSBzZXNzaW9uIGV4cGxpY2l0bHlcIlxuICAgICk7XG4gIGNvbnN0IHtcbiAgICByb29tOiB0LFxuICAgIGludGVybmFsOiB7XG4gICAgICBhZ2VudENvbm5lY3RUaW1lb3V0TWlsbGlzZWNvbmRzOiByLFxuICAgICAgYWdlbnRUaW1lb3V0RmFpbHVyZVJlYXNvbjogbyxcbiAgICAgIHN0YXJ0QWdlbnRUaW1lb3V0OiBjLFxuICAgICAgY2xlYXJBZ2VudFRpbWVvdXQ6IGEsXG4gICAgICBjbGVhckFnZW50VGltZW91dEZhaWx1cmVSZWFzb246IGksXG4gICAgICB1cGRhdGVBZ2VudFRpbWVvdXRTdGF0ZTogdSxcbiAgICAgIHVwZGF0ZUFnZW50VGltZW91dFBhcnRpY2lwYW50RXhpc3RzOiBwXG4gICAgfVxuICB9ID0gZSwgaCA9IHMudXNlTWVtbygoKSA9PiBuZXcgaGUuRXZlbnRFbWl0dGVyKCksIFtdKSwgZCA9IHBlKHsgcm9vbTogdCB9KSwgbCA9IHMudXNlTWVtbygoKSA9PiBkLmZpbmQoXG4gICAgKFMpID0+IFMua2luZCA9PT0gc2UuQUdFTlQgJiYgIShXLlB1Ymxpc2hPbkJlaGFsZiBpbiBTLmF0dHJpYnV0ZXMpXG4gICkgPz8gbnVsbCwgW2RdKSwgdiA9IHMudXNlTWVtbygoKSA9PiBsID8gZC5maW5kKFxuICAgIChTKSA9PiBTLmtpbmQgPT09IHNlLkFHRU5UICYmIFMuYXR0cmlidXRlc1tXLlB1Ymxpc2hPbkJlaGFsZl0gPT09IGwuaWRlbnRpdHlcbiAgKSA/PyBudWxsIDogbnVsbCwgW2wsIGRdKSwgW0MsIGtdID0gcy51c2VTdGF0ZSh7fSk7XG4gIHMudXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoIWwpXG4gICAgICByZXR1cm47XG4gICAgY29uc3QgUyA9IChfKSA9PiB7XG4gICAgICBrKF8pO1xuICAgIH07XG4gICAgcmV0dXJuIGwub24oWC5BdHRyaWJ1dGVzQ2hhbmdlZCwgUyksICgpID0+IHtcbiAgICAgIGwub2ZmKFguQXR0cmlidXRlc0NoYW5nZWQsIFMpO1xuICAgIH07XG4gIH0sIFtsLCBoXSk7XG4gIGNvbnN0IEEgPSByZShbRS5Tb3VyY2UuQ2FtZXJhLCBFLlNvdXJjZS5NaWNyb3Bob25lXSwge1xuICAgIHJvb206IHQsXG4gICAgcGFydGljaXBhbnRJZGVudGl0eTogbCA9PSBudWxsID8gdm9pZCAwIDogbC5pZGVudGl0eVxuICB9KSwgdyA9IHJlKFtFLlNvdXJjZS5DYW1lcmEsIEUuU291cmNlLk1pY3JvcGhvbmVdLCB7XG4gICAgcm9vbTogdCxcbiAgICBwYXJ0aWNpcGFudElkZW50aXR5OiB2ID09IG51bGwgPyB2b2lkIDAgOiB2LmlkZW50aXR5XG4gIH0pLCBPID0gcy51c2VNZW1vKFxuICAgICgpID0+IEEuZmluZCgoUykgPT4gUy5zb3VyY2UgPT09IEUuU291cmNlLkNhbWVyYSkgPz8gdy5maW5kKChTKSA9PiBTLnNvdXJjZSA9PT0gRS5Tb3VyY2UuQ2FtZXJhKSxcbiAgICBbQSwgd11cbiAgKTtcbiAgcy51c2VFZmZlY3QoKCkgPT4ge1xuICAgIGguZW1pdChcImNhbWVyYUNoYW5nZWRcIiwgTyk7XG4gIH0sIFtoLCBPXSk7XG4gIGNvbnN0IFIgPSBzLnVzZU1lbW8oXG4gICAgKCkgPT4gQS5maW5kKChTKSA9PiBTLnNvdXJjZSA9PT0gRS5Tb3VyY2UuTWljcm9waG9uZSkgPz8gdy5maW5kKChTKSA9PiBTLnNvdXJjZSA9PT0gRS5Tb3VyY2UuTWljcm9waG9uZSksXG4gICAgW0EsIHddXG4gICk7XG4gIHMudXNlRWZmZWN0KCgpID0+IHtcbiAgICBoLmVtaXQoXCJtaWNyb3Bob25lQ2hhbmdlZFwiLCBSKTtcbiAgfSwgW2gsIFJdKTtcbiAgY29uc3QgW20sIGZdID0gcy51c2VTdGF0ZSh0LnN0YXRlKTtcbiAgcy51c2VFZmZlY3QoKCkgPT4ge1xuICAgIGNvbnN0IFMgPSAoXykgPT4ge1xuICAgICAgZihfKTtcbiAgICB9O1xuICAgIHJldHVybiB0Lm9uKEguQ29ubmVjdGlvblN0YXRlQ2hhbmdlZCwgUyksICgpID0+IHtcbiAgICAgIHQub2ZmKEguQ29ubmVjdGlvblN0YXRlQ2hhbmdlZCwgUyk7XG4gICAgfTtcbiAgfSwgW3RdKSwgcy51c2VFZmZlY3QoKCkgPT4ge1xuICAgIGwgJiYgaSgpO1xuICB9LCBbbF0pO1xuICBjb25zdCBbYiwgZ10gPSBzLnVzZVN0YXRlKG51bGwpO1xuICBzLnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKCFsKVxuICAgICAgcmV0dXJuO1xuICAgIGNvbnN0IFMgPSAoXykgPT4ge1xuICAgICAgXy5pZGVudGl0eSA9PT0gKGwgPT0gbnVsbCA/IHZvaWQgMCA6IGwuaWRlbnRpdHkpICYmIGcoXCJBZ2VudCBsZWZ0IHRoZSByb29tIHVuZXhwZWN0ZWRseS5cIik7XG4gICAgfTtcbiAgICByZXR1cm4gdC5vbihILlBhcnRpY2lwYW50RGlzY29ubmVjdGVkLCBTKSwgKCkgPT4ge1xuICAgICAgdC5vZmYoSC5QYXJ0aWNpcGFudERpc2Nvbm5lY3RlZCwgUyk7XG4gICAgfTtcbiAgfSwgW2wsIHRdKSwgcy51c2VFZmZlY3QoKCkgPT4ge1xuICAgIG0gPT09IEkuRGlzY29ubmVjdGVkICYmIGcobnVsbCk7XG4gIH0sIFttXSk7XG4gIGNvbnN0IFt5LCBUXSA9IHMudXNlU3RhdGUoXG4gICAgKCkgPT4gdC5sb2NhbFBhcnRpY2lwYW50LmdldFRyYWNrUHVibGljYXRpb24oRS5Tb3VyY2UuTWljcm9waG9uZSkgPz8gbnVsbFxuICApO1xuICBzLnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgY29uc3QgUyA9ICgpID0+IHtcbiAgICAgIFQodC5sb2NhbFBhcnRpY2lwYW50LmdldFRyYWNrUHVibGljYXRpb24oRS5Tb3VyY2UuTWljcm9waG9uZSkgPz8gbnVsbCk7XG4gICAgfSwgXyA9ICgpID0+IHtcbiAgICAgIFQobnVsbCk7XG4gICAgfTtcbiAgICByZXR1cm4gdC5sb2NhbFBhcnRpY2lwYW50Lm9uKFxuICAgICAgWC5Mb2NhbFRyYWNrUHVibGlzaGVkLFxuICAgICAgU1xuICAgICksIHQubG9jYWxQYXJ0aWNpcGFudC5vbihcbiAgICAgIFguTG9jYWxUcmFja1VucHVibGlzaGVkLFxuICAgICAgX1xuICAgICksICgpID0+IHtcbiAgICAgIHQubG9jYWxQYXJ0aWNpcGFudC5vZmYoXG4gICAgICAgIFguTG9jYWxUcmFja1B1Ymxpc2hlZCxcbiAgICAgICAgU1xuICAgICAgKSwgdC5sb2NhbFBhcnRpY2lwYW50Lm9mZihcbiAgICAgICAgWC5Mb2NhbFRyYWNrVW5wdWJsaXNoZWQsXG4gICAgICAgIF9cbiAgICAgICk7XG4gICAgfTtcbiAgfSwgW3QubG9jYWxQYXJ0aWNpcGFudF0pO1xuICBjb25zdCBNID0gcy51c2VNZW1vKCgpID0+IHtcbiAgICBjb25zdCBTID0gW107XG4gICAgcmV0dXJuIG8gJiYgUy5wdXNoKG8pLCBiICYmIFMucHVzaChiKSwgUztcbiAgfSwgW28sIGJdKSwgUCA9IHMudXNlTWVtbygoKSA9PiB7XG4gICAgaWYgKE0ubGVuZ3RoID4gMClcbiAgICAgIHJldHVybiBcImZhaWxlZFwiO1xuICAgIGxldCBTID0gXCJkaXNjb25uZWN0ZWRcIjtcbiAgICByZXR1cm4gbSAhPT0gSS5EaXNjb25uZWN0ZWQgJiYgKFMgPSBcImNvbm5lY3RpbmdcIiksIHkgJiYgKFMgPSBcInByZS1jb25uZWN0LWJ1ZmZlcmluZ1wiKSwgbCAmJiBDW1cuQWdlbnRTdGF0ZV0gJiYgKFMgPSBDW1cuQWdlbnRTdGF0ZV0pLCBTO1xuICB9LCBbXG4gICAgTSxcbiAgICBtLFxuICAgIHksXG4gICAgbCxcbiAgICBDXG4gIF0pO1xuICBzLnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaC5lbWl0KFwic3RhdGVDaGFuZ2VkXCIsIFApLCB1KFApO1xuICB9LCBbaCwgUF0pLCBzLnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgcChsICE9PSBudWxsKTtcbiAgfSwgW2xdKTtcbiAgY29uc3QgRiA9IGUuY29ubmVjdGlvblN0YXRlID09PSBcImRpc2Nvbm5lY3RlZFwiO1xuICBzLnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKCFGKVxuICAgICAgcmV0dXJuIGMociksICgpID0+IHtcbiAgICAgICAgYSgpO1xuICAgICAgfTtcbiAgfSwgW0YsIHJdKTtcbiAgY29uc3QgcSA9IHMudXNlTWVtbygoKSA9PiB7XG4gICAgY29uc3QgUyA9IHtcbiAgICAgIGF0dHJpYnV0ZXM6IEMsXG4gICAgICBpbnRlcm5hbDoge1xuICAgICAgICBhZ2VudFBhcnRpY2lwYW50OiBsLFxuICAgICAgICB3b3JrZXJQYXJ0aWNpcGFudDogdixcbiAgICAgICAgZW1pdHRlcjogaFxuICAgICAgfVxuICAgIH07XG4gICAgc3dpdGNoIChQKSB7XG4gICAgICBjYXNlIFwiZGlzY29ubmVjdGVkXCI6XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgLi4uUyxcbiAgICAgICAgICBzdGF0ZTogUCxcbiAgICAgICAgICAuLi54KFApLFxuICAgICAgICAgIGZhaWx1cmVSZWFzb25zOiBudWxsLFxuICAgICAgICAgIC8vIENsZWFyIGlubmVyIHZhbHVlcyBpZiBubyBsb25nZXIgY29ubmVjdGVkXG4gICAgICAgICAgY2FtZXJhVHJhY2s6IHZvaWQgMCxcbiAgICAgICAgICBtaWNyb3Bob25lVHJhY2s6IHZvaWQgMFxuICAgICAgICB9O1xuICAgICAgY2FzZSBcImNvbm5lY3RpbmdcIjpcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAuLi5TLFxuICAgICAgICAgIHN0YXRlOiBQLFxuICAgICAgICAgIC4uLngoUCksXG4gICAgICAgICAgZmFpbHVyZVJlYXNvbnM6IG51bGwsXG4gICAgICAgICAgLy8gQ2xlYXIgaW5uZXIgdmFsdWVzIGlmIG5vIGxvbmdlciBjb25uZWN0ZWRcbiAgICAgICAgICBjYW1lcmFUcmFjazogdm9pZCAwLFxuICAgICAgICAgIG1pY3JvcGhvbmVUcmFjazogdm9pZCAwXG4gICAgICAgIH07XG4gICAgICBjYXNlIFwiaW5pdGlhbGl6aW5nXCI6XG4gICAgICBjYXNlIFwiaWRsZVwiOlxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIC4uLlMsXG4gICAgICAgICAgc3RhdGU6IFAsXG4gICAgICAgICAgLi4ueChQKSxcbiAgICAgICAgICBmYWlsdXJlUmVhc29uczogbnVsbCxcbiAgICAgICAgICBjYW1lcmFUcmFjazogTyxcbiAgICAgICAgICBtaWNyb3Bob25lVHJhY2s6IFJcbiAgICAgICAgfTtcbiAgICAgIGNhc2UgXCJwcmUtY29ubmVjdC1idWZmZXJpbmdcIjpcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAuLi5TLFxuICAgICAgICAgIHN0YXRlOiBQLFxuICAgICAgICAgIC4uLngoUCksXG4gICAgICAgICAgZmFpbHVyZVJlYXNvbnM6IG51bGwsXG4gICAgICAgICAgY2FtZXJhVHJhY2s6IE8sXG4gICAgICAgICAgbWljcm9waG9uZVRyYWNrOiBSXG4gICAgICAgIH07XG4gICAgICBjYXNlIFwibGlzdGVuaW5nXCI6XG4gICAgICBjYXNlIFwidGhpbmtpbmdcIjpcbiAgICAgIGNhc2UgXCJzcGVha2luZ1wiOlxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIC4uLlMsXG4gICAgICAgICAgc3RhdGU6IFAsXG4gICAgICAgICAgLi4ueChQKSxcbiAgICAgICAgICBmYWlsdXJlUmVhc29uczogbnVsbCxcbiAgICAgICAgICBjYW1lcmFUcmFjazogTyxcbiAgICAgICAgICBtaWNyb3Bob25lVHJhY2s6IFJcbiAgICAgICAgfTtcbiAgICAgIGNhc2UgXCJmYWlsZWRcIjpcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAuLi5TLFxuICAgICAgICAgIHN0YXRlOiBcImZhaWxlZFwiLFxuICAgICAgICAgIC4uLngoXCJmYWlsZWRcIiksXG4gICAgICAgICAgZmFpbHVyZVJlYXNvbnM6IE0sXG4gICAgICAgICAgLy8gQ2xlYXIgaW5uZXIgdmFsdWVzIGlmIG5vIGxvbmdlciBjb25uZWN0ZWRcbiAgICAgICAgICBjYW1lcmFUcmFjazogdm9pZCAwLFxuICAgICAgICAgIG1pY3JvcGhvbmVUcmFjazogdm9pZCAwXG4gICAgICAgIH07XG4gICAgfVxuICB9LCBbQywgaCwgbCwgUCwgTywgUl0pLCB7IHdhaXRVbnRpbENvbm5lY3RlZDogSiwgd2FpdFVudGlsQ291bGRCZUxpc3RlbmluZzogSywgd2FpdFVudGlsRmluaXNoZWQ6IEwgfSA9IG1uKGgsIFApLCBOID0gcy51c2VDYWxsYmFjayhcbiAgICAoUykgPT4gbmV3IFByb21pc2UoKF8sIFkpID0+IHtcbiAgICAgIGNvbnN0IEIgPSAoeikgPT4ge1xuICAgICAgICB6ICYmICgkKCksIF8oeikpO1xuICAgICAgfSwgaiA9ICgpID0+IHtcbiAgICAgICAgJCgpLCBZKG5ldyBFcnJvcihcInVzZUFnZW50KC8qIC4uLiAqLykud2FpdFVudGlsQ2FtZXJhIC0gc2lnbmFsIGFib3J0ZWRcIikpO1xuICAgICAgfSwgJCA9ICgpID0+IHtcbiAgICAgICAgaC5vZmYoXCJjYW1lcmFDaGFuZ2VkXCIsIEIpLCBTID09IG51bGwgfHwgUy5yZW1vdmVFdmVudExpc3RlbmVyKFwiYWJvcnRcIiwgaik7XG4gICAgICB9O1xuICAgICAgaC5vbihcImNhbWVyYUNoYW5nZWRcIiwgQiksIFMgPT0gbnVsbCB8fCBTLmFkZEV2ZW50TGlzdGVuZXIoXCJhYm9ydFwiLCBqKTtcbiAgICB9KSxcbiAgICBbaF1cbiAgKSwgWiA9IHMudXNlQ2FsbGJhY2soXG4gICAgKFMpID0+IG5ldyBQcm9taXNlKChfLCBZKSA9PiB7XG4gICAgICBjb25zdCBCID0gKHopID0+IHtcbiAgICAgICAgeiAmJiAoJCgpLCBfKHopKTtcbiAgICAgIH0sIGogPSAoKSA9PiB7XG4gICAgICAgICQoKSwgWShuZXcgRXJyb3IoXCJ1c2VBZ2VudCgvKiAuLi4gKi8pLndhaXRVbnRpbE1pY3JvcGhvbmUgLSBzaWduYWwgYWJvcnRlZFwiKSk7XG4gICAgICB9LCAkID0gKCkgPT4ge1xuICAgICAgICBoLm9mZihcIm1pY3JvcGhvbmVDaGFuZ2VkXCIsIEIpLCBTID09IG51bGwgfHwgUy5yZW1vdmVFdmVudExpc3RlbmVyKFwiYWJvcnRcIiwgaik7XG4gICAgICB9O1xuICAgICAgaC5vbihcIm1pY3JvcGhvbmVDaGFuZ2VkXCIsIEIpLCBTID09IG51bGwgfHwgUy5hZGRFdmVudExpc3RlbmVyKFwiYWJvcnRcIiwgaik7XG4gICAgfSksXG4gICAgW2hdXG4gICk7XG4gIHJldHVybiBzLnVzZU1lbW8oKCkgPT4gKHtcbiAgICAuLi5xLFxuICAgIHdhaXRVbnRpbENvbm5lY3RlZDogSixcbiAgICB3YWl0VW50aWxDb3VsZEJlTGlzdGVuaW5nOiBLLFxuICAgIHdhaXRVbnRpbEZpbmlzaGVkOiBMLFxuICAgIHdhaXRVbnRpbENhbWVyYTogTixcbiAgICB3YWl0VW50aWxNaWNyb3Bob25lOiBaXG4gIH0pLCBbXG4gICAgcSxcbiAgICBKLFxuICAgIEssXG4gICAgTCxcbiAgICBOLFxuICAgIFpcbiAgXSk7XG59XG52YXIgcG4gPSAvKiBAX19QVVJFX18gKi8gKChlKSA9PiAoZS5Db25uZWN0aW9uU3RhdGVDaGFuZ2VkID0gXCJjb25uZWN0aW9uU3RhdGVDaGFuZ2VkXCIsIGUuTWVkaWFEZXZpY2VzRXJyb3IgPSBcIm1lZGlhRGV2aWNlc0Vycm9yXCIsIGUuRW5jcnlwdGlvbkVycm9yID0gXCJlbmNyeXB0aW9uRXJyb3JcIiwgZSkpKHBuIHx8IHt9KTtcbmZ1bmN0aW9uIGhuKGUsIG4pIHtcbiAgY29uc3QgdCA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgU2V0KFsuLi5PYmplY3Qua2V5cyhlKSwgLi4uT2JqZWN0LmtleXMobildKTtcbiAgZm9yIChjb25zdCByIG9mIHQpXG4gICAgc3dpdGNoIChyKSB7XG4gICAgICBjYXNlIFwicm9vbU5hbWVcIjpcbiAgICAgIGNhc2UgXCJwYXJ0aWNpcGFudE5hbWVcIjpcbiAgICAgIGNhc2UgXCJwYXJ0aWNpcGFudElkZW50aXR5XCI6XG4gICAgICBjYXNlIFwicGFydGljaXBhbnRNZXRhZGF0YVwiOlxuICAgICAgY2FzZSBcInBhcnRpY2lwYW50QXR0cmlidXRlc1wiOlxuICAgICAgY2FzZSBcImFnZW50TmFtZVwiOlxuICAgICAgY2FzZSBcImFnZW50TWV0YWRhdGFcIjpcbiAgICAgICAgaWYgKGVbcl0gIT09IG5bcl0pXG4gICAgICAgICAgcmV0dXJuICExO1xuICAgICAgICBicmVhaztcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIGNvbnN0IG8gPSByO1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYE9wdGlvbnMga2V5ICR7b30gbm90IGJlaW5nIGNoZWNrZWQgZm9yIGVxdWFsaXR5IWApO1xuICAgIH1cbiAgcmV0dXJuICEwO1xufVxuZnVuY3Rpb24gYm4oZSwgbikge1xuICBjb25zdCB0ID0gcy51c2VSZWYobik7XG4gIHJldHVybiBzLnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgdC5jdXJyZW50ID0gbjtcbiAgfSwgW25dKSwgcy51c2VDYWxsYmFjayhcbiAgICBhc3luYyAobywgYykgPT4ge1xuICAgICAgaWYgKHQuY3VycmVudCAhPT0gbylcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChhLCBpKSA9PiB7XG4gICAgICAgICAgY29uc3QgdSA9IChkKSA9PiB7XG4gICAgICAgICAgICBkID09PSBvICYmIChoKCksIGEoKSk7XG4gICAgICAgICAgfSwgcCA9ICgpID0+IHtcbiAgICAgICAgICAgIGgoKSwgaShcbiAgICAgICAgICAgICAgbmV3IEVycm9yKFxuICAgICAgICAgICAgICAgIGB1c2VTZXNzaW9uKC8qIC4uLiAqLykud2FpdFVudGlsQ29ubmVjdGlvblN0YXRlKCR7b30sIC8qIHNpZ25hbCAqLykgLSBzaWduYWwgYWJvcnRlZGBcbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICB9LCBoID0gKCkgPT4ge1xuICAgICAgICAgICAgZS5vZmYoXCJjb25uZWN0aW9uU3RhdGVDaGFuZ2VkXCIsIHUpLCBjID09IG51bGwgfHwgYy5yZW1vdmVFdmVudExpc3RlbmVyKFwiYWJvcnRcIiwgcCk7XG4gICAgICAgICAgfTtcbiAgICAgICAgICBlLm9uKFwiY29ubmVjdGlvblN0YXRlQ2hhbmdlZFwiLCB1KSwgYyA9PSBudWxsIHx8IGMuYWRkRXZlbnRMaXN0ZW5lcihcImFib3J0XCIsIHApO1xuICAgICAgICB9KTtcbiAgICB9LFxuICAgIFtlXVxuICApO1xufVxuZnVuY3Rpb24gZ24oZSwgbikge1xuICBjb25zdCB0ID0gZSBpbnN0YW5jZW9mIEZ0LCByID0gcy51c2VSZWYoXG4gICAgdCA/IG4gOiBudWxsXG4gICk7XG4gIHJldHVybiBzLnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKCF0KSB7XG4gICAgICByLmN1cnJlbnQgPSBudWxsO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICByLmN1cnJlbnQgIT09IG51bGwgJiYgaG4oci5jdXJyZW50LCBuKSB8fCAoci5jdXJyZW50ID0gbik7XG4gIH0sIFt0LCBuXSksIHMudXNlQ2FsbGJhY2soYXN5bmMgKCkgPT4ge1xuICAgIGlmICh0KSB7XG4gICAgICBpZiAoIXIuY3VycmVudClcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAgIFwiQWdlbnRTZXNzaW9uIC0gbWVtb2l6ZWQgdG9rZW4gZmV0Y2ggb3B0aW9ucyBhcmUgbm90IHNldCwgYnV0IHRoZSBwYXNzZWQgdG9rZW5Tb3VyY2Ugd2FzIGFuIGluc3RhbmNlIG9mIFRva2VuU291cmNlQ29uZmlndXJhYmxlLiBJZiB5b3UgYXJlIHNlZWluZyB0aGlzIHBsZWFzZSBtYWtlIGEgbmV3IEdpdEh1YiBpc3N1ZSFcIlxuICAgICAgICApO1xuICAgICAgcmV0dXJuIGUuZmV0Y2goci5jdXJyZW50KTtcbiAgICB9IGVsc2VcbiAgICAgIHJldHVybiBlLmZldGNoKCk7XG4gIH0sIFt0LCBlXSk7XG59XG5mdW5jdGlvbiBpcyhlLCBuID0ge30pIHtcbiAgY29uc3QgeyByb29tOiB0LCBhZ2VudENvbm5lY3RUaW1lb3V0TWlsbGlzZWNvbmRzOiByLCAuLi5vIH0gPSBuLCBjID0gZGUoKSwgYSA9IHMudXNlTWVtbyhcbiAgICAoKSA9PiBjID8/IHQgPz8gbmV3IERlKCksXG4gICAgW2MsIHRdXG4gICksIGkgPSBzLnVzZU1lbW8oXG4gICAgKCkgPT4gbmV3IGhlLkV2ZW50RW1pdHRlcigpLFxuICAgIFtdXG4gICksIHUgPSBzLnVzZUNhbGxiYWNrKFxuICAgIChMKSA9PiAoe1xuICAgICAgaXNDb25uZWN0ZWQ6IEwgPT09IEkuQ29ubmVjdGVkIHx8IEwgPT09IEkuUmVjb25uZWN0aW5nIHx8IEwgPT09IEkuU2lnbmFsUmVjb25uZWN0aW5nXG4gICAgfSksXG4gICAgW11cbiAgKSwgW3AsIGhdID0gcy51c2VTdGF0ZShhLnN0YXRlKTtcbiAgcy51c2VFZmZlY3QoKCkgPT4ge1xuICAgIGNvbnN0IEwgPSAoTikgPT4ge1xuICAgICAgaChOKTtcbiAgICB9O1xuICAgIHJldHVybiBhLm9uKEguQ29ubmVjdGlvblN0YXRlQ2hhbmdlZCwgTCksICgpID0+IHtcbiAgICAgIGEub2ZmKEguQ29ubmVjdGlvblN0YXRlQ2hhbmdlZCwgTCk7XG4gICAgfTtcbiAgfSwgW2FdKSwgcy51c2VFZmZlY3QoKCkgPT4ge1xuICAgIGNvbnN0IEwgPSBhc3luYyAoTikgPT4ge1xuICAgICAgaS5lbWl0KFwibWVkaWFEZXZpY2VzRXJyb3JcIiwgTik7XG4gICAgfTtcbiAgICByZXR1cm4gYS5vbihILk1lZGlhRGV2aWNlc0Vycm9yLCBMKSwgKCkgPT4ge1xuICAgICAgYS5vZmYoSC5NZWRpYURldmljZXNFcnJvciwgTCk7XG4gICAgfTtcbiAgfSwgW2EsIGldKSwgcy51c2VFZmZlY3QoKCkgPT4ge1xuICAgIGNvbnN0IEwgPSBhc3luYyAoTikgPT4ge1xuICAgICAgaS5lbWl0KFwiZW5jcnlwdGlvbkVycm9yXCIsIE4pO1xuICAgIH07XG4gICAgcmV0dXJuIGEub24oSC5FbmNyeXB0aW9uRXJyb3IsIEwpLCAoKSA9PiB7XG4gICAgICBhLm9mZihILkVuY3J5cHRpb25FcnJvciwgTCk7XG4gICAgfTtcbiAgfSwgW2EsIGldKTtcbiAgY29uc3QgeyBsb2NhbFBhcnRpY2lwYW50OiBkIH0gPSBPZSh7IHJvb206IGEgfSksIGwgPSBkLmdldFRyYWNrUHVibGljYXRpb24oRS5Tb3VyY2UuQ2FtZXJhKSwgdiA9IHMudXNlTWVtbygoKSA9PiAhbCB8fCBsLmlzTXV0ZWQgPyBudWxsIDoge1xuICAgIHNvdXJjZTogRS5Tb3VyY2UuQ2FtZXJhLFxuICAgIHBhcnRpY2lwYW50OiBkLFxuICAgIHB1YmxpY2F0aW9uOiBsXG4gIH0sIFtkLCBsLCBsID09IG51bGwgPyB2b2lkIDAgOiBsLmlzTXV0ZWRdKSwgQyA9IGQuZ2V0VHJhY2tQdWJsaWNhdGlvbihFLlNvdXJjZS5NaWNyb3Bob25lKSwgayA9IHMudXNlTWVtbygoKSA9PiAhQyB8fCBDLmlzTXV0ZWQgPyBudWxsIDoge1xuICAgIHNvdXJjZTogRS5Tb3VyY2UuTWljcm9waG9uZSxcbiAgICBwYXJ0aWNpcGFudDogZCxcbiAgICBwdWJsaWNhdGlvbjogQ1xuICB9LCBbZCwgQywgQyA9PSBudWxsID8gdm9pZCAwIDogQy5pc011dGVkXSksIHtcbiAgICBhZ2VudFRpbWVvdXRGYWlsdXJlUmVhc29uOiBBLFxuICAgIHN0YXJ0QWdlbnRUaW1lb3V0OiB3LFxuICAgIGNsZWFyQWdlbnRUaW1lb3V0OiBPLFxuICAgIGNsZWFyQWdlbnRUaW1lb3V0RmFpbHVyZVJlYXNvbjogUixcbiAgICB1cGRhdGVBZ2VudFRpbWVvdXRTdGF0ZTogbSxcbiAgICB1cGRhdGVBZ2VudFRpbWVvdXRQYXJ0aWNpcGFudEV4aXN0czogZlxuICB9ID0gZm4oKSwgYiA9IHMudXNlTWVtbyhcbiAgICAoKSA9PiAoe1xuICAgICAgZW1pdHRlcjogaSxcbiAgICAgIHRva2VuU291cmNlOiBlLFxuICAgICAgYWdlbnRDb25uZWN0VGltZW91dE1pbGxpc2Vjb25kczogcixcbiAgICAgIGFnZW50VGltZW91dEZhaWx1cmVSZWFzb246IEEsXG4gICAgICBzdGFydEFnZW50VGltZW91dDogdyxcbiAgICAgIGNsZWFyQWdlbnRUaW1lb3V0OiBPLFxuICAgICAgY2xlYXJBZ2VudFRpbWVvdXRGYWlsdXJlUmVhc29uOiBSLFxuICAgICAgdXBkYXRlQWdlbnRUaW1lb3V0U3RhdGU6IG0sXG4gICAgICB1cGRhdGVBZ2VudFRpbWVvdXRQYXJ0aWNpcGFudEV4aXN0czogZlxuICAgIH0pLFxuICAgIFtcbiAgICAgIGksXG4gICAgICByLFxuICAgICAgZSxcbiAgICAgIEEsXG4gICAgICB3LFxuICAgICAgTyxcbiAgICAgIFIsXG4gICAgICBtLFxuICAgICAgZlxuICAgIF1cbiAgKSwgZyA9IHMudXNlTWVtbygoKSA9PiB7XG4gICAgY29uc3QgTCA9IHtcbiAgICAgIHJvb206IGEsXG4gICAgICBpbnRlcm5hbDogYlxuICAgIH07XG4gICAgc3dpdGNoIChwKSB7XG4gICAgICBjYXNlIEkuQ29ubmVjdGluZzpcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAuLi5MLFxuICAgICAgICAgIGNvbm5lY3Rpb25TdGF0ZTogSS5Db25uZWN0aW5nLFxuICAgICAgICAgIC4uLnUoSS5Db25uZWN0aW5nKSxcbiAgICAgICAgICBsb2NhbDoge1xuICAgICAgICAgICAgY2FtZXJhVHJhY2s6IG51bGwsXG4gICAgICAgICAgICBtaWNyb3Bob25lVHJhY2s6IG51bGxcbiAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICBjYXNlIEkuQ29ubmVjdGVkOlxuICAgICAgY2FzZSBJLlJlY29ubmVjdGluZzpcbiAgICAgIGNhc2UgSS5TaWduYWxSZWNvbm5lY3Rpbmc6XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgLi4uTCxcbiAgICAgICAgICBjb25uZWN0aW9uU3RhdGU6IHAsXG4gICAgICAgICAgLi4udShwKSxcbiAgICAgICAgICBsb2NhbDoge1xuICAgICAgICAgICAgY2FtZXJhVHJhY2s6IHYsXG4gICAgICAgICAgICBtaWNyb3Bob25lVHJhY2s6IGtcbiAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICBjYXNlIEkuRGlzY29ubmVjdGVkOlxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIC4uLkwsXG4gICAgICAgICAgY29ubmVjdGlvblN0YXRlOiBJLkRpc2Nvbm5lY3RlZCxcbiAgICAgICAgICAuLi51KEkuRGlzY29ubmVjdGVkKSxcbiAgICAgICAgICBsb2NhbDoge1xuICAgICAgICAgICAgY2FtZXJhVHJhY2s6IG51bGwsXG4gICAgICAgICAgICBtaWNyb3Bob25lVHJhY2s6IG51bGxcbiAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfVxuICB9LCBbXG4gICAgYixcbiAgICBhLFxuICAgIHAsXG4gICAgdixcbiAgICBrLFxuICAgIHVcbiAgXSk7XG4gIHMudXNlRWZmZWN0KCgpID0+IHtcbiAgICBpLmVtaXQoXCJjb25uZWN0aW9uU3RhdGVDaGFuZ2VkXCIsIGcuY29ubmVjdGlvblN0YXRlKTtcbiAgfSwgW2ksIGcuY29ubmVjdGlvblN0YXRlXSk7XG4gIGNvbnN0IHkgPSBibihcbiAgICBpLFxuICAgIGcuY29ubmVjdGlvblN0YXRlXG4gICksIFQgPSBzLnVzZUNhbGxiYWNrKFxuICAgIGFzeW5jIChMKSA9PiB5KFxuICAgICAgSS5Db25uZWN0ZWQsXG4gICAgICBMXG4gICAgKSxcbiAgICBbeV1cbiAgKSwgTSA9IHMudXNlQ2FsbGJhY2soXG4gICAgYXN5bmMgKEwpID0+IHkoSS5EaXNjb25uZWN0ZWQsIEwpLFxuICAgIFt5XVxuICApLCBQID0gSWUoXG4gICAgcy51c2VNZW1vKFxuICAgICAgKCkgPT4gKHtcbiAgICAgICAgY29ubmVjdGlvblN0YXRlOiBnLmNvbm5lY3Rpb25TdGF0ZSxcbiAgICAgICAgcm9vbTogYSxcbiAgICAgICAgaW50ZXJuYWw6IGJcbiAgICAgIH0pLFxuICAgICAgW2csIGEsIGJdXG4gICAgKVxuICApLCBGID0gZ24oZSwgbyksIHEgPSBzLnVzZUNhbGxiYWNrKFxuICAgIGFzeW5jIChMID0ge30pID0+IHtcbiAgICAgIHZhciBCLCBqO1xuICAgICAgY29uc3Qge1xuICAgICAgICBzaWduYWw6IE4sXG4gICAgICAgIHRyYWNrczogWiA9IHsgbWljcm9waG9uZTogeyBlbmFibGVkOiAhMCwgcHVibGlzaE9wdGlvbnM6IHsgcHJlQ29ubmVjdEJ1ZmZlcjogITAgfSB9IH0sXG4gICAgICAgIHJvb21Db25uZWN0T3B0aW9uczogU1xuICAgICAgfSA9IEw7XG4gICAgICBhd2FpdCBNKE4pO1xuICAgICAgY29uc3QgXyA9ICgpID0+IHtcbiAgICAgICAgYS5kaXNjb25uZWN0KCk7XG4gICAgICB9O1xuICAgICAgTiA9PSBudWxsIHx8IE4uYWRkRXZlbnRMaXN0ZW5lcihcImFib3J0XCIsIF8pO1xuICAgICAgbGV0IFkgPSAhMTtcbiAgICAgIGF3YWl0IFByb21pc2UuYWxsKFtcbiAgICAgICAgRigpLnRoZW4oKHsgc2VydmVyVXJsOiAkLCBwYXJ0aWNpcGFudFRva2VuOiB6IH0pID0+IHtcbiAgICAgICAgICB2YXIgYmUsIGdlO1xuICAgICAgICAgIHJldHVybiBZID0gKCgoZ2UgPSAoYmUgPSBfdCh6KS5yb29tQ29uZmlnKSA9PSBudWxsID8gdm9pZCAwIDogYmUuYWdlbnRzKSA9PSBudWxsID8gdm9pZCAwIDogZ2UubGVuZ3RoKSA/PyAwKSA+IDAsIGEuY29ubmVjdCgkLCB6LCBTKTtcbiAgICAgICAgfSksXG4gICAgICAgIC8vIFN0YXJ0IG1pY3JvcGhvbmUgKHdpdGggcHJlY29ubmVjdCBidWZmZXIpIGJ5IGRlZmF1bHRcbiAgICAgICAgKEIgPSBaLm1pY3JvcGhvbmUpICE9IG51bGwgJiYgQi5lbmFibGVkID8gYS5sb2NhbFBhcnRpY2lwYW50LnNldE1pY3JvcGhvbmVFbmFibGVkKFxuICAgICAgICAgICEwLFxuICAgICAgICAgIHZvaWQgMCxcbiAgICAgICAgICAoKGogPSBaLm1pY3JvcGhvbmUpID09IG51bGwgPyB2b2lkIDAgOiBqLnB1Ymxpc2hPcHRpb25zKSA/PyB7fVxuICAgICAgICApIDogUHJvbWlzZS5yZXNvbHZlKClcbiAgICAgIF0pLCBhd2FpdCBUKE4pLCBZICYmIGF3YWl0IFAud2FpdFVudGlsQ29ubmVjdGVkKE4pLCBOID09IG51bGwgfHwgTi5yZW1vdmVFdmVudExpc3RlbmVyKFwiYWJvcnRcIiwgXyk7XG4gICAgfSxcbiAgICBbYSwgTSwgRiwgVCwgUC53YWl0VW50aWxDb25uZWN0ZWRdXG4gICksIEogPSBzLnVzZUNhbGxiYWNrKGFzeW5jICgpID0+IHtcbiAgICBhd2FpdCBhLmRpc2Nvbm5lY3QoKTtcbiAgfSwgW2FdKSwgSyA9IHMudXNlQ2FsbGJhY2soYXN5bmMgKCkgPT4ge1xuICAgIGNvbnN0IEwgPSBhd2FpdCBGKCk7XG4gICAgYXdhaXQgYS5wcmVwYXJlQ29ubmVjdGlvbihMLnNlcnZlclVybCwgTC5wYXJ0aWNpcGFudFRva2VuKTtcbiAgfSwgW0YsIGFdKTtcbiAgcmV0dXJuIHMudXNlRWZmZWN0KFxuICAgICgpID0+IHtcbiAgICAgIEsoKS5jYXRjaCgoTCkgPT4ge1xuICAgICAgICBjb25zb2xlLndhcm4oXCJXQVJOSU5HOiBSb29tLnByZXBhcmVDb25uZWN0aW9uIGZhaWxlZDpcIiwgTCk7XG4gICAgICB9KTtcbiAgICB9LFxuICAgIFtcbiAgICAgIC8qIG5vdGU6IG5vIHByZXBhcmVDb25uZWN0aW9uIGhlcmUsIHRoaXMgZWZmZWN0IHNob3VsZCBvbmx5IGV2ZXIgcnVuIG9uY2UhICovXG4gICAgXVxuICApLCBzLnVzZU1lbW8oXG4gICAgKCkgPT4gKHtcbiAgICAgIC4uLmcsXG4gICAgICB3YWl0VW50aWxDb25uZWN0ZWQ6IFQsXG4gICAgICB3YWl0VW50aWxEaXNjb25uZWN0ZWQ6IE0sXG4gICAgICBwcmVwYXJlQ29ubmVjdGlvbjogSyxcbiAgICAgIHN0YXJ0OiBxLFxuICAgICAgZW5kOiBKXG4gICAgfSksXG4gICAgW2csIFQsIE0sIEssIHEsIEpdXG4gICk7XG59XG5mdW5jdGlvbiB1cyhlLCBuLCB0LCByKSB7XG4gIGNvbnN0IG8gPSBzLnVzZU1lbW8oKCkgPT4gKCkgPT4ge1xuICB9LCBbXSksIGMgPSBzLnVzZUNhbGxiYWNrKHQgPz8gbywgciA/PyBbXSksIGEgPSByID8gYyA6IHQsIGkgPSBzLnVzZU1lbW8oKCkgPT4gZSA/IFwiaW50ZXJuYWxcIiBpbiBlID8gZS5pbnRlcm5hbC5lbWl0dGVyIDogZSA6IG51bGwsIFtlXSk7XG4gIHMudXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoISghaSB8fCAhYSkpXG4gICAgICByZXR1cm4gaS5vbihuLCBhKSwgKCkgPT4ge1xuICAgICAgICBpLm9mZihuLCBhKTtcbiAgICAgIH07XG4gIH0sIFtpLCBuLCBhXSk7XG59XG52YXIgdm4gPSAvKiBAX19QVVJFX18gKi8gKChlKSA9PiAoZS5NZXNzYWdlUmVjZWl2ZWQgPSBcIm1lc3NhZ2VSZWNlaXZlZFwiLCBlKSkodm4gfHwge30pO1xuZnVuY3Rpb24gbHMoZSkge1xuICBjb25zdCB7IHJvb206IG4gfSA9IER0KGUpLCB0ID0gcy51c2VNZW1vKFxuICAgICgpID0+IG5ldyBoZS5FdmVudEVtaXR0ZXIoKSxcbiAgICBbXVxuICApLCByID0gSWUoZSksIG8gPSBjbih7IHJvb206IG4gfSksIGMgPSBzLnVzZU1lbW8oKCkgPT4gKHsgcm9vbTogbiB9KSwgW25dKSwgYSA9IEt0KGMpLCBpID0gcy51c2VNZW1vKCgpID0+IG8ubWFwKChsKSA9PiB7XG4gICAgdmFyIHYsIEMsIGs7XG4gICAgc3dpdGNoIChsLnBhcnRpY2lwYW50SW5mby5pZGVudGl0eSkge1xuICAgICAgY2FzZSBuLmxvY2FsUGFydGljaXBhbnQuaWRlbnRpdHk6XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgdHlwZTogXCJ1c2VyVHJhbnNjcmlwdFwiLFxuICAgICAgICAgIG1lc3NhZ2U6IGwudGV4dCxcbiAgICAgICAgICBpZDogbC5zdHJlYW1JbmZvLmlkLFxuICAgICAgICAgIHRpbWVzdGFtcDogbC5zdHJlYW1JbmZvLnRpbWVzdGFtcCxcbiAgICAgICAgICBmcm9tOiBuLmxvY2FsUGFydGljaXBhbnRcbiAgICAgICAgfTtcbiAgICAgIGNhc2UgKCh2ID0gci5pbnRlcm5hbC5hZ2VudFBhcnRpY2lwYW50KSA9PSBudWxsID8gdm9pZCAwIDogdi5pZGVudGl0eSk6XG4gICAgICBjYXNlICgoQyA9IHIuaW50ZXJuYWwud29ya2VyUGFydGljaXBhbnQpID09IG51bGwgPyB2b2lkIDAgOiBDLmlkZW50aXR5KTpcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICB0eXBlOiBcImFnZW50VHJhbnNjcmlwdFwiLFxuICAgICAgICAgIG1lc3NhZ2U6IGwudGV4dCxcbiAgICAgICAgICBpZDogbC5zdHJlYW1JbmZvLmlkLFxuICAgICAgICAgIHRpbWVzdGFtcDogbC5zdHJlYW1JbmZvLnRpbWVzdGFtcCxcbiAgICAgICAgICBmcm9tOiAoKGsgPSByLmludGVybmFsLmFnZW50UGFydGljaXBhbnQpID09IG51bGwgPyB2b2lkIDAgOiBrLmlkZW50aXR5KSA9PT0gbC5wYXJ0aWNpcGFudEluZm8uaWRlbnRpdHkgPyByLmludGVybmFsLmFnZW50UGFydGljaXBhbnQgOiByLmludGVybmFsLndvcmtlclBhcnRpY2lwYW50XG4gICAgICAgIH07XG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHR5cGU6IFwiYWdlbnRUcmFuc2NyaXB0XCIsXG4gICAgICAgICAgbWVzc2FnZTogbC50ZXh0LFxuICAgICAgICAgIGlkOiBsLnN0cmVhbUluZm8uaWQsXG4gICAgICAgICAgdGltZXN0YW1wOiBsLnN0cmVhbUluZm8udGltZXN0YW1wLFxuICAgICAgICAgIGZyb206IEFycmF5LmZyb20obi5yZW1vdGVQYXJ0aWNpcGFudHMudmFsdWVzKCkpLmZpbmQoXG4gICAgICAgICAgICAoQSkgPT4gQS5pZGVudGl0eSA9PT0gbC5wYXJ0aWNpcGFudEluZm8uaWRlbnRpdHlcbiAgICAgICAgICApXG4gICAgICAgIH07XG4gICAgfVxuICB9KSwgW28sIG5dKSwgdSA9IHMudXNlTWVtbygoKSA9PiBbLi4uaSwgLi4uYS5jaGF0TWVzc2FnZXNdLCBbaSwgYS5jaGF0TWVzc2FnZXNdKSwgcCA9IHMudXNlUmVmKC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCkpLCBoID0gcy51c2VNZW1vKCgpID0+IHtcbiAgICBjb25zdCBsID0gLyogQF9fUFVSRV9fICovIG5ldyBEYXRlKCk7XG4gICAgZm9yIChjb25zdCB2IG9mIHUpXG4gICAgICBwLmN1cnJlbnQuaGFzKHYuaWQpIHx8IHAuY3VycmVudC5zZXQodi5pZCwgbCk7XG4gICAgcmV0dXJuIHUuc29ydCgodiwgQykgPT4ge1xuICAgICAgY29uc3QgayA9IHAuY3VycmVudC5nZXQodi5pZCksIEEgPSBwLmN1cnJlbnQuZ2V0KEMuaWQpO1xuICAgICAgcmV0dXJuIHR5cGVvZiBrID4gXCJ1XCIgfHwgdHlwZW9mIEEgPiBcInVcIiA/IDAgOiBrLmdldFRpbWUoKSAtIEEuZ2V0VGltZSgpO1xuICAgIH0pO1xuICB9LCBbdV0pLCBkID0gcy51c2VSZWYoLyogQF9fUFVSRV9fICovIG5ldyBTZXQoKSk7XG4gIHJldHVybiBzLnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgZm9yIChjb25zdCBsIG9mIGgpXG4gICAgICBkLmN1cnJlbnQuaGFzKGwuaWQpIHx8IChkLmN1cnJlbnQuYWRkKGwuaWQpLCB0LmVtaXQoXCJtZXNzYWdlUmVjZWl2ZWRcIiwgbCkpO1xuICB9LCBbaF0pLCBzLnVzZU1lbW8oXG4gICAgKCkgPT4gKHtcbiAgICAgIG1lc3NhZ2VzOiBoLFxuICAgICAgc2VuZDogYS5zZW5kLFxuICAgICAgaXNTZW5kaW5nOiBhLmlzU2VuZGluZyxcbiAgICAgIGludGVybmFsOiB7IGVtaXR0ZXI6IHQgfVxuICAgIH0pLFxuICAgIFtoLCBhLnNlbmQsIGEuaXNTZW5kaW5nXVxuICApO1xufVxuZXhwb3J0IHtcbiAgYW4gYXMgJCxcbiAgSW4gYXMgQSxcbiAgVm4gYXMgQixcbiAgT2UgYXMgQyxcbiAgd24gYXMgRCxcbiAgQW4gYXMgRSxcbiAgQnQgYXMgRixcbiAgU2UgYXMgRyxcbiAganQgYXMgSCxcbiAgeG4gYXMgSSxcbiAgVW4gYXMgSixcbiAgV3QgYXMgSyxcbiAgcW4gYXMgTCxcbiAgcGUgYXMgTSxcbiAgam4gYXMgTixcbiAgR3QgYXMgTyxcbiAgJG4gYXMgUCxcbiAgWG4gYXMgUSxcbiAgZG4gYXMgUixcbiAgSWUgYXMgUyxcbiAgdHMgYXMgVCxcbiAgc3MgYXMgVSxcbiAgcmUgYXMgVixcbiAgcm4gYXMgVyxcbiAgb3MgYXMgWCxcbiAgb24gYXMgWSxcbiAgcnMgYXMgWixcbiAgYXMgYXMgXyxcbiAgdGUgYXMgYSxcbiAgY24gYXMgYTAsXG4gIGNzIGFzIGExLFxuICBwbiBhcyBhMixcbiAgaXMgYXMgYTMsXG4gIHVzIGFzIGE0LFxuICB2biBhcyBhNSxcbiAgbHMgYXMgYTYsXG4gIEpuIGFzIGIsXG4gIFJuIGFzIGMsXG4gIERuIGFzIGQsXG4gIE5uIGFzIGUsXG4gIHpuIGFzIGYsXG4gIFduIGFzIGcsXG4gIEtuIGFzIGgsXG4gIExuIGFzIGksXG4gIEQgYXMgaixcbiAgUW4gYXMgayxcbiAgSG4gYXMgbCxcbiAgZXMgYXMgbSxcbiAgT24gYXMgbixcbiAgRm4gYXMgbyxcbiAgR24gYXMgcCxcbiAgcXQgYXMgcSxcbiAgenQgYXMgcixcbiAgbnMgYXMgcyxcbiAgWW4gYXMgdCxcbiAgUG4gYXMgdSxcbiAgQm4gYXMgdixcbiAgS3QgYXMgdyxcbiAgWm4gYXMgeCxcbiAgX24gYXMgeSxcbiAga24gYXMgelxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWhvb2tzLXlVLXNycklPLm1qcy5tYXBcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@livekit/components-react/dist/hooks-yU-srrIO.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@livekit/components-react/dist/room-Bb6uLxS5.mjs":
/*!***********************************************************************!*\
  !*** ./node_modules/@livekit/components-react/dist/room-Bb6uLxS5.mjs ***!
  \***********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   L: () => (/* binding */ W),\n/* harmony export */   a: () => (/* binding */ G),\n/* harmony export */   c: () => (/* binding */ H),\n/* harmony export */   m: () => (/* binding */ M),\n/* harmony export */   r: () => (/* binding */ T),\n/* harmony export */   u: () => (/* binding */ $),\n/* harmony export */   w: () => (/* binding */ Q)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var _contexts_CsO1QZ3r_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./contexts-CsO1QZ3r.mjs */ \"(ssr)/./node_modules/@livekit/components-react/dist/contexts-CsO1QZ3r.mjs\");\n/* harmony import */ var livekit_client__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! livekit-client */ \"(ssr)/./node_modules/livekit-client/dist/livekit-client.esm.mjs\");\n\n\n\nfunction L(n) {\n  var e, o, t = \"\";\n  if (typeof n == \"string\" || typeof n == \"number\") t += n;\n  else if (typeof n == \"object\") if (Array.isArray(n)) {\n    var r = n.length;\n    for (e = 0; e < r; e++) n[e] && (o = L(n[e])) && (t && (t += \" \"), t += o);\n  } else for (o in n) n[o] && (t && (t += \" \"), t += o);\n  return t;\n}\nfunction A() {\n  for (var n, e, o = 0, t = \"\", r = arguments.length; o < r; o++) (n = arguments[o]) && (e = L(n)) && (t && (t += \" \"), t += e);\n  return t;\n}\nfunction I(...n) {\n  return (...e) => {\n    for (const o of n)\n      if (typeof o == \"function\")\n        try {\n          o(...e);\n        } catch (t) {\n          console.error(t);\n        }\n  };\n}\nfunction M(...n) {\n  const e = { ...n[0] };\n  for (let o = 1; o < n.length; o++) {\n    const t = n[o];\n    for (const r in t) {\n      const d = e[r], a = t[r];\n      typeof d == \"function\" && typeof a == \"function\" && // This is a lot faster than a regex.\n      r[0] === \"o\" && r[1] === \"n\" && r.charCodeAt(2) >= /* 'A' */\n      65 && r.charCodeAt(2) <= /* 'Z' */\n      90 ? e[r] = I(d, a) : (r === \"className\" || r === \"UNSAFE_className\") && typeof d == \"string\" && typeof a == \"string\" ? e[r] = A(d, a) : e[r] = a !== void 0 ? a : d;\n    }\n  }\n  return e;\n}\nfunction J(n) {\n  return n !== void 0;\n}\nfunction G(...n) {\n  return M(...n.filter(J));\n}\nfunction H(n, e, o) {\n  return react__WEBPACK_IMPORTED_MODULE_0__.Children.map(n, (t) => react__WEBPACK_IMPORTED_MODULE_0__.isValidElement(t) && react__WEBPACK_IMPORTED_MODULE_0__.Children.only(n) ? (t.props.className && (e ?? (e = {}), e.className = A(t.props.className, e.className), e.style = { ...t.props.style, ...e.style }), react__WEBPACK_IMPORTED_MODULE_0__.cloneElement(t, { ...e, key: o })) : t);\n}\nfunction Q(n) {\n  var e, o;\n  if (typeof window < \"u\" && typeof process < \"u\" && // eslint-disable-next-line turbo/no-undeclared-env-vars\n  (((e = process == null ? void 0 : process.env) == null ? void 0 : e.NODE_ENV) === \"dev\" || // eslint-disable-next-line turbo/no-undeclared-env-vars\n  ((o = process == null ? void 0 : process.env) == null ? void 0 : o.NODE_ENV) === \"development\")) {\n    const t = document.querySelector(\".lk-room-container\");\n    t && !getComputedStyle(t).getPropertyValue(\"--lk-has-imported-styles\") && _contexts_CsO1QZ3r_mjs__WEBPACK_IMPORTED_MODULE_2__.l.warn(\n      \"It looks like you're not using the `@livekit/components-styles package`. To render the UI with the default styling, please import it in your layout or page.\"\n    );\n  }\n}\nfunction T(n, e) {\n  return n === \"processor\" && e && typeof e == \"object\" && \"name\" in e ? e.name : n === \"e2ee\" && e ? \"e2ee-enabled\" : e;\n}\nconst q = {\n  connect: !0,\n  audio: !1,\n  video: !1\n};\nfunction $(n) {\n  const {\n    token: e,\n    serverUrl: o,\n    options: t,\n    room: r,\n    connectOptions: d,\n    connect: a,\n    audio: p,\n    video: y,\n    screen: g,\n    onConnected: v,\n    onDisconnected: h,\n    onError: c,\n    onMediaDeviceFailure: b,\n    onEncryptionError: E,\n    simulateParticipants: w,\n    ...N\n  } = { ...q, ...n };\n  t && r && _contexts_CsO1QZ3r_mjs__WEBPACK_IMPORTED_MODULE_2__.l.warn(\n    \"when using a manually created room, the options object will be ignored. set the desired options directly when creating the room instead.\"\n  );\n  const [s, O] = react__WEBPACK_IMPORTED_MODULE_0__.useState(), C = react__WEBPACK_IMPORTED_MODULE_0__.useRef(a);\n  react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    O(r ?? new livekit_client__WEBPACK_IMPORTED_MODULE_1__.Room(t));\n  }, [r, JSON.stringify(t, T)]);\n  const F = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(() => {\n    const { className: m } = (0,_contexts_CsO1QZ3r_mjs__WEBPACK_IMPORTED_MODULE_2__.s)();\n    return M(N, { className: m });\n  }, [N]);\n  return react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    if (!s) return;\n    const m = () => {\n      const f = s.localParticipant;\n      _contexts_CsO1QZ3r_mjs__WEBPACK_IMPORTED_MODULE_2__.l.debug(\"trying to publish local tracks\"), Promise.all([\n        f.setMicrophoneEnabled(!!p, typeof p != \"boolean\" ? p : void 0),\n        f.setCameraEnabled(!!y, typeof y != \"boolean\" ? y : void 0),\n        f.setScreenShareEnabled(!!g, typeof g != \"boolean\" ? g : void 0)\n      ]).catch((R) => {\n        _contexts_CsO1QZ3r_mjs__WEBPACK_IMPORTED_MODULE_2__.l.warn(R), c == null || c(R);\n      });\n    }, P = (f, R) => {\n      const K = livekit_client__WEBPACK_IMPORTED_MODULE_1__.MediaDeviceFailure.getFailure(f);\n      b == null || b(K, R);\n    }, S = (f) => {\n      E == null || E(f);\n    }, k = (f) => {\n      h == null || h(f);\n    }, D = () => {\n      v == null || v();\n    };\n    return s.on(livekit_client__WEBPACK_IMPORTED_MODULE_1__.RoomEvent.SignalConnected, m).on(livekit_client__WEBPACK_IMPORTED_MODULE_1__.RoomEvent.MediaDevicesError, P).on(livekit_client__WEBPACK_IMPORTED_MODULE_1__.RoomEvent.EncryptionError, S).on(livekit_client__WEBPACK_IMPORTED_MODULE_1__.RoomEvent.Disconnected, k).on(livekit_client__WEBPACK_IMPORTED_MODULE_1__.RoomEvent.Connected, D), () => {\n      s.off(livekit_client__WEBPACK_IMPORTED_MODULE_1__.RoomEvent.SignalConnected, m).off(livekit_client__WEBPACK_IMPORTED_MODULE_1__.RoomEvent.MediaDevicesError, P).off(livekit_client__WEBPACK_IMPORTED_MODULE_1__.RoomEvent.EncryptionError, S).off(livekit_client__WEBPACK_IMPORTED_MODULE_1__.RoomEvent.Disconnected, k).off(livekit_client__WEBPACK_IMPORTED_MODULE_1__.RoomEvent.Connected, D);\n    };\n  }, [\n    s,\n    p,\n    y,\n    g,\n    c,\n    E,\n    b,\n    v,\n    h\n  ]), react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    if (s) {\n      if (w) {\n        s.simulateParticipants({\n          participants: {\n            count: w\n          },\n          publish: {\n            audio: !0,\n            useRealTracks: !0\n          }\n        });\n        return;\n      }\n      if (a) {\n        if (C.current = !0, _contexts_CsO1QZ3r_mjs__WEBPACK_IMPORTED_MODULE_2__.l.debug(\"connecting\"), !e) {\n          _contexts_CsO1QZ3r_mjs__WEBPACK_IMPORTED_MODULE_2__.l.debug(\"no token yet\");\n          return;\n        }\n        if (!o) {\n          _contexts_CsO1QZ3r_mjs__WEBPACK_IMPORTED_MODULE_2__.l.warn(\"no livekit url provided\"), c == null || c(Error(\"no livekit url provided\"));\n          return;\n        }\n        s.connect(o, e, d).catch((m) => {\n          _contexts_CsO1QZ3r_mjs__WEBPACK_IMPORTED_MODULE_2__.l.warn(m), C.current === !0 && (c == null || c(m));\n        });\n      } else\n        _contexts_CsO1QZ3r_mjs__WEBPACK_IMPORTED_MODULE_2__.l.debug(\"disconnecting because connect is false\"), C.current = !1, s.disconnect();\n    }\n  }, [\n    a,\n    e,\n    JSON.stringify(d),\n    s,\n    c,\n    o,\n    w\n  ]), react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    if (s)\n      return () => {\n        _contexts_CsO1QZ3r_mjs__WEBPACK_IMPORTED_MODULE_2__.l.info(\"disconnecting on onmount\"), s.disconnect();\n      };\n  }, [s]), { room: s, htmlProps: F };\n}\nconst W = /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.forwardRef(function(e, o) {\n  const { room: t, htmlProps: r } = $(e);\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", { ref: o, ...r }, t && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(_contexts_CsO1QZ3r_mjs__WEBPACK_IMPORTED_MODULE_2__.R.Provider, { value: t }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(_contexts_CsO1QZ3r_mjs__WEBPACK_IMPORTED_MODULE_2__.L.Provider, { value: e.featureFlags }, e.children)));\n});\n\n//# sourceMappingURL=room-Bb6uLxS5.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxpdmVraXQvY29tcG9uZW50cy1yZWFjdC9kaXN0L3Jvb20tQmI2dUx4UzUubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7QUFBMkI7QUFDOEM7QUFDVztBQUNwRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLE9BQU87QUFDdkIsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBLHNEQUFzRCxPQUFPO0FBQzdEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWM7QUFDZCxrQkFBa0IsY0FBYztBQUNoQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTLDJDQUFVLGVBQWUsaURBQWdCLE9BQU8sMkNBQVUsOENBQThDLGdFQUFnRSw4QkFBOEIsR0FBRywrQ0FBYyxNQUFNLGNBQWM7QUFDcFA7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4RUFBOEUscURBQUM7QUFDL0U7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSSxJQUFJO0FBQ1IsWUFBWSxxREFBQztBQUNiO0FBQ0E7QUFDQSxpQkFBaUIsMkNBQVUsUUFBUSx5Q0FBUTtBQUMzQyxFQUFFLDRDQUFXO0FBQ2IsZUFBZSxnREFBQztBQUNoQixHQUFHO0FBQ0gsWUFBWSwwQ0FBUztBQUNyQixZQUFZLGVBQWUsRUFBRSx5REFBQztBQUM5QixrQkFBa0IsY0FBYztBQUNoQyxHQUFHO0FBQ0gsU0FBUyw0Q0FBVztBQUNwQjtBQUNBO0FBQ0E7QUFDQSxNQUFNLHFEQUFDO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRLHFEQUFDO0FBQ1QsT0FBTztBQUNQLEtBQUs7QUFDTCxnQkFBZ0IsOERBQUM7QUFDakI7QUFDQSxLQUFLO0FBQ0w7QUFDQSxLQUFLO0FBQ0w7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLGdCQUFnQixxREFBQyx3QkFBd0IscURBQUMsMEJBQTBCLHFEQUFDLHdCQUF3QixxREFBQyxxQkFBcUIscURBQUM7QUFDcEgsWUFBWSxxREFBQyx5QkFBeUIscURBQUMsMkJBQTJCLHFEQUFDLHlCQUF5QixxREFBQyxzQkFBc0IscURBQUM7QUFDcEg7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTSw0Q0FBVztBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLDRCQUE0QixxREFBQztBQUM3QixVQUFVLHFEQUFDO0FBQ1g7QUFDQTtBQUNBO0FBQ0EsVUFBVSxxREFBQztBQUNYO0FBQ0E7QUFDQTtBQUNBLFVBQVUscURBQUM7QUFDWCxTQUFTO0FBQ1QsUUFBUTtBQUNSLFFBQVEscURBQUM7QUFDVDtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU0sNENBQVc7QUFDakI7QUFDQTtBQUNBLFFBQVEscURBQUM7QUFDVDtBQUNBLEdBQUcsVUFBVTtBQUNiO0FBQ0EsMEJBQTBCLDZDQUFZO0FBQ3RDLFVBQVUsd0JBQXdCO0FBQ2xDLHlCQUF5QixnREFBZSxVQUFVLGNBQWMsdUJBQXVCLGdEQUFlLENBQUMscURBQUMsYUFBYSxVQUFVLGtCQUFrQixnREFBZSxDQUFDLHFEQUFDLGFBQWEsdUJBQXVCO0FBQ3RNLENBQUM7QUFTQztBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbGl2ZWtpdC1hZ2VuY3ktZnJvbnRlbmQvLi9ub2RlX21vZHVsZXMvQGxpdmVraXQvY29tcG9uZW50cy1yZWFjdC9kaXN0L3Jvb20tQmI2dUx4UzUubWpzP2M1MmYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0ICogYXMgaSBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCB7IGwgYXMgdSwgcyBhcyB4LCBSIGFzIFYsIEwgYXMgaiB9IGZyb20gXCIuL2NvbnRleHRzLUNzTzFRWjNyLm1qc1wiO1xuaW1wb3J0IHsgUm9vbSBhcyBVLCBSb29tRXZlbnQgYXMgbCwgTWVkaWFEZXZpY2VGYWlsdXJlIGFzIF8gfSBmcm9tIFwibGl2ZWtpdC1jbGllbnRcIjtcbmZ1bmN0aW9uIEwobikge1xuICB2YXIgZSwgbywgdCA9IFwiXCI7XG4gIGlmICh0eXBlb2YgbiA9PSBcInN0cmluZ1wiIHx8IHR5cGVvZiBuID09IFwibnVtYmVyXCIpIHQgKz0gbjtcbiAgZWxzZSBpZiAodHlwZW9mIG4gPT0gXCJvYmplY3RcIikgaWYgKEFycmF5LmlzQXJyYXkobikpIHtcbiAgICB2YXIgciA9IG4ubGVuZ3RoO1xuICAgIGZvciAoZSA9IDA7IGUgPCByOyBlKyspIG5bZV0gJiYgKG8gPSBMKG5bZV0pKSAmJiAodCAmJiAodCArPSBcIiBcIiksIHQgKz0gbyk7XG4gIH0gZWxzZSBmb3IgKG8gaW4gbikgbltvXSAmJiAodCAmJiAodCArPSBcIiBcIiksIHQgKz0gbyk7XG4gIHJldHVybiB0O1xufVxuZnVuY3Rpb24gQSgpIHtcbiAgZm9yICh2YXIgbiwgZSwgbyA9IDAsIHQgPSBcIlwiLCByID0gYXJndW1lbnRzLmxlbmd0aDsgbyA8IHI7IG8rKykgKG4gPSBhcmd1bWVudHNbb10pICYmIChlID0gTChuKSkgJiYgKHQgJiYgKHQgKz0gXCIgXCIpLCB0ICs9IGUpO1xuICByZXR1cm4gdDtcbn1cbmZ1bmN0aW9uIEkoLi4ubikge1xuICByZXR1cm4gKC4uLmUpID0+IHtcbiAgICBmb3IgKGNvbnN0IG8gb2YgbilcbiAgICAgIGlmICh0eXBlb2YgbyA9PSBcImZ1bmN0aW9uXCIpXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgbyguLi5lKTtcbiAgICAgICAgfSBjYXRjaCAodCkge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IodCk7XG4gICAgICAgIH1cbiAgfTtcbn1cbmZ1bmN0aW9uIE0oLi4ubikge1xuICBjb25zdCBlID0geyAuLi5uWzBdIH07XG4gIGZvciAobGV0IG8gPSAxOyBvIDwgbi5sZW5ndGg7IG8rKykge1xuICAgIGNvbnN0IHQgPSBuW29dO1xuICAgIGZvciAoY29uc3QgciBpbiB0KSB7XG4gICAgICBjb25zdCBkID0gZVtyXSwgYSA9IHRbcl07XG4gICAgICB0eXBlb2YgZCA9PSBcImZ1bmN0aW9uXCIgJiYgdHlwZW9mIGEgPT0gXCJmdW5jdGlvblwiICYmIC8vIFRoaXMgaXMgYSBsb3QgZmFzdGVyIHRoYW4gYSByZWdleC5cbiAgICAgIHJbMF0gPT09IFwib1wiICYmIHJbMV0gPT09IFwiblwiICYmIHIuY2hhckNvZGVBdCgyKSA+PSAvKiAnQScgKi9cbiAgICAgIDY1ICYmIHIuY2hhckNvZGVBdCgyKSA8PSAvKiAnWicgKi9cbiAgICAgIDkwID8gZVtyXSA9IEkoZCwgYSkgOiAociA9PT0gXCJjbGFzc05hbWVcIiB8fCByID09PSBcIlVOU0FGRV9jbGFzc05hbWVcIikgJiYgdHlwZW9mIGQgPT0gXCJzdHJpbmdcIiAmJiB0eXBlb2YgYSA9PSBcInN0cmluZ1wiID8gZVtyXSA9IEEoZCwgYSkgOiBlW3JdID0gYSAhPT0gdm9pZCAwID8gYSA6IGQ7XG4gICAgfVxuICB9XG4gIHJldHVybiBlO1xufVxuZnVuY3Rpb24gSihuKSB7XG4gIHJldHVybiBuICE9PSB2b2lkIDA7XG59XG5mdW5jdGlvbiBHKC4uLm4pIHtcbiAgcmV0dXJuIE0oLi4ubi5maWx0ZXIoSikpO1xufVxuZnVuY3Rpb24gSChuLCBlLCBvKSB7XG4gIHJldHVybiBpLkNoaWxkcmVuLm1hcChuLCAodCkgPT4gaS5pc1ZhbGlkRWxlbWVudCh0KSAmJiBpLkNoaWxkcmVuLm9ubHkobikgPyAodC5wcm9wcy5jbGFzc05hbWUgJiYgKGUgPz8gKGUgPSB7fSksIGUuY2xhc3NOYW1lID0gQSh0LnByb3BzLmNsYXNzTmFtZSwgZS5jbGFzc05hbWUpLCBlLnN0eWxlID0geyAuLi50LnByb3BzLnN0eWxlLCAuLi5lLnN0eWxlIH0pLCBpLmNsb25lRWxlbWVudCh0LCB7IC4uLmUsIGtleTogbyB9KSkgOiB0KTtcbn1cbmZ1bmN0aW9uIFEobikge1xuICB2YXIgZSwgbztcbiAgaWYgKHR5cGVvZiB3aW5kb3cgPCBcInVcIiAmJiB0eXBlb2YgcHJvY2VzcyA8IFwidVwiICYmIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSB0dXJiby9uby11bmRlY2xhcmVkLWVudi12YXJzXG4gICgoKGUgPSBwcm9jZXNzID09IG51bGwgPyB2b2lkIDAgOiBwcm9jZXNzLmVudikgPT0gbnVsbCA/IHZvaWQgMCA6IGUuTk9ERV9FTlYpID09PSBcImRldlwiIHx8IC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSB0dXJiby9uby11bmRlY2xhcmVkLWVudi12YXJzXG4gICgobyA9IHByb2Nlc3MgPT0gbnVsbCA/IHZvaWQgMCA6IHByb2Nlc3MuZW52KSA9PSBudWxsID8gdm9pZCAwIDogby5OT0RFX0VOVikgPT09IFwiZGV2ZWxvcG1lbnRcIikpIHtcbiAgICBjb25zdCB0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5say1yb29tLWNvbnRhaW5lclwiKTtcbiAgICB0ICYmICFnZXRDb21wdXRlZFN0eWxlKHQpLmdldFByb3BlcnR5VmFsdWUoXCItLWxrLWhhcy1pbXBvcnRlZC1zdHlsZXNcIikgJiYgdS53YXJuKFxuICAgICAgXCJJdCBsb29rcyBsaWtlIHlvdSdyZSBub3QgdXNpbmcgdGhlIGBAbGl2ZWtpdC9jb21wb25lbnRzLXN0eWxlcyBwYWNrYWdlYC4gVG8gcmVuZGVyIHRoZSBVSSB3aXRoIHRoZSBkZWZhdWx0IHN0eWxpbmcsIHBsZWFzZSBpbXBvcnQgaXQgaW4geW91ciBsYXlvdXQgb3IgcGFnZS5cIlxuICAgICk7XG4gIH1cbn1cbmZ1bmN0aW9uIFQobiwgZSkge1xuICByZXR1cm4gbiA9PT0gXCJwcm9jZXNzb3JcIiAmJiBlICYmIHR5cGVvZiBlID09IFwib2JqZWN0XCIgJiYgXCJuYW1lXCIgaW4gZSA/IGUubmFtZSA6IG4gPT09IFwiZTJlZVwiICYmIGUgPyBcImUyZWUtZW5hYmxlZFwiIDogZTtcbn1cbmNvbnN0IHEgPSB7XG4gIGNvbm5lY3Q6ICEwLFxuICBhdWRpbzogITEsXG4gIHZpZGVvOiAhMVxufTtcbmZ1bmN0aW9uICQobikge1xuICBjb25zdCB7XG4gICAgdG9rZW46IGUsXG4gICAgc2VydmVyVXJsOiBvLFxuICAgIG9wdGlvbnM6IHQsXG4gICAgcm9vbTogcixcbiAgICBjb25uZWN0T3B0aW9uczogZCxcbiAgICBjb25uZWN0OiBhLFxuICAgIGF1ZGlvOiBwLFxuICAgIHZpZGVvOiB5LFxuICAgIHNjcmVlbjogZyxcbiAgICBvbkNvbm5lY3RlZDogdixcbiAgICBvbkRpc2Nvbm5lY3RlZDogaCxcbiAgICBvbkVycm9yOiBjLFxuICAgIG9uTWVkaWFEZXZpY2VGYWlsdXJlOiBiLFxuICAgIG9uRW5jcnlwdGlvbkVycm9yOiBFLFxuICAgIHNpbXVsYXRlUGFydGljaXBhbnRzOiB3LFxuICAgIC4uLk5cbiAgfSA9IHsgLi4ucSwgLi4ubiB9O1xuICB0ICYmIHIgJiYgdS53YXJuKFxuICAgIFwid2hlbiB1c2luZyBhIG1hbnVhbGx5IGNyZWF0ZWQgcm9vbSwgdGhlIG9wdGlvbnMgb2JqZWN0IHdpbGwgYmUgaWdub3JlZC4gc2V0IHRoZSBkZXNpcmVkIG9wdGlvbnMgZGlyZWN0bHkgd2hlbiBjcmVhdGluZyB0aGUgcm9vbSBpbnN0ZWFkLlwiXG4gICk7XG4gIGNvbnN0IFtzLCBPXSA9IGkudXNlU3RhdGUoKSwgQyA9IGkudXNlUmVmKGEpO1xuICBpLnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgTyhyID8/IG5ldyBVKHQpKTtcbiAgfSwgW3IsIEpTT04uc3RyaW5naWZ5KHQsIFQpXSk7XG4gIGNvbnN0IEYgPSBpLnVzZU1lbW8oKCkgPT4ge1xuICAgIGNvbnN0IHsgY2xhc3NOYW1lOiBtIH0gPSB4KCk7XG4gICAgcmV0dXJuIE0oTiwgeyBjbGFzc05hbWU6IG0gfSk7XG4gIH0sIFtOXSk7XG4gIHJldHVybiBpLnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKCFzKSByZXR1cm47XG4gICAgY29uc3QgbSA9ICgpID0+IHtcbiAgICAgIGNvbnN0IGYgPSBzLmxvY2FsUGFydGljaXBhbnQ7XG4gICAgICB1LmRlYnVnKFwidHJ5aW5nIHRvIHB1Ymxpc2ggbG9jYWwgdHJhY2tzXCIpLCBQcm9taXNlLmFsbChbXG4gICAgICAgIGYuc2V0TWljcm9waG9uZUVuYWJsZWQoISFwLCB0eXBlb2YgcCAhPSBcImJvb2xlYW5cIiA/IHAgOiB2b2lkIDApLFxuICAgICAgICBmLnNldENhbWVyYUVuYWJsZWQoISF5LCB0eXBlb2YgeSAhPSBcImJvb2xlYW5cIiA/IHkgOiB2b2lkIDApLFxuICAgICAgICBmLnNldFNjcmVlblNoYXJlRW5hYmxlZCghIWcsIHR5cGVvZiBnICE9IFwiYm9vbGVhblwiID8gZyA6IHZvaWQgMClcbiAgICAgIF0pLmNhdGNoKChSKSA9PiB7XG4gICAgICAgIHUud2FybihSKSwgYyA9PSBudWxsIHx8IGMoUik7XG4gICAgICB9KTtcbiAgICB9LCBQID0gKGYsIFIpID0+IHtcbiAgICAgIGNvbnN0IEsgPSBfLmdldEZhaWx1cmUoZik7XG4gICAgICBiID09IG51bGwgfHwgYihLLCBSKTtcbiAgICB9LCBTID0gKGYpID0+IHtcbiAgICAgIEUgPT0gbnVsbCB8fCBFKGYpO1xuICAgIH0sIGsgPSAoZikgPT4ge1xuICAgICAgaCA9PSBudWxsIHx8IGgoZik7XG4gICAgfSwgRCA9ICgpID0+IHtcbiAgICAgIHYgPT0gbnVsbCB8fCB2KCk7XG4gICAgfTtcbiAgICByZXR1cm4gcy5vbihsLlNpZ25hbENvbm5lY3RlZCwgbSkub24obC5NZWRpYURldmljZXNFcnJvciwgUCkub24obC5FbmNyeXB0aW9uRXJyb3IsIFMpLm9uKGwuRGlzY29ubmVjdGVkLCBrKS5vbihsLkNvbm5lY3RlZCwgRCksICgpID0+IHtcbiAgICAgIHMub2ZmKGwuU2lnbmFsQ29ubmVjdGVkLCBtKS5vZmYobC5NZWRpYURldmljZXNFcnJvciwgUCkub2ZmKGwuRW5jcnlwdGlvbkVycm9yLCBTKS5vZmYobC5EaXNjb25uZWN0ZWQsIGspLm9mZihsLkNvbm5lY3RlZCwgRCk7XG4gICAgfTtcbiAgfSwgW1xuICAgIHMsXG4gICAgcCxcbiAgICB5LFxuICAgIGcsXG4gICAgYyxcbiAgICBFLFxuICAgIGIsXG4gICAgdixcbiAgICBoXG4gIF0pLCBpLnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKHMpIHtcbiAgICAgIGlmICh3KSB7XG4gICAgICAgIHMuc2ltdWxhdGVQYXJ0aWNpcGFudHMoe1xuICAgICAgICAgIHBhcnRpY2lwYW50czoge1xuICAgICAgICAgICAgY291bnQ6IHdcbiAgICAgICAgICB9LFxuICAgICAgICAgIHB1Ymxpc2g6IHtcbiAgICAgICAgICAgIGF1ZGlvOiAhMCxcbiAgICAgICAgICAgIHVzZVJlYWxUcmFja3M6ICEwXG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgaWYgKGEpIHtcbiAgICAgICAgaWYgKEMuY3VycmVudCA9ICEwLCB1LmRlYnVnKFwiY29ubmVjdGluZ1wiKSwgIWUpIHtcbiAgICAgICAgICB1LmRlYnVnKFwibm8gdG9rZW4geWV0XCIpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIW8pIHtcbiAgICAgICAgICB1Lndhcm4oXCJubyBsaXZla2l0IHVybCBwcm92aWRlZFwiKSwgYyA9PSBudWxsIHx8IGMoRXJyb3IoXCJubyBsaXZla2l0IHVybCBwcm92aWRlZFwiKSk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHMuY29ubmVjdChvLCBlLCBkKS5jYXRjaCgobSkgPT4ge1xuICAgICAgICAgIHUud2FybihtKSwgQy5jdXJyZW50ID09PSAhMCAmJiAoYyA9PSBudWxsIHx8IGMobSkpO1xuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZVxuICAgICAgICB1LmRlYnVnKFwiZGlzY29ubmVjdGluZyBiZWNhdXNlIGNvbm5lY3QgaXMgZmFsc2VcIiksIEMuY3VycmVudCA9ICExLCBzLmRpc2Nvbm5lY3QoKTtcbiAgICB9XG4gIH0sIFtcbiAgICBhLFxuICAgIGUsXG4gICAgSlNPTi5zdHJpbmdpZnkoZCksXG4gICAgcyxcbiAgICBjLFxuICAgIG8sXG4gICAgd1xuICBdKSwgaS51c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmIChzKVxuICAgICAgcmV0dXJuICgpID0+IHtcbiAgICAgICAgdS5pbmZvKFwiZGlzY29ubmVjdGluZyBvbiBvbm1vdW50XCIpLCBzLmRpc2Nvbm5lY3QoKTtcbiAgICAgIH07XG4gIH0sIFtzXSksIHsgcm9vbTogcywgaHRtbFByb3BzOiBGIH07XG59XG5jb25zdCBXID0gLyogQF9fUFVSRV9fICovIGkuZm9yd2FyZFJlZihmdW5jdGlvbihlLCBvKSB7XG4gIGNvbnN0IHsgcm9vbTogdCwgaHRtbFByb3BzOiByIH0gPSAkKGUpO1xuICByZXR1cm4gLyogQF9fUFVSRV9fICovIGkuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7IHJlZjogbywgLi4uciB9LCB0ICYmIC8qIEBfX1BVUkVfXyAqLyBpLmNyZWF0ZUVsZW1lbnQoVi5Qcm92aWRlciwgeyB2YWx1ZTogdCB9LCAvKiBAX19QVVJFX18gKi8gaS5jcmVhdGVFbGVtZW50KGouUHJvdmlkZXIsIHsgdmFsdWU6IGUuZmVhdHVyZUZsYWdzIH0sIGUuY2hpbGRyZW4pKSk7XG59KTtcbmV4cG9ydCB7XG4gIFcgYXMgTCxcbiAgRyBhcyBhLFxuICBIIGFzIGMsXG4gIE0gYXMgbSxcbiAgVCBhcyByLFxuICAkIGFzIHUsXG4gIFEgYXMgd1xufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXJvb20tQmI2dUx4UzUubWpzLm1hcFxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@livekit/components-react/dist/room-Bb6uLxS5.mjs\n");

/***/ })

};
;